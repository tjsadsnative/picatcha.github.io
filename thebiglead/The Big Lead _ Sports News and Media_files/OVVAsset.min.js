function ZZOVV(){function e(e){var t=function(){for(var t={ID:0,name:"",version:""},n=e,a=0;a<i.length;a++)if(null!=n.match(new RegExp(i[a].brRegex))){if(t.ID=i[a].id,t.name=i[a].name,null==i[a].verRegex)break;var o=n.match(new RegExp(i[a].verRegex+"[0-9]*"));if(null!=o){var r=o[0].match(new RegExp(i[a].verRegex));t.version=o[0].replace(r[0],"")}break}return t},i=[{id:4,name:"Opera",brRegex:"OPR|Opera",verRegex:"(OPR/|Version/)"},{id:1,name:"MSIE",brRegex:"MSIE|Trident/7.*rv:11|rv:11.*Trident/7",verRegex:"(MSIE |rv:)"},{id:2,name:"Firefox",brRegex:"Firefox",verRegex:"Firefox/"},{id:3,name:"Chrome",brRegex:"Chrome",verRegex:"Chrome/"},{id:5,name:"Safari",brRegex:"Safari|(OS |OS X )[0-9].*AppleWebKit",verRegex:"Version/"}];return t()}function t(e){try{if(window.top==window)return e.OnPage;if(window.top.document.domain==window.document.domain)return e.SameDomainIframe}catch(t){}return e.CrossDomainIframe}this.DEBUG=!0,this.IN_IFRAME=window.top!==window.self,this.asset=null,this.positionInterval;var i=window.testOvvConfig&&window.testOvvConfig.userAgent?window.testOvvConfig.userAgent:navigator.userAgent;this.browserIDEnum={MSIE:1,Firefox:2,Chrome:3,Opera:4,safari:5},this.browser=e(i),this.servingScenarioEnum={OnPage:1,SameDomainIframe:2,CrossDomainIframe:3},this.servingScenario=t(this.servingScenarioEnum);var n=1e3;this.interval=n,this.releaseVersion="OVVRELEASEVERSION",this.buildVersion="OVVBUILDVERSION";var a={},o=[],r=1e3,l=[];this.addAsset=function(e){a.hasOwnProperty(e.getId())||(a[e.getId()]=e,this.asset=e)},this.removeAsset=function(e){delete a[e.getId()]},this.getAssetById=function(e){return a[e]},this.getAds=function(){var e={};for(var t in a)a.hasOwnProperty(t)&&(e[t]=a[t]);return e},this.subscribe=function(e,t,i,n){if(n)for(key in o[t])c(o[t][key].eventName,e)&&h(function(){i(t,o[t][key])});for(key in e)l[e[key]+t]||(l[e[key]+t]=[]),l[e[key]+t].push({Func:i})},this.publish=function(e,t,i){var n={eventName:e,eventTime:s(),ovvArgs:i};if(o[t]||(o[t]=[]),o[t].length<r&&o[t].push(n),e&&t&&l[e+t]instanceof Array)for(var a=0;a<l[e+t].length;a++){var c=l[e+t][a];c&&c.Func&&"function"==typeof c.Func&&h(function(){c.Func(t,n)})}};var s=function(){"use strict";return Date.now?Date.now():(new Date).getTime()},c=function(e,t){for(var i=0;i<t.length;i++)if(t[i]===e)return!0;return!1},h=function(e){try{var t=e();return void 0!==t?t:!0}catch(i){return!1}}}function ZZOVVCheck(){this.clientHeight=-1,this.clientWidth=-1,this.error="",this.focus=null,this.fps=-1,this.id="",this.beaconsSupported=null,this.geometrySupported=null,this.geometryViewabilityState="",this.beaconViewabilityState="",this.technique="",this.beacons=new Array,this.inIframe=null,this.objBottom=-1,this.objLeft=-1,this.objRight=-1,this.objTop=-1,this.percentViewable=-1,this.viewabilityState=""}function ZZOVVAsset(e,t){var i,n,a=13,o=Math.sqrt(2),r=0,l=1,s=2,c=3,h=4,d=5,u=6,m=7,v=8,p=9,b=10,w=11,g=12,f=13,y=e,V=0,E=$ZZovv.DEBUG?20:1,Z=t.geometryViewabilityCalculator;this.checkViewability=function(){var e=new ZZOVVCheck;if(e.id=y,e.inIframe=$ZZovv.IN_IFRAME,e.geometrySupported=$ZZovv.servingScenario!==$ZZovv.servingScenarioEnum.CrossDomainIframe,e.focus=F(),!n)return e.error="Player not found!",e;if(($ZZovv.browser.ID===$ZZovv.browserIDEnum.MSIE||$ZZovv.browser.ID===$ZZovv.browserIDEnum.Firefox)&&e.geometrySupported===!1&&(e.viewabilityState=ZZOVVCheck.UNMEASURABLE,!$ZZovv.DEBUG))return e;if(e.geometrySupported){if(e.technique=ZZOVVCheck.GEOMETRY,I(e,n),e.viewabilityState=e.percentViewable>=50?ZZOVVCheck.VIEWABLE:ZZOVVCheck.UNVIEWABLE,!$ZZovv.DEBUG)return e;e.geometryViewabilityState=e.viewabilityState}var t=k(0);if(t&&t.isViewable){var i=A(t)&&t.isViewable();e.beaconsSupported=!i}else e.beaconsSupported=!1;if(S())if(e.beaconsSupported){e.technique=ZZOVVCheck.BEACON;var a=C(e);null===a?(e.viewabilityState=ZZOVVCheck.UNMEASURABLE,$ZZovv.DEBUG&&(e.beaconViewabilityState=ZZOVVCheck.UNMEASURABLE)):(e.viewabilityState=a?ZZOVVCheck.VIEWABLE:ZZOVVCheck.UNVIEWABLE,$ZZovv.DEBUG&&(e.beaconViewabilityState=a?ZZOVVCheck.VIEWABLE:ZZOVVCheck.UNVIEWABLE))}else e.viewabilityState=ZZOVVCheck.UNMEASURABLE;else e.technique=ZZOVVCheck.BEACON,e.viewabilityState=ZZOVVCheck.NOT_READY;if($ZZovv.DEBUG)if(e.technique="",null===e.geometryViewabilityState&&null===e.beaconViewabilityState)e.viewabilityState=ZZOVVCheck.UNMEASURABLE;else{var o=e.beaconViewabilityState===ZZOVVCheck.VIEWABLE,r=e.geometryViewabilityState===ZZOVVCheck.VIEWABLE;e.viewabilityState=o||r?ZZOVVCheck.VIEWABLE:ZZOVVCheck.UNVIEWABLE}return e},this.beaconStarted=function(e){$ZZovv.DEBUG&&k(e).debug(),0!==e&&(V++,S()&&n.onJsReady())},this.dispose=function(){for(var e=1;a>=e;e++){var t=x(e);t&&(delete V[e],t.parentElement.removeChild(t))}clearInterval(window.$ZZovv.positionInterval),window.$ZZovv.removeAsset(this)},this.getId=function(){return y},this.getPlayer=function(){return n};var I=function(e,t){var i=Z.getViewabilityState(t,window);return i.error||(e.clientWidth=i.clientWidth,e.clientHeight=i.clientHeight,e.percentViewable=i.percentViewable,e.objTop=i.objTop,e.objBottom=i.objBottom,e.objLeft=i.objLeft,e.objRight=i.objRight),i},C=function(e){if(!S())return null;var t=0,i=0,o=0,r=0;e.beacons=new Array(a);var y=n.getClientRects()[0];e.objTop=y.top,e.objBottom=y.bottom,e.objLeft=y.left,e.objRight=y.right;for(var V=0;a>=V;V++)if(0!==V){var E=k(V),Z=E.isViewable(),I=A(E);if(e.beacons[V]=Z&&I,Z)switch(t++,V){case s:case c:case h:case d:i++;break;case u:case m:case v:case p:o++;break;case b:case w:case g:case f:r++}}if(t===a)return!0;var C=e.beacons;return C[l]===!0&&(C[s]===!0&&1==C[c]||C[s]===!0&&1==C[h]||C[c]===!0&&1==C[d]||C[h]===!0&&1==C[d])?!0:C[l]===!1&&r>=3?!0:C[l]===!0&&4==o?!0:C[s]&&C[d]&&(!C[u]||!C[l]||C[f]||C[p])?null:!C[h]||!C[c]||C[v]&&C[g]&&C[l]&&C[w]&&C[m]?!1:null},S=function(){return n?V===a:!1},B=function(e){if(e=BEACON_SWF_URL,""!==e&&"BEACON_SWF_URL"!==e){for(var t=0;a>=t;t++){var i=document.createElement("DIV");i.id="OVVBeaconContainer_"+t+"_"+y,i.style.position="absolute",i.style.zIndex=$ZZovv.DEBUG?99999:-99999;var n='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+E+'" height="'+E+'"><param name="movie" value="'+e+'" /><param name="quality" value="low" /><param name="flashvars" value="id='+y+"&index="+t+'" /><param name="bgcolor" value="#ffffff" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><!--[if !IE]>--><object id="OVVBeacon_'+t+"_"+y+'" type="application/x-shockwave-flash" data="'+e+'" width="'+E+'" height="'+E+'"><param name="quality" value="low" /><param name="flashvars" value="id='+y+"&index="+t+'" /><param name="bgcolor" value="#ff0000" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><!--<![endif]--></object>';i.innerHTML=n,document.body.insertBefore(i,document.body.firstChild)}O.bind(this)(),this.positionInterval=setInterval(O.bind(this),500)}},O=function(){if(S()){var e=n.getClientRects()[0];if(!i||i.left!==e.left||i.right!==e.right||i.top!==e.top||i.bottom!==e.bottom){i=e;for(var t=e.right-e.left,y=e.bottom-e.top,V=t/(1+o),Z=y/(1+o),I=t/o,C=y/o,B=0;a>=B;B++){var O=e.left+document.body.scrollLeft,A=e.top+document.body.scrollTop;switch(B){case r:O=-1e5,A=-1e5;break;case l:O+=(t-E)/2,A+=(y-E)/2;break;case s:break;case c:O+=t-E;break;case h:A+=y-E;break;case d:O+=t-E,A+=y-E;break;case u:O+=(t-I)/2,A+=(y-C)/2;break;case m:O+=(t-I)/2+I,A+=(y-C)/2;break;case v:O+=(t-I)/2,A+=(y-C)/2+C;break;case p:O+=(t-I)/2+I,A+=(y-C)/2+C;break;case b:O+=(t-V)/2,A+=(y-Z)/2;break;case w:O+=(t-V)/2+V,A+=(y-Z)/2;break;case g:O+=(t-V)/2,A+=(y-Z)/2+Z;break;case f:O+=(t-V)/2+V,A+=(y-Z)/2+Z}B>=u&&(O-=E/2,A-=E/2);var k=x(B);k.style.left=O+"px",k.style.top=A+"px"}}}},A=function(e){if(!e)return!1;var t=Math.max(document.body.clientWidth,window.innerWidth),i=Math.max(document.body.clientHeight,window.innerHeight),n=e.getClientRects()[0];return n.top<i&&n.bottom>0&&n.left<t&&n.right>0},k=function(e){return document.getElementById("OVVBeacon_"+e+"_"+y)},x=function(e){return document.getElementById("OVVBeaconContainer_"+e+"_"+y)},R=function(){for(var t=document.getElementsByTagName("embed"),i=0;i<t.length;i++)if(t[i][y])return t[i];for(var n=document.getElementsByTagName("object"),i=0;i<n.length;i++)if(n[i][y])return n[i];return document.getElementById(e)},F=function(){var e=!0;return"undefined"!=typeof document.hidden?e=window.document.hidden?!1:!0:document.hasFocus&&(e=document.hasFocus()),$ZZovv.IN_IFRAME===!1&&e===!0&&document.hasFocus&&(e=document.hasFocus()),e};n=R(),$ZZovv.DEBUG=!1,$ZZovv.IN_IFRAME=!1,$ZZovv.IN_IFRAME||$ZZovv.DEBUG?B.bind(this)("BEACON_SWF_URL"):n&&n.onJsReady&&setTimeout(function(){n.onJsReady()},5)}function OVVGeometryViewabilityCalculator(){this.getViewabilityState=function(i,a){var o=e();if(o.height==1/0||o.width==1/0)return{error:"Failed to determine viewport"};var r=t(i,a),l=n(r,o),s=i.getBoundingClientRect();return{clientWidth:o.width,clientHeight:o.height,objTop:s.top,objBottom:s.bottom,objLeft:s.left,objRight:s.right,percentViewable:l}};var e=function(){var e={width:1/0,height:1/0},t=window.top;return!isNaN(t.document.body.clientWidth)&&t.document.body.clientWidth>0&&(e.width=t.document.body.clientWidth),!isNaN(t.document.body.clientHeight)&&t.document.body.clientHeight>0&&(e.height=t.document.body.clientHeight),t.document.documentElement&&t.document.documentElement.clientWidth&&!isNaN(t.document.documentElement.clientWidth)&&(e.width=t.document.documentElement.clientWidth),t.document.documentElement&&t.document.documentElement.clientHeight&&!isNaN(t.document.documentElement.clientHeight)&&(e.height=t.document.documentElement.clientHeight),t.innerWidth&&!isNaN(t.innerWidth)&&(e.width=Math.min(e.width,t.innerWidth)),t.innerHeight&&!isNaN(t.innerHeight)&&(e.height=Math.min(e.height,t.innerHeight)),e},t=function(e,n){var a=n,o=n.parent,r={width:0,height:0,left:0,right:0,top:0,bottom:0};if(e){var l=i(e,n);if(l.width=l.right-l.left,l.height=l.bottom-l.top,r=l,a!=o){var s=t(a.frameElement,o);s.bottom<r.bottom&&(s.bottom<r.top&&(r.top=s.bottom),r.bottom=s.bottom),s.right<r.right&&(s.right<r.left&&(r.left=s.right),r.right=s.right),r.width=r.right-r.left,r.height=r.bottom-r.top}}return r},i=function(e,t){var n=t,a=t.parent,o={left:0,right:0,top:0,bottom:0};if(e){var r=e.getBoundingClientRect();n!=a&&(o=i(n.frameElement,a)),o={left:r.left+o.left,right:r.right+o.left,top:r.top+o.top,bottom:r.bottom+o.top}}return o},n=function(e,t){var i=0,n=0,a={width:e.right-e.left,height:e.bottom-e.top};return e.bottom<0||e.right<0||e.top>t.height||e.left>t.width||a.width<=0||a.height<=0?0:(e.top<0?(i=a.height+e.top,i>t.height&&(i=t.height)):i=e.top+a.height>t.height?t.height-e.top:a.height,e.left<0?(n=a.width+e.left,n>t.width&&(n=t.width)):n=e.left+a.width>t.width?t.width-e.left:a.width,Math.round(n*i/(a.width*a.height)*100))}}function Viewability(e){this.asset=new ZZOVVAsset(e,{geometryViewabilityCalculator:new OVVGeometryViewabilityCalculator})}ZZOVVCheck.UNMEASURABLE="unmeasurable",ZZOVVCheck.VIEWABLE="viewable",ZZOVVCheck.UNVIEWABLE="unviewable",ZZOVVCheck.NOT_READY="not_ready",ZZOVVCheck.BEACON="beacon",ZZOVVCheck.GEOMETRY="geometry",window.$ZZovv=window.$ZZovv||new ZZOVV,window.$ZZovv.addAsset(new ZZOVVAsset("OVVID",{geometryViewabilityCalculator:new OVVGeometryViewabilityCalculator})),Viewability.prototype={iFlag:!1,fQFlag:!1,sQFlag:!1,tQFlag:!1,vCFlag:!1,startTime:!1,vStartTime:!1,VIEWABLEPERCENT:50,UNVIEWABLESEC:2,VIEWABLESEC:2,stopCheckingViewablity:!1,stopCountingOthrEvnt:!1,isFullScreen:!1,getViewability:function(){var e=this.asset.checkViewability();return e},checkViewability:function(e,t,i){var n={firstQuartile:Math.round(25*t)/100,midpoint:Math.round(50*t)/100,thirdQuartile:Math.round(75*t)/100};n.firstQuartile>e&&!firstQFlag&&(firstQFlag=!0)},onAdTimeHandler:function(e,t,i,n,a,o){this.vStartTime||(this.vStartTime=e);var r={firstQuartile:Math.round(25*t)/100,midpoint:Math.round(50*t)/100,thirdQuartile:Math.round(75*t)/100},l=0,s=0,c={};c=this.getViewability(),this.isFullScreen&&(o("log","Viewability::isFullScreen"+this.isFullScreen+" percentage override to 100 and setfocus true "),c.percentViewable=100,c.focus=!0),o("log","Viewability::getViewability :: percentViewable "+c.percentViewable+" :: focus "+c.focus),c.percentViewable<this.VIEWABLEPERCENT||!c.focus?(this.startTime||(o("info"," Viewability  --------------> start unviewable counting <----------------- "),this.startTime=e,n&&(document.getElementById("viewability").style.color="#FF0000")),this.vStartTime=e):(n&&(document.getElementById("viewability").style.color="green"),this.startTime=!1),l=e-this.startTime,l>this.UNVIEWABLESEC&&this.startTime&&(n&&(document.getElementById("viewability").style.color="#FF0000",document.getElementById("viewability").innerHTML="unviewable"),o("info"," Viewability --------------> stopCountingOthrEvnt <----------------- "),this.stopCountingOthrEvnt=!0,this.iFlag&&(o("info"," Viewability --------------> stopCheckingViewablity <----------------- "),this.stopCheckingViewablity=!0)),s=e-this.vStartTime,s>this.VIEWABLESEC&&!this.iFlag?(o("log","Viewability:: Tracked viewableImpression "+e),this.iFlag=!0,Viewability.appendLog("Viewable Impression",n),a("viewableImpressions")):s>this.VIEWABLESEC&&(this.vStartTime=e),null!=document.getElementById("percentViewable")&&n&&(document.getElementById("percentViewable").innerHTML=c.percentViewable),null!=document.getElementById("viewability")&&n&&(document.getElementById("viewability").innerHTML=c.viewabilityState),"vpaid"==i||this.stopCountingOthrEvnt||(r.firstQuartile<e&&!this.fQFlag?(o("log","Viewability:: Tracked first Quartile impressions "+e),this.fQFlag=!0,Viewability.appendLog("First Quartile",n),a("viewableFirstQuartile")):r.midpoint<e&&!this.sQFlag?(o("log","Viewability:: Tracked midpoint impressions "+e),this.sQFlag=!0,Viewability.appendLog("Mid Point",n),a("viewableMidPoint")):r.thirdQuartile<e&&!this.tQFlag&&(o("log","Viewability:: Tracked third Quartile impressions "+e),this.tQFlag=!0,Viewability.appendLog("Third Quartile",n),a("viewableThirdQuartile")))},onAdCompleteHandler:function(e,t,i){this.vCFlag||(i("info","Viewability:: Tracked complete viewable impressions "),this.vCFlag=!0,Viewability.appendLog("Viewable Complete:",e),t("viewableComplete"))},updateWidgetStatus:function(e){null!=document.getElementById("percentViewable")&&e&&(document.getElementById("viewability").style.color="#FF0000",document.getElementById("percentViewable").innerHTML="",document.getElementById("viewability").innerHTML="unviewable")}},Viewability.initViewability=function(e){this.loadCSS(e),setTimeout(function(){var t='<div id="viewability-main-container"><div id="viewability-wrapper"><div id="viewability-header"><img id="viewability-logo" src="'+e+'app/assets/images/logo.png"><span class="viewability-title">VIEWABILITY INFO</span></div>';t+='<div id="viewability-content"><div class="prop-row"><span class="prop-name">Viewability</span><span id="viewability" class="prop-value">Viewable</span></div>',t+='<div class="prop-row"><span class="prop-name">Viewable %</span><span class="prop-value" id="percentViewable">100%</span></div></div></div></div>';var i=document.createElement("div");i.innerHTML=t,document.body.appendChild(i)},500)},Viewability.appendLog=function(e,t){if(t){var i=document.createElement("div");i.setAttribute("class","prop-row"),i.innerHTML="<span class='prop-name'>"+e+"</span><span class='prop-value'><span class='tick'></span></span>",document.getElementById("viewability-content").appendChild(i)}},Viewability.loadCSS=function(e){var t='#viewability-main-container{position:fixed;display:block;width:292px;height:auto;top:5px;right:5px;border:1px solid #AAA;padding:5px;box-shadow: 0px 0px 8px #888888;background-color: white;font-family: "Roboto", sans-serif;font-size: 15px;}';t+="#viewability-main-container #viewability-wrapper{width:100%;height:auto;border: 1px solid #E8E8E8;}#viewability-wrapper #viewability-header{height:16px;background-color:#32aed7;padding:10px;}",t+="#viewability-header #viewability-logo{position: relative;top: -5px;}#viewability-header .viewability-title{color:#fff;text-transform:uppercase;float:right;font-size:14px;vertical-align:middle;}",t+="#viewability-content .prop-row{margin-left:5px;margin-right:5px;padding: 7px 5px;border-bottom:1px solid #E8E8E8;line-height:24px;}",t+="#viewability-content .prop-row:last-child{border-bottom: none;}.prop-row .prop-value{float:right;}",t+='.prop-value .tick{background: url("'+e+'app/assets/images/tick.png") no-repeat;width: 24px;height: 24px;display: inline-block;}',head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style"),style.type="text/css",style.styleSheet?style.styleSheet.cssText=t:style.appendChild(document.createTextNode(t)),head.appendChild(style)};