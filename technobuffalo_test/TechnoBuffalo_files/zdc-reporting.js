/*!
	zdc-reporting.js
	ZD Ads - Reporting Layer
	Author: Ziff Davis, LLC./ Milko Lima (@MilkoL)
	Version: 4.1 - 2015/06/17
*/
;var ZDCREATIVE_REPORTING=function(u){var r=40;var B="undefined";var l=this;l.settings=u||{};var W=30000;var L=null,C=null;if(l.settings.tRender!==B&&l.settings.tRender!==""){L=l.settings.tRender}var c={NOT_FOUND:{text:"not found",id:-1},AD_REQUEST:{text:"ad request",id:0},AD_RENDER:{text:"ad impression",id:1},OVERLAY_OPEN:{text:"overlay open",id:2},OVERLAY_LOAD:{text:"overlay load",id:3},OVERLAY_CLOSE:{text:"overlay close",id:4},AD_CLICK:{text:"ad click",id:5},AD_CLICK_ELEM:{text:"ad click-elem",id:9},AD_CLOSE:{text:"ad close",id:6},AD_OPEN:{text:"ad open",id:7},MOUSE_HOVER_TIME:{text:"mouse hover time",id:8},POLL_VOTE:{text:"poll vote",id:10},AD_CLICK_OVERLAY:{text:"ad click-overlay",id:11},AD_RENDER_TIME:{text:"ad render time",id:12},AD_VIEWABILITY:{text:"ad viewability",id:13},AD_VIEWABLE:{text:"ad viewable",id:14},AD_VIEWABLE_IN_FOCUS:{text:"ad viewable-in focus",id:28},POLL_GET:{text:"poll get",id:15},VIDEO_PLAY:{text:"video play",id:16},VIDEO_PAUSE:{text:"video pause",id:17},VIDEO_QUARTILE1:{text:"video quartile1",id:18},VIDEO_QUARTILE2:{text:"video quartile2",id:19},VIDEO_QUARTILE3:{text:"video quartile3",id:20},VIDEO_QUARTILE4:{text:"video quartile4",id:21},VIDEO_UNMUTE:{text:"video unmute",id:22},VIDEO_MUTE:{text:"video mute",id:23},VIDEO_FULLSCREEN_ON:{text:"video fullscreen on",id:24},VIDEO_FULLSCREEN_OFF:{text:"video fullscreen off",id:25},VIDEO_COMPLETION:{text:"video completion",id:26},PAGE_LOAD_TIME:{text:"page load time",id:27},getId:function(Z){for(var aa in c){if(c.hasOwnProperty(aa)){var Y=c[aa];if(typeof(Y)!==B&&Y.text===Z){return Y.id}}}return this.NOT_FOUND.id},loggedIs:function(Z,aa){if(typeof(aa)===B||aa==null){var Y=(typeof(Z.loggedIs)!==B&&Z.loggedIs==true);return Y}else{Z.loggedIs=aa}}};var o=function(Z){var Y=(Z===c.POLL_GET.id||Z===c.POLL_VOTE.id);return Y};var E=function(ac,aa,Z){if(!aa){return}try{if(aa.addEventListener){aa.addEventListener(ac,Z,false)}else{if(aa.attachEvent){var Y=aa.attachEvent("on"+ac,Z);return Y}}}catch(ab){}};var x=function(aa,Z,Y){if(!Z){return}if(Z.removeEventListener){Z.removeEventListener(aa,Y,false)}else{if(Z.detachEvent){Z.detachEvent("on"+aa,Y)}}};var g=function(Z){var Y="";if(top!==window){try{Y=(!Z?document.referrer:top.window.location.href)}catch(aa){}}else{try{Y=(!Z?window.location.href:document.referrer)}catch(aa){}}return Y};var s=function(ab){var aa=ab||window.event;var Z=aa.currentTarget||aa.fromElement;var Y=aa.relatedTarget||aa.toElement;while(typeof(Y)!==B&&Y!=null&&Y!=Z&&Y.nodeName!=="BODY"&&Y.nodeName!=="IFRAME"){Y=Y.parentNode}if(Y==Z){return true}return false};var h=null;function b(Y){if(s(Y)){return}h=(new Date).getTime()}function Q(ad,ab){if(h!=null){if(!ab&&s(ad)){return}var aa=ad.currentTarget||ad.srcElement;var Y=40;var Z=60000;var ac=(new Date).getTime()-h;if(ac>Y&&ac<=Z){l.log(c.MOUSE_HOVER_TIME.text,ac,false,c.MOUSE_HOVER_TIME.id)}h=null}}var n=null;var k=function(){if(n!==null){return}n=true;for(i=0;i<l.settings.ids.length;i++){var aa=l.settings.ids[i];try{var Z=K(aa);if(typeof(Z)===B||Z==null){return}E("mousedown",Z,function(ac){var ab=ac.currentTarget||ac.srcElement;l.log(c.AD_CLICK_ELEM.text,ab.id,false,c.AD_CLICK_ELEM.id);Q(ac,true)});E("mouseover",Z,function(ab){b(ab)});E("mouseout",Z,function(ab){Q(ab,false)})}catch(Y){}}};var D={load:function(ab,af,ag){var Y=ag;var ah;if(typeof XMLHttpRequest!==B){ah=new XMLHttpRequest();if(!("withCredentials" in ah)&&window.XDomainRequest){ah=null;ah=new XDomainRequest();ah.onload=aa}}else{var Z=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"];for(var ac=0,ad=Z.length;ac<ad;ac++){try{ah=new ActiveXObject(Z[ac]);break}catch(ae){}}}ah.onreadystatechange=aa;function aa(){if(ah.readyState<4&&typeof(ah.readyState)!==B){return}if(ah.status!==200&&typeof(ah.status)!==B){return}if(ah.readyState===4||typeof(ah.readyState)===B){var ai;try{ai=JSON.parse(ah.response||ah.responseText)}catch(aj){}if(af!=null){af(ai,ah)}}}try{ah.open("GET",Y+"?"+ab,true);ah.send()}catch(ae){ah.abort()}}};var j=function(Y){return(Y.indexOf("overlay")>-1)};var U=function(){return w()||(window.top!=window)};var w=function(){return(typeof(inDapIF)!==B&&inDapIF==true)};var y=function(Y){var ab=window.parent;var ad=[];try{ad=ab.document.getElementsByTagName("iframe")}catch(ac){}if(typeof(ad)!==B&&ad!=null&&ad.length>0){for(var Z=0;Z<ad.length;Z++){var aa=ad[Z];if(aa&&typeof(aa.contentWindow)!==B&&P(aa.contentWindow,Y)){return aa}}}return null};var P=function(Y,ac){var Z=false;try{var aa=Y.zdcIdentifier||Y.identifier;if(typeof(aa)!==B&&aa!=null&&aa===ac){Z=true}}catch(ab){}return Z};var R=null;var K=function(aa){var Y=R;if(Y===null){if(j(aa)){Y=document.documentElement}else{if(!U()){Y=document.getElementById(aa)}else{if((typeof(ZDCREATIVE_ELEVATOR)!==B&&l.settings.adObj instanceof ZDCREATIVE_ELEVATOR)||(typeof(ZDCREATIVE_MAG_PREMIUM)!==B&&l.settings.adObj instanceof ZDCREATIVE_MAG_PREMIUM)||(typeof(ZDCREATIVE_WELCOME)!==B&&l.settings.adObj instanceof ZDCREATIVE_WELCOME)){try{Y=window.top.document.getElementById(aa)}catch(Z){}}else{Y=y(aa)}}}R=Y}return Y};var q=null;var f=function(aa){var Y=q;if(Y===null){if(j(aa)){Y=window}else{try{Y=window.top}catch(Z){}}q=Y}return Y};var G=function(ac){var Z=(!U()||j(ac)?window:top.window),Y="inner";if(!("innerWidth" in window)){Y="client";Z=Z.document.documentElement||Z.document.body}var aa;try{aa={width:Z[Y+"Width"],height:Z[Y+"Height"]}}catch(ab){aa={width:0,height:0}}return aa};function N(Z){var Y=Math.round(Z*100)/100;return Y}var z=t().replace(/[H|h]idden/,"")+"visibilitychange";var d=false;function t(){if("hidden" in document){return"hidden"}var Z=["webkit","moz","ms","o"];for(var Y=0;Y<Z.length;Y++){if((Z[Y]+"Hidden") in document){return Z[Y]+"Hidden"}}return null}function I(){var Y=t();if(!Y){return false}return document[Y]}function v(){A()}var e=false;var T="scroll";var V=250;var m=null;var F=null;var A=function(){var Y=1000;var Z=0.5;var ai=1000;var af=l.settings.adObj.settings.containerId;var aj=K(af);if(typeof(aj)===B||aj===null){return}var aa=aj.getBoundingClientRect();var ae=aa.width*aa.height;if(ae===0){return}var ah=G(af);var ad=aa.right<ah.width?0:ah.width-aa.right;ad+=aa.left>=0?0:aa.left;var ab=aa.bottom<ah.height?0:ah.height-aa.bottom;ab+=aa.top>=0?0:aa.top;var ac=N((aa.width+ad)*(aa.height+ab)/ae);l.log(c.AD_VIEWABILITY.text,ac,false,c.AD_VIEWABILITY.id);if(ac>=Z){if(m===null){m=(new Date).getTime();F=setTimeout(A,Y)}else{var ag=(m!==null?(new Date).getTime()-m:0);if(ag>=ai){if(!I()){m=null;clearInterval(a);x(T,f(af),H);x(z,document,v);clearTimeout(F);l.log(c.AD_VIEWABLE_IN_FOCUS.text,ag,false,c.AD_VIEWABLE_IN_FOCUS.id)}else{if(!d){m=null;d=true;E(z,document,v)}}if(!c.loggedIs(c.AD_VIEWABLE)){l.log(c.AD_VIEWABLE.text,ag,false,c.AD_VIEWABLE.id);c.loggedIs(c.AD_VIEWABLE,true)}}}}else{m=null;clearTimeout(F)}};var H=function(){e=true};var a=setInterval(function(){if(e){e=false;A()}},V);var J="load";var O;function S(){var Y=l.settings.adObj.settings.containerId;if(K(Y)!==null){clearInterval(O);l.log(c.AD_RENDER.text,null,false,c.AD_RENDER.id)}}function p(){var Z=(C!==null?(new Date).getTime()-C:0);C=null;try{x(J,window.top,p)}catch(Y){}if(Z>0&&Z<W){l.log(c.PAGE_LOAD_TIME.text,Z,false,c.PAGE_LOAD_TIME.id)}}var X={top:0,left:0,bottom:0,right:0};var M=null;l.log=function(ac,an,ap,Y,ae){var ak=(typeof(Y)!==B&&Y!==null?Y:c.getId(ac));if(ak!==c.AD_REQUEST.id&&ak!==c.AD_RENDER_TIME.id){k()}var Z=l.settings.adObj.settings;var ai=Z.containerId;var ag=G(ai);an=(typeof(an)!==B&&an!=null?an:"");var ao=(typeof(Z.sessionId)!==B?Z.sessionId:"");var al=g(false);var af=g(true);if(ak!==c.AD_REQUEST.id&&M==null){var ad=K(ai);if(typeof(ad)!==B&&ad!==null){var aq=ad.getBoundingClientRect();var ah=document.documentElement.getBoundingClientRect();X.top=Math.abs(aq.top)+Math.abs(ah.top);X.left=Math.abs(aq.left)+Math.abs(ah.left);X.bottom=Math.abs(aq.bottom)+Math.abs(ah.top);X.right=Math.abs(aq.right)+Math.abs(ah.left);M=(X.bottom<=ag.height?1:0)}}if(ak!==c.AD_RENDER_TIME.id){if(ak===c.AD_REQUEST.id){L=C=(new Date).getTime();var am=l.settings.autoAdRender;if(typeof am===B||am!==false){O=setInterval(S,V)}try{E(J,window.top,p)}catch(ab){}}else{if(ak===c.AD_RENDER.id){var aj=(L!==null?(new Date).getTime()-L:0);L=null;E(T,f(ai),H);A();if(aj>0&&aj<W){l.log(c.AD_RENDER_TIME.text,aj,false,c.AD_RENDER_TIME.id)}}}}var ar="a=s&";var at=ar+"ai="+Z.adId+"&av="+Z.adVersion+"&si="+ao+"&n="+encodeURIComponent(ac)+"&ei="+ak+"&v="+encodeURIComponent(an)+"&ur="+encodeURIComponent(af)+"&up="+encodeURIComponent(al)+"&sw="+screen.width+"&sh="+screen.height+"&vw="+ag.width+"&vh="+ag.height+"&t="+Math.round(X.top)+"&l="+Math.round(X.left)+"&b="+Math.round(X.bottom)+"&r="+Math.round(X.right)+"&atf="+(M||0)+"&rv="+r+"&"+Math.floor(Math.random()*10000000000);var aa="//adwiz.zdbb.net/api/r";if(!o(ak)&&document.body){var au=document.createElement("img");au.src=aa+"?"+at;au.width="1";au.height="1";document.body.appendChild(au)}else{D.load(at,function(av,aw){if(av!=null&&av.result!=null&&av.result=="ok"){}else{}if(typeof(ae)!==B&&ae!=null){ae(av)}},aa)}return};l.getRenderCounter=function(){return L};l.loaded=true};