
var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},ContentHub;(function(n){var dt=function(){function n(){}return n}(),r,u,f,e,i,o,s,h,c,l,a,t,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,gt,ni,ti,ii,ri,ui,fi,ei,oi,si,hi,ci,li,ai,vi,yi,pi,wi,bi;n.MenuItemBE=dt,r=function(){function n(){}return n}(),n.SubMenuItemBE=r,u=function(){function n(){}return n}(),n.ContentItemBE=u,f=function(){function n(){}return n}(),n.ContentItemLightBE=f,e=function(){function n(){}return n}(),n.ContentItemBlockBE=e,i=function(){function n(){}return n}(),n.ContentSectionBE=i,o=function(){function n(){}return n}(),n.ContentItemAssignmentBE=o,s=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(i),n.ContentSectionAdminBE=s,h=function(){function n(){}return n}(),n.ContentSectionPageBE=h,c=function(){function n(){}return n}(),n.ContentTemplateBE=c,l=function(){function n(){}return n}(),n.PhotoBE=l,a=function(){function n(){}return n}(),n.ContentItemKeywordTagBE=a,t=function(){function n(){}return n}(),n.DataBlockBaseBE=t,v=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(t),n.ListDataBlockBE=v,y=function(){function n(){}return n}(),n.ListItemBE=y,p=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(t),n.OpenHtmlDataBlockBE=p,w=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(t),n.PublishThisDataBlockBE=w,b=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(t),n.MediaGalleryDataBlockBE=b,k=function(){function n(){}return n}(),n.SearchResultsBE=k,d=function(){function n(){}return n}(),n.SearchCriteriaBE=d,g=function(){function n(){}return n}(),n.ContentTileBE=g,nt=function(){function n(){}return n}(),n.PromotionBE=nt,tt=function(){function n(){}return n}(),n.PromotionServiceDataBE=tt,it=function(){function n(){}return n}(),n.PromotionPlacementBE=it,rt=function(){function n(){}return n}(),n.AffiliateBE=rt,ut=function(){function n(){}return n}(),n.ContentFeedBE=ut,ft=function(){function n(){}return n}(),n.ContentFeedDataBE=ft,et=function(){function n(){}return n}(),n.PublishThisFeedItemBE=et,ot=function(){function n(){}return n}(),n.PublishThisFeedBE=ot,st=function(){function n(){}return n}(),n.PublishThisFeedUsageSearchResultBE=st,ht=function(){function n(){}return n}(),n.MediaBE=ht,ct=function(){function n(){}return n}(),n.MediaGalleryBE=ct,lt=function(){function n(){}return n}(),n.MediaGalleryItemBE=lt,at=function(){function n(){}return n}(),n.UserBE=at,vt=function(){function n(){}return n}(),n.SupportedTemplatesForPlacementsBE=vt,yt=function(){function n(){}return n}(),n.GlobalSiteSettingsBE=yt,pt=function(){function n(){}return n}(),n.SitemapEntryBE=pt,wt=function(){function n(){}return n}(),n.SitemapNewsEntryBE=wt,bt=function(){function n(){}return n}(),n.CountryBE=bt,kt=function(){function n(){}return n}(),n.CorporateParentBE=kt,function(n){n[n.Quiz=1]="Quiz",n[n.List=2]="List",n[n.OpenHtml=3]="OpenHtml",n[n.ContentPage=4]="ContentPage",n[n.AggregatePage=5]="AggregatePage",n[n.PublishThis=6]="PublishThis",n[n.MediaGallery=7]="MediaGallery"}(n.DataSchemaType||(n.DataSchemaType={})),gt=n.DataSchemaType,function(n){n[n.Aggregate=1]="Aggregate",n[n.ContentItemBlock=2]="ContentItemBlock",n[n.Tile=3]="Tile",n[n.ContentPage=4]="ContentPage"}(n.ContentTemplateType||(n.ContentTemplateType={})),ni=n.ContentTemplateType,function(n){n[n.ContentAggregate=0]="ContentAggregate",n[n.ContentSearch=1]="ContentSearch",n[n.ContentBrowse=2]="ContentBrowse",n[n.ContentPageId=3]="ContentPageId",n[n.ContentPageIdNotFound=4]="ContentPageIdNotFound",n[n.ContentPageIdName=5]="ContentPageIdName",n[n.ContentPageIdNameNotFound=6]="ContentPageIdNameNotFound",n[n.PageNotFound=7]="PageNotFound",n[n.RssFeed=8]="RssFeed"}(n.RouteName||(n.RouteName={})),ti=n.RouteName,function(n){n[n.ContentSection=0]="ContentSection",n[n.ContentName=1]="ContentName",n[n.ContentId=2]="ContentId"}(n.RouteSegment||(n.RouteSegment={})),ii=n.RouteSegment,function(n){n[n.None=0]="None",n[n.NorthAmerica=1]="NorthAmerica",n[n.CentralAmerica=2]="CentralAmerica",n[n.UnitedKingdom=3]="UnitedKingdom",n[n.Australia=4]="Australia"}(n.Region||(n.Region={})),ri=n.Region,function(n){n[n.Featured=1]="Featured",n[n.RightRail=2]="RightRail",n[n.Aggregate=3]="Aggregate"}(n.ContentItemLocation||(n.ContentItemLocation={})),ui=n.ContentItemLocation,function(n){n[n.DatePublished=0]="DatePublished",n[n.UpdatedDate=1]="UpdatedDate",n[n.CreatedDate=2]="CreatedDate"}(n.SearchDateRangeField||(n.SearchDateRangeField={})),fi=n.SearchDateRangeField,function(n){n[n.PublishThisAutomated=1]="PublishThisAutomated",n[n.PublishThisCurated=2]="PublishThisCurated",n[n.PublishThisAutomatedAndCurated=3]="PublishThisAutomatedAndCurated",n[n.PublishThisDigest=4]="PublishThisDigest"}(n.ContentFeedType||(n.ContentFeedType={})),ei=n.ContentFeedType,function(n){n[n.Minutes15=15]="Minutes15",n[n.Minutes30=30]="Minutes30",n[n.Minutes45=45]="Minutes45",n[n.Minutes60=60]="Minutes60",n[n.Minutes360=360]="Minutes360",n[n.Minutes720=720]="Minutes720",n[n.Minutes1440=1440]="Minutes1440",n[n.Minutes10080=10080]="Minutes10080",n[n.Minutes43200=43200]="Minutes43200"}(n.CacheMinutes||(n.CacheMinutes={})),oi=n.CacheMinutes,function(n){n[n.None=0]="None",n[n.Admin=1]="Admin",n[n.CorporateAdmin=2]="CorporateAdmin",n[n.AffiliateAdmin=3]="AffiliateAdmin"}(n.UserRole||(n.UserRole={})),si=n.UserRole,function(n){n[n.unknown=0]="unknown",n[n.article=1]="article",n[n.video=2]="video",n[n.photo=3]="photo",n[n.tweet=4]="tweet",n[n.text=5]="text"}(n.PublishThisFeedItemType||(n.PublishThisFeedItemType={})),hi=n.PublishThisFeedItemType,function(n){n[n.CenterCrop=0]="CenterCrop",n[n.ResizeInsideBox=1]="ResizeInsideBox",n[n.ResizeOutsideBox=2]="ResizeOutsideBox",n[n.CropAtFocalPoint=3]="CropAtFocalPoint",n[n.CropSaveFocalPoint=5]="CropSaveFocalPoint"}(n.PhotoFormatOption||(n.PhotoFormatOption={})),ci=n.PhotoFormatOption,function(n){n[n.None=0]="None",n[n.PhotoList=1]="PhotoList",n[n.TextList=2]="TextList"}(n.SubMenuDisplayType||(n.SubMenuDisplayType={})),li=n.SubMenuDisplayType,function(n){n[n.ASR=0]="ASR",n[n.GB=1]="GB"}(n.NationalFlowersPageType||(n.NationalFlowersPageType={})),ai=n.NationalFlowersPageType,function(n){n[n.InternalCode=0]="InternalCode",n[n.PageTitle=1]="PageTitle",n[n.Description=2]="Description",n[n.Section=3]="Section",n[n.EditedBy=4]="EditedBy",n[n.EditedDate=5]="EditedDate"}(n.ManagePagesSortColumns||(n.ManagePagesSortColumns={})),vi=n.ManagePagesSortColumns,function(n){n[n.ASC=0]="ASC",n[n.DESC=1]="DESC"}(n.SortOrder||(n.SortOrder={})),yi=n.SortOrder,function(n){n[n.Standard=1]="Standard",n[n.News=2]="News"}(n.SiteMapType||(n.SiteMapType={})),pi=n.SiteMapType,function(n){n[n.AllAffiliates=1]="AllAffiliates",n[n.Region=2]="Region",n[n.Country=3]="Country",n[n.CorporateParent=4]="CorporateParent",n[n.Affiliate=5]="Affiliate"}(n.TargetByType||(n.TargetByType={})),wi=n.TargetByType,function(n){n[n.Photo=0]="Photo",n[n.Audio=1]="Audio",n[n.Video=2]="Video"}(n.MediaType||(n.MediaType={})),bi=n.MediaType})(ContentHub||(ContentHub={}))
var ContentHub;(function(n){function t(){jQuery.views.helpers({Ellipsis:function(n,t,i){if(n.length<=t)return n;var r=n.substr(0,t);return r=r.substr(0,Math.min(r.length,r.lastIndexOf(" "))),i&&n.length>t&&(r+="..."),r},BuildHandlerImageUrl:function(n,t,i,r){var u=n;return n.indexOf("cache.legacy.")>=0?u=n+"x?option="+r+"&h="+t+"&w="+i:n.indexOf("img.publishthis.com")>=0&&(u=n+"?H="+t+"&W="+i),u},GetItemFromCollection:function(n,t){return n&&n.length-1>=t?n[t]:null}})}n.InitializeJSRenderHelpers=t})(ContentHub||(ContentHub={}))
function InitializeScript(){jQuery("[PromoTileID]").each(function(){var t=parseInt(jQuery(this).attr("PromoTileID")),r=isNaN(parseInt(jQuery(this).attr("AffiliateId")))?0:parseInt(jQuery(this).attr("AffiliateId")),u=jQuery(this).attr("previewdate"),f=parseInt(jQuery(this).attr("Width")),e=parseInt(jQuery(this).attr("Height")),n=jQuery(this).attr("id"),i;(n==""||n===undefined)&&(n="Promo"+t,jQuery(this).attr("id",n)),i=new ContentHub.Promotion(t,r,f,e,n,u),ChubList.push(i)})}var ContentHub,SetEnvironmentConfig,ChubList;(function(n){var r=function(){function r(n,r,u,f,e,o){this.LoadJS=function(n){if(!jQuery("script[src='"+n+"']").length){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",n),document.getElementsByTagName("head")[0].appendChild(t)}},this.EnvironmentConfig=new i,SetEnvironmentConfig(this.EnvironmentConfig),this.LoadJS(this.EnvironmentConfig.CdnStaticBasePath+"news/scripts/jsrender.min.js"),this.Container=new t(n,u,f,(f-100)/2),this.Container.ContainerId=e,this.PlacementId=n,this.AffiliateId=r,this.PreviewDate=o||"",this.SetupContainer(),this.GetPromoData()}return r.prototype.SetupContainer=function(){var n=jQuery("#"+this.Container.ContainerId);n.css("overflow","hidden"),n.css("height",this.Container.Height+"px"),n.css("width",this.Container.Width+"px"),n.append("<div style='width: 100px; height: 100px; margin-top:"+this.Container.LoaderOffsetTop+"px; margin-left: auto; margin-right:auto; opacity:0.4; filter:alpha(opacity = 40);'><img class='LoadingIcon' src='"+this.EnvironmentConfig.CdnBasePath+"legacy/images/obituary/obituaryportal/ajax-loader.gif'/><\/div>")},r.prototype.GetPromoData=function(){var t=this,n=this.EnvironmentConfig.WebServiceBasePath+"/ContentService.svc/GetContentPromotion?placementId="+this.PlacementId+"&affiliateId="+this.AffiliateId;this.PreviewDate!=""&&(n=this.EnvironmentConfig.WebServiceBasePath+"/ContentService.svc/GetContentPromotionByDate?placementId="+this.PlacementId+"&affiliateId="+this.AffiliateId+"&date="+this.PreviewDate),jQuery.ajax({url:n,dataType:"jsonp",error:function(n){try{console.log("Error Returning Promo Data:"+n),this.RenderDefaultContent()}catch(t){}},jsonpCallback:"PromoContent_"+this.PlacementId,cache:!0}).done(function(n){t.RenderPromo(n)})},r.prototype.RenderPromo=function(t){var u=this,i,r;jQuery.templates==undefined?window.setTimeout(function(){return u.RenderPromo(t)},100):t==null||t.TemplateHtml==null||t.TemplateHtml==""||t.Tiles.length<1?this.RenderDefaultContent():(n.InitializeJSRenderHelpers(),i=t,r=jQuery.templates(i.TemplateHtml),jQuery("#"+this.Container.ContainerId).html(r.render(i)))},r.prototype.RenderDefaultContent=function(){jQuery("#"+this.Container.ContainerId).find(".LoadingIcon").hide(),jQuery("#"+this.Container.ContainerId).find(".DefaultContent").show()},r}(),t,i;n.Promotion=r,t=function(){function n(n,t,i,r){this.ContainerId="Promo"+n,this.Height=i,this.Width=t,this.LoaderOffsetTop=r}return n}(),n.PromotionContainer=t,i=function(){function n(){}return n}(),n.EnviromentConfiguration=i})(ContentHub||(ContentHub={})),SetEnvironmentConfig=function(){},ChubList=[]

SetEnvironmentConfig = function(EnvironmentConfig)
{
    EnvironmentConfig.WebServiceBasePath = 'http://ak-static.legacy.net/webservices/news/';
	EnvironmentConfig.ApplicationBasePath = 'http://www.legacy.com/news/';
	EnvironmentConfig.CdnBasePath = 'http://ak-cache.legacy.net/';
	EnvironmentConfig.CdnStaticBasePath = 'http://ak-static.legacy.net/';
};

InitializeScript();
