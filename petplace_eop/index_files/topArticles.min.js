!function(e){"function"==typeof define&&define.amd?define(["jquery","kendoweb"],e):e(jQuery)}(function(e){e.fn.topArticles=function(t){var i,a=new Array;return init=function(n){var r=e.extend({},e.fn.topArticles.defaults,t);e.when(e(".pages").each(function(t,i){var n={type:e(i).data("type"),topic:e(i).data("topic"),listing:e(i).data("listing"),article:e(i).data("article")};a.push(n)})).done(function(){e.ajax({type:"GET",url:"/Services/Articles/Articles.svc/articles/",contentType:"application/json",dataType:"json",data:r,success:function(e){i=shuffle(e.Items).slice(0,r.resultCount)},error:function(){$e.destroy()}}).complete(function(){var t=kendo.template(e("#articleTemplate").html());e.each(i,function(i,r){var l,o;e.ajax({type:"GET",url:"/restapi/related-data/child-items",contentType:"application/json",dataType:"json",data:{ParentItemId:r.Id,ParentItemType:"Telerik.Sitefinity.DynamicTypes.Model.Pets.Article",ParentProviderName:r.ProviderName,FieldName:"FeaturedWideMedium",skip:0,take:8,Status:1,ChildItemType:"Telerik.Sitefinity.Libraries.Model.Image",ChildProviderName:r.ProviderName},success:function(e){l=e},error:function(){}}).complete(function(){e.ajax({type:"GET",url:"/restapi/related-data/child-items",contentType:"application/json",dataType:"json",data:{ParentItemId:r.Id,ParentItemType:"Telerik.Sitefinity.DynamicTypes.Model.Pets.Article",ParentProviderName:r.ProviderName,FieldName:"Editor",skip:0,take:8,Status:1},success:function(e){o=e},error:function(){}}).complete(function(){if(l&&l.TotalCount>0){var i=l.Items[0];r.Thumbnail=i.ThumbnailUrl,r.ThumbnailTitle=i.Title}else r.Thumbnail="",r.ThumbnailTitle="";r.Editor=o&&o.TotalCount>0?o.Items[0].Title:"";var c=r.ItemDefaultUrl.Value.split("/")[1],s=e.grep(a,function(e){return e.type==c});r.url=s[0].article+r.ItemDefaultUrl.Value,e(n).append(t(r))})})})})})},shuffle=function(e){for(var t,i,a=e.length;0!==a;)i=Math.floor(Math.random()*a),a-=1,t=e[a],e[a]=e[i],e[i]=t;return e},this.each(function(){init(this)})},e.fn.topArticles.defaults={itemType:"Telerik.Sitefinity.DynamicTypes.Model.Pets.Article",provider:"OpenAccessProvider",sortExpression:"",skip:0,take:50,filter:"",resultCount:3}});