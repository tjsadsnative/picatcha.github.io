var cdnEndpoint="https://s.audiomack.com";+function(a){function d(d){a(g).remove();a(h).each(function(){var h=f(a(this)),b={relatedTarget:this};h.hasClass("open")&&(h.trigger(d=a.Event("hide.bs.dropdown",b)),d.isDefaultPrevented()||h.removeClass("open").trigger("hidden.bs.dropdown",b))})}function f(d){var f=d.attr("data-target");f||(f=(f=d.attr("href"))&&/#[A-Za-z]/.test(f)&&f.replace(/.*(?=#[^\s]*$)/,""));return(f=f&&a(f))&&f.length?f:d.parent()}var g=".dropdown-backdrop",h='[data-toggle="dropdown"]',H=function(d){a(d).on("click.bs.dropdown",
this.toggle)};H.prototype.toggle=function(h){var g=a(this);if(!g.is(".disabled, :disabled")){var b=f(g);h=b.hasClass("open");d();if(!h){if("ontouchstart"in document.documentElement&&!b.closest(".navbar-nav").length)a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",d);var H={relatedTarget:this};b.trigger(h=a.Event("show.bs.dropdown",H));if(h.isDefaultPrevented())return;b.toggleClass("open").trigger("shown.bs.dropdown",H);g.trigger("focus")}return!1}};H.prototype.keydown=function(d){if(/(38|40|27)/.test(d.keyCode)){var g=
a(this);d.preventDefault();d.stopPropagation();if(!g.is(".disabled, :disabled")){var b=f(g),H=b.hasClass("open");if(!H||H&&27==d.keyCode)return 27==d.which&&b.find(h).trigger("focus"),g.trigger("click");g=b.find('[role="menu"] li:not(.divider):visible a, [role="listbox"] li:not(.divider):visible a');g.length&&(b=g.index(g.filter(":focus")),38==d.keyCode&&0<b&&b--,40==d.keyCode&&b<g.length-1&&b++,~b||(b=0),g.eq(b).trigger("focus"))}}};var r=a.fn.dropdown;a.fn.dropdown=function(d){return this.each(function(){var f=
a(this),b=f.data("bs.dropdown");b||f.data("bs.dropdown",b=new H(this));"string"==typeof d&&b[d].call(f)})};a.fn.dropdown.Constructor=H;a.fn.dropdown.noConflict=function(){a.fn.dropdown=r;return this};a(document).on("click.bs.dropdown.data-api",d).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",h,H.prototype.toggle).on("keydown.bs.dropdown.data-api",h+', [role="menu"], [role="listbox"]',H.prototype.keydown)}(jQuery);!function(a,d){var f,g;if(a.uaMatch=function(a){a=a.toLowerCase();var d=/(opr)[\/]([\w.]+)/.exec(a)||/(chrome)[ \/]([\w.]+)/.exec(a)||/(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0<=a.indexOf("trident")&&/(rv)(?::| )([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];a=/(ipad)/.exec(a)||/(iphone)/.exec(a)||/(android)/.exec(a)||/(windows phone)/.exec(a)||
/(win)/.exec(a)||/(mac)/.exec(a)||/(linux)/.exec(a)||/(cros)/i.exec(a)||[];return{browser:d[3]||d[1]||"",version:d[2]||"0",platform:a[0]||""}},f=a.uaMatch(d.navigator.userAgent),g={},f.browser&&(g[f.browser]=!0,g.version=f.version,g.versionNumber=parseInt(f.version)),f.platform&&(g[f.platform]=!0),(g.android||g.ipad||g.iphone||g["windows phone"])&&(g.mobile=!0),(g.cros||g.mac||g.linux||g.win)&&(g.desktop=!0),(g.chrome||g.opr||g.safari)&&(g.webkit=!0),g.rv)f.browser="msie",g.msie=!0;g.opr&&(f.browser=
"opera",g.opera=!0);g.safari&&g.android&&(f.browser="android",g.android=!0);g.name=f.browser;g.platform=f.platform;a.browser=g}(jQuery,window);+function(a){function d(d,g){return this.each(function(){var r=a(this),k=r.data("bs.modal"),C=a.extend({},f.DEFAULTS,r.data(),"object"==typeof d&&d);k||r.data("bs.modal",k=new f(this,C));if("string"==typeof d)k[d](g);else C.show&&k.show(g)})}var f=function(d,f){this.options=f;this.$body=a(document.body);this.$element=a(d);this.$backdrop=this.isShown=null;this.scrollbarWidth=0;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},
this))};f.VERSION="3.2.0";f.TRANSITION_DURATION=300;f.BACKDROP_TRANSITION_DURATION=150;f.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};f.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)};f.prototype.show=function(d){var g=this,r=a.Event("show.bs.modal",{relatedTarget:d});this.$element.trigger(r);this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",
'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var k=a.support.transition&&g.$element.hasClass("fade");g.$element.parent().length||g.$element.appendTo(g.$body);g.$element.show().scrollTop(0);k&&g.$element[0].offsetWidth;g.$element.addClass("in").attr("aria-hidden",!1);g.enforceFocus();var r=a.Event("shown.bs.modal",{relatedTarget:d});k?g.$element.find(".modal-dialog").one("bsTransitionEnd",function(){g.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(f.TRANSITION_DURATION):
g.$element.trigger("focus").trigger(r)}))};f.prototype.hide=function(d){d&&d.preventDefault();d=a.Event("hide.bs.modal");this.$element.trigger(d);this.isShown&&!d.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,
this)).emulateTransitionEnd(f.TRANSITION_DURATION):this.hideModal())};f.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))};f.prototype.escape=function(){if(this.isShown&&this.options.keyboard)this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this));else this.isShown||this.$element.off("keydown.dismiss.bs.modal")};
f.prototype.hideModal=function(){var a=this;this.$element.hide();this.backdrop(function(){a.$element.trigger("hidden.bs.modal")})};f.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};f.prototype.backdrop=function(d){var g=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var k=a.support.transition&&r;this.$backdrop=a('<div class="modal-backdrop '+r+'" />').appendTo(this.$body);this.$element.on("mousedown.dismiss.bs.modal",
a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this));k&&this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");d&&(k?this.$backdrop.one("bsTransitionEnd",d).emulateTransitionEnd(f.BACKDROP_TRANSITION_DURATION):d())}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),r=function(){g.removeBackdrop();d&&d()},a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",
r).emulateTransitionEnd(f.BACKDROP_TRANSITION_DURATION):r()):d&&d()};f.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())};f.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",a+this.scrollbarWidth)};f.prototype.resetScrollbar=function(){this.$body.css("padding-right","")};f.prototype.measureScrollbar=function(){var a=
document.createElement("div");a.className="modal-scrollbar-measure";this.$body.append(a);var d=a.offsetWidth-a.clientWidth;this.$body[0].removeChild(a);return d};var g=a.fn.modal;a.fn.modal=d;a.fn.modal.Constructor=f;a.fn.modal.noConflict=function(){a.fn.modal=g;return this};a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(f){var g=a(this),r=g.attr("href"),k=a(g.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),r=k.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(r)&&
r},k.data(),g.data());g.is("a")&&f.preventDefault();k.one("show.bs.modal",function(a){if(!a.isDefaultPrevented())k.one("hidden.bs.modal",function(){g.is(":visible")&&g.trigger("focus")})});d.call(k,r,this)})}(jQuery);(function(a){a.fn.fitVids=function(d){var f={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var g=document.head||document.getElementsByTagName("head")[0],h=document.createElement("div");h.innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>';
g.appendChild(h.childNodes[1])}d&&a.extend(f,d);return this.each(function(){var d='iframe[src*="player.vimeo.com"] iframe[src*="youtube.com"] iframe[src*="youtube-nocookie.com"] iframe[src*="kickstarter.com"][src*="video.html"] object embed'.split(" ");f.customSelector&&d.push(f.customSelector);var g=".fitvidsignore";f.ignore&&(g=g+", "+f.ignore);d=a(this).find(d.join(","));d=d.not("object object");d=d.not(g);d.each(function(){var d=a(this);if(!(0<d.parents(g).length||"embed"===this.tagName.toLowerCase()&&
d.parent("object").length||d.parent(".fluid-width-video-wrapper").length)){d.css("height")||d.css("width")||!isNaN(d.attr("height"))&&!isNaN(d.attr("width"))||(d.attr("height",9),d.attr("width",16));var f="object"===this.tagName.toLowerCase()||d.attr("height")&&!isNaN(parseInt(d.attr("height"),10))?parseInt(d.attr("height"),10):d.height(),b=isNaN(parseInt(d.attr("width"),10))?d.width():parseInt(d.attr("width"),10),f=f/b;d.attr("id")||(b="fitvid"+Math.floor(999999*Math.random()),d.attr("id",b));d.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",
100*f+"%");d.removeAttr("height").removeAttr("width")}})})}})(window.jQuery||window.Zepto);(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function d(a){a=h.json?JSON.stringify(a):String(a);return h.raw?a:encodeURIComponent(a)}function f(d,f){var k;if(h.raw)k=d;else a:{var C=d;0===C.indexOf('"')&&(C=C.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{C=decodeURIComponent(C.replace(g," "));k=h.json?JSON.parse(C):C;break a}catch(b){}k=void 0}return a.isFunction(f)?f(k):k}var g=/\+/g,h=a.cookie=function(g,r,k){if(void 0!==r&&!a.isFunction(r)){k=
a.extend({},h.defaults,k);if("number"===typeof k.expires){var C=k.expires,b=k.expires=new Date;b.setTime(+b+864E5*C)}return document.cookie=[h.raw?g:encodeURIComponent(g),"=",d(r),k.expires?"; expires="+k.expires.toUTCString():"",k.path?"; path="+k.path:"",k.domain?"; domain="+k.domain:"",k.secure?"; secure":""].join("")}k=g?void 0:{};for(var C=document.cookie?document.cookie.split("; "):[],b=0,S=C.length;b<S;b++){var n=C[b].split("="),M;M=n.shift();M=h.raw?M:decodeURIComponent(M);n=n.join("=");if(g&&
g===M){k=f(n,r);break}g||void 0===(n=f(n))||(k[M]=n)}return k};h.defaults={};a.removeCookie=function(d,f){if(void 0===a.cookie(d))return!1;a.cookie(d,"",a.extend({},f,{expires:-1}));return!a.cookie(d)}});jQuery(document).ready(function(a){function d(){a(".browse-widget li").removeClass("open");a(".browse-widget .sub-menu").slideUp(300).removeClass("open")}var f=a.browser.msie,g=a.browser.mozilla,h=a.browser.webkit;a(window).height();!0==f&&a("html").addClass("browser-ie");!0==g&&a("html").addClass("browser-moz");!0==h&&a("html").addClass("browser-webkit");a(".video-container").fitVids();var f=a(".flyout-trigger"),H=a(".flyout-menu"),r=a("#mobile-wrap"),k=a("#header");f.click(function(){a("html").toggleClass("lock-scroll");
H.toggleClass("fly-in");r.toggleClass("fly-out");k.toggleClass("fly-out");a(".mobile-player").toggleClass("fly-out");a(".top-banner").toggleClass("fly-out");a("#listplayer .dots-overlay").toggleClass("fly-out")});a(".search-trigger").click(function(){a('.flyout-search input[type="text"]').focus()});a(".browse-widget .menu li span").click(function(){a(this).parent().hasClass("open")?d():(d(),a(this).parent().addClass("open"),a(this).parent().find(".sub-menu").slideDown(300).addClass("open"))});a(".feed-section .drop-trigger").click(function(){a(".feed-section .sub-menu").toggleClass("open")});
a(".chart-filter .trigger").click(function(){var d=a(this).next();a(".chart-filter .dropdown-menu").not(d).hide();a(this).next().toggle()});f=a(window).height();a("#content").css({"min-height":f-65});a("#follow-download .tab").click(function(){a("#follow-download .tab").removeClass("active");a(this).addClass("active");a("#follow-download .pane").removeClass("active");a("#"+a(this).data("pane-id")).addClass("active")});a("#tabs li").click(function(){a("#tabs li").removeClass("active");a(this).addClass("active");
a(".pane").removeClass("active");a("#"+a(this).data("pane-id")).addClass("active")});a(".track.featured .feed-title a").click(function(){$info=a(this).parents(".track").find(".player_image");ga("send","event",{eventCategory:"Featured Music",eventAction:"Click",eventLabel:$info.data("artist")+" - "+$info.data("title")})});a(".track.featured .play").click(function(){$info=a(this).parents(".track").find(".player_image");ga("send","event",{eventCategory:"Featured Music",eventAction:"Play",eventLabel:$info.data("artist")+
" - "+$info.data("title")})})});
jQuery(window).load(function(){"yes"!=$.cookie("short-hide")&&"yes"!=$.cookie("long-hide")||$(".app-overlay").remove();var a=$.browser.android;!0==$.browser.iphone&&($("#ios-app-overlay").show().delay(350).queue(function(a){$(this).addClass("visible");a()}),$(".ios-app-create").show(),$(".ios-only").show());!0==a&&($(".android-app-link").addClass("visible"),$(".android-app-button").addClass("visible"),$(".android-player-link").addClass("visible"),$("#android-app-overlay").show().delay(350).queue(function(a){$(this).addClass("visible");a()}),
$(".android-app-create").show(),$(".android-only").show());var a=$(".not-now"),d=$(".install-app");$("app-modal-wrap");a.click(function(){$(".app-overlay").hide();$.cookie("short-hide","yes",{path:"/",expires:5})});d.click(function(){$(".app-overlay").hide();$.cookie("long-hide","yes",{path:"/",expires:365})});var f=$(document),g=$(".header");f.scroll(function(){1<f.scrollTop()&&$(".absolute").removeClass("absolute");50<=f.scrollTop()?g.addClass("has-bg"):g.removeClass("has-bg")});var a=$(".flyout-search .clear-field"),
h=$('.flyout-search input[type="text"]');a.click(function(){h.val("")});$(".triple-dots-wrap").click(function(){$(".stats-overlay").removeClass("active");$(this).parents(".track").find(".stats-overlay").addClass("active")});$(".stat-col.share a").click(function(a){a.preventDefault();$(this).parents(".track").find(".share-popover").toggle()});$(".stat-col.close").click(function(){$(this).parent().removeClass("active");$(this).parents(".track").find(".share-popover").hide()});$(".interaction.play").click(function(){$(this).toggleClass("active")})});
(function(a){a(window).load(function(){a(".flyout-menu").removeClass("way-out");a("html").delay(500).queue(function(d){a(this).removeClass("loading").addClass("loaded");d()});a(".track").delay(650).queue(function(d){a(this).addClass("visible");d()})})})(jQuery);$(document).off("click",".launch_login_modal").on("click",".launch_login_modal",function(a){a.preventDefault();if(!audiomack.logged_in){if(0==$("#login_response .modal-body .container").length)var d='<div class="modal hide fade" id="login_response"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">Sign Up or Login</h4></div><div class="modal-body"></div></div>';a=$(this).data("music_id");action=$(this).data("action");
var f=!1,f=void 0!=$(this).data("ref_url")?$(this).data("ref_url"):"";a&&!$.isNumeric(a)&&(a=a.replace(/[^0-9]/gi,""));$.ajax({url:"/account/create/modal",data:{immediate_action:action,music_id:a,ref_url:f},cache:!1,success:function(a){0==$("#login_response .modal-body .container").length&&($(d).appendTo("body"),$("#login_response .modal-body").html(a));$("#login_response").modal("show")},type:"GET"})}});$(document).on("click",".add-to-playlist",function(a){audiomack.logged_in&&(a.preventDefault(),a="/manage/playlists/add-to-playlist/"+$(this).data("id"),$.ajax({url:a,cache:!1,success:function(a){0==$("#playlistModal").length&&$('<div class="modal am-modal-clean playlist-modal" id="playlistModal" tabindex="-1" role="dialog" aria-labelledby="playlistModalLabel" aria-hidden="true"></div>').appendTo("body");$("#playlistModal").html(a);$("#playlistModal").modal("show")},type:"GET"}))});
$(document).on("click","#listPlayerPlaylist",function(a){a.preventDefault();if(audiomack.logged_in){var d="/manage/playlists/add-to-playlist/"+$(this).data("id").replace(/[^0-9]/gi,"");$.ajax({url:d,cache:!1,success:function(a){0==$("#playlistModal").length&&$('<div class="modal am-modal-clean playlist-modal" id="playlistModal" tabindex="-1" role="dialog" aria-labelledby="playlistModalLabel" aria-hidden="true"></div>').appendTo("body");$("#playlistModal").html(a);$("#playlistModal").modal("show")},
type:"GET"})}a.stopPropagation()});$(document).on("click","a.repost",function(a){a.preventDefault();if(audiomack.logged_in){var d=$(this),f=$(this).data("id");"string"==typeof f&&f.replace(/[^0-9]/gi,"");var g=$(this).attr("href");$.ajax({url:g,cache:!1,success:function(a){d.toggleClass("active");"Repost OK"===a&&trackEvent("reup",f,audiomack.music_token)}})}a.stopPropagation()});
$(document).on("click","span.repost",function(a){a.preventDefault();if(audiomack.logged_in){var d=$(this),f=$(this).data("id");"string"==typeof f&&f.replace(/[^0-9]/gi,"");var g=$(this).attr("href");$.ajax({url:g,cache:!1,success:function(a){d.toggleClass("active");"Repost OK"===a&&trackEvent("reup",f,audiomack.music_token)}})}a.stopPropagation()});
$(document).on("click",".track-interactions a.fav-button",function(a){a.preventDefault();if(audiomack.logged_in){var d=$(this),f=$(".player-favorite"),g=d.data("id").toString();$.ajax({url:d.attr("href"),data:{ajax:!0},success:function(a){a.is_favorite?(trackEvent("fav",g.replace("music-",""),audiomack.music_token),d.attr("title","Un-Favorite"),d.addClass("unfavorite"),d.addClass("active"),f.data("id")==g&&$(f).addClass("active"),$(".player_image[data-id="+g+"]").data("favorite",!0)):(d.attr("title",
"Favorite"),d.removeClass("unfavorite"),d.removeClass("active"),$(".player-favorite[data-id="+g+"]").removeClass("active"),f.data("id")==g&&$(f).removeClass("active"),$(".player_image[data-id="+g+"]").data("favorite",!1))}})}});
$(document).on("click","a.fav",function(a){a.preventDefault();if(audiomack.logged_in){var d=$(this),f=$(".player-favorite"),g=d.data("id");$.ajax({url:d.attr("href"),data:{ajax:!0},success:function(a){a.is_favorite?(g.match(/^playlist\-/)?trackPlaylistEvent("fav",g.replace("playlist-",""),audiomack.music_token):trackEvent("fav",g.replace("music-",""),audiomack.music_token),d.attr("title","Un-Favorite"),d.addClass("active"),f.data("id")==g&&$(f).addClass("active"),$(".player_image[data-id="+g+"]").data("favorite",
!0)):(d.attr("title","Favorite"),d.removeClass("active"),$(".player-favorite[data-id="+g+"]").removeClass("active"),f.data("id")==g&&$(f).removeClass("active"),$(".player_image[data-id="+g+"]").data("favorite",!1))}})}});
$(document).on("click","a.favorite",function(a){a.preventDefault();if(audiomack.logged_in){var d=$(this),f=d.data("id");$.ajax({url:d.attr("href"),data:{ajax:!0},success:function(a){a.is_favorite?(d.attr("title","Un-Favorite"),d.addClass("active"),$(".fav[data-id="+f+"]").addClass("active"),$(".player_image[data-id="+f+"]").data("favorite",!0),trackEvent("fav",f.replace("music-",""),audiomack.music_token)):(d.attr("title","Favorite"),d.removeClass("active"),$(".fav[data-id="+f+"]").removeClass("active"),
$(".player_image[data-id="+f+"]").data("favorite",!1))}})}});$(document).on("click",".dots-overlay .mobile-fav",function(a){a.preventDefault();if(audiomack.logged_in){var d=$(this);$.ajax({url:d.attr("href"),data:{ajax:!0},success:function(a){a.is_favorite?(d.html("Un-Favorite this "+a.type),d.attr("title","Un-Favorite"),d.addClass("active"),trackEvent("fav",d.data("music_id").replace("music-",""),audiomack.music_token)):(d.html("Favorite this "+a.type),d.attr("title","Favorite"),d.removeClass("active"))}})}});
function intToHumanReadable(a){1E3>a||(a=1E4>a?numberFormat(a/1E3,2)+"K":1E5>a?numberFormat(a/1E3,1)+"K":1E6>a?numberFormat(a/1E3,0)+"K":1E7>a?numberFormat(a/1E6,2)+"M":1E8>a?numberFormat(a/1E6,1)+"M":numberFormat(a/1E6,0)+"M");return a}
$(document).on("click",".stats-overlay .mobile-fav",function(a){a.preventDefault();if(audiomack.logged_in){var d=$(this);$.ajax({url:d.attr("href"),data:{ajax:!0},success:function(a){var g;a.is_favorite?(d.addClass("active"),trackEvent("fav",d.data("music_id"),audiomack.music_token),g=d.data("favs")+1):(d.removeClass("active"),g=d.data("favs")-1);$(".stat-count",d).text(function(a,f){d.data("favs",g);return"("+intToHumanReadable(g)+")"})}})}});
$(document).on("click",".stats-overlay .mobile-reup",function(a){a.preventDefault();if(audiomack.logged_in){var d=$(this);$.ajax({url:d.attr("href"),data:{ajax:!0},success:function(a){var g;d.toggleClass("active");"Repost OK"===a?(trackEvent("reup",d.data("music_id"),audiomack.music_token),g=d.data("reups")+1):g=d.data("reups")-1;$(".stat-count",d).text(function(a,f){d.data("reups",g);return"("+intToHumanReadable(g)+")"})}})}});
$(document).on("click",".song-actions .favorite-song  a.mobile-fav",function(a){a.preventDefault();if(audiomack.logged_in){var d=$(this);$.ajax({url:d.attr("href"),data:{ajax:!0},success:function(a){a.is_favorite?(d.attr("title","Un-Favorite"),d.find("i").removeClass("star-empty"),d.find("i").addClass("star")):(d.attr("title","Favorite"),d.find("i").removeClass("star"),d.find("i").addClass("star-empty"))}})}});$(function(){$(".follow-artist").on("click",function(a){a.preventDefault();var d=$(this);audiomack.logged_in&&$.ajax({url:$(this).attr("href"),data:{ajax:!0},success:function(a){d.hasClass("follow")?(d.removeClass("follow").addClass("unfollow"),d.find("span").html("Unfollow This User")):(d.removeClass("unfollow").addClass("follow"),d.find("span").html("Follow This User"))},error:function(a,d,h){console.log("Could not favorite: "+d)}})});$(document).on("click",".feed-follow-artist",function(a){a.preventDefault();
var d=$(this),f=$(this).attr("href").replace(/\/artist\//,"").replace(/\/follow$/,"");audiomack.logged_in&&$.ajax({url:$(this).attr("href"),data:{ajax:!0},success:function(a){d.hasClass("follow")?(d.removeClass("follow").addClass("unfollow"),d.text("Following"),$(".follow-artist-"+f).each(function(a){$(this).attr("data-content",$(this).data("content").replace(/Follow/g,"Following").replace(/ follow /g," unfollow "))})):(d.removeClass("unfollow").addClass("follow"),d.text("Follow"),$(".follow-artist-"+
f).each(function(a){$(this).attr("data-content",$(this).data("content").replace(/Following/g,"Follow").replace(/ unfollow /g," follow "))}))},error:function(a,d,f){console.log("Could not favorite: "+d)}})})});/*



 SoundManager 2: JavaScript Sound for the Web
 ----------------------------------------------
 http://schillmania.com/projects/soundmanager2/

 Copyright (c) 2007, Scott Schiller. All rights reserved.
 Code provided under the BSD License:
 http://schillmania.com/projects/soundmanager2/license.txt

 V2.97a.20140901
*/
(function(a,d){function f(f,g){function r(a){return b.preferFlash&&aa&&!b.ignoreFlash&&b.flash[a]!==d&&b.flash[a]}function k(a){return function(d){var l=this._s;l&&l._a?d=a.call(this,d):(l&&l.id?b._wD(l.id+": Ignoring "+d.type):b._wD(M+"Ignoring "+d.type),d=null);return d}}this.setupOptions={url:f||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1E3,
wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"};this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100};this.flash9Options={isMovieStar:null,
usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null};this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null};this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus",
"audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}};this.movieID="sm2-container";this.id=g||"sm2movie";this.debugID="soundmanager-debug";this.debugURLParam=/([#?&])debug=1/i;this.versionNumber="V2.97a.20140901";this.altURL=this.movieURL=this.version=null;this.enabled=this.swfLoaded=!1;this.oMC=null;this.sounds={};this.soundIDs=[];this.didFlashBlock=this.muted=!1;this.filePattern=null;this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i};
this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1};this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null};this.html5={usingFlash:null};this.flash={};this.ignoreFlash=this.html5Only=!1;var C,b=this,S=null,n=null,M="HTML5::",
A,F=navigator.userAgent,N=a.location.href.toString(),m=document,O,B,W,v,w=[],fa=!0,L,X=!1,ba=!1,E=!1,J=!1,Q=!1,y,xa=0,K,D,R,ca,na,da,ha,T,Ga,oa,ra,U,V,sa,ta,Y,ya,ia,pa,ja,e,u,ua,s=["log","info","warn","error"],z,t,bb,za=null,va=null,x,Ra,wa,cb,Ha,Ia,ka,G,Aa=!1,Sa=!1,db,eb,fb,Ja=0,Ba=null,Ka,qa=[],Ca,P=null,gb,La,Da,la,Ma,Ta,hb,I,ib=Array.prototype.slice,Z=!1,Ua,aa,Va,jb,ea,kb,Wa,Na,lb=0,Oa=F.match(/(ipad|iphone|ipod)/i),mb=F.match(/android/i),ma=F.match(/msie/i),sb=F.match(/webkit/i),Pa=F.match(/safari/i)&&
!F.match(/chrome/i),Xa=F.match(/opera/i),Ya=F.match(/(mobile|pre\/|xoom)/i)||Oa||mb,Za=!N.match(/usehtml5audio/i)&&!N.match(/sm2\-ignorebadua/i)&&Pa&&!F.match(/silk/i)&&F.match(/OS X 10_6_([3-7])/i),Ea=a.console!==d&&console.log!==d,$a=m.hasFocus!==d?m.hasFocus():null,Qa=Pa&&(m.hasFocus===d||!m.hasFocus()),nb=!Qa,ob=/(mp3|mp4|mpa|m4a|m4b)/i,Fa=m.location?m.location.protocol.match(/http/i):null,pb=Fa?"":"http://",qb=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,
rb="mpeg4 aac flv mov mp4 m4v f4v m4a m4b mp4v 3gp 3g2".split(" "),tb=RegExp("\\.("+rb.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.useAltURL=!Fa;var ab;try{ab=Audio!==d&&(Xa&&opera!==d&&10>opera.version()?new Audio(null):new Audio).canPlayType!==d}catch(ub){ab=!1}this.hasHTML5=ab;this.setup=function(a){var q=!b.url;a!==d&&E&&P&&b.ok()&&(a.flashVersion!==d||a.url!==d||a.html5Test!==d)&&ka(x("setupLate"));R(a);a&&(q&&ia&&a.url!==d&&b.beginDelayedInit(),
!ia&&a.url!==d&&"complete"===m.readyState&&setTimeout(Y,1));return b};this.supported=this.ok=function(){return P?E&&!J:b.useHTML5Audio&&b.hasHTML5};this.getMovie=function(b){return A(b)||m[b]||a[b]};this.createSound=function(a,q){function l(){e=Ha(e);b.sounds[e.id]=new C(e);b.soundIDs.push(e.id);return b.sounds[e.id]}var c,e;c=null;c="soundManager.createSound(): "+x(E?"notOK":"notReady");if(!E||!b.ok())return ka(c),!1;q!==d&&(a={id:a,url:q});e=D(a);e.url=Ka(e.url);void 0===e.id&&(e.id=b.setupOptions.idPrefix+
lb++);e.id.toString().charAt(0).match(/^[0-9]$/)&&b._wD("soundManager.createSound(): "+x("badID",e.id),2);b._wD("soundManager.createSound(): "+e.id+(e.url?" ("+e.url+")":""),1);if(G(e.id,!0))return b._wD("soundManager.createSound(): "+e.id+" exists",1),b.sounds[e.id];if(La(e))c=l(),b._wD(e.id+": Using HTML5"),c._setup_html5(e);else{if(b.html5Only)return b._wD(e.id+": No HTML5 support for this sound, and no Flash. Exiting."),l();if(b.html5.usingFlash&&e.url&&e.url.match(/data\:/i))return b._wD(e.id+
": data: URIs not supported via Flash. Exiting."),l();8<v&&(null===e.isMovieStar&&(e.isMovieStar=!!(e.serverURL||e.type&&e.type.match(qb)||e.url&&e.url.match(tb))),e.isMovieStar&&(b._wD("soundManager.createSound(): using MovieStar handling"),1<e.loops&&y("noNSLoop")));e=Ia(e,"soundManager.createSound(): ");c=l();8===v?n._createSound(e.id,e.loops||1,e.usePolicyFile):(n._createSound(e.id,e.url,e.usePeakData,e.useWaveformData,e.useEQData,e.isMovieStar,e.isMovieStar?e.bufferTime:!1,e.loops||1,e.serverURL,
e.duration||null,e.autoPlay,!0,e.autoLoad,e.usePolicyFile),e.serverURL||(c.connected=!0,e.onconnect&&e.onconnect.apply(c)));!e.serverURL&&(e.autoLoad||e.autoPlay)&&c.load(e)}!e.serverURL&&e.autoPlay&&c.play();return c};this.destroySound=function(a,d){if(!G(a))return!1;var e=b.sounds[a],c;e._iO={};e.stop();e.unload();for(c=0;c<b.soundIDs.length;c++)if(b.soundIDs[c]===a){b.soundIDs.splice(c,1);break}d||e.destruct(!0);delete b.sounds[a];return!0};this.load=function(a,d){return G(a)?b.sounds[a].load(d):
!1};this.unload=function(a){return G(a)?b.sounds[a].unload():!1};this.onposition=this.onPosition=function(a,d,e,c){return G(a)?b.sounds[a].onposition(d,e,c):!1};this.clearOnPosition=function(a,d,e){return G(a)?b.sounds[a].clearOnPosition(d,e):!1};this.start=this.play=function(a,d){var e=null,c=d&&!(d instanceof Object);if(!E||!b.ok())return ka("soundManager.play(): "+x(E?"notOK":"notReady")),!1;if(G(a,c))c&&(d={url:d});else{if(!c)return!1;c&&(d={url:d});d&&d.url&&(b._wD('soundManager.play(): Attempting to create "'+
a+'"',1),d.id=a,e=b.createSound(d).play())}null===e&&(e=b.sounds[a].play(d));return e};this.setPosition=function(a,d){return G(a)?b.sounds[a].setPosition(d):!1};this.stop=function(a){if(!G(a))return!1;b._wD("soundManager.stop("+a+")",1);return b.sounds[a].stop()};this.stopAll=function(){var a;b._wD("soundManager.stopAll()",1);for(a in b.sounds)b.sounds.hasOwnProperty(a)&&b.sounds[a].stop()};this.pause=function(a){return G(a)?b.sounds[a].pause():!1};this.pauseAll=function(){var a;for(a=b.soundIDs.length-
1;0<=a;a--)b.sounds[b.soundIDs[a]].pause()};this.resume=function(a){return G(a)?b.sounds[a].resume():!1};this.resumeAll=function(){var a;for(a=b.soundIDs.length-1;0<=a;a--)b.sounds[b.soundIDs[a]].resume()};this.togglePause=function(a){return G(a)?b.sounds[a].togglePause():!1};this.setPan=function(a,d){return G(a)?b.sounds[a].setPan(d):!1};this.setVolume=function(a,d){return G(a)?b.sounds[a].setVolume(d):!1};this.mute=function(a){var d=0;a instanceof String&&(a=null);if(a){if(!G(a))return!1;b._wD('soundManager.mute(): Muting "'+
a+'"');return b.sounds[a].mute()}b._wD("soundManager.mute(): Muting all sounds");for(d=b.soundIDs.length-1;0<=d;d--)b.sounds[b.soundIDs[d]].mute();return b.muted=!0};this.muteAll=function(){b.mute()};this.unmute=function(a){a instanceof String&&(a=null);if(a){if(!G(a))return!1;b._wD('soundManager.unmute(): Unmuting "'+a+'"');return b.sounds[a].unmute()}b._wD("soundManager.unmute(): Unmuting all sounds");for(a=b.soundIDs.length-1;0<=a;a--)b.sounds[b.soundIDs[a]].unmute();b.muted=!1;return!0};this.unmuteAll=
function(){b.unmute()};this.toggleMute=function(a){return G(a)?b.sounds[a].toggleMute():!1};this.getMemoryUse=function(){var a=0;n&&8!==v&&(a=parseInt(n._getMemoryUse(),10));return a};this.disable=function(p){var e;p===d&&(p=!1);if(J)return!1;J=!0;y("shutdown",1);for(e=b.soundIDs.length-1;0<=e;e--)z(b.sounds[b.soundIDs[e]]);K(p);I.remove(a,"load",ha);return!0};this.canPlayMIME=function(a){var d;b.hasHTML5&&(d=Da({type:a}));!d&&P&&(d=a&&b.ok()?!!(8<v&&a.match(qb)||a.match(b.mimePattern)):null);return d};
this.canPlayURL=function(a){var d;b.hasHTML5&&(d=Da({url:a}));!d&&P&&(d=a&&b.ok()?!!a.match(b.filePattern):null);return d};this.canPlayLink=function(a){return a.type!==d&&a.type&&b.canPlayMIME(a.type)?!0:b.canPlayURL(a.href)};this.getSoundById=function(a,d){if(!a)return null;var e=b.sounds[a];e||d||b._wD('soundManager.getSoundById(): Sound "'+a+'" not found.',2);return e};this.onready=function(p,d){if("function"===typeof p)E&&b._wD(x("queue","onready")),d||(d=a),na("onready",p,d),da();else throw x("needFunction",
"onready");return!0};this.ontimeout=function(p,d){if("function"===typeof p)E&&b._wD(x("queue","ontimeout")),d||(d=a),na("ontimeout",p,d),da({type:"ontimeout"});else throw x("needFunction","ontimeout");return!0};this._writeDebug=function(a,e){var l,c;if(!b.debugMode)return!1;if(Ea&&b.useConsole){if(e&&"object"===typeof e)console.log(a,e);else if(s[e]!==d)console[s[e]](a);else console.log(a);if(b.consoleOnly)return!0}l=A("soundmanager-debug");if(!l)return!1;c=m.createElement("div");0===++xa%2&&(c.className=
"sm2-alt");e=e===d?0:parseInt(e,10);c.appendChild(m.createTextNode(a));e&&(2<=e&&(c.style.fontWeight="bold"),3===e&&(c.style.color="#ff3333"));l.insertBefore(c,l.firstChild);return!0};-1!==N.indexOf("sm2-debug=alert")&&(this._writeDebug=function(b){a.alert(b)});this._wD=this._writeDebug;this._debug=function(){var a,d;y("currentObj",1);a=0;for(d=b.soundIDs.length;a<d;a++)b.sounds[b.soundIDs[a]]._debug()};this.reboot=function(d,e){b.soundIDs.length&&b._wD("Destroying "+b.soundIDs.length+" SMSound object"+
(1!==b.soundIDs.length?"s":"")+"...");var l,c,f;for(l=b.soundIDs.length-1;0<=l;l--)b.sounds[b.soundIDs[l]].destruct();if(n)try{ma&&(va=n.innerHTML),za=n.parentNode.removeChild(n)}catch(g){y("badRemove",2)}va=za=P=n=null;b.enabled=ia=E=Aa=Sa=X=ba=J=Z=b.swfLoaded=!1;b.soundIDs=[];b.sounds={};lb=0;if(d)w=[];else for(l in w)if(w.hasOwnProperty(l))for(c=0,f=w[l].length;c<f;c++)w[l][c].fired=!1;e||b._wD("soundManager: Rebooting...");b.html5={usingFlash:null};b.flash={};b.html5Only=!1;b.ignoreFlash=!1;a.setTimeout(function(){ta();
e||b.beginDelayedInit()},20);return b};this.reset=function(){y("reset");return b.reboot(!0,!0)};this.getMoviePercent=function(){return n&&"PercentLoaded"in n?n.PercentLoaded():null};this.beginDelayedInit=function(){Q=!0;Y();setTimeout(function(){if(Sa)return!1;ja();sa();return Sa=!0},20);T()};this.destruct=function(){b._wD("soundManager.destruct()");b.disable(!0)};C=function(a){var q,l,c=this,f,g,u,s,k,ua,m=!1,z=[],t=0,r,va,h=null,w;l=q=null;this.sID=this.id=a.id;this.url=a.url;this._iO=this.instanceOptions=
this.options=D(a);this.pan=this.options.pan;this.volume=this.options.volume;this.isHTML5=!1;this._a=null;w=this.url?!1:!0;this.id3={};this._debug=function(){b._wD(c.id+": Merged options:",c.options)};this.load=function(a){var p=null,q;a!==d?c._iO=D(a,c.options):(a=c.options,c._iO=a,h&&h!==c.url&&(y("manURL"),c._iO.url=c.url,c.url=null));c._iO.url||(c._iO.url=c.url);c._iO.url=Ka(c._iO.url);q=c.instanceOptions=c._iO;b._wD(c.id+": load ("+q.url+")");if(!q.url&&!c.url)return b._wD(c.id+": load(): url is unassigned. Exiting.",
2),c;c.isHTML5||8!==v||c.url||q.autoPlay||b._wD(c.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1);if(q.url===c.url&&0!==c.readyState&&2!==c.readyState)return y("onURL",1),3===c.readyState&&q.onload&&Na(c,function(){q.onload.apply(c,[!!c.duration])}),c;c.loaded=!1;c.readyState=1;c.playState=0;c.id3={};if(La(q))p=c._setup_html5(q),p._called_load?b._wD(c.id+": Ignoring request to load again"):(c._html5_canplay=!1,c.url!==q.url&&(b._wD(y("manURL")+": "+q.url),c._a.src=q.url,
c.setPosition(0)),c._a.autobuffer="auto",c._a.preload="auto",c._a._called_load=!0);else{if(b.html5Only)return b._wD(c.id+": No flash support. Exiting."),c;if(c._iO.url&&c._iO.url.match(/data\:/i))return b._wD(c.id+": data: URIs not supported via Flash. Exiting."),c;try{c.isHTML5=!1,c._iO=Ia(Ha(q)),c._iO.autoPlay&&(c._iO.position||c._iO.from)&&(b._wD(c.id+": Disabling autoPlay because of non-zero offset case"),c._iO.autoPlay=!1),q=c._iO,8===v?n._load(c.id,q.url,q.stream,q.autoPlay,q.usePolicyFile):
n._load(c.id,q.url,!!q.stream,!!q.autoPlay,q.loops||1,!!q.autoLoad,q.usePolicyFile)}catch(l){y("smError",2),L("onload",!1),e({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}c.url=q.url;return c};this.unload=function(){0!==c.readyState&&(b._wD(c.id+": unload()"),c.isHTML5?(s(),c._a&&(c._a.pause(),h=Ma(c._a))):8===v?n._unload(c.id,"about:blank"):n._unload(c.id),f());return c};this.destruct=function(a){b._wD(c.id+": Destruct");c.isHTML5?(s(),c._a&&(c._a.pause(),Ma(c._a),Z||u(),c._a._s=null,c._a=null)):
(c._iO.onfailure=null,n._destroySound(c.id));a||b.destroySound(c.id,!0)};this.start=this.play=function(a,p){var e,q,l,f,g,u=!0,u=null;e=c.id+": play(): ";p=p===d?!0:p;a||(a={});c.url&&(c._iO.url=c.url);c._iO=D(c._iO,c.options);c._iO=D(a,c._iO);c._iO.url=Ka(c._iO.url);c.instanceOptions=c._iO;if(!c.isHTML5&&c._iO.serverURL&&!c.connected)return c.getAutoPlay()||(b._wD(e+" Netstream not connected yet - setting autoPlay"),c.setAutoPlay(!0)),c;La(c._iO)&&(c._setup_html5(c._iO),k());1===c.playState&&!c.paused&&
((q=c._iO.multiShot)?b._wD(e+"Already playing (multi-shot)",1):(b._wD(e+"Already playing (one-shot)",1),c.isHTML5&&c.setPosition(c._iO.position),u=c));if(null!==u)return u;a.url&&a.url!==c.url&&(c.readyState||c.isHTML5||8!==v||!w?c.load(c._iO):w=!1);c.loaded?b._wD(e.substr(0,e.lastIndexOf(":"))):0===c.readyState?(b._wD(e+"Attempting to load"),c.isHTML5||b.html5Only?c.isHTML5?c.load(c._iO):(b._wD(e+"Unsupported type. Exiting."),u=c):(c._iO.autoPlay=!0,c.load(c._iO)),c.instanceOptions=c._iO):2===c.readyState?
(b._wD(e+"Could not load - exiting",2),u=c):b._wD(e+"Loading - attempting to play...");if(null!==u)return u;!c.isHTML5&&9===v&&0<c.position&&c.position===c.duration&&(b._wD(e+"Sound at end, resetting to position:0"),a.position=0);if(c.paused&&0<=c.position&&(!c._iO.serverURL||0<c.position))b._wD(e+"Resuming from paused state",1),c.resume();else{c._iO=D(a,c._iO);if((!c.isHTML5&&null!==c._iO.position&&0<c._iO.position||null!==c._iO.from&&0<c._iO.from||null!==c._iO.to)&&0===c.instanceCount&&0===c.playState&&
!c._iO.serverURL){q=function(){c._iO=D(a,c._iO);c.play(c._iO)};c.isHTML5&&!c._html5_canplay?(b._wD(e+"Beginning load for non-zero offset case"),c.load({_oncanplay:q}),u=!1):c.isHTML5||c.loaded||c.readyState&&2===c.readyState||(b._wD(e+"Preloading for non-zero offset case"),c.load({onload:q}),u=!1);if(null!==u)return u;c._iO=va()}(!c.instanceCount||c._iO.multiShotEvents||c.isHTML5&&c._iO.multiShot&&!Z||!c.isHTML5&&8<v&&!c.getAutoPlay())&&c.instanceCount++;c._iO.onposition&&0===c.playState&&ua(c);c.playState=
1;c.paused=!1;c.position=c._iO.position===d||isNaN(c._iO.position)?0:c._iO.position;c.isHTML5||(c._iO=Ia(Ha(c._iO)));c._iO.onplay&&p&&(c._iO.onplay.apply(c),m=!0);c.setVolume(c._iO.volume,!0);c.setPan(c._iO.pan,!0);c.isHTML5?2>c.instanceCount?(k(),e=c._setup_html5(),c.setPosition(c._iO.position),e.play()):(b._wD(c.id+": Cloning Audio() for instance #"+c.instanceCount+"..."),l=new Audio(c._iO.url),f=function(){I.remove(l,"ended",f);c._onfinish(c);Ma(l);l=null},g=function(){I.remove(l,"canplay",g);
try{l.currentTime=c._iO.position/1E3}catch(a){ka(c.id+": multiShot play() failed to apply position of "+c._iO.position/1E3)}l.play()},I.add(l,"ended",f),void 0!==c._iO.volume&&(l.volume=Math.max(0,Math.min(1,c._iO.volume/100))),c.muted&&(l.muted=!0),c._iO.position?I.add(l,"canplay",g):l.play()):(u=n._start(c.id,c._iO.loops||1,9===v?c.position:c.position/1E3,c._iO.multiShot||!1),9===v&&!u&&(b._wD(e+"No sound hardware, or 32-sound ceiling hit",2),c._iO.onplayerror&&c._iO.onplayerror.apply(c)))}return c};
this.stop=function(a){var d=c._iO;1===c.playState&&(b._wD(c.id+": stop()"),c._onbufferchange(0),c._resetOnPosition(0),c.paused=!1,c.isHTML5||(c.playState=0),r(),d.to&&c.clearOnPosition(d.to),c.isHTML5?c._a&&(a=c.position,c.setPosition(0),c.position=a,c._a.pause(),c.playState=0,c._onTimer(),s()):(n._stop(c.id,a),d.serverURL&&c.unload()),c.instanceCount=0,c._iO={},d.onstop&&d.onstop.apply(c));return c};this.setAutoPlay=function(a){b._wD(c.id+": Autoplay turned "+(a?"on":"off"));c._iO.autoPlay=a;c.isHTML5||
(n._setAutoPlay(c.id,a),a&&!c.instanceCount&&1===c.readyState&&(c.instanceCount++,b._wD(c.id+": Incremented instance count to "+c.instanceCount)))};this.getAutoPlay=function(){return c._iO.autoPlay};this.setPosition=function(a){a===d&&(a=0);var p=c.isHTML5?Math.max(a,0):Math.min(c.duration||c._iO.duration,Math.max(a,0));c.position=p;a=c.position/1E3;c._resetOnPosition(c.position);c._iO.position=p;if(c.isHTML5){if(c._a){if(c._html5_canplay){if(c._a.currentTime!==a){b._wD(c.id+": setPosition("+a+")");
try{c._a.currentTime=a,(0===c.playState||c.paused)&&c._a.pause()}catch(e){b._wD(c.id+": setPosition("+a+") failed: "+e.message,2)}}}else if(a)return b._wD(c.id+": setPosition("+a+"): Cannot seek yet, sound not ready",2),c;c.paused&&c._onTimer(!0)}}else a=9===v?c.position:a,c.readyState&&2!==c.readyState&&n._setPosition(c.id,a,c.paused||!c.playState,c._iO.multiShot);return c};this.pause=function(a){if(c.paused||0===c.playState&&1!==c.readyState)return c;b._wD(c.id+": pause()");c.paused=!0;c.isHTML5?
(c._setup_html5().pause(),s()):(a||a===d)&&n._pause(c.id,c._iO.multiShot);c._iO.onpause&&c._iO.onpause.apply(c);return c};this.resume=function(){var a=c._iO;if(!c.paused)return c;b._wD(c.id+": resume()");c.paused=!1;c.playState=1;c.isHTML5?(c._setup_html5().play(),k()):(a.isMovieStar&&!a.serverURL&&c.setPosition(c.position),n._pause(c.id,a.multiShot));!m&&a.onplay?(a.onplay.apply(c),m=!0):a.onresume&&a.onresume.apply(c);return c};this.togglePause=function(){b._wD(c.id+": togglePause()");if(0===c.playState)return c.play({position:9!==
v||c.isHTML5?c.position/1E3:c.position}),c;c.paused?c.resume():c.pause();return c};this.setPan=function(a,b){a===d&&(a=0);b===d&&(b=!1);c.isHTML5||n._setPan(c.id,a);c._iO.pan=a;b||(c.pan=a,c.options.pan=a);return c};this.setVolume=function(a,p){a===d&&(a=100);p===d&&(p=!1);c.isHTML5?c._a&&(b.muted&&!c.muted&&(c.muted=!0,c._a.muted=!0),c._a.volume=Math.max(0,Math.min(1,a/100))):n._setVolume(c.id,b.muted&&!c.muted||c.muted?0:a);c._iO.volume=a;p||(c.volume=a,c.options.volume=a);return c};this.mute=function(){c.muted=
!0;c.isHTML5?c._a&&(c._a.muted=!0):n._setVolume(c.id,0);return c};this.unmute=function(){c.muted=!1;var a=c._iO.volume!==d;c.isHTML5?c._a&&(c._a.muted=!1):n._setVolume(c.id,a?c._iO.volume:c.options.volume);return c};this.toggleMute=function(){return c.muted?c.unmute():c.mute()};this.onposition=this.onPosition=function(a,b,p){z.push({position:parseInt(a,10),method:b,scope:p!==d?p:c,fired:!1});return c};this.clearOnPosition=function(a,c){var b;a=parseInt(a,10);if(isNaN(a))return!1;for(b=0;b<z.length;b++)a!==
z[b].position||c&&c!==z[b].method||(z[b].fired&&t--,z.splice(b,1))};this._processOnPosition=function(){var a,b;a=z.length;if(!a||!c.playState||t>=a)return!1;for(a-=1;0<=a;a--)b=z[a],!b.fired&&c.position>=b.position&&(b.fired=!0,t++,b.method.apply(b.scope,[b.position]));return!0};this._resetOnPosition=function(a){var c,b;c=z.length;if(!c)return!1;for(c-=1;0<=c;c--)b=z[c],b.fired&&a<=b.position&&(b.fired=!1,t--);return!0};va=function(){var a=c._iO,d=a.from,p=a.to,e,q;q=function(){b._wD(c.id+': "To" time of '+
p+" reached.");c.clearOnPosition(p,q);c.stop()};e=function(){b._wD(c.id+': Playing "from" '+d);if(null!==p&&!isNaN(p))c.onPosition(p,q)};null!==d&&!isNaN(d)&&(a.position=d,a.multiShot=!1,e());return a};ua=function(){var a,b=c._iO.onposition;if(b)for(a in b)if(b.hasOwnProperty(a))c.onPosition(parseInt(a,10),b[a])};r=function(){var a,b=c._iO.onposition;if(b)for(a in b)b.hasOwnProperty(a)&&c.clearOnPosition(parseInt(a,10))};k=function(){c.isHTML5&&db(c)};s=function(){c.isHTML5&&eb(c)};f=function(a){a||
(z=[],t=0);m=!1;c._hasTimer=null;c._a=null;c._html5_canplay=!1;c.bytesLoaded=null;c.bytesTotal=null;c.duration=c._iO&&c._iO.duration?c._iO.duration:null;c.durationEstimate=null;c.buffered=[];c.eqData=[];c.eqData.left=[];c.eqData.right=[];c.failures=0;c.isBuffering=!1;c.instanceOptions={};c.instanceCount=0;c.loaded=!1;c.metadata={};c.readyState=0;c.muted=!1;c.paused=!1;c.peakData={left:0,right:0};c.waveformData={left:[],right:[]};c.playState=0;c.position=null;c.id3={}};f();this._onTimer=function(a){var b,
d=!1,p={};if(c._hasTimer||a)return c._a&&(a||(0<c.playState||1===c.readyState)&&!c.paused)&&(b=c._get_html5_duration(),b!==q&&(q=b,c.duration=b,d=!0),c.durationEstimate=c.duration,b=1E3*c._a.currentTime||0,b!==l&&(l=b,d=!0),(d||a)&&c._whileplaying(b,p,p,p,p)),d};this._get_html5_duration=function(){var a=c._iO;return(a=c._a&&c._a.duration?1E3*c._a.duration:a&&a.duration?a.duration:null)&&!isNaN(a)&&Infinity!==a?a:null};this._apply_loop=function(a,c){!a.loop&&1<c&&b._wD("Note: Native HTML5 looping is infinite.",
1);a.loop=1<c?"loop":""};this._setup_html5=function(a){a=D(c._iO,a);var b=Z?S:c._a,d=decodeURI(a.url),p;Z?d===decodeURI(Ua)&&(p=!0):d===decodeURI(h)&&(p=!0);if(b){if(b._s)if(Z)b._s&&b._s.playState&&!p&&b._s.stop();else if(!Z&&d===decodeURI(h))return c._apply_loop(b,a.loops),b;p||(h&&f(!1),b.src=a.url,Ua=h=c.url=a.url,b._called_load=!1)}else a.autoLoad||a.autoPlay?(c._a=new Audio(a.url),c._a.load()):c._a=Xa&&10>opera.version()?new Audio(null):new Audio,b=c._a,b._called_load=!1,Z&&(S=b);c.isHTML5=!0;
c._a=b;b._s=c;g();c._apply_loop(b,a.loops);a.autoLoad||a.autoPlay?c.load():(b.autobuffer=!1,b.preload="auto");return b};g=function(){if(c._a._added_events)return!1;var a;c._a._added_events=!0;for(a in ea)ea.hasOwnProperty(a)&&c._a&&c._a.addEventListener(a,ea[a],!1);return!0};u=function(){var a;b._wD(c.id+": Removing event listeners");c._a._added_events=!1;for(a in ea)ea.hasOwnProperty(a)&&c._a&&c._a.removeEventListener(a,ea[a],!1)};this._onload=function(a){var d=!!a||!c.isHTML5&&8===v&&c.duration;
a=c.id+": ";b._wD(a+(d?"onload()":"Failed to load / invalid sound?"+(c.duration?" -":" Zero-length duration reported.")+" ("+c.url+")"),d?1:2);d||c.isHTML5||(!0===b.sandbox.noRemote&&b._wD(a+x("noNet"),1),!0!==b.sandbox.noLocal||b._wD(a+x("noLocal"),1));c.loaded=d;c.readyState=d?3:2;c._onbufferchange(0);c._iO.onload&&Na(c,function(){c._iO.onload.apply(c,[d])});return!0};this._onbufferchange=function(a){if(0===c.playState||a&&c.isBuffering||!a&&!c.isBuffering)return!1;c.isBuffering=1===a;c._iO.onbufferchange&&
(b._wD(c.id+": Buffer state change: "+a),c._iO.onbufferchange.apply(c,[a]));return!0};this._onsuspend=function(){c._iO.onsuspend&&(b._wD(c.id+": Playback suspended"),c._iO.onsuspend.apply(c));return!0};this._onfailure=function(a,d,p){c.failures++;b._wD(c.id+": Failure ("+c.failures+"): "+a);if(c._iO.onfailure&&1===c.failures)c._iO.onfailure(a,d,p);else b._wD(c.id+": Ignoring failure")};this._onwarning=function(a,b,d){if(c._iO.onwarning)c._iO.onwarning(a,b,d)};this._onfinish=function(){var a=c._iO.onfinish;
c._onbufferchange(0);c._resetOnPosition(0);c.instanceCount&&(c.instanceCount--,c.instanceCount||(r(),c.playState=0,c.paused=!1,c.instanceCount=0,c.instanceOptions={},c._iO={},s(),c.isHTML5&&(c.position=0)),(!c.instanceCount||c._iO.multiShotEvents)&&a)&&(b._wD(c.id+": onfinish()"),Na(c,function(){a.apply(c)}))};this._whileloading=function(a,b,d,p){var e=c._iO;c.bytesLoaded=a;c.bytesTotal=b;c.duration=Math.floor(d);c.bufferLength=p;c.durationEstimate=c.isHTML5||e.isMovieStar?c.duration:e.duration?c.duration>
e.duration?c.duration:e.duration:parseInt(c.bytesTotal/c.bytesLoaded*c.duration,10);c.isHTML5||(c.buffered=[{start:0,end:c.duration}]);(3!==c.readyState||c.isHTML5)&&e.whileloading&&e.whileloading.apply(c)};this._whileplaying=function(a,b,p,e,q){var l=c._iO;if(isNaN(a)||null===a)return!1;c.position=Math.max(0,a);c._processOnPosition();!c.isHTML5&&8<v&&(l.usePeakData&&b!==d&&b&&(c.peakData={left:b.leftPeak,right:b.rightPeak}),l.useWaveformData&&p!==d&&p&&(c.waveformData={left:p.split(","),right:e.split(",")}),
l.useEQData&&q!==d&&q&&q.leftEQ&&(a=q.leftEQ.split(","),c.eqData=a,c.eqData.left=a,q.rightEQ!==d&&q.rightEQ&&(c.eqData.right=q.rightEQ.split(","))));1===c.playState&&(!c.isHTML5&&8===v&&!c.position&&c.isBuffering&&c._onbufferchange(0),l.whileplaying&&l.whileplaying.apply(c));return!0};this._oncaptiondata=function(a){b._wD(c.id+": Caption data received.");c.captiondata=a;c._iO.oncaptiondata&&c._iO.oncaptiondata.apply(c,[a])};this._onmetadata=function(a,d){b._wD(c.id+": Metadata received.");var p={},
e,q;e=0;for(q=a.length;e<q;e++)p[a[e]]=d[e];c.metadata=p;console.log("updated metadata",c.metadata);c._iO.onmetadata&&c._iO.onmetadata.call(c,c.metadata)};this._onid3=function(a,d){b._wD(c.id+": ID3 data received.");var p=[],e,q;e=0;for(q=a.length;e<q;e++)p[a[e]]=d[e];c.id3=D(c.id3,p);c._iO.onid3&&c._iO.onid3.apply(c)};this._onconnect=function(a){a=1===a;b._wD(c.id+": "+(a?"Connected.":"Failed to connect? - "+c.url),a?1:2);if(c.connected=a)c.failures=0,G(c.id)&&(c.getAutoPlay()?c.play(d,c.getAutoPlay()):
c._iO.autoLoad&&c.load()),c._iO.onconnect&&c._iO.onconnect.apply(c,[a])};this._ondataerror=function(a){0<c.playState&&(b._wD(c.id+": Data error: "+a),c._iO.ondataerror&&c._iO.ondataerror.apply(c))};this._debug()};pa=function(){return m.body||m.getElementsByTagName("div")[0]};A=function(a){return m.getElementById(a)};D=function(a,e){var l=a||{},c,f;c=e===d?b.defaultOptions:e;for(f in c)c.hasOwnProperty(f)&&l[f]===d&&(l[f]="object"!==typeof c[f]||null===c[f]?c[f]:D(l[f],c[f]));return l};Na=function(b,
d){b.isHTML5||8!==v?d():a.setTimeout(d,0)};ca={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1};R=function(a,e){var l,c=!0,f=e!==d,g=b.setupOptions;if(a===d){c=[];for(l in g)g.hasOwnProperty(l)&&c.push(l);for(l in ca)ca.hasOwnProperty(l)&&("object"===typeof b[l]?c.push(l+": {...}"):b[l]instanceof Function?c.push(l+": function() {...}"):c.push(l));b._wD(x("setup",c.join(", ")));return!1}for(l in a)if(a.hasOwnProperty(l))if("object"!==typeof a[l]||null===a[l]||a[l]instanceof
Array||a[l]instanceof RegExp)f&&ca[e]!==d?b[e][l]=a[l]:g[l]!==d?(b.setupOptions[l]=a[l],b[l]=a[l]):ca[l]===d?(ka(x(b[l]===d?"setupUndef":"setupError",l),2),c=!1):b[l]instanceof Function?b[l].apply(b,a[l]instanceof Array?a[l]:[a[l]]):b[l]=a[l];else if(ca[l]===d)ka(x(b[l]===d?"setupUndef":"setupError",l),2),c=!1;else return R(a[l],l);return c};I=function(){function b(a){a=ib.call(a);var c=a.length;e?(a[1]="on"+a[1],3<c&&a.pop()):3===c&&a.push(!1);return a}function d(a,b){var p=a.shift(),q=[c[b]];if(e)p[q](a[0],
a[1]);else p[q].apply(p,a)}var e=a.attachEvent,c={add:e?"attachEvent":"addEventListener",remove:e?"detachEvent":"removeEventListener"};return{add:function(){d(b(arguments),"add")},remove:function(){d(b(arguments),"remove")}}}();ea={abort:k(function(){b._wD(this._s.id+": abort")}),canplay:k(function(){var a=this._s,e;if(a._html5_canplay)return!0;a._html5_canplay=!0;b._wD(a.id+": canplay");a._onbufferchange(0);e=a._iO.position===d||isNaN(a._iO.position)?null:a._iO.position/1E3;if(this.currentTime!==
e){b._wD(a.id+": canplay: Setting position to "+e);try{this.currentTime=e}catch(l){b._wD(a.id+": canplay: Setting position of "+e+" failed: "+l.message,2)}}a._iO._oncanplay&&a._iO._oncanplay()}),canplaythrough:k(function(){var a=this._s;a.loaded||(a._onbufferchange(0),a._whileloading(a.bytesLoaded,a.bytesTotal,a._get_html5_duration()),a._onload(!0))}),durationchange:k(function(){var a=this._s,d;d=a._get_html5_duration();!isNaN(d)&&d!==a.duration&&(b._wD(this._s.id+": durationchange ("+d+")"+(a.duration?
", previously "+a.duration:"")),a.durationEstimate=a.duration=d)}),ended:k(function(){var a=this._s;b._wD(a.id+": ended");a._onfinish()}),error:k(function(){b._wD(this._s.id+": HTML5 error, code "+this.error.code);this._s._onload(!1)}),loadeddata:k(function(){var a=this._s;b._wD(a.id+": loadeddata");a._loaded||Pa||(a.duration=a._get_html5_duration())}),loadedmetadata:k(function(){b._wD(this._s.id+": loadedmetadata")}),loadstart:k(function(){b._wD(this._s.id+": loadstart");this._s._onbufferchange(1)}),
play:k(function(){this._s._onbufferchange(0)}),playing:k(function(){b._wD(this._s.id+": playing "+String.fromCharCode(9835));this._s._onbufferchange(0)}),progress:k(function(a){var d=this._s,e,c,f,g="progress"===a.type,u=a.target.buffered,s=a.loaded||0,k=a.total||1;d.buffered=[];if(u&&u.length){e=0;for(c=u.length;e<c;e++)d.buffered.push({start:1E3*u.start(e),end:1E3*u.end(e)});e=1E3*(u.end(0)-u.start(0));s=Math.min(1,e/(1E3*a.target.duration));if(g&&1<u.length){f=[];c=u.length;for(e=0;e<c;e++)f.push(1E3*
a.target.buffered.start(e)+"-"+1E3*a.target.buffered.end(e));b._wD(this._s.id+": progress, timeRanges: "+f.join(", "))}g&&!isNaN(s)&&b._wD(this._s.id+": progress, "+Math.floor(100*s)+"% loaded")}isNaN(s)||(d._whileloading(s,k,d._get_html5_duration()),s&&k&&s===k&&ea.canplaythrough.call(this,a))}),ratechange:k(function(){b._wD(this._s.id+": ratechange")}),suspend:k(function(a){var d=this._s;b._wD(this._s.id+": suspend");ea.progress.call(this,a);d._onsuspend()}),stalled:k(function(){b._wD(this._s.id+
": stalled")}),timeupdate:k(function(){this._s._onTimer()}),waiting:k(function(){var a=this._s;b._wD(this._s.id+": waiting");a._onbufferchange(1)})};La=function(a){return a&&(a.type||a.url||a.serverURL)?a.serverURL||a.type&&r(a.type)?!1:a.type?Da({type:a.type}):Da({url:a.url})||b.html5Only||a.url.match(/data\:/i):!1};Ma=function(a){var d;a&&(d=Pa?"about:blank":b.html5.canPlayType("audio/wav")?"data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==":"about:blank",
a.src=d,void 0!==a._called_unload&&(a._called_load=!1));Z&&(Ua=null);return d};Da=function(a){if(!b.useHTML5Audio||!b.hasHTML5)return!1;var e=a.url||null;a=a.type||null;var f=b.audioFormats,c;if(a&&b.html5[a]!==d)return b.html5[a]&&!r(a);if(!la){la=[];for(c in f)f.hasOwnProperty(c)&&(la.push(c),f[c].related&&(la=la.concat(f[c].related)));la=RegExp("\\.("+la.join("|")+")(\\?.*)?$","i")}(c=e?e.toLowerCase().match(la):null)&&c.length?c=c[1]:a&&(e=a.indexOf(";"),c=(-1!==e?a.substr(0,e):a).substr(6));
c&&b.html5[c]!==d?e=b.html5[c]&&!r(c):(a="audio/"+c,e=b.html5.canPlayType({type:a}),e=(b.html5[c]=e)&&b.html5[a]&&!r(a));return e};hb=function(){function a(c){var d,p=d=!1;if(!e||"function"!==typeof e.canPlayType)return d;if(c instanceof Array){s=0;for(d=c.length;s<d;s++)if(b.html5[c[s]]||e.canPlayType(c[s]).match(b.html5Test))p=!0,b.html5[c[s]]=!0,b.flash[c[s]]=!!c[s].match(ob);d=p}else c=e&&"function"===typeof e.canPlayType?e.canPlayType(c):!1,d=!(!c||!c.match(b.html5Test));return d}if(!b.useHTML5Audio||
!b.hasHTML5)return P=b.html5.usingFlash=!0,!1;var e=Audio!==d?Xa&&10>opera.version()?new Audio(null):new Audio:null,f,c,g={},u,s;u=b.audioFormats;for(f in u)if(u.hasOwnProperty(f)&&(c="audio/"+f,g[f]=a(u[f].type),g[c]=g[f],f.match(ob)?(b.flash[f]=!0,b.flash[c]=!0):(b.flash[f]=!1,b.flash[c]=!1),u[f]&&u[f].related))for(s=u[f].related.length-1;0<=s;s--)g["audio/"+u[f].related[s]]=g[f],b.html5[u[f].related[s]]=g[f],b.flash[u[f].related[s]]=g[f];g.canPlayType=e?a:null;b.html5=D(b.html5,g);b.html5.usingFlash=
gb();P=b.html5.usingFlash;return!0};V={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:"soundManagerexception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:"soundManager: Verify that %s is a valid path.",tryDebug:"Try soundManager.debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:"soundManager: Non-HTTP page ("+
m.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:"soundManager: Special case: Waiting for SWF to load with window focus...",waitForever:"soundManager: Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:"soundManager: Waiting for 100% SWF load...",needFunction:"soundManager: Function object expected for %s",
badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:"soundManager: _debug(): Current sound objects",waitOnload:"soundManager: Waiting for window.onload()",docLoaded:"soundManager: Document already loaded",onload:"soundManager: initComplete(): calling soundManager.onload()",onloadOK:"soundManager.onload() complete",didInit:"soundManager: init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",
badRemove:"soundManager: Failed to remove Flash node.",shutdown:"soundManager.disable(): Shutting down",queue:"soundManager: Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying .swf_timedout CSS...",fbLoaded:"Flash loaded",fbHandler:"soundManager: flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:"soundManager.load(): current URL already assigned.",badFV:'soundManager.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',
as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:"soundManager: Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:"soundManager: Got window focus.",policy:"Enabling usePolicyFile for data access",setup:"soundManager.setup(): allowed parameters: %s",
setupError:'soundManager.setup(): "%s" cannot be assigned with this method.',setupUndef:'soundManager.setup(): Could not find option "%s"',setupLate:"soundManager.setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:"soundManager: Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready. "+String.fromCharCode(10003),reset:"soundManager.reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",
globalHTML5:"Using singleton HTML5 Audio() pattern for this device."};x=function(){var a,b,d,c;a=ib.call(arguments);b=a.shift();if((c=V&&V[b]?V[b]:"")&&a&&a.length)for(b=0,d=a.length;b<d;b++)c=c.replace("%s",a[b]);return c};Ha=function(a){8===v&&1<a.loops&&a.stream&&(y("as2loop"),a.stream=!1);return a};Ia=function(a,d){a&&!a.usePolicyFile&&(a.onid3||a.usePeakData||a.useWaveformData||a.useEQData)&&(b._wD((d||"")+x("policy")),a.usePolicyFile=!0);return a};ka=function(a){Ea&&console.warn!==d?console.warn(a):
b._wD(a)};O=function(){return!1};z=function(a){for(var b in a)a.hasOwnProperty(b)&&"function"===typeof a[b]&&(a[b]=O)};t=function(a){a===d&&(a=!1);(J||a)&&b.disable(a)};bb=function(a){if(a)if(a.match(/\.swf(\?.*)?$/i)){if(a.substr(a.toLowerCase().lastIndexOf(".swf?")+4))return a}else a.lastIndexOf("/")!==a.length-1&&(a+="/");a=(a&&-1!==a.lastIndexOf("/")?a.substr(0,a.lastIndexOf("/")+1):"./")+b.movieURL;b.noSWFCache&&(a+="?ts="+(new Date).getTime());return a};ra=function(){v=parseInt(b.flashVersion,
10);8!==v&&9!==v&&(b._wD(x("badFV",v,8)),b.flashVersion=v=8);var a=b.debugMode||b.debugFlash?"_debug.swf":".swf";b.useHTML5Audio&&!b.html5Only&&b.audioFormats.mp4.required&&9>v&&(b._wD(x("needfl9")),b.flashVersion=v=9);b.version=b.versionNumber+(b.html5Only?" (HTML5-only mode)":9===v?" (AS3/Flash 9)":" (AS2/Flash 8)");8<v?(b.defaultOptions=D(b.defaultOptions,b.flash9Options),b.features.buffering=!0,b.defaultOptions=D(b.defaultOptions,b.movieStarOptions),b.filePatterns.flash9=RegExp("\\.(mp3|"+rb.join("|")+
")(\\?.*)?$","i"),b.features.movieStar=!0):b.features.movieStar=!1;b.filePattern=b.filePatterns[8!==v?"flash9":"flash8"];b.movieURL=(8===v?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",a);b.features.peakData=b.features.waveformData=b.features.eqData=8<v};u=function(a,b){if(!n)return!1;n._setPolling(a,b)};ua=function(){b.debugURLParam.test(N)&&(b.debugMode=!0);if(A(b.debugID))return!1;var a,d,e,c;if(!(!b.debugMode||A(b.debugID)||Ea&&b.useConsole&&b.consoleOnly)){a=m.createElement("div");
a.id=b.debugID+"-toggle";d={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001};a.appendChild(m.createTextNode("-"));a.onclick=cb;a.title="Toggle SM2 debug console";F.match(/msie 6/i)&&(a.style.position="absolute",a.style.cursor="hand");for(c in d)d.hasOwnProperty(c)&&(a.style[c]=d[c]);d=m.createElement("div");d.id=b.debugID;d.style.display=b.debugMode?
"block":"none";if(b.debugMode&&!A(a.id)){try{e=pa(),e.appendChild(a)}catch(f){throw Error(x("domError")+" \n"+f.toString());}e.appendChild(d)}}};G=this.getSoundById;y=function(a,d){return a?b._wD(x(a),d):""};cb=function(){var a=A(b.debugID),d=A(b.debugID+"-toggle");if(!a)return!1;fa?(d.innerHTML="+",a.style.display="none"):(d.innerHTML="-",a.style.display="block");fa=!fa};L=function(b,e,f){if(a.sm2Debugger!==d)try{sm2Debugger.handleEvent(b,e,f)}catch(c){return!1}return!0};wa=function(){var a=[];b.debugMode&&
a.push("sm2_debug");b.debugFlash&&a.push("flash_debug");b.useHighPerformance&&a.push("high_performance");return a.join(" ")};Ra=function(){var a=x("fbHandler"),d=b.getMoviePercent(),f={type:"FLASHBLOCK"};if(b.html5Only)return!1;b.ok()?(b.didFlashBlock&&b._wD(a+": Unblocked"),b.oMC&&(b.oMC.className=[wa(),"movieContainer","swf_loaded"+(b.didFlashBlock?" swf_unblocked":"")].join(" "))):(P&&(b.oMC.className=wa()+" movieContainer "+(null===d?"swf_timedout":"swf_error"),b._wD(a+": "+x("fbTimeout")+(d?
" ("+x("fbLoaded")+")":""))),b.didFlashBlock=!0,da({type:"ontimeout",ignoreInit:!0,error:f}),e(f))};na=function(a,b,e){w[a]===d&&(w[a]=[]);w[a].push({method:b,scope:e||null,fired:!1})};da=function(a){a||(a={type:b.ok()?"onready":"ontimeout"});if(!E&&a&&!a.ignoreInit||"ontimeout"===a.type&&(b.ok()||J&&!a.ignoreInit))return!1;var d={success:a&&a.ignoreInit?b.ok():!J},e=a&&a.type?w[a.type]||[]:[],c=[],f,d=[d],g=P&&!b.ok();a.error&&(d[0].error=a.error);a=0;for(f=e.length;a<f;a++)!0!==e[a].fired&&c.push(e[a]);
if(c.length)for(a=0,f=c.length;a<f;a++)c[a].scope?c[a].method.apply(c[a].scope,d):c[a].method.apply(this,d),g||(c[a].fired=!0);return!0};ha=function(){a.setTimeout(function(){b.useFlashBlock&&Ra();da();"function"===typeof b.onload&&(y("onload",1),b.onload.apply(a),y("onloadOK",1));b.waitForWindowLoad&&I.add(a,"load",ha)},1)};Va=function(){if(aa!==d)return aa;var b=!1,e=navigator,f=e.plugins,c,g=a.ActiveXObject;if(f&&f.length)(e=e.mimeTypes)&&e["application/x-shockwave-flash"]&&e["application/x-shockwave-flash"].enabledPlugin&&
e["application/x-shockwave-flash"].enabledPlugin.description&&(b=!0);else if(g!==d&&!F.match(/MSAppHost/i)){try{c=new g("ShockwaveFlash.ShockwaveFlash")}catch(u){c=null}b=!!c}return aa=b};gb=function(){var a,d,e=b.audioFormats;Oa&&F.match(/os (1|2|3_0|3_1)\s/i)?(b.hasHTML5=!1,b.html5Only=!0,b.oMC&&(b.oMC.style.display="none")):b.useHTML5Audio&&(b.html5&&b.html5.canPlayType||(b._wD("SoundManager: No HTML5 Audio() support detected."),b.hasHTML5=!1),Za&&b._wD("soundManager: Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+
(aa?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1));if(b.useHTML5Audio&&b.hasHTML5)for(d in Ca=!0,e)e.hasOwnProperty(d)&&e[d].required&&(b.html5.canPlayType(e[d].type)?b.preferFlash&&(b.flash[d]||b.flash[e[d].type])&&(a=!0):(Ca=!1,a=!0));b.ignoreFlash&&(a=!1,Ca=!0);b.html5Only=b.hasHTML5&&b.useHTML5Audio&&!a;return!b.html5Only};Ka=function(a){var d,e,c=0;if(a instanceof Array){d=0;for(e=a.length;d<e;d++)if(a[d]instanceof Object){if(b.canPlayMIME(a[d].type)){c=
d;break}}else if(b.canPlayURL(a[d])){c=d;break}a[c].url&&(a[c]=a[c].url);a=a[c]}return a};db=function(a){a._hasTimer||(a._hasTimer=!0,!Ya&&b.html5PollingInterval&&(null===Ba&&0===Ja&&(Ba=setInterval(fb,b.html5PollingInterval)),Ja++))};eb=function(a){a._hasTimer&&(a._hasTimer=!1,!Ya&&b.html5PollingInterval&&Ja--)};fb=function(){var a;if(null!==Ba&&!Ja)return clearInterval(Ba),Ba=null,!1;for(a=b.soundIDs.length-1;0<=a;a--)b.sounds[b.soundIDs[a]].isHTML5&&b.sounds[b.soundIDs[a]]._hasTimer&&b.sounds[b.soundIDs[a]]._onTimer()};
e=function(e){e=e!==d?e:{};"function"===typeof b.onerror&&b.onerror.apply(a,[{type:e.type!==d?e.type:null}]);e.fatal!==d&&e.fatal&&b.disable()};jb=function(){if(!Za||!Va())return!1;var a=b.audioFormats,d,e;for(e in a)if(a.hasOwnProperty(e)&&("mp3"===e||"mp4"===e)&&(b._wD("soundManager: Using flash fallback for "+e+" format"),b.html5[e]=!1,a[e]&&a[e].related))for(d=a[e].related.length-1;0<=d;d--)b.html5[a[e].related[d]]=!1};this._setSandboxType=function(a){var e=b.sandbox;e.type=a;e.description=e.types[e.types[a]!==
d?a:"unknown"];"localWithFile"===e.type?(e.noRemote=!0,e.noLocal=!1,y("secNote",2)):"localWithNetwork"===e.type?(e.noRemote=!1,e.noLocal=!0):"localTrusted"===e.type&&(e.noRemote=!1,e.noLocal=!1)};this._externalInterfaceOK=function(a){if(b.swfLoaded)return!1;var d;L("swf",!0);L("flashtojs",!0);b.swfLoaded=!0;Qa=!1;Za&&jb();if(!a||a.replace(/\+dev/i,"")!==b.versionNumber.replace(/\+dev/i,""))return d='soundManager: Fatal: JavaScript file build "'+b.versionNumber+'" does not match Flash SWF build "'+
a+'" at '+b.url+". Ensure both are up-to-date.",setTimeout(function(){throw Error(d);},0),!1;setTimeout(W,ma?100:1)};ja=function(a,e){function f(){var a=[],c,d=[];c="SoundManager "+b.version+(!b.html5Only&&b.useHTML5Audio?b.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"");b.html5Only?b.html5PollingInterval&&a.push("html5PollingInterval ("+b.html5PollingInterval+"ms)"):(b.preferFlash&&a.push("preferFlash"),b.useHighPerformance&&a.push("useHighPerformance"),b.flashPollingInterval&&a.push("flashPollingInterval ("+
b.flashPollingInterval+"ms)"),b.html5PollingInterval&&a.push("html5PollingInterval ("+b.html5PollingInterval+"ms)"),b.wmode&&a.push("wmode ("+b.wmode+")"),b.debugFlash&&a.push("debugFlash"),b.useFlashBlock&&a.push("flashBlock"));a.length&&(d=d.concat([a.join(" + ")]));b._wD(c+(d.length?" + "+d.join(", "):""),1);kb()}function c(a,c){return'<param name="'+a+'" value="'+c+'" />'}if(X&&ba)return!1;if(b.html5Only)return ra(),f(),b.oMC=A(b.movieID),W(),ba=X=!0,!1;var g=e||b.url,u=b.altURL||g,s=pa(),k=wa(),
z=null,z=m.getElementsByTagName("html")[0],t,n,h,z=z&&z.dir&&z.dir.match(/rtl/i);a=a===d?b.id:a;ra();b.url=bb(Fa?g:u);e=b.url;b.wmode=!b.wmode&&b.useHighPerformance?"transparent":b.wmode;null!==b.wmode&&(F.match(/msie 8/i)||!ma&&!b.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(qa.push(V.spcWmode),b.wmode=null);s={name:a,id:a,src:e,quality:"high",allowScriptAccess:b.allowScriptAccess,bgcolor:b.bgColor,pluginspage:pb+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",
type:"application/x-shockwave-flash",wmode:b.wmode,hasPriority:"true"};b.debugFlash&&(s.FlashVars="debug=1");b.wmode||delete s.wmode;if(ma)g=m.createElement("div"),n=['<object id="'+a+'" data="'+e+'" type="'+s.type+'" title="'+s.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+pb+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',c("movie",e),c("AllowScriptAccess",b.allowScriptAccess),c("quality",s.quality),b.wmode?c("wmode",b.wmode):"",c("bgcolor",
b.bgColor),c("hasPriority","true"),b.debugFlash?c("FlashVars",s.FlashVars):"","</object>"].join("");else for(t in g=m.createElement("embed"),s)s.hasOwnProperty(t)&&g.setAttribute(t,s[t]);ua();k=wa();if(s=pa())if(b.oMC=A(b.movieID)||m.createElement("div"),b.oMC.id)h=b.oMC.className,b.oMC.className=(h?h+" ":"movieContainer")+(k?" "+k:""),b.oMC.appendChild(g),ma&&(t=b.oMC.appendChild(m.createElement("div")),t.className="sm2-object-box",t.innerHTML=n),ba=!0;else{b.oMC.id=b.movieID;b.oMC.className="movieContainer "+
k;t=k=null;b.useFlashBlock||(b.useHighPerformance?k={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(k={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},z&&(k.left=Math.abs(parseInt(k.left,10))+"px")));sb&&(b.oMC.style.zIndex=1E4);if(!b.debugFlash)for(h in k)k.hasOwnProperty(h)&&(b.oMC.style[h]=k[h]);try{ma||b.oMC.appendChild(g),s.appendChild(b.oMC),ma&&(t=b.oMC.appendChild(m.createElement("div")),t.className="sm2-object-box",t.innerHTML=
n),ba=!0}catch(r){throw Error(x("domError")+" \n"+r.toString());}}X=!0;f();return!0};sa=function(){if(b.html5Only)return ja(),!1;if(n)return!1;if(!b.url)return y("noURL"),!1;(n=b.getMovie(b.id))||(za?(ma?b.oMC.innerHTML=va:b.oMC.appendChild(za),za=null,X=!0):ja(b.id,b.url),n=b.getMovie(b.id));"function"===typeof b.oninitmovie&&setTimeout(b.oninitmovie,1);Wa();return!0};T=function(){setTimeout(Ga,1E3)};oa=function(){a.setTimeout(function(){ka("soundManager: useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false...");
b.setup({preferFlash:!1}).reboot();b.didFlashBlock=!0;b.beginDelayedInit()},1)};Ga=function(){var d,e=!1;if(!b.url||Aa)return!1;Aa=!0;I.remove(a,"load",T);if(aa&&Qa&&!$a)return y("waitFocus"),!1;E||(d=b.getMoviePercent(),0<d&&100>d&&(e=!0));setTimeout(function(){d=b.getMoviePercent();if(e)return Aa=!1,b._wD(x("waitSWF")),a.setTimeout(T,1),!1;E||(b._wD("soundManager: No Flash response within expected time. Likely causes: "+(0===d?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+
(b.debugFlash?" "+x("checkSWF"):""),2),!Fa&&d&&(y("localFail",2),b.debugFlash||y("tryDebug",2)),0===d&&b._wD(x("swf404",b.url),1),L("flashtojs",!1,": Timed out"+Fa?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)"));!E&&nb&&(null===d?b.useFlashBlock||0===b.flashLoadTimeout?(b.useFlashBlock&&Ra(),y("waitForever")):!b.useFlashBlock&&Ca?oa():(y("waitForever"),da({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}})):0===b.flashLoadTimeout?y("waitForever"):!b.useFlashBlock&&
Ca?oa():t(!0))},b.flashLoadTimeout)};U=function(){if($a||!Qa)return I.remove(a,"focus",U),!0;$a=nb=!0;y("gotFocus");Aa=!1;T();I.remove(a,"focus",U);return!0};Wa=function(){qa.length&&(b._wD("SoundManager 2: "+qa.join(" "),1),qa=[])};kb=function(){Wa();var a,d=[];if(b.useHTML5Audio&&b.hasHTML5){for(a in b.audioFormats)b.audioFormats.hasOwnProperty(a)&&d.push(a+" = "+b.html5[a]+(!b.html5[a]&&P&&b.flash[a]?" (using flash)":b.preferFlash&&b.flash[a]&&P?" (preferring flash)":b.html5[a]?"":" ("+(b.audioFormats[a].required?
"required, ":"")+"and no flash support)"));b._wD("SoundManager 2 HTML5 support: "+d.join(", "),1)}};K=function(d){if(E)return!1;if(b.html5Only)return y("sm2Loaded",1),E=!0,ha(),L("onload",!0),!0;var f=!0,g;b.useFlashBlock&&b.flashLoadTimeout&&!b.getMoviePercent()||(E=!0);g={type:!aa&&P?"NO_FLASH":"INIT_TIMEOUT"};b._wD("SoundManager 2 "+(J?"failed to load":"loaded")+" ("+(J?"Flash security/load error":"OK")+") "+String.fromCharCode(J?10006:10003),J?2:1);J||d?(b.useFlashBlock&&b.oMC&&(b.oMC.className=
wa()+" "+(null===b.getMoviePercent()?"swf_timedout":"swf_error")),da({type:"ontimeout",error:g,ignoreInit:!0}),L("onload",!1),e(g),f=!1):L("onload",!0);J||(b.waitForWindowLoad&&!Q?(y("waitOnload"),I.add(a,"load",ha)):(b.waitForWindowLoad&&Q&&y("docLoaded"),ha()));return f};B=function(){var a,e=b.setupOptions;for(a in e)e.hasOwnProperty(a)&&(b[a]===d?b[a]=e[a]:b[a]!==e[a]&&(b.setupOptions[a]=b[a]))};W=function(){if(E)return y("didInit"),!1;if(b.html5Only)return E||(I.remove(a,"load",b.beginDelayedInit),
b.enabled=!0,K()),!0;sa();try{n._externalInterfaceTest(!1),u(!0,b.flashPollingInterval||(b.useHighPerformance?10:50)),b.debugMode||n._disableDebug(),b.enabled=!0,L("jstoflash",!0),b.html5Only||I.add(a,"unload",O)}catch(d){return b._wD("js/flash exception: "+d.toString()),L("jstoflash",!1),e({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),t(!0),K(),!1}K();I.remove(a,"load",b.beginDelayedInit);return!0};Y=function(){if(ia)return!1;ia=!0;B();ua();var a=null,a=null,d=N.toLowerCase();-1!==d.indexOf("sm2-usehtml5audio=")&&
(a="1"===d.charAt(d.indexOf("sm2-usehtml5audio=")+18),Ea&&console.log((a?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),b.setup({useHTML5Audio:a}));-1!==d.indexOf("sm2-preferflash=")&&(a="1"===d.charAt(d.indexOf("sm2-preferflash=")+16),Ea&&console.log((a?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),b.setup({preferFlash:a}));!aa&&b.hasHTML5&&(b._wD("SoundManager 2: No Flash detected"+(b.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),b.setup({useHTML5Audio:!0,
preferFlash:!1}));hb();!aa&&P&&(qa.push(V.needFlash),b.setup({flashLoadTimeout:1}));m.removeEventListener&&m.removeEventListener("DOMContentLoaded",Y,!1);sa();return!0};Ta=function(){"complete"===m.readyState&&(Y(),m.detachEvent("onreadystatechange",Ta));return!0};ya=function(){Q=!0;Y();I.remove(a,"load",ya)};ta=function(){Ya&&((!b.setupOptions.useHTML5Audio||b.setupOptions.preferFlash)&&qa.push(V.mobileUA),b.setupOptions.useHTML5Audio=!0,b.setupOptions.preferFlash=!1,Oa||mb&&!F.match(/android\s2\.3/i))&&
(qa.push(V.globalHTML5),Oa&&(b.ignoreFlash=!0),Z=!0)};ta();Va();I.add(a,"focus",U);I.add(a,"load",T);I.add(a,"load",ya);m.addEventListener?m.addEventListener("DOMContentLoaded",Y,!1):m.attachEvent?m.attachEvent("onreadystatechange",Ta):(L("onload",!1),e({type:"NO_DOM2_EVENTS",fatal:!0}))}if(!a||!a.document)throw Error("SoundManager requires a browser with window and document objects.");var g=null;void 0!==a.SM2_DEFER&&SM2_DEFER||(g=new f);"object"===typeof module&&module&&"object"===typeof module.exports?
(a.soundManager=g,module.exports.SoundManager=f,module.exports.soundManager=g):"function"===typeof define&&define.amd?define("SoundManager",[],function(){return{SoundManager:f,soundManager:g}}):(a.SoundManager=f,a.soundManager=g)})(window);(function(){for(var a,d=function(){},f="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profileEnd table time timeEnd timeStamp trace warn".split(" "),g=f.length,h=window.console=window.console||{};g--;)a=f[g],h[a]||(h[a]=d)})();function library(a){$(function(){a.init&&a.init()});return a}
var isMobilePlayer=!1,embedFetched=!1,music_url=null,soundcloudTrack=library(function(a){return{init:function(){},flagDeadTrack:function(d){a.post("/api/music/unplayable",{id:d})}}}(jQuery)),audiomackPlayer=library(function(a,d){var f,g,h,H,r,k,C,b,S,n,M,A,F,N=[],m,O,B,W=!1,v=0,w,fa=0,L=!1,X=0,ba=!1,E=!1,J,Q=!0,y=[],xa,K=null,D=[],R=0,ca,na=function(){return S.match(/iPad/i)||S.match(/iPhone/i)||S.match(/iPod/i)},da=function(){B=a("div[for="+m+"] .song");0<B.length&&(N=[],B.each(function(){N.push({image:H,
title:g+" - "+a("a",this).text(),sources:[{file:a("a",this).data("url"),label:a("a",this).data("url"),type:"mp3"}]})}))},ha=function(){B=a(".track .row");O=a("#listplayer");0===B.length&&(B=a(".track"));if(0<B.length&&"undefined"!=typeof O&&O.length)if(N=[],B.each(function(){var b=a("a",this).data("url")||a("a",this).attr("href");if(b.match(/^\/album\//)){var d=a("div[for='"+a("a",this).data("id")+"'] .song");d.length&&d.each(function(){N.push({title:a("a",this).text(),sources:[{file:b,label:b,type:"mp3"}]})})}else{var d=
"/api/music/url"+b,e=a("img",this).attr("alt");N.push({image:"",title:e,id:a("a",this).data("id"),sources:[{file:d,label:d,type:"mp3"}]})}}),isMobilePlayer){a("#"+m).replaceWith(a('<div class="mobile-player">   <div class="mobile-player-inner">       <span class="prev-track fa fa-fast-backward"></span>        <span id="play-button" class="playlist"><i class="fa fa-play icon"></i><span class="loading-icon song-loader"><span class="circle circle-1"></span><span class="circle circle-2"></span><span class="circle circle-3"></span></span></span>        <span class="next-track fa fa-fast-forward"></span>        <div class="player-title">            <span class="artist"><a href=""  ></a></span>            <span class="song-title"><a href="" ></a></span>        </div>        <div class="dots">&#8226;&#8226;&#8226;</div>   </div>   <div class="dots-overlay">       <ul>           <li>               <span class="glyphicons star"></span>               <a href="#" class="player-favorite mobile-fav launch_login_modal" data-id="" id="listPlayerFavorite" data-action="favorite" data-music_id=""></a>           </li>           <li>               <span class="glyphicons plus"></span>               <a href="#playlistModal" role="button" class="launch_login_modal" data-toggle="modal" data-id="" href="#" id="listPlayerPlaylist" data-action="playlist" data-music_id="">Add to Playlist</a>           </li>           <li>              <span class="glyphicons retweet repost"></span>              <a href="" role="button" class="launch_login_modal" data-id="" id="listPlayerRepost" data-action="repost" data-music_id="">Re-up</a>           </li>           <li class="via-soundcloud">               <span class="glyphicons music"></span>               <a href="" target="_blank" rel="nofollow">via SoundCloud</a>           </li>       </ul>   </div>   <div class="mobile-time">       <div class="elapsed">00:00</div>       <div class="duration">00:00</div>   </div></div>').attr("id",
m));mobilePlayer();a("li > a.player-share").click(function(b){b.preventDefault();a(this).hide();a(this).next("div.addthis_responsive_sharing").css("height","30px").css("margin-top","-10px").show()});var b=!1;a("div.dots").click(function(d){d.preventDefault();b?(a("div.dots-overlay").hide(),a("li > div.addthis_responsive_sharing").hide(),b=!1):(a("li > a.player-share").show(),a("div.dots-overlay").show(),b=!0)})}else a("#"+m).replaceWith(a('<div id="wrap"">   <div class="pborder">       <div class="pwrap zzzzzz">            <div class="player-left">                    <span class="prev-track glyphicon glyphicon-fast-backward"></span>                    <span id="play-button" class="playlist"><i class="glyphicon glyphicon-play icon"></i><span class="loading-icon song-loader"><span class="circle circle-1"></span><span class="circle circle-2"></span><span class="circle circle-3"></span></span></span>                    <span class="next-track glyphicon glyphicon-fast-forward"></span>            </div>            <div class="player-right">                <div class="player-header">                    <div class="player-title">                           <span class="artist"><a href="" target="_blank" ></a></span>                           <span class="song-title"><a href="" target="_blank" ></a></span>                    </div>                    <div class="player-icons">  \t\t\t\t\t\t<div class="inner">                        <a class="scloud-icon ext-icon player-icon" href="<?=$this->song->stream_url;?>" target="_blank">                              <i class="fa fa-soundcloud"></i></a>                        <a data-toggle="tooltip" data-placement="left" class="player-icon download-song" title="Download" href="">                             <span class="glyphicon glyphicon-save"></span>                        </a>                        <a data-placement="left" class="player-embed player-icon" title="Embed" href="#embed" id="itsembed" data-toggle="modal" onClick="ga(\'send\', \'event\', { eventCategory: \'Embed\', eventAction: $(this).attr(\'href\').split(\'?\')[0], eventLabel: window.location.href});">                            <span class="glyphicons embed_close"></span>                        </a>                        <a data-toggle="tooltip" data-placement="left" href="" data-id="" id="listPlayerFavorite" title="Favorite" class="launch_login_modal player-favorite player-icon favorite ">                            <span class="glyphicon glyphicon-star"></span>                        </a>                        <a data-placement="left" title="Playlist" href="#" id="listPlayerPlaylist"  data-id="" class="player-icon launch_login_modal">                            <span class="glyphicon glyphicon-plus"></span>                        </a>                        <a data-placement="left" title="Re-Up" href="" id="listPlayerRepost" data-id="" data-action="repost" data-music_id="" class="player-icon launch_login_modal">                            <span class="glyphicons retweet repost"></span>                        </a>\t\t\t\t\t\t <span class="trigger close-icons"><i class="fa fa-times"></i></span>\t\t\t\t\t\t</div>                    </div>                </div>\t\t\t\t<div class="player-song-stats">\t\t\t\t\t<span class="song-plays glyphicon glyphicon-play"></span><span class="song-plays-stat"></span><span class="divider"></span>\t\t\t\t\t<span class="song-favorites glyphicon glyphicon-star"></span><span class="song-favorites-stat"></span><span class="divider"></span>\t\t\t\t</div>\t\t\t\t<div class="player-outer group">                <div class="player-jwplayer">                    <div class="elapsed">00:00</div>\t\t\t\t\t <div class="slider-outer group">                     \t<div class="slider">                        \t<span class="progress"></span>                        \t<div class="waveform" data-color="" data-duration="" data-waveform=""></div>\t\t\t\t\t\t \t<div class="white-border"></div>                    \t</div>\t\t\t\t\t </div>                    <div class="duration">00:00</div>                </div>\t\t\t</div>            </div>            <a class="scloud-icon main-scloud-icon ext-icon player-icon" href="<?=$this->song->stream_url;?>" target="_blank">            <i class="fa fa-soundcloud"></i></a>           <div class="triple-dots-wrap"><span class="dots"></div></div>       </div>   </div></div>').attr("id",
m)),a(".player-icon").tooltip(),embedFetched=!1,a(".pwrap.zzzzzz").find("a.player-embed.player-icon").on("click",function(b){embedFetched||(b.stopPropagation(),b=a(this).data("music_id"),a.ajax({url:"/embed4/modal",type:"GET",cache:!1,data:{music_id:b},dataType:"html",async:!1,success:function(b){a("#embed-modal-container").remove();a("body").append('<div id="embed-modal-container">'+b+"</div>");embedFetched=!0;setTimeout(function(){a("#itsembed").click()},500)}}))})};a(window).resize(function(){(a("#wrap").hasClass("embed")||
a(".pwrap").hasClass("zzzzzz"))&&T()});var T=function(b,d,f){if(!W){W=!0;k&&"function"===typeof google.ima.AdDisplayContainer&&a("#play-button").css("visibility","visible");"undefined"==typeof d&&a("div.waveform").data("color");"undefined"==typeof f&&(f=a("div.waveform").data("duration"));"undefined"==typeof b&&(b=a("div.waveform").data("waveform"));d=3;var g=!1;a("#wrap").hasClass("embed")&&(g=!0);g&&("none"==a("div.player-song-stats").css("display")?a("div.player-jwplayer").css("width",a("div.player-right").width()-
84-20):a("div.player-jwplayer").css("width",a("div.player-right").width()-a("div.player-song-stats").width()-84-20));var z=a("div.slider").width();z||(z=730);a("div.waveform").html("").css("width",z).css("height",30);if("string"==typeof b&&b)a("div.waveform").css("background-image","url("+b+")").toggleClass("scloud-img",!0);else{a("div.waveform").css("background-image","none").toggleClass("scloud-img",!1);g=1;if(0<f){for(;.95>f*d/z&&8>d;)d++;g=f/(Math.floor(z/d)+1);1>g&&(g=1)}for(var t=0,m=0,h=0;h<
f;h++)t+=b[h],b[h]>m&&(m=b[h]);for(var z=100/30,m=Math.floor(100/m),n="",x=[],r=0,v=0,w=0;w<f;w++)if(r+=1,x.push(b[w]),r>=g){for(h=t=0;h<x.length;h++)t+=x[h];t=Math.ceil(t/x.length);if(isNaN(t)||0===t)t=1;n=n+'<span style="left:'+v+"px;width:"+(d-1)+"px;height:"+m/z*t+'px;"></span>';v+=d;r-=g;x=[]}a("div.waveform").html(n)}W=!1}},Ga=function(){if(!W){W=!0;var b=a("div.waveform").data("color"),d=a("div.waveform").data("background-color"),f=a("div.slider > span.progress").width();b||(b="ffa200");d||
(d="999");f||(f=1);a("div.waveform > span").each(function(){parseInt(a(this).css("left").replace("px",""),10)<f?a(this).css("background","#"+b):a(this).css("background","#"+d)});W=!1}},oa=function(b){if(-1!=b&&"undefined"!=typeof b){var d=parseInt(b,10);b=Math.floor(d/60);d-=60*b;10>b&&(b="0"+b);10>d&&(d="0"+d);b=b+":"+d;a("div.duration").html(b)}},ra=function(){a("#video-ad_wrapper").length&&a("#video-ad_wrapper").hide();S.match(/Android/i)&&a("#video-ad").hide();a("#wrap").show();a("#listplayer-video-ad").css({height:"1px",
bottom:"0"});a("#standard-video-ad").css({height:"1px",top:-1E4});0<a("#listplayer-video-ad").length&&a("#video-ad-message").hide()},U=function(a){var b=a.getAd();music_url||(music_url=window.location.pathname);switch(a.type){case google.ima.AdEvent.Type.LOADED:trackAdPlay("loaded",music_url);console.log("LOADED");console.log("Ad ID: "+b.getAdId());console.log("Ad system: "+b.getAdSystem());console.log("Content type: "+b.getContentType());console.log("Title: "+b.getTitle());console.log("Description: "+
b.getDescription());Y();break;case google.ima.AdEvent.Type.STARTED:trackAdPlay("started",music_url);console.log("STARTED");fa++;(a=w.match(/\/api\/music\/url\/((?:album)\/[^\/]+\/[^\/\?]+)(?:\/[0-9]+)?/))&&y.push(a[1]);xa=new Date;break;case google.ima.AdEvent.Type.COMPLETE:trackAdPlay("completed",music_url);console.log("COMPLETE");b.isLinear()&&clearInterval(void 0);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:console.log("ALL_ADS_COMPLETED");if(0===fa){trackAdPlay("error",music_url);console.log("Couldn't play any ads");
R++;if("undefined"!==typeof D[R])K=D[R];else{console.log("Reached end of VAST chain");break}console.log("New VAST tag: "+K);Y();ja();L=!0;X++}break;case google.ima.AdEvent.Type.SKIPPED:trackAdPlay("skipped",music_url);console.log("SKIPPED");break;case google.ima.AdEvent.Type.USER_CLOSE:console.log("USER_CLOSE")}},V=function(a){w&&(music_url=w.match(/\/api\/music\/url\/((?:song|album)\/[^\/]+\/[^\/\?]+(?:\/[0-9]+)?)/)[1]);music_url||(music_url=window.location.pathname);trackAdPlay("error",music_url);
console.log("ad error: "+a.getError().getMessage());L=!0;X++;R++;"undefined"!==typeof D[R]?(K=D[R],console.log("New VAST tag: "+K),ja()):(console.log("Reached end of VAST chain"),A.destroy(),ra(),d.getSoundById(m)&&d.getSoundById(m).play())},sa=function(){console.log("prerollPlays: "+fa+" adErrorCount: "+X);0===fa&&X<D.length?console.log("Showing fallback ad"):(ra(),d.getSoundById(m)&&d.getSoundById(m).play())},ta=function(){var a=!1;k&&"no"!=k&&(a=!0);var b=w.match(/\/api\/music\/url\/((?:album)\/[^\/]+\/[^\/\?]+)(?:\/[0-9]+)?/);
b&&-1<y.indexOf(b[1])&&(a=!1);xa&&(b=(new Date).getTime(),6>Math.floor((b-xa.getTime())/6E4)&&(console.log("Showed advert less than 6 minutes ago"),a=!1));return a},Y=function(){if(isMobilePlayer)a("#listplayer-video-ad").length?na()||(a("#listplayer-video-ad").css({height:"260px"}),a("#video-ad").show()):na()||(a("#standard-video-ad").css({height:"260px",top:"auto",bottom:0}),a("#video-ad").show());else if(a("#listplayer-video-ad").length)a("#listplayer-video-ad").css({height:"486px"}),a("#video-ad").show(),
a("#video-ad-message").show();else{var b=486;486>a(window).height()&&(b=a(window).height());a("#standard-video-ad").css({height:b+"px",top:0});a("#video-ad_wrapper").css("padding-bottom","10px");a("#video-ad").show();a("#wrap").hide()}},ya=function(){},ia=function(){return"https://googleads.g.doubleclick.net/pagead/ads?ad_type=video&client=ca-video-pub-3858157454086512&description_url=https%3A%2F%2Fwww.audiomack.com&videoad_start_delay=0&hl=en&max_ad_duration=30000"},pa=function(){return"https://ad4.liverail.com/?LR_PUBLISHER_ID=138009&LR_SCHEMA=vast2-vpaid&LR_AUTOPLAY=1"},
ja=function(){var a=new google.ima.AdsRequest;a.adTagUrl=K;a.linearAdSlotWidth=980;a.linearAdSlotHeight=460;a.nonLinearAdSlotWidth=980;a.nonLinearAdSlotHeight=460;M.requestAds(a)};return{init:function(){d.setup({url:"/cap/swf/",preferFlash:!1,onready:this.initPlayers,debugMode:!0});S=navigator.userAgent||navigator.vendor||window.opera;R=0;D="function"==typeof cmnvideotagdefault&&"https:"!=window.location.protocol?[cmnvideotagdefault(),pa(),ia()]:[pa(),ia()];K=D[R];console.log("Setting VAST tag to "+
K)},initPlayers:function(){a("div.am-jwplayer").each(function(){audiomackPlayer.initPlayer(a(this))})},initPlayer:function(d){0!==a(".player-icon").length&&a(".player-icon").tooltip();d.data("firstColor");d.data("secondColor");d.data("bgColor");f=d.data("title");g=d.data("performer");d.data("count");d.data("countLink");d.data("rank");d.data("rankLink");h=d.data("url");d.data("canDownload");d.data("embed");d.data("buyLink");H=d.data("artUrl");r=d.data("src");k=d.data("preroll");C=d.data("uploader");
b=d.data("height");ba=d.data("promoKey");E=d.data("isPlaylist");J=d.data("playlistId");b||(b=30);"object"==typeof CMNUNT&&(b=60);N=[{image:H,title:g+" - "+f,sources:[{file:"/api/music/url"+h,label:"/api/music/url"+h,type:"mp3"}]}];T();m=d.attr("id");da();ha();0===N.length?console.log("Could not read any tracks from the DOM"):w=N[0].sources[0].file;this.bindEvents(m)},bindEvents:function(b){a("#play-button").click(function(f,g){if(void 0!==A&&-1<A.getRemainingTime())console.log("Video ad playing, not playing music");
else{audiomack.keytoplay||(audiomack.keytoplay=!0);a(this).addClass("pulse");if(d.getSoundById(b))d.getSoundById(b).playState&&!d.getSoundById(b).paused?(isMobilePlayer?(a(this).find(".icon").removeClass("fa-pause").addClass("fa-play"),a(".profile-image .play .fa").removeClass("fa-pause").addClass("fa-play")):a(this).find(".icon").removeClass("glyphicon-pause").addClass("glyphicon-play"),d.getSoundById(b).pause()):(isMobilePlayer?(a(this).find(".icon").removeClass("fa-play").addClass("fa-pause"),
a(".profile-image .play .fa").removeClass("fa-play").addClass("fa-pause")):a(this).find(".icon").removeClass("glyphicon-play").addClass("glyphicon-pause"),d.getSoundById(b).play());else{Q=!0;music_url=w.match(/\/api\/music\/url\/((?:song|album)\/[^\/]+\/[^\/\?]+(?:\/[0-9]+)?)/)[1];"undefined"!=typeof g&&"undefined"!=typeof g.autoplay?Q=g.autoplay:ta()&&(Q=audiomackPlayer.playAd());0<B.length&&0===a("div[for="+b+"] .song.play").length&&a(B[0]).toggleClass("play",!0);d.createSound({id:"testsound",url:"undefined"===
typeof cdnEndpoint?"/point1sec.mp3":cdnEndpoint+"/point1sec.mp3",multiShot:!1,stream:!0,autoLoad:!0});a("#wrap").length&&a("#wrap").hasClass("embed");audiomackPlayer.asyncLoadTrack(b,w,a(this),Q);var s=w.match(/\/api\/music\/url\/((?:song|album)\/[^\/]+\/[^\/\?]+(?:\/[0-9]+)?)/)[1];trackEvent("play",s,audiomack.music_token);ba&&trackPromoEvent("play",s,audiomack.music_token,ba);E&&trackPlaylistEvent("play",J,audiomack.music_token);ga("send","event",{eventCategory:"Music",eventAction:"Play",eventLabel:s})}return!1}});
a("div.slider").click(function(f){f=f.pageX-a(this).offset().left+a(window).scrollLeft();var g=d.getSoundById(b).duration,s=a("div.slider").width();f=parseInt(f/s*g,10);d.getSoundById(b).setPosition(f)});B=a("div[for="+b+"] .song");0<B.length&&a(B).click(audiomackPlayer.playSong);a(".song > div.download-song > a").click(function(a){a.stopPropagation()});a(".song > div.favorite-song > a").click(function(a){a.stopPropagation()});a(".song > div.playlist-song > a").click(function(a){a.stopPropagation()});
a("span.next-track").click(function(b,d){b.preventDefault();var e;if(w.match(/\/api\/music\/url\/album/)||a(this).prev("span").hasClass("playlist")){if((e=a(".song.play").next(".song"))&&0!==e.length||(e=a(".song.play").parent(".song-wrap").next(".song-wrap").find(".song")),!e||0===e.length)if(a(".track .row a.playing").length)e=a(".track .row a.playing").closest(".track").nextAll(".track").length?a(".track .row a.playing").closest(".track").nextAll(".track:not(.str-adunit)").first().find(".overlay a.play"):
a(".feed:eq(0) .track:eq(0)").find("a.play");else if(a(".track a.playing").closest(".track").nextAll(".track").length)e=a(".track a.playing").closest(".track").nextAll(".track:not(.str-adunit)").first().find("a.play");else{if(a(".song.play").length)return;e=a(".song").first()}}else e=isMobilePlayer?a(".track a.playing").closest(".track").nextAll(".track").first().find("a.play"):a(".track .row a.playing").closest(".track").nextAll(".track").first().find("a.play");e.trigger("click");d||"function"!=
typeof writeCaptureRefresh||(e=a("#cmn_ad_tag_head"),e.css("min-height",e.height()),e=a(".boxad:eq(0)"),e.css("min-height",e.height()),e=a(".160adunit-songs:eq(0)"),e.css("min-height",e.height()),writeCaptureRefresh())});a("span.prev-track").click(function(b,d){b.preventDefault();var e;w.match(/\/api\/music\/url\/album/)||a(this).next("span").hasClass("playlist")?((e=a(".song.play").prev(".song"))&&0!==e.length||(e=a(".song.play").parent(".song-wrap").prev(".song-wrap").find(".song")),e&&0!==e.length||
(e=a(".track .row a.playing").length?a(".track .row a.playing").closest(".track").prevAll(".track").length?a(".track .row a.playing").closest(".track").prevAll(".track:not(.str-adunit)").first().find(".overlay a.play"):a(".feed:eq(0) .track:eq(0)").find("a.play"):a(".track a.playing").closest(".track").prevAll(".track").length?a(".track a.playing").closest(".track").prevAll(".track:not(.str-adunit)").first().find("a.play"):a(".song").last())):e=isMobilePlayer?a(".track a.playing").closest(".track").prevAll(".track").first().find("a.play"):
a(".track .row a.playing").closest(".track").prevAll(".track").first().find("a.play");e.trigger("click");d||"function"!=typeof writeCaptureRefresh||(e=a("#cmn_ad_tag_head"),e.css("min-height",e.height()),e=a(".boxad:eq(0)"),e.css("min-height",e.height()),e=a(".160adunit-songs:eq(0)"),e.css("min-height",e.height()),writeCaptureRefresh())});if(!B.length){if(isMobilePlayer)B=a(".track"),0<B.length&&"undefined"!=typeof O&&O.length&&(a("div.feed-section").on("click","a.play",audiomackPlayer.playListSong),
a(".feed-section .feed-item .feed-image a").click(function(b){b.preventDefault();a(b.target).is(".play")||(a(this).find(".play").trigger("click"),b.stopPropagation())}));else if(B=a(".track"),0<B.length&&"undefined"!=typeof O&&O.length)a("div.feed").on("click","a.play",audiomackPlayer.playListSong);a(".plwrapper .song").length&&a(".plwrapper .song").click(audiomackPlayer.playChartAlbumSong)}a(".profile-image .play").click(function(b){b.preventDefault();b.stopPropagation();a("#play-button").trigger("click")});
a(".music-main .play-button").click(function(b){b.preventDefault();b.stopPropagation();a("#play-button").trigger("click")})},getSignedUrl:function(b){var d="";b.match(/\/api\/music\/url\//)&&a.ajax({url:b,type:"GET",cache:!1,dataType:"json",async:!1,error:function(b,d,e){b=a.parseJSON(b.responseText);b.message?alert(b.message):alert(e)},success:function(a){b=a.url;a.error&&(d=a.error)}});return""===d?b:!1},loadSongData:function(b){var d=b.data("plays"),f=b.data("favorites"),g=b.data("artist"),k=b.data("title"),
t=b.data("soundcloud"),h=b.data("duration"),m=b.data("color"),n=b.data("waveform"),x=b.data("is-favorite"),r=b.data("favorite-url");b=b.data("track");"undefined"!=typeof d&&a("span.song-plays-stat").html(d);"undefined"!=typeof f&&a("span.song-favorites-stat").html(f);"undefined"!=typeof g&&a("span.artist a").text(g);"undefined"!=typeof k&&(isMobilePlayer||a("a#song-title-link").text(k));"undefined"!=typeof h&&""!==h&&oa(h);"undefined"!=typeof x&&("1"==x?(a("a.player-favorite").attr("title","Un-Favorite").tooltip("hide").attr("data-original-title",
"Un-Favorite").tooltip("fixTitle").tooltip("show"),a("a.player-favorite").addClass("active").blur()):(a("a.player-favorite").attr("title","Favorite").tooltip("hide").attr("data-original-title","Favorite").tooltip("fixTitle").tooltip("show"),a("a.player-favorite").removeClass("active").blur()));"undefined"!=typeof r&&a("a.player-favorite").attr("href",r);"undefined"!=typeof b&&a("a.player-favorite").data("track",b);"undefined"!=typeof t&&(isMobilePlayer?"0"==t?(a("span.via-soundcloud a").attr("href",
""),a("span.via-soundcloud a").html("")):(a("span.via-soundcloud a").attr("href",t),a("span.via-soundcloud a").html("via Soundcloud")):"0"==t?(a("a.scloud-icon").attr("href",""),a("a.scloud-icon").hide(),a("div.player-jwplayer").css("width","")):(a("div.player-jwplayer").addClass("play-start"),a("a.scloud-icon").attr("href",t),a("a.scloud-icon").show()));"undefined"!=typeof n&&T(n,m,h)},playSong:function(b){b.stopPropagation();b.preventDefault();m=a(this).parents("#playlist").attr("for");B=a("div[for="+
m+"] .song");0<B.length&&0===a("div[for="+m+"] .song.play").length&&a(B[0]).toggleClass("play",!0);r=a(this).find("div.title").find("a").data("url");k=a(this).find("div.title").find("a").data("preroll");C=a(this).find("div.title").find("a").data("uploader");r&&(w=r,d.getSoundById(m)&&d.destroySound(m),a("#play-button").triggerHandler("click"),a(this).parents("#playlist").find(".song").removeClass("play"),a(this).addClass("play"),a(".plwrapper").animate({scrollTop:a(this).offset().top-a(".plwrapper").offset().top+
a(".plwrapper").scrollTop()}),audiomackPlayer.loadSongData(a(this)))},playListSong:function(b){b.preventDefault();b.stopPropagation();if(void 0!==A&&-1<A.getRemainingTime())console.log("@playListSong video ad already playing");else{d.createSound({id:"testsound",url:"undefined"===typeof cdnEndpoint?"/point1sec.mp3":cdnEndpoint+"/point1sec.mp3",multiShot:!1,stream:!0,autoLoad:!0});var f=!1;a(".single-feed-item .play").toggleClass("playing",!1);a(".feed-item .play").toggleClass("playing",!1);a(".track-content .play").toggleClass("playing",
!1);a(".plwrapper .song").toggleClass("play",!1);a(this).toggleClass("playing",!0);var g=a("a",a(this).parent()).data("url")||a(this).parent().data("url")||a(this).attr("href");if(void 0!==g){w="/api/music/url"+g;var h=a("a",a(this).parent()).data("artist")||a(this).parent().data("artist"),z=a("a",a(this).parent()).data("title")||a(this).parent().data("title"),t=a("a",a(this).parent()).data("id")||a(this).parent().data("id"),n=a("a",a(this).parent()).data("favorite")||a(this).parent().data("favorite"),
r=a("a",a(this).parent()).data("repost")||a(this).parent().data("repost");k=a("a",a(this).parent()).data("preroll")||a(this).parent().data("preroll");C=a("a",a(this).parent()).data("uploader")||a(this).parent().data("uploader");var v=a("a",a(this).parent()).data("plays"),x=a("a",a(this).parent()).data("favorites"),f=ta()?audiomackPlayer.playAd():!0,y="song";g.match(/^\/album\//)?(y="album",w+="/0",a("div[class='song']").removeClass("play"),a("a[data-url*='"+w+"']",a(this).closest(".track")).closest(".song").addClass("play"),
z=isMobilePlayer?a("a[data-url*='"+w+"']").text().replace(h+" - ",""):z+" - "+a("a[data-url*='"+w+"']").text().replace(h+" - ","")):g.match(/^\/playlist\//)&&(y="playlist");O.show();O.load("/api/music/player"+g,function(){d.getSoundById(m)&&d.destroySound(m);audiomackPlayer.initPlayers();a("#play-button").triggerHandler("click",{autoplay:f});a("#listplayer").show();a("#listplayer .pinfo").attr({href:g,target:"_blank"});a("#listplayer .favorite").attr({href:g+"/favorite"});a("#listPlayerRepost").attr({href:g+
"/repost"});a("#listPlayerRepost").data("id",t);a("#listPlayerRepost").data("music_id",t);a(".player-title a").attr({href:g});a("#listplayer").find("span.artist a").text(h).html();a("#listplayer").find("span.song-title a").text(z).html();a(".player-icons").css("display","flex").hide();a(".close-trigger").removeClass("inactive").addClass("activated");a("#listplayer .song-plays-stat").text(v);a("#listplayer .song-favorites-stat").text(x);a(".listplayer-wrap").hasClass("not-visible")&&a(".listplayer-wrap").removeClass("not-visible").addClass("visible");
a(".search-form-wrap").hasClass("visible")&&a(".search-form-wrap").removeClass("visible").addClass("not-visible");a(".trigger").hasClass("close-search")&&a(".trigger").removeClass("close-search").addClass("close-player");a("#listplayer #listPlayerFavorite").data("id",t);a("#listplayer #listPlayerFavorite").data("music_id",t);a("#listplayer #listPlayerPlaylist").data("id",t);a("#listplayer #listPlayerPlaylist").data("music_id",t);n?a("#listplayer #listPlayerFavorite").addClass("active"):a("#listplayer #listPlayerFavorite").removeClass("active");
r?a("#listplayer #listPlayerRepost").addClass("active"):a("#listplayer #listPlayerRepost").removeClass("active");isMobilePlayer&&(n?a("#listPlayerFavorite").html("Un-Favorite this "+y):a("#listPlayerFavorite").html("Favorite this "+y),a("#listplayer").find("a.player-favorite").attr("href",g+"/favorite"));a(".unit").css("bottom","100px")})}}},playChartAlbumSong:function(b){b.preventDefault();b.stopPropagation();if(b=a(this).find("div.title").find("a").data("url"))w=b,d.getSoundById(m)&&d.destroySound(m),
a("#play-button").triggerHandler("click"),a(".song").removeClass("play"),a(this).addClass("play"),a(this).data("title",a(this).find("div.title").find("a").data("title")),audiomackPlayer.loadSongData(a(this))},playAd:function(){Q=!1;if(a("#video-ad").length){if(null===K){console.log("no vast tag assigned");return}n=document.getElementById("video-ad-content");na()&&(console.log("Adding custom event handler for iOS native player"),n.addEventListener("webkitendfullscreen",ya,!1));google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED);
F=new google.ima.AdDisplayContainer(document.getElementById("video-ad"));F.initialize();M=new google.ima.AdsLoader(F);M.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(b){A=b.getAdsManager(n);A.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,V);A.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,sa);A.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,U);A.addEventListener(google.ima.AdEvent.Type.LOADED,U);A.addEventListener(google.ima.AdEvent.Type.STARTED,
U);A.addEventListener(google.ima.AdEvent.Type.COMPLETE,U);A.addEventListener(google.ima.AdEvent.Type.LOG,U);A.addEventListener(google.ima.AdEvent.Type.SKIPPED,U);try{b=980;var d=460;O.length&&(b=a(window).width());S.match(/Android/i)&&(b=a(window).width(),d=260);a(window).width()<b&&(b=a(window).width());a(window).height()<d&&(d=a(window).height());A.init(b,d,google.ima.ViewMode.NORMAL);A.start()}catch(f){console.log("ad error")}},!1);M.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,V,!1);
n.onended=function(){console.log("content video complete, play any post-roll ads");M.contentComplete()};ja();music_url=w.match(/\/api\/music\/url\/((?:song|album)\/[^\/]+\/[^\/\?]+(?:\/[0-9]+)?)/)[1];trackAdPlay("requested",music_url);ga("send","event",{eventCategory:"Preroll Video Ads",eventAction:"Ad Attempted",eventLabel:C,eventValue:1})}else Q=!0;return Q},asyncLoadTrack:function(b,d,f,g){var k="";d.match(/\/api\/music\/url\//)&&a.ajax({url:d,type:"GET",cache:!1,dataType:"json",data:{extended:1},
async:!0,error:function(b,d,e){b=a.parseJSON(b.responseText);b.message?alert(b.message):alert(e)},success:function(h){var m=h.url,n=h.id;h.error&&(k=h.error,console.log("error: "+k));m.match(/^https?:\/\/(www\.)?soundcloud\.com/)?a.ajax({url:"https://api.soundcloud.com/resolve?url="+m+"&format=json&consumer_key=e8d4a4460406f85186559062901c8a33&callback=?",dataType:"jsonp",timeout:5E3,success:function(a){if(a.streamable){var k=a.stream_url,k=-1==a.stream_url.indexOf("secret_token")?k+"?":k+"&";h.soundcloud=
a.permalink_url;if("undefined"==typeof h.volume_data||0==h.volume_data.length)h.volume_data=a.waveform_url;audiomackPlayer.loadTrack(b,d,f,g,h,k+"consumer_key=e8d4a4460406f85186559062901c8a33")}},error:function(a,b,d){ca.flagDeadTrack(n)}}):audiomackPlayer.loadTrack(b,d,f,g,h,m)}})},loadTrack:function(b,f,g,k,h,m){a(".icon").addClass("hidden");a(".song-loader").addClass("active");L&&(k=!0);embedFetched=!1;d.createSound({id:b,url:m,onload:function(){3==this.readyState&&(a(".song-loader").removeClass("active"),
a(".icon").removeClass("hidden"),ll("tagEvent","Song Summary",{title:h.title,artist:h.artist,uploader:h.uploader,genre:h.genre}))},onbufferchange:function(){d._writeDebug("Buffering "+(this.isBuffering?"started":"stopped")+".")},onpause:function(){},onfinish:function(){a(".next-track").trigger("click",[!0])},onplay:function(){},onresume:function(){},whileplaying:function(){var b=Math.round(this.position/1E3);0===v&&oa(this.duration/1E3);if(0===b||b!=v){var d=this.position/1E3,e=this.duration/1E3;
0!==e&&""!==e&&void 0!==e||!a("div.waveform").data("duration")||(e=a("div.waveform").data("duration"));d=d/e*100;100<d&&(d=100);0>d&&(d=0);a("div.slider > .progress").css("width",d+"%");Ga();d=this.position/1E3;if("undefined"==typeof d||0>d)d=0;e=parseInt(d,10);d=Math.floor(e/60);e-=60*d;10>d&&(d="0"+d);10>e&&(e="0"+e);d=d+":"+e;a("div.elapsed").html(d);oa(this.duration/1E3);v=b}},multiShot:!1,stream:!0,autoLoad:!0,autoPlay:!1});d.getSoundById(b).playState&&!d.getSoundById(b).paused?(isMobilePlayer?
(g.find(".icon").removeClass("fa-pause").addClass("fa-play"),a(".profile-image .play .fa").removeClass("fa-pause").addClass("fa-play")):g.find(".icon").removeClass("glyphicon-pause").addClass("glyphicon-play"),k&&d.getSoundById(b).pause()):(isMobilePlayer?(g.find(".icon").removeClass("fa-play").addClass("fa-pause"),a(".profile-image .play .fa").removeClass("fa-play").addClass("fa-pause")):g.find(".icon").removeClass("glyphicon-play").addClass("glyphicon-pause"),k&&d.getSoundById(b).play());if(a("#listplayer").length){var n=
a("#listplayer").find("#listPlayerPlaylist");n&&n.data("id","music-"+h.id);a("#listplayer").find("span.artist a").html(h.artist);isMobilePlayer?(b=h.title.replace(h.album_title+" - ",""),a("#listplayer").find("span.song-title a").html(b)):a("#listplayer").find("span.song-title a").html(h.title);a("#listplayer").find("div.waveform").data("duration",h.duration);a("#listplayer").find("div.waveform").data("waveform",h.volume_data);h.album_id?a("#listplayer").find("a.player-embed.player-icon").data("music_id",
h.album_id):a("#listplayer").find("a.player-embed.player-icon").data("music_id",h.id);a("#listplayer").find("a.player-icon.download-song").hide();h.download_link?(a("#listplayer").find("a.player-icon.download-song").attr("href",h.download_link).attr("target","_self").click(function(){ga("send","event",{eventCategory:"Downloads",eventAction:a(this).attr("href").split("?")[0],eventLabel:window.location.href});setTimeout(function(){trackEvent("dl",h.id,h.token)},250)}).attr("title","Download").show(),
a("#listplayer").find("a.player-icon.download-song > span.glyphicon").removeClass("glyphicon-shopping-cart").addClass("glyphicon-save")):a("#listplayer").find("a.player-icon.download-song").attr("href","#").attr("target","_self").click(function(a){a.preventDefault()}).attr("title","");h.buy_link&&(a("#listplayer").find("a.player-icon.download-song").attr("href",h.buy_link).attr("target","_blank").attr("title","Buy Song").attr("data-original-title","Buy Song").click(function(){ga("send","event",{eventCategory:"Buy Link",
eventAction:a(this).attr("href").split("?")[0],eventLabel:window.location.href})}).show(),a("#listplayer").find("a.player-icon.download-song > span.glyphicon").removeClass("glyphicon-save").addClass("glyphicon-shopping-cart"));(n=a("div.waveform").data("color"))||(n="ffa200")}else isMobilePlayer&&(b=h.title.replace(h.album_title+" - ",""),a("div.mobile-player").find("span.song-title a").html(b));T(h.volume_data,n,h.duration);isMobilePlayer?"undefined"==typeof h.soundcloud?(a(".via-soundcloud a").attr("href",
""),a(".via-soundcloud a").html(""),a(".via-soundcloud").hide()):(a(".via-soundcloud a").attr("href",h.soundcloud),a(".via-soundcloud a").html("via Soundcloud"),a(".via-soundcloud").show()):"undefined"==typeof h.soundcloud?(a("a.scloud-icon").attr("href",""),a("a.scloud-icon").hide(),a("div.player-jwplayer").css("width","")):(a("div.player-jwplayer").css("width","100%").addClass("play-start"),a("a.scloud-icon").attr("href",h.soundcloud),a("a.scloud-icon").show())},getVastTag:function(){return K},
setVastTag:function(a){K=a},setSoundCloudTrack:function(a){ca=a}}}(jQuery,soundManager));audiomackPlayer.setSoundCloudTrack(soundcloudTrack);function mobilePlayer(){isMobilePlayer=!0;$(".mobile-player-initial").appendTo(".content-inner").toggleClass("mobile-player-initial").toggleClass("mobile-player")}function trackEvent(a,d,f,g){$.ajax({url:"/stats",data:{s:a,m:d,t:f,tn:g},type:"POST"})}function trackAdPlay(a,d){$.ajax({url:"/api/ad",data:{s:a,m:d},type:"POST"})}
function trackPlaylistEvent(a,d,f,g){$.ajax({url:"/stats/playlist",data:{s:a,m:d,t:f,tn:g},type:"POST"})}function trackPromoEvent(a,d,f,g){$.ajax({url:"/stats/promo",data:{s:a,m:d,t:f,p:g},type:"POST"})}function scrollToElement(a,d,f){d="undefined"!=typeof d?d:1E3;f="undefined"!=typeof f?f:0;a=$(a).offset().top+f;$("html, body").animate({scrollTop:a},d)}function getCurrentTS(){return Math.floor((new Date).getTime()/1E3)}function recordDl(a){a&&trackEvent("dl",a,audiomack.music_token)}
function recordPromoDl(a,d){a&&d&&trackPromoEvent("dl",a,audiomack.music_token,d)};
