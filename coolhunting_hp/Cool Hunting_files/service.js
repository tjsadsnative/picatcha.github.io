(function(e,t){sumo.define("plugins/css",[],function(){if(typeof window=="undefined")return{load:function(e,t,n){n()}};var e=document.getElementsByTagName("head")[0],t=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,n=!1,r=!0;t[1]||t[7]?n=parseInt(t[1])<6||parseInt(t[7])<=9:t[2]?r=!1:t[4]&&(n=parseInt(t[4])<18);var i={};i.pluginBuilder="./css-builder";var s,o=function(){s=document.createElement("style"),e.appendChild(s)},u=function(e,t){o();var n=s.styleSheet||s.sheet;if(n&&n.addImport)n.addImport(e),s.onload=t;else{s.textContent='@import "'+e+'";';var r=setInterval(function(){try{s.sheet.cssRules,clearInterval(r),t()}catch(e){}},10)}},a=function(t,n){var i=document.createElement("link");i.type="text/css",i.rel="stylesheet";if(r)i.onload=function(){i.onload=function(){},setTimeout(n,7)};else var s=setInterval(function(){for(var e=0;e<document.styleSheets.length;e++){var t=document.styleSheets[e];if(t.href==i.href)return clearInterval(s),n()}},10);i.href=t,e.appendChild(i)};return i.normalize=function(e,t){return e.substr(e.length-4,4)==".css"&&(e=e.substr(0,e.length-4)),t(e)},i.load=function(e,t,r,i){(n?u:a)(t.toUrl(e+".css"),r)},i}),function(){var n=this,r=n._,i={},s=Array.prototype,o=Object.prototype,u=Function.prototype;try{var a=document.createElement("iframe");a.style.display="none",document.body.appendChild(a),u=a.contentWindow.Function.prototype,s=a.contentWindow.Array.prototype,o=a.contentWindow.Object.prototype,a.parentNode.removeChild(a)}catch(f){}var l=s.push,c=s.slice,h=s.concat,p=o.toString,d=o.hasOwnProperty,v=s.forEach,m=s.map,g=s.reduce,y=s.reduceRight,b=s.filter,w=s.every,E=s.some,S=s.indexOf,x=s.lastIndexOf,T=Array.isArray,N=Object.keys,C=u.bind,k=function(e){if(e instanceof k)return e;if(!(this instanceof k))return new k(e);this._wrapped=e};typeof e!="undefined"?(typeof t!="undefined"&&t.exports&&(e=t.exports=k),e._=k):n!=window&&(n._=k),k.VERSION="1.5.2";var L=k.each=k.forEach=function(e,t,n){if(e==null)return;if(v&&e.forEach===v)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,s=e.length;r<s;r++)if(t.call(n,e[r],r,e)===i)return}else{var o=k.keys(e);for(var r=0,s=o.length;r<s;r++)if(t.call(n,e[o[r]],o[r],e)===i)return}};k.map=k.collect=function(e,t,n){var r=[];return e==null?r:m&&e.map===m?e.map(t,n):(L(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var A="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(g&&e.reduce===g)return r&&(t=k.bind(t,r)),i?e.reduce(t,n):e.reduce(t);L(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(A);return n},k.reduceRight=k.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(y&&e.reduceRight===y)return r&&(t=k.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=k.keys(e);s=o.length}L(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(A);return n},k.find=k.detect=function(e,t,n){var r;return O(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},k.filter=k.select=function(e,t,n){var r=[];return e==null?r:b&&e.filter===b?e.filter(t,n):(L(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},k.reject=function(e,t,n){return k.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},k.every=k.all=function(e,t,n){t||(t=k.identity);var r=!0;return e==null?r:w&&e.every===w?e.every(t,n):(L(e,function(e,s,o){if(!(r=r&&t.call(n,e,s,o)))return i}),!!r)};var O=k.some=k.any=function(e,t,n){t||(t=k.identity);var r=!1;return e==null?r:E&&e.some===E?e.some(t,n):(L(e,function(e,s,o){if(r||(r=t.call(n,e,s,o)))return i}),!!r)};k.contains=k.include=function(e,t){return e==null?!1:S&&e.indexOf===S?e.indexOf(t)!=-1:O(e,function(e){return e===t})},k.invoke=function(e,t){var n=c.call(arguments,2),r=k.isFunction(t);return k.map(e,function(e){return(r?t:e[t]).apply(e,n)})},k.pluck=function(e,t){return k.map(e,function(e){return e[t]})},k.where=function(e,t,n){return k.isEmpty(t)?n?void 0:[]:k[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},k.findWhere=function(e,t){return k.where(e,t,!0)},k.max=function(e,t,n){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&k.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return L(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>r.computed&&(r={value:e,computed:o})}),r.value},k.min=function(e,t,n){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&k.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return L(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},k.shuffle=function(e){var t,n=0,r=[];return L(e,function(e){t=k.random(n++),r[n-1]=r[t],r[t]=e}),r},k.sample=function(e,t,n){return arguments.length<2||n?e[k.random(e.length-1)]:k.shuffle(e).slice(0,Math.max(0,t))};var M=function(e){return k.isFunction(e)?e:function(t){return t[e]}};k.sortBy=function(e,t,n){var r=M(t);return k.pluck(k.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var _=function(e){return function(t,n,r){var i={},s=n==null?k.identity:M(n);return L(t,function(n,o){var u=s.call(r,n,o,t);e(i,u,n)}),i}};k.groupBy=_(function(e,t,n){(k.has(e,t)?e[t]:e[t]=[]).push(n)}),k.indexBy=_(function(e,t,n){e[t]=n}),k.countBy=_(function(e,t){k.has(e,t)?e[t]++:e[t]=1}),k.sortedIndex=function(e,t,n,r){n=n==null?k.identity:M(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},k.toArray=function(e){return e?k.isArray(e)?c.call(e):e.length===+e.length?k.map(e,k.identity):k.values(e):[]},k.size=function(e){return e==null?0:e.length===+e.length?e.length:k.keys(e).length},k.first=k.head=k.take=function(e,t,n){return e==null?void 0:t==null||n?e[0]:c.call(e,0,t)},k.initial=function(e,t,n){return c.call(e,0,e.length-(t==null||n?1:t))},k.last=function(e,t,n){return e==null?void 0:t==null||n?e[e.length-1]:c.call(e,Math.max(e.length-t,0))},k.rest=k.tail=k.drop=function(e,t,n){return c.call(e,t==null||n?1:t)},k.compact=function(e){return k.filter(e,k.identity)};var D=function(e,t,n){return t&&k.every(e,k.isArray)?h.apply(n,e):(L(e,function(e){k.isArray(e)||k.isArguments(e)?t?l.apply(n,e):D(e,t,n):n.push(e)}),n)};k.flatten=function(e,t){return D(e,t,[])},k.without=function(e){return k.difference(e,c.call(arguments,1))},k.uniq=k.unique=function(e,t,n,r){k.isFunction(t)&&(r=n,n=t,t=!1);var i=n?k.map(e,n,r):e,s=[],o=[];return L(i,function(n,r){if(t?!r||o[o.length-1]!==n:!k.contains(o,n))o.push(n),s.push(e[r])}),s},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(e){var t=c.call(arguments,1);return k.filter(k.uniq(e),function(e){return k.every(t,function(t){return k.indexOf(t,e)>=0})})},k.difference=function(e){var t=h.apply(s,c.call(arguments,1));return k.filter(e,function(e){return!k.contains(t,e)})},k.zip=function(){var e=k.max(k.pluck(arguments,"length").concat(0)),t=new Array(e);for(var n=0;n<e;n++)t[n]=k.pluck(arguments,""+n);return t},k.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},k.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=k.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(S&&e.indexOf===S)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},k.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(x&&e.lastIndexOf===x)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},k.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var P=function(){};k.bind=function(e,t){var n,r;if(C&&e.bind===C)return C.apply(e,c.call(arguments,1));if(!k.isFunction(e))throw new TypeError;return n=c.call(arguments,2),r=function(){if(this instanceof r){P.prototype=e.prototype;var i=new P;P.prototype=null;var s=e.apply(i,n.concat(c.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(c.call(arguments)))}},k.partial=function(e){var t=c.call(arguments,1);return function(){return e.apply(this,t.concat(c.call(arguments)))}},k.bindAll=function(e){var t=c.call(arguments,1);if(t.length===0)throw new Error("bindAll must be passed function names");return L(t,function(t){e[t]=k.bind(e[t],e)}),e},k.memoize=function(e,t){var n={};return t||(t=k.identity),function(){var r=t.apply(this,arguments);return k.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},k.delay=function(e,t){var n=c.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},k.defer=function(e){return k.delay.apply(k,[e,1].concat(c.call(arguments,1)))},k.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:new Date,o=null,s=e.apply(r,i)};return function(){var f=new Date;!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0?(clearTimeout(o),o=null,u=f,s=e.apply(r,i)):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},k.debounce=function(e,t,n){var r,i,s,o,u;return function(){s=this,i=arguments,o=new Date;var a=function(){var f=new Date-o;f<t?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i)))},f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i)),u}},k.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},k.wrap=function(e,t){return function(){var n=[e];return l.apply(n,arguments),t.apply(this,n)}},k.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},k.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},k.keys=N||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)k.has(e,n)&&t.push(n);return t},k.values=function(e){var t=k.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},k.pairs=function(e){var t=k.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},k.invert=function(e){var t={},n=k.keys(e);for(var r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},k.functions=k.methods=function(e){var t=[];for(var n in e)k.isFunction(e[n])&&t.push(n);return t.sort()},k.extend=function(e){return L(c.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},k.pick=function(e){var t={},n=h.apply(s,c.call(arguments,1));return L(n,function(n){n in e&&(t[n]=e[n])}),t},k.omit=function(e){var t={},n=h.apply(s,c.call(arguments,1));for(var r in e)k.contains(n,r)||(t[r]=e[r]);return t},k.defaults=function(e){return L(c.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e};var H=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof k&&(e=e._wrapped),t instanceof k&&(t=t._wrapped);var i=p.call(e);if(i!=p.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(k.isFunction(o)&&o instanceof o&&k.isFunction(u)&&u instanceof u))return!1;n.push(e),r.push(t);var a=0,f=!0;if(i=="[object Array]"){a=e.length,f=a==t.length;if(f)while(a--)if(!(f=H(e[a],t[a],n,r)))break}else{for(var l in e)if(k.has(e,l)){a++;if(!(f=k.has(t,l)&&H(e[l],t[l],n,r)))break}if(f){for(l in t)if(k.has(t,l)&&!(a--))break;f=!a}}return n.pop(),r.pop(),f};k.isEqual=function(e,t){return H(e,t,[],[])},k.isEmpty=function(e){if(e==null)return!0;if(k.isArray(e)||k.isString(e))return e.length===0;for(var t in e)if(k.has(e,t))return!1;return!0},k.isElement=function(e){return!!e&&e.nodeType===1},k.isArray=T||function(e){return p.call(e)=="[object Array]"},k.isObject=function(e){return e===Object(e)},L(["Arguments","Function","String","Number","Date","RegExp"],function(e){k["is"+e]=function(t){return p.call(t)=="[object "+e+"]"}}),k.isArguments(arguments)||(k.isArguments=function(e){return!!e&&!!k.has(e,"callee")}),typeof /./!="function"&&(k.isFunction=function(e){return typeof e=="function"}),k.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},k.isNaN=function(e){return k.isNumber(e)&&e!=+e},k.isBoolean=function(e){return e===!0||e===!1||p.call(e)=="[object Boolean]"},k.isNull=function(e){return e===null},k.isUndefined=function(e){return e===void 0},k.has=function(e,t){return d.call(e,t)},k.noConflict=function(){return n._=r,this},k.identity=function(e){return e},k.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},k.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var B={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};B.unescape=k.invert(B.escape);var j={escape:new RegExp("["+k.keys(B.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(B.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(e){k[e]=function(t){return t==null?"":(""+t).replace(j[e],function(t){return B[e][t]})}}),k.result=function(e,t){if(e==null)return void 0;var n=e[t];return k.isFunction(n)?n.call(e):n},k.mixin=function(e){L(k.functions(e),function(t){var n=k[t]=e[t];k.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),U.call(this,n.apply(k,e))}})};var F=0;k.uniqueId=function(e){var t=++F+"";return e?e+t:t},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(e,t,n){var r;n=k.defaults({},n,k.templateSettings);var i=new RegExp([(n.escape||I).source,(n.interpolate||I).source,(n.evaluate||I).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(R,function(e){return"\\"+q[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,k);var a=function(e){return r.call(this,e,k)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},k.chain=function(e){return k(e).chain()};var U=function(e){return this._chain?k(e).chain():e};k.mixin(k),L(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];k.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],U.call(this,n)}}),L(["concat","join","slice"],function(e){var t=s[e];k.prototype[e]=function(){return U.call(this,t.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),typeof sumo.define=="function"&&sumo.define.amd&&sumo.define("underscore",[],function(){return k})}.call(this),sumo.define("underscore-lib",function(){}),sumo.define("underscore",["underscore-lib"],function(e){return e.noConflict()}),sumo.define("lib/heatmaps",["require"],function(e){var t={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},n=function(){var n=function(t){this._coordinator={},this._data=[],this._radi=[],this._min=0,this._max=1,this._xField=t.xField||t.defaultXField,this._yField=t.yField||t.defaultYField,this._valueField=t.valueField||t.defaultValueField,t.radius&&(this._cfgRadius=t.radius)},r=t.defaultRadius;return n.prototype={_organiseData:function(e,t){var n=e[this._xField],i=e[this._yField],s=this._radi,o=this._data,u=this._max,a=this._min,f=e[this._valueField]||1,l=e.radius||this._cfgRadius||r;return o[n]||(o[n]=[],s[n]=[]),o[n][i]?o[n][i]+=f:(o[n][i]=f,s[n][i]=l),o[n][i]>u?(t?this.setDataMax(o[n][i]):this._max=o[n][i],!1):{x:n,y:i,value:f,radius:l,min:a,max:u}},_unOrganizeData:function(){var e=[],t=this._data,n=this._radi;for(var r in t)for(var i in t[r])e.push({x:r,y:i,radius:n[r][i],value:t[r][i]});return{min:this._min,max:this._max,data:e}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(arguments[0].length>0){var e=arguments[0],t=e.length;while(t--)this.addData.call(this,e[t])}else{var n=this._organiseData(arguments[0],!0);n&&this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[n]})}return this},setData:function(e){var t=e.data,n=t.length;this._data=[],this._radi=[];for(var r=0;r<n;r++)this._organiseData(t[r],!1);return this._max=e.max,this._min=e.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(e){return this._max=e,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(e){return this._min=e,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(e){this._coordinator=e},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},n}(),r=function(){function i(e){var n=e.container,r=this.shadowCanvas=document.createElement("canvas"),i=this.canvas=e.canvas||document.createElement("canvas"),s=this._renderBoundaries=[1e4,1e4,0,0],o=getComputedStyle(e.container)||{};i.className="sumome-heatmap-canvas",this._width=i.width=r.width=+o.width.replace(/px/,""),this._height=i.height=r.height=+o.height.replace(/px/,""),this.shadowCtx=r.getContext("2d"),this.ctx=i.getContext("2d"),i.style.cssText=r.style.cssText="position:absolute;left:0;top:0;",i.style.width=this._width+"px",i.style.height=this._height+"px",n.style.position="relative",n.appendChild(i),this._palette=t(e),this._templates={},this._setStyles(e)}var t=function(e){var t=e.gradient||e.defaultGradient,n=document.createElement("canvas"),r=n.getContext("2d");n.width=256,n.height=1;var i=r.createLinearGradient(0,0,256,1);for(var s in t)i.addColorStop(s,t[s]);return r.fillStyle=i,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data},n=function(e,t){var n=document.createElement("canvas"),r=n.getContext("2d"),i=e,s=e;n.width=n.height=e*2;if(t==1)r.beginPath(),r.arc(i,s,e,0,2*Math.PI,!1),r.fillStyle="rgba(0,0,0,1)",r.fill();else{var o=r.createRadialGradient(i,s,e*t,i,s,e);o.addColorStop(0,"rgba(0,0,0,1)"),o.addColorStop(1,"rgba(0,0,0,0)"),r.fillStyle=o,r.fillRect(0,0,2*e,2*e)}return n},r=function(e){var t=[],n=e.min,r=e.max,i=e.radi,e=e.data,s=Object.keys(e),o=s.length;while(o--){var u=s[o];if(!e.hasOwnProperty(u))continue;var a=Object.keys(e[u]),f=a.length;while(f--){var l=a[f];if(!e[u].hasOwnProperty(l))continue;var c=e[u][l],h=i[u][l];t.push({x:u,y:l,value:c,radius:h})}}return{min:n,max:r,data:t}};return i.prototype={renderPartial:function(e){this._drawAlpha(e),this._colorize()},renderAll:function(e){this._clear(),this._drawAlpha(r(e)),this._colorize()},_updateGradient:function(e){this._palette=t(e)},updateConfig:function(e){e.gradient&&this._updateGradient(e),this._setStyles(e)},setDimensions:function(e,t){this._width=e,this._height=t,this.canvas.width=this.shadowCanvas.width=e,this.canvas.height=this.shadowCanvas.height=t},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(e){this._blur=e.blur==0?0:e.blur||e.defaultBlur,e.backgroundColor&&(this.canvas.style.backgroundColor=e.backgroundColor),this._opacity=(e.opacity||0)*255,this._maxOpacity=(e.maxOpacity||e.defaultMaxOpacity)*255,this._minOpacity=(e.minOpacity||e.defaultMinOpacity)*255,this._useGradientOpacity=!!e.useGradientOpacity},_drawAlpha:function(e){var t=this._min=e.min,r=this._max=e.max,e=e.data||[],i=e.length,s=1-this._blur;while(i--){var o=e[i],u=o.x,a=o.y,f=o.radius,l=Math.min(o.value,r),c=u-f,h=a-f,p=this.shadowCtx,d;this._templates[f]?d=this._templates[f]:this._templates[f]=d=n(f,s),p.globalAlpha=(l-t)/(r-t),p.drawImage(d,c,h),c<this._renderBoundaries[0]&&(this._renderBoundaries[0]=c),h<this._renderBoundaries[1]&&(this._renderBoundaries[1]=h),c+2*f>this._renderBoundaries[2]&&(this._renderBoundaries[2]=c+2*f),h+2*f>this._renderBoundaries[3]&&(this._renderBoundaries[3]=h+2*f)}},_colorize:function(){var e=this._renderBoundaries[0],t=this._renderBoundaries[1],n=this._renderBoundaries[2]-e,r=this._renderBoundaries[3]-t,i=this._width,s=this._height,o=this._opacity,u=this._maxOpacity,a=this._minOpacity,f=this._useGradientOpacity;e<0&&(e=0),t<0&&(t=0),e+n>i&&(n=i-e),t+r>s&&(r=s-t);var l=this.shadowCtx.getImageData(e,t,n,r),c=l.data,h=c.length,p=this._palette;for(var d=3;d<h;d+=4){var v=c[d],m=v*4;if(!m)continue;var g;o>0?g=o:v<u?v<a?g=a:g=v:g=u,c[d-3]=p[m],c[d-2]=p[m+1],c[d-1]=p[m+2],c[d]=f?p[m+3]:g}l.data=c,this.ctx.putImageData(l,e,t),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(e){var t,n=this.shadowCtx,r=n.getImageData(e.x,e.y,1,1),i=r.data[3],s=this._max,o=this._min;return t=Math.abs(s-o)*(i/255)>>0,t},getDataURL:function(){return this.canvas.toDataURL()}},i}(),i=function(){var n=!1;return t.defaultRenderer==="canvas2d"&&(n=r),n}(),s={merge:function(){var e={},t=arguments.length;for(var n=0;n<t;n++){var r=arguments[n];for(var i in r)e[i]=r[i]}return e}},o=function(){function u(){var e=this._config=s.merge(t,arguments[0]||{});this._coordinator=new r;if(e.plugin){var u=e.plugin;if(!t.plugins[u])throw new Error("Plugin '"+u+"' not found. Maybe it was not registered.");var a=t.plugins[u];this._renderer=new a.renderer(e),this._store=new a.store(e)}else this._renderer=new i(e),this._store=new n(e);o(this)}var r=function(){function t(){this.cStore={}}return t.prototype={on:function(e,t,n){var r=this.cStore;r[e]||(r[e]=[]),r[e].push(function(e){return t.call(n,e)})},emit:function(e,t){var n=this.cStore;if(n[e]){var r=n[e].length;for(var i=0;i<r;i++){var s=n[e][i];s(t)}}}},t}(),o=function(e){var t=e._renderer,n=e._coordinator,r=e._store;n.on("renderpartial",t.renderPartial,t),n.on("renderall",t.renderAll,t),n.on("extremachange",function(t){e._config.onExtremaChange&&e._config.onExtremaChange({min:t.min,max:t.max,gradient:e._config.gradient||e._config.defaultGradient})}),r.setCoordinator(n)};return u.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(e){return this._config=s.merge(this._config,e),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(e){return this._store.getValueAt?this._store.getValueAt(e):this._renderer.getValueAt?this._renderer.getValueAt(e):null}},u}(),u={create:function(e){return new o(e)},register:function(e,n){t.plugins[e]=n}};return u}),sumo.define("punycode",function(){}),sumo.define("IPv6",function(){}),sumo.define("SecondLevelDomains",function(){}),function(n,r){typeof e=="object"?t.exports=r(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):typeof sumo.define=="function"&&sumo.define.amd?sumo.define("URI",["./punycode","./IPv6","./SecondLevelDomains"],r):n.URI=r(n.punycode,n.IPv6,n.SecondLevelDomains,n)}(this,function(e,t,n,r){function s(e,t){return this instanceof s?(e===undefined&&(typeof location!="undefined"?e=location.href+"":e=""),this.href(e),t!==undefined?this.absoluteTo(t):this):new s(e,t)}function a(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function f(e){return e===undefined?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function l(e){return f(e)==="Array"}function c(e,t){var n={},r,i;if(l(t))for(r=0,i=t.length;r<i;r++)n[t[r]]=!0;else n[t]=!0;for(r=0,i=e.length;r<i;r++)n[e[r]]!==undefined&&(e.splice(r,1),i--,r--);return e}function h(e,t){var n,r;if(l(t)){for(n=0,r=t.length;n<r;n++)if(!h(e,t[n]))return!1;return!0}var i=f(t);for(n=0,r=e.length;n<r;n++)if(i==="RegExp"){if(typeof e[n]=="string"&&e[n].match(t))return!0}else if(e[n]===t)return!0;return!1}function p(e,t){if(!l(e)||!l(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function d(e){return escape(e)}function v(e){return encodeURIComponent(e).replace(/[!'()*]/g,d).replace(/\*/g,"%2A")}var i=r&&r.URI;s.version="1.12.0";var o=s.prototype,u=Object.prototype.hasOwnProperty;s._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:s.duplicateQueryParameters,escapeQuerySpace:s.escapeQuerySpace}},s.duplicateQueryParameters=!1,s.escapeQuerySpace=!0,s.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,s.idn_expression=/[^a-z0-9\.-]/i,s.punycode_expression=/(xn--)/i,s.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,s.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,s.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/ig,s.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/},s.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},s.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,s.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"},s.getDomAttribute=function(e){if(!e||!e.nodeName)return undefined;var t=e.nodeName.toLowerCase();return t==="input"&&e.type!=="image"?undefined:s.domAttributes[t]},s.encode=v,s.decode=decodeURIComponent,s.iso8859=function(){s.encode=escape,s.decode=unescape},s.unicode=function(){s.encode=v,s.decode=decodeURIComponent},s.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},s.encodeQuery=function(e,t){var n=s.encode(e+"");return t?n.replace(/%20/g,"+"):n},s.decodeQuery=function(e,t){e+="";try{return s.decode(t?e.replace(/\+/g,"%20"):e)}catch(n){return e}},s.recodePath=function(e){var t=(e+"").split("/");for(var n=0,r=t.length;n<r;n++)t[n]=s.encodePathSegment(s.decode(t[n]));return t.join("/")},s.decodePath=function(e){var t=(e+"").split("/");for(var n=0,r=t.length;n<r;n++)t[n]=s.decodePathSegment(t[n]);return t.join("/")};var m={encode:"encode",decode:"decode"},g,y=function(e,t){return function(n){return s[t](n+"").replace(s.characters[e][t].expression,function(n){return s.characters[e][t].map[n]})}};for(g in m)s[g+"PathSegment"]=y("pathname",m[g]);s.encodeReserved=y("reserved","encode"),s.parse=function(e,t){var n;return t||(t={}),n=e.indexOf("#"),n>-1&&(t.fragment=e.substring(n+1)||null,e=e.substring(0,n)),n=e.indexOf("?"),n>-1&&(t.query=e.substring(n+1)||null,e=e.substring(0,n)),e.substring(0,2)==="//"?(t.protocol=null,e=e.substring(2),e=s.parseAuthority(e,t)):(n=e.indexOf(":"),n>-1&&(t.protocol=e.substring(0,n)||null,t.protocol&&!t.protocol.match(s.protocol_expression)?t.protocol=undefined:t.protocol==="file"?e=e.substring(n+3):e.substring(n+1,n+3)==="//"?(e=e.substring(n+3),e=s.parseAuthority(e,t)):(e=e.substring(n+1),t.urn=!0))),t.path=e,t},s.parseHost=function(e,t){var n=e.indexOf("/"),r,i;return n===-1&&(n=e.length),e.charAt(0)==="["?(r=e.indexOf("]"),t.hostname=e.substring(1,r)||null,t.port=e.substring(r+2,n)||null):e.indexOf(":")!==e.lastIndexOf(":")?(t.hostname=e.substring(0,n)||null,t.port=null):(i=e.substring(0,n).split(":"),t.hostname=i[0]||null,t.port=i[1]||null),t.hostname&&e.substring(n).charAt(0)!=="/"&&(n++,e="/"+e),e.substring(n)||"/"},s.parseAuthority=function(e,t){return e=s.parseUserinfo(e,t),s.parseHost(e,t)},s.parseUserinfo=function(e,t){var n=e.indexOf("/"),r=n>-1?e.lastIndexOf("@",n):e.indexOf("@"),i;return r>-1&&(n===-1||r<n)?(i=e.substring(0,r).split(":"),t.username=i[0]?s.decode(i[0]):null,i.shift(),t.password=i[0]?s.decode(i.join(":")):null,e=e.substring(r+1)):(t.username=null,t.password=null),e},s.parseQuery=function(e,t){if(!e)return{};e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!e)return{};var n={},r=e.split("&"),i=r.length,o,u,a;for(var f=0;f<i;f++)o=r[f].split("="),u=s.decodeQuery(o.shift(),t),a=o.length?s.decodeQuery(o.join("="),t):null,n[u]?(typeof n[u]=="string"&&(n[u]=[n[u]]),n[u].push(a)):n[u]=a;return n},s.build=function(e){var t="";return e.protocol&&(t+=e.protocol+":"),!e.urn&&(t||e.hostname)&&(t+="//"),t+=s.buildAuthority(e)||"",typeof e.path=="string"&&(e.path.charAt(0)!=="/"&&typeof e.hostname=="string"&&(t+="/"),t+=e.path),typeof e.query=="string"&&e.query&&(t+="?"+e.query),typeof e.fragment=="string"&&e.fragment&&(t+="#"+e.fragment),t},s.buildHost=function(e){var t="";return e.hostname?(s.ip6_expression.test(e.hostname)?e.port?t+="["+e.hostname+"]:"+e.port:t+=e.hostname:(t+=e.hostname,e.port&&(t+=":"+e.port)),t):""},s.buildAuthority=function(e){return s.buildUserinfo(e)+s.buildHost(e)},s.buildUserinfo=function(e){var t="";return e.username&&(t+=s.encode(e.username),e.password&&(t+=":"+s.encode(e.password)),t+="@"),t},s.buildQuery=function(e,t,n){var r="",i,o,a,f;for(o in e)if(u.call(e,o)&&o)if(l(e[o])){i={};for(a=0,f=e[o].length;a<f;a++)e[o][a]!==undefined&&i[e[o][a]+""]===undefined&&(r+="&"+s.buildQueryParameter(o,e[o][a],n),t!==!0&&(i[e[o][a]+""]=!0))}else e[o]!==undefined&&(r+="&"+s.buildQueryParameter(o,e[o],n));return r.substring(1)},s.buildQueryParameter=function(e,t,n){return s.encodeQuery(e,n)+(t!==null?"="+s.encodeQuery(t,n):"")},s.addQuery=function(e,t,n){if(typeof t=="object")for(var r in t)u.call(t,r)&&s.addQuery(e,r,t[r]);else{if(typeof t!="string")throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(e[t]===undefined){e[t]=n;return}typeof e[t]=="string"&&(e[t]=[e[t]]),l(n)||(n=[n]),e[t]=e[t].concat(n)}},s.removeQuery=function(e,t,n){var r,i,o;if(l(t))for(r=0,i=t.length;r<i;r++)e[t[r]]=undefined;else if(typeof t=="object")for(o in t)u.call(t,o)&&s.removeQuery(e,o,t[o]);else{if(typeof t!="string")throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");n!==undefined?e[t]===n?e[t]=undefined:l(e[t])&&(e[t]=c(e[t],n)):e[t]=undefined}},s.hasQuery=function(e,t,n,r){if(typeof t=="object"){for(var i in t)if(u.call(t,i)&&!s.hasQuery(e,i,t[i]))return!1;return!0}if(typeof t!="string")throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(f(n)){case"Undefined":return t in e;case"Boolean":var o=Boolean(l(e[t])?e[t].length:e[t]);return n===o;case"Function":return!!n(e[t],t,e);case"Array":if(!l(e[t]))return!1;var a=r?h:p;return a(e[t],n);case"RegExp":if(!l(e[t]))return Boolean(e[t]&&e[t].match(n));if(!r)return!1;return h(e[t],n);case"Number":n=String(n);case"String":if(!l(e[t]))return e[t]===n;if(!r)return!1;return h(e[t],n);default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},s.commonPath=function(e,t){var n=Math.min(e.length,t.length),r;for(r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r)){r--;break}if(r<1)return e.charAt(0)===t.charAt(0)&&e.charAt(0)==="/"?"/":"";if(e.charAt(r)!=="/"||t.charAt(r)!=="/")r=e.substring(0,r).lastIndexOf("/");return e.substring(0,r+1)},s.withinString=function(e,t,n){n||(n={});var r=n.start||s.findUri.start,i=n.end||s.findUri.end,o=n.trim||s.findUri.trim,u=/[a-z0-9-]=["']?$/i;r.lastIndex=0;for(;;){var a=r.exec(e);if(!a)break;var f=a.index;if(n.ignoreHtml){var l=e.slice(Math.max(f-3,0),f);if(l&&u.test(l))continue}var c=f+e.slice(f).search(i),h=e.slice(f,c).replace(o,"");if(n.ignore&&n.ignore.test(h))continue;c=f+h.length;var p=t(h,f,c,e);e=e.slice(0,f)+p+e.slice(c),r.lastIndex=f+p.length}return r.lastIndex=0,e},s.ensureValidHostname=function(t){if(t.match(s.invalid_hostname_characters)){if(!e)throw new TypeError("Hostname '"+t+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(e.toASCII(t).match(s.invalid_hostname_characters))throw new TypeError("Hostname '"+t+"' contains characters other than [A-Z0-9.-]")}},s.noConflict=function(e){if(e){var n={URI:this.noConflict()};return URITemplate&&typeof URITemplate.noConflict=="function"&&(n.URITemplate=URITemplate.noConflict()),t&&typeof t.noConflict=="function"&&(n.IPv6=t.noConflict()),SecondLevelDomains&&typeof SecondLevelDomains.noConflict=="function"&&(n.SecondLevelDomains=SecondLevelDomains.noConflict()),n}return r.URI===this&&(r.URI=i),this},o.build=function(e){if(e===!0)this._deferred_build=!0;else if(e===undefined||this._deferred_build)this._string=s.build(this._parts),this._deferred_build=!1;return this},o.clone=function(){return new s(this)},o.valueOf=o.toString=function(){return this.build(!1)._string},m={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},y=function(e){return function(t,n){return t===undefined?this._parts[e]||"":(this._parts[e]=t||null,this.build(!n),this)}};for(g in m)o[g]=y(m[g]);m={query:"?",fragment:"#"},y=function(e,t){return function(n,r){return n===undefined?this._parts[e]||"":(n!==null&&(n+="",n.charAt(0)===t&&(n=n.substring(1))),this._parts[e]=n,this.build(!r),this)}};for(g in m)o[g]=y(g,m[g]);m={search:["?","query"],hash:["#","fragment"]},y=function(e,t){return function(n,r){var i=this[e](n,r);return typeof i=="string"&&i.length?t+i:i}};for(g in m)o[g]=y(m[g][1],m[g][0]);o.pathname=function(e,t){if(e===undefined||e===!0){var n=this._parts.path||(this._parts.hostname?"/":"");return e?s.decodePath(n):n}return this._parts.path=e?s.recodePath(e):"/",this.build(!t),this},o.path=o.pathname,o.href=function(e,t){var n;if(e===undefined)return this.toString();this._string="",this._parts=s._parts();var r=e instanceof s,i=typeof e=="object"&&(e.hostname||e.path||e.pathname);if(e.nodeName){var o=s.getDomAttribute(e);e=e[o]||"",i=!1}!r&&i&&e.pathname!==undefined&&(e=e.toString());if(typeof e=="string")this._parts=s.parse(e,this._parts);else{if(!r&&!i)throw new TypeError("invalid input");var a=r?e._parts:e;for(n in a)u.call(this._parts,n)&&(this._parts[n]=a[n])}return this.build(!t),this},o.is=function(e){var t=!1,r=!1,i=!1,o=!1,u=!1,a=!1,f=!1,l=!this._parts.urn;this._parts.hostname&&(l=!1,r=s.ip4_expression.test(this._parts.hostname),i=s.ip6_expression.test(this._parts.hostname),t=r||i,o=!t,u=o&&n&&n.has(this._parts.hostname),a=o&&s.idn_expression.test(this._parts.hostname),f=o&&s.punycode_expression.test(this._parts.hostname));switch(e.toLowerCase()){case"relative":return l;case"absolute":return!l;case"domain":case"name":return o;case"sld":return u;case"ip":return t;case"ip4":case"ipv4":case"inet4":return r;case"ip6":case"ipv6":case"inet6":return i;case"idn":return a;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return f}return null};var b=o.protocol,w=o.port,E=o.hostname;o.protocol=function(e,t){if(e!==undefined&&e){e=e.replace(/:(\/\/)?$/,"");if(!e.match(s.protocol_expression))throw new TypeError("Protocol '"+e+"' contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]")}return b.call(this,e,t)},o.scheme=o.protocol,o.port=function(e,t){if(this._parts.urn)return e===undefined?"":this;if(e!==undefined){e===0&&(e=null);if(e){e+="",e.charAt(0)===":"&&(e=e.substring(1));if(e.match(/[^0-9]/))throw new TypeError("Port '"+e+"' contains characters other than [0-9]")}}return w.call(this,e,t)},o.hostname=function(e,t){if(this._parts.urn)return e===undefined?"":this;if(e!==undefined){var n={};s.parseHost(e,n),e=n.hostname}return E.call(this,e,t)},o.host=function(e,t){return this._parts.urn?e===undefined?"":this:e===undefined?this._parts.hostname?s.buildHost(this._parts):"":(s.parseHost(e,this._parts),this.build(!t),this)},o.authority=function(e,t){return this._parts.urn?e===undefined?"":this:e===undefined?this._parts.hostname?s.buildAuthority(this._parts):"":(s.parseAuthority(e,this._parts),this.build(!t),this)},o.userinfo=function(e,t){if(this._parts.urn)return e===undefined?"":this;if(e===undefined){if(!this._parts.username)return"";var n=s.buildUserinfo(this._parts);return n.substring(0,n.length-1)}return e[e.length-1]!=="@"&&(e+="@"),s.parseUserinfo(e,this._parts),this.build(!t),this},o.resource=function(e,t){var n;return e===undefined?this.path()+this.search()+this.hash():(n=s.parse(e),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!t),this)},o.subdomain=function(e,t){if(this._parts.urn)return e===undefined?"":this;if(e===undefined){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}var r=this._parts.hostname.length-this.domain().length,i=this._parts.hostname.substring(0,r),o=new RegExp("^"+a(i));return e&&e.charAt(e.length-1)!=="."&&(e+="."),e&&s.ensureValidHostname(e),this._parts.hostname=this._parts.hostname.replace(o,e),this.build(!t),this},o.domain=function(e,t){if(this._parts.urn)return e===undefined?"":this;typeof e=="boolean"&&(t=e,e=undefined);if(e===undefined){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);if(n&&n.length<2)return this._parts.hostname;var r=this._parts.hostname.length-this.tld(t).length-1;return r=this._parts.hostname.lastIndexOf(".",r-1)+1,this._parts.hostname.substring(r)||""}if(!e)throw new TypeError("cannot set domain empty");s.ensureValidHostname(e);if(!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var i=new RegExp(a(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(i,e)}return this.build(!t),this},o.tld=function(e,t){if(this._parts.urn)return e===undefined?"":this;typeof e=="boolean"&&(t=e,e=undefined);if(e===undefined){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.lastIndexOf("."),i=this._parts.hostname.substring(r+1);return t!==!0&&n&&n.list[i.toLowerCase()]?n.get(this._parts.hostname)||i:i}var s;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(e))throw new TypeError("TLD '"+e+"' contains characters other than [A-Z0-9]");s=new RegExp(a(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");s=new RegExp(a(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,e)}return this.build(!t),this},o.directory=function(e,t){if(this._parts.urn)return e===undefined?"":this;if(e===undefined||e===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var n=this._parts.path.length-this.filename().length-1,r=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return e?s.decodePath(r):r}var i=this._parts.path.length-this.filename().length,o=this._parts.path.substring(0,i),u=new RegExp("^"+a(o));return this.is("relative")||(e||(e="/"),e.charAt(0)!=="/"&&(e="/"+e)),e&&e.charAt(e.length-1)!=="/"&&(e+="/"),e=s.recodePath(e),this._parts.path=this._parts.path.replace(u,e),this.build(!t),this},o.filename=function(e,t){if(this._parts.urn)return e===undefined?"":this;if(e===undefined||e===!0){if(!this._parts.path||this._parts.path==="/")return"";var n=this._parts.path.lastIndexOf("/"),r=this._parts.path.substring(n+1);return e?s.decodePathSegment(r):r}var i=!1;e.charAt(0)==="/"&&(e=e.substring(1)),e.match(/\.?\//)&&(i=!0);var o=new RegExp(a(this.filename())+"$");return e=s.recodePath(e),this._parts.path=this._parts.path.replace(o,e),i?this.normalizePath(t):this.build(!t),this},o.suffix=function(e,t){if(this._parts.urn)return e===undefined?"":this;if(e===undefined||e===!0){if(!this._parts.path||this._parts.path==="/")return"";var n=this.filename(),r=n.lastIndexOf("."),i,o;return r===-1?"":(i=n.substring(r+1),o=/^[a-z0-9%]+$/i.test(i)?i:"",e?s.decodePathSegment(o):o)}e.charAt(0)==="."&&(e=e.substring(1));var u=this.suffix(),f;if(!u){if(!e)return this;this._parts.path+="."+s.recodePath(e)}else e?f=new RegExp(a(u)+"$"):f=new RegExp(a("."+u)+"$");return f&&(e=s.recodePath(e),this._parts.path=this._parts.path.replace(f,e)),this.build(!t),this},o.segment=function(e,t,n){var r=this._parts.urn?":":"/",i=this.path(),s=i.substring(0,1)==="/",o=i.split(r);e!==undefined&&typeof e!="number"&&(n=t,t=e,e=undefined);if(e!==undefined&&typeof e!="number")throw new Error("Bad segment '"+e+"', must be 0-based integer");s&&o.shift(),e<0&&(e=Math.max(o.length+e,0));if(t===undefined)return e===undefined?o:o[e];if(e===null||o[e]===undefined){if(l(t)){o=[];for(var u=0,a=t.length;u<a;u++){if(!t[u].length&&(!o.length||!o[o.length-1].length))continue;o.length&&!o[o.length-1].length&&o.pop(),o.push(t[u])}}else if(t||typeof t=="string")o[o.length-1]===""?o[o.length-1]=t:o.push(t)}else t||typeof t=="string"&&t.length?o[e]=t:o.splice(e,1);return s&&o.unshift(""),this.path(o.join(r),n)},o.segmentCoded=function(e,t,n){var r,i,o;typeof e!="number"&&(n=t,t=e,e=undefined);if(t===undefined){r=this.segment(e,t,n);if(!l(r))r=r!==undefined?s.decode(r):undefined;else for(i=0,o=r.length;i<o;i++)r[i]=s.decode(r[i]);return r}if(!l(t))t=typeof t=="string"?s.encode(t):t;else for(i=0,o=t.length;i<o;i++)t[i]=s.decode(t[i]);return this.segment(e,t,n)};var S=o.query;return o.query=function(e,t){if(e===!0)return s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof e=="function"){var n=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace),r=e.call(this,n);return this._parts.query=s.buildQuery(r||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return e!==undefined&&typeof e!="string"?(this._parts.query=s.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):S.call(this,e,t)},o.setQuery=function(e,t,n){var r=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof e=="object")for(var i in e)u.call(e,i)&&(r[i]=e[i]);else{if(typeof e!="string")throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");r[e]=t!==undefined?t:null}return this._parts.query=s.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof e!="string"&&(n=t),this.build(!n),this},o.addQuery=function(e,t,n){var r=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.addQuery(r,e,t===undefined?null:t),this._parts.query=s.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof e!="string"&&(n=t),this.build(!n),this},o.removeQuery=function(e,t,n){var r=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.removeQuery(r,e,t),this._parts.query=s.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof e!="string"&&(n=t),this.build(!n),this},o.hasQuery=function(e,t,n){var r=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.hasQuery(r,e,t,n)},o.setSearch=o.setQuery,o.addSearch=o.addQuery,o.removeSearch=o.removeQuery,o.hasSearch=o.hasQuery,o.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},o.normalizeProtocol=function(e){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},o.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this},o.normalizePort=function(e){return typeof this._parts.protocol=="string"&&this._parts.port===s.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},o.normalizePath=function(e){if(this._parts.urn)return this;if(!this._parts.path||this._parts.path==="/")return this;var t,n=this._parts.path,r="",i,o;n.charAt(0)!=="/"&&(t=!0,n="/"+n),n=n.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(r=n.substring(1).match(/^(\.\.\/)+/)||"",r&&(r=r[0]));for(;;){i=n.indexOf("/..");if(i===-1)break;if(i===0){n=n.substring(3);continue}o=n.substring(0,i).lastIndexOf("/"),o===-1&&(o=i),n=n.substring(0,o)+n.substring(i+3)}return t&&this.is("relative")&&(n=r+n.substring(1)),n=s.recodePath(n),this._parts.path=n,this.build(!e),this},o.normalizePathname=o.normalizePath,o.normalizeQuery=function(e){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(s.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},o.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},o.normalizeSearch=o.normalizeQuery,o.normalizeHash=o.normalizeFragment,o.iso8859=function(){var e=s.encode,t=s.decode;return s.encode=escape,s.decode=decodeURIComponent,this.normalize(),s.encode=e,s.decode=t,this},o.unicode=function(){var e=s.encode,t=s.decode;return s.encode=v,s.decode=unescape,this.normalize(),s.encode=e,s.decode=t,this},o.readable=function(){var t=this.clone();t.username("").password("").normalize();var n="";t._parts.protocol&&(n+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(n+=e.toUnicode(t._parts.hostname),t._parts.port&&(n+=":"+t._parts.port)):n+=t.host()),t._parts.hostname&&t._parts.path&&t._parts.path.charAt(0)!=="/"&&(n+="/"),n+=t.path(!0);if(t._parts.query){var r="";for(var i=0,o=t._parts.query.split("&"),u=o.length;i<u;i++){var a=(o[i]||"").split("=");r+="&"+s.decodeQuery(a[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),a[1]!==undefined&&(r+="="+s.decodeQuery(a[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+r.substring(1)}return n+=s.decodeQuery(t.hash(),!0),n},o.absoluteTo=function(e){var t=this.clone(),n=["protocol","username","password","hostname","port"],r,i,o;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");e instanceof s||(e=new s(e)),t._parts.protocol||(t._parts.protocol=e._parts.protocol);if(this._parts.hostname)return t;for(i=0;o=n[i];i++)t._parts[o]=e._parts[o];return t._parts.path?t._parts.path.substring(-2)===".."&&(t._parts.path+="/"):(t._parts.path=e._parts.path,t._parts.query||(t._parts.query=e._parts.query)),t.path().charAt(0)!=="/"&&(r=e.directory(),t._parts.path=(r?r+"/":"")+t._parts.path,t.normalizePath()),t.build(),t},o.relativeTo=function(e){var t=this.clone().normalize(),n,r,i,o,u;if(t._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");e=(new s(e)).normalize(),n=t._parts,r=e._parts,o=t.path(),u=e.path();if(o.charAt(0)!=="/")throw new Error("URI is already relative");if(u.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");n.protocol===r.protocol&&(n.protocol=null);if(n.username!==r.username||n.password!==r.password)return t.build();if(n.protocol!==null||n.username!==null||n.password!==null)return t.build();if(n.hostname!==r.hostname||n.port!==r.port)return t.build();n.hostname=null,n.port=null;if(o===u)return n.path="",t.build();i=s.commonPath(t.path(),e.path());if(!i)return t.build();var a=r.path.substring(i.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return n.path=a+n.path.substring(i.length),t.build()},o.equals=function(e){var t=this.clone(),n=new s(e),r={},i={},o={},a,f,c;t.normalize(),n.normalize();if(t.toString()===n.toString())return!0;a=t.query(),f=n.query(),t.query(""),n.query("");if(t.toString()!==n.toString())return!1;if(a.length!==f.length)return!1;r=s.parseQuery(a,this._parts.escapeQuerySpace),i=s.parseQuery(f,this._parts.escapeQuerySpace);for(c in r)if(u.call(r,c)){if(!l(r[c])){if(r[c]!==i[c])return!1}else if(!p(r[c],i[c]))return!1;o[c]=!0}for(c in i)if(u.call(i,c)&&!o[c])return!1;return!0},o.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},o.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},s}),sumo.define("jquery.article",["jquery"],function(e){e.expr[":"].emptytext=e.expr.createPseudo(function(t){return function(t){return e.trim(e(t).text())===""}}),e.fn.findIncludeSelf=function(t,n){var r;return t==":has(> p + p + p)"?r=this.find("p + p + p").parent():r=this.find(t),e(this).is(n)?r:r.addBack(t)},e.fn.exists=function(){return this.length!==0},e.fn.findLeaves=function(n,r){var i=e(this),s=i.findIncludeSelf(n,"body").filter(r);return s=s.filter(t),s.filter(function(){return!e(this).find(s).exists()})},e.fn.findTrunks=function(n,r){var i=e(this),s=i.findIncludeSelf(n,"body").filter(r);return s=s.filter(t),s.filter(function(){return!e(this).parents().filter(s).exists()})};var t=function(){this._header||(this._header=r(e(this))),this._titleText||(this._titleText=o(this));if(this._header){var t=e(this).outerHeight()*.666;if(t&&this._header.outerHeight()>=t)return!1}return!0},n=function(t){var n=t||e("body").find("main, [role=main]").eq(0).get(0)||"body",r=e(),i=':not("[class^=comment],[id^=comment],[class*=footer],.sidebar:not(body) *,aside *,#sidebar *,footer *,[class*=footer]:not(body, [class*=not-footer]) *,#comments *,#livefyre-comments *,[class^=fyre] *,[class^=comment],[id^=comment] *,[class*=related-post]:not(body) *,.archive-page,.aside,.hentry-metro,.hrf-entry,:emptytext,.tve-leads-lightbox article")',s=[];s.push("article"),s.push(".post"),s.push(".entry-content"),s.push(".post-content"),s.push(".post_box"),s.push(".post-item"),s.push(".blog-post-wrapper"),s.push(".type-post"),s.push("#content"),s.push(".blog_content"),n!="body"?(s.push(".hentry"),s.push(".content")):(s.push("main .hentry"),s.push("[role=main] .hentry"),s.push("main .content"),s.push("[role=main] .content")),s.push("#post-content"),s.push("#blog-content"),s.push(".blog-post");var o=[":has(> p + p + p)"];for(var u=0;u<s.length;u++){r=e(n).findLeaves(s[u],i);if(r.length>0)return r}for(var u=0;u<o.length;u++){r=e(n).findTrunks(o[u],i);if(r.length>0)return r}return r},r=function(t){var n=null,r=[".main-title","header",".post-header",".post-title","h1","h2","h3","h4","h5","h6",".title",".headline"],i={};try{r.forEach(function(r){n=e(t).find(r);if(n.length>0)throw i})}catch(s){if(s===i)return n.eq(0);throw s}return null},i=function(t){var n=null,r=[".fyre","footer",".post-footer",".footer",".entry-footer",'[class^="comment"]:not(.post-meta-info *, [class^=comment-count], [class^=comments-link], [class^=comments-number], li)',".fb-comments","iframe[title=Disqus]","#disqus_thread"],i={};try{r.forEach(function(r){n=e(t).find(r);if(n.length>0)throw i})}catch(s){if(s===i)return n.eq(0).hasClass("fb-comments")&&n.eq(0).prev("h3 + p").length>0?n.eq(0).prev("h3 + p").prev("h3"):n.eq(0);throw s}return null},s=function(e){return r(e)},o=function(e){var t=null;return!e._title&&e._header&&(e._title=e._header),e._title&&(t=e._title.text().trim()),t},u=function(t){var n=null,r=["a[rel=bookmark]","h1 > a","h2 > a","h3 > a","header > a"],i={};try{r.forEach(function(r){n=e(t).find(r).filter("[href]");if(n.length>0)throw i})}catch(s){if(s===i)return n.eq(0);throw s}return null};e.articles=function(t){if("__smCache"in window&&"articles"in window.__smCache)return window.__smCache.articles;var a=n(t);return a.each(function(){this._header||(this._header=r(e(this))),this._footer=i(e(this)),this._title=this._header?s(this._header):null,this._titleText||(this._titleText=o(this));var t=this._header?u(this._header):null;t?this._anchor=t:this._anchor=u(e(this)),this._anchor?this._url=this._anchor.attr("href"):this._url=null,this._url||(this._url=window.location.href)}),"__smDebug"in window&&window.__smDebug&&a.each(function(){e(this).css("background","rgba(0,0,255,.5)"),this._header&&this._header.css("background","rgba(0,255,0,.5)"),this._title&&this._title.css("background","rgba(255,0,0,.5)"),this._footer&&this._footer.css("background","rgba(255,255,0,.5)")}),"__smCache"in window||(window.__smCache={}),window.__smCache.articles=a,setTimeout(function(){"__smCache"in window&&delete window.__smCache.articles},1e4),a},e.article=function(){return e.articles().eq(0)}}),sumo.define("jquery.displayrules",["jquery","URI","jquery.article"],function(e,t){e.isCurrentUrlAllowed=function(n,r,i,s){function o(e,t,n,r){var i=[];if(e&&e.length)for(var s=0;s<e.length;s++){var o=e[s];if(typeof o=="object"&&o.hasOwnProperty(t)&&o[t]==n){i.push(o);if(r)return i[0]}}return r?null:i}if(n&&n.length){var u=o(n,"filter_type","article",!0),a=[];u&&(a=e.articles()),i||(i=!1);var f=function(e){var t=Object.keys(e),n=t.length,r=Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},l=function(e){var t=f(e),n=t.length;return function(e){if(e==null)return!n;e=new Object(e);for(var r=0;r<n;r++){var i=t[r],s=i[0];if(i[1]!==e[s]||!(s in e))return!1}return!0}},c=function(e){var e=e.substr(1).split("&");if(e=="")return{};var t={};for(var n=0;n<e.length;++n){var r=e[n].split("=",2);if(r.length==1)t[r[0]]="";else try{t[r[0]]=decodeURIComponent(r[1].replace(/\+/g," "))}catch(i){t[r[0]]=r[1].replace(/\+/g," ")}}return t},h=function(e,t,n){if(e.has_hash&&e.hash!=t)return!1;if(e.has_query_params){var r=c(e.search),i=c(n),s=l(r);if(s(i))return!0;if(!(["containing","beginning"].indexOf(e.filter_type)>=0))return!1;var o=!0,u=Object.keys(r);for(var a=0;a<u.length;a++){var f=u[a],h=r[u[a]];if(h&&h.length)if(f in i){if(i[f].indexOf(h)!=0)return!1}else{if(e.filter_type!="containing")return!1;var p=!1;Object.keys(i).forEach(function(e){e.lastIndexOf(f)>=0&&f==e.substring(e.lastIndexOf(f))&&i[e].indexOf(h)==0&&(p=!0)});if(!p)return!1}else{if(f in i)continue;var d=Object.keys(i),p=!1;for(var v=0;v<d.length;v++){var m=d[v];if(m.indexOf(f)==0){p=!0;break}}if(!p)return!1}}}return!0},p=o(n,"parsedUserAgent",!0,!0),d=window.location.toString();d&&(d=d.toLowerCase());var v=window.location.pathname.toString();v&&(v=v.toLowerCase());var m=window.location.hostname+v;m&&(m=m.toLowerCase()),v[v.length-1]=="/"&&(v=v.substring(0,v.length-1),m=m.substring(0,m.length-1)),m.indexOf("www.")==0&&(m=m.substring(4));var g=window.location.search;g&&(g=g.toLowerCase());var y=window.location.hash;y&&(y=y.toLowerCase(),y[0]!="#"&&(y="#"+y));var b=c(g),w=Math.min(window.screen.availWidth||e(window).width(),e(window).width()),E=document.cookie.split(";"),S={},x=[];for(var T=0;T<E.length;T++){var N=E[T].substring(0,E[T].indexOf("=")).trim(),C=E[T].substring(E[T].indexOf("=")+1).trim();x.push(N),S[N]=C}var k=document.referrer;if(k&&k.length){k=k.toLowerCase();try{var L=t(k);if(L.is("ip")){var A=L.hostname();A&&(A=A.toLowerCase())}else{var A=L.domain();A&&(A=A.toLowerCase())}var O=L.path();O&&(O=O.toLowerCase());var M=L.tld();M&&(M=M.toLowerCase());var _=L.hostname()?L.hostname().toLowerCase()+O:O;O[O.length-1]=="/"&&(O=O.substring(0,O.length-1),_=_.substring(0,_.length-1)),_.indexOf("www.")==0&&(_=_.substring(4));var D=L.search(),P=L.hash()}catch(H){k=!1}}else k=!1;var B=function(t){var n=!1;return e.each(t,function(e,t){var r=!1;t.forEach(function(e){var t=!1;if(!r)if(e.filter_type=="article")a.length==1&&(t=!0);else if(e.filter_type=="smaller"){if(isNaN(parseFloat(e.filter_value))||w<parseFloat(e.filter_value))t=!0}else if(e.filter_type=="bigger"){if(isNaN(parseFloat(e.filter_value))||w>=parseFloat(e.filter_value))t=!0}else if(e.filter_type=="views_lt"){if(isNaN(e.pageviews)||s<e.pageviews)t=!0}else if(e.filter_type=="views_eq"){if(isNaN(e.pageviews)||s==e.pageviews)t=!0}else if(e.filter_type=="views_gt"){if(isNaN(e.pageviews)||s>e.pageviews)t=!0}else if(e.filter_type=="countryis")i==e.filter_value.toLowerCase()&&(t=!0);else if(e.filter_type=="countryisnot"){if(!i||i!=e.filter_value.toLowerCase())t=!0}else if(e.filter_type=="c_exists")x.indexOf(e.filter_value)>=0&&(t=!0);else if(e.filter_type=="c_dne")x.indexOf(e.filter_value)<0&&(t=!0);else if(e.filter_type=="c_equals")x.indexOf(e.filter_value)>=0&&S[e.filter_value]==e.param_value&&(t=!0);else if(e.filter_type=="c_notequals"){if(x.indexOf(e.filter_value)<0||S[e.filter_value]!=e.param_value)t=!0}else if(e.filter_type=="c_contains")x.indexOf(e.filter_value)>=0&&S[e.filter_value].indexOf(e.param_value)>=0&&(t=!0);else if(e.filter_type=="c_notcontains"){if(x.indexOf(e.filter_value)<0||S[e.filter_value].indexOf(e.param_value)<0)t=!0}else if(e.filter_type=="q_exists")b&&b.hasOwnProperty(e.filter_value.toLowerCase())&&(t=!0);else if(e.filter_type=="q_dne"){if(!b||!b.hasOwnProperty(e.filter_value))t=!0}else if(e.filter_type=="q_equals")b&&b[e.filter_value]&&b[e.filter_value]==e.param_value&&(t=!0);else if(e.filter_type=="q_notequals"){if(!b||!b[e.filter_value]||b[e.filter_value]!=e.param_value)t=!0}else if(e.filter_type=="q_contains")b&&b[e.filter_value]&&b[e.filter_value].indexOf(e.param_value)>=0&&(t=!0);else if(e.filter_type=="q_notcontains"){if(!b||!b[e.filter_value]||b[e.filter_value].indexOf(e.param_value)<0)t=!0}else if(e.filter_type=="exact"){var n=h(e,y,g);if(n)if(e.full_url)m==e.match_url&&(t=!0);else if(e.match_url==null&&n)t=!0;else if(m==e.match_url||v==e.match_url)t=!0}else if(e.filter_type=="beginning"){var n=h(e,y,g);if(n)if(e.full_url)m.indexOf(e.match_url.toLowerCase())==0&&(t=!0);else if(e.match_url==null&&n)t=!0;else if(m.indexOf(e.match_url.toLowerCase())==0||v.indexOf(e.match_url.toLowerCase())==0)t=!0}else if(e.filter_type=="containing"){var n=h(e,y,g);n&&(e.full_url?m.indexOf(e.match_url.toLowerCase())>=0&&(t=!0):e.match_url==null&&n?t=!0:m.indexOf(e.match_url.toLowerCase())>=0&&(t=!0))}else if(k&&["r_url_exact","r_domain_exact","r_url_beginning","r_domain_beginning","r_url_containing","r_domain_containing"].indexOf(e.filter_type)>=0)if(e.filter_type=="r_url_exact"){var n=h(e,P,D);e.full_url?n&&_==e.match_url.toLowerCase()&&(t=!0):n&&_==e.match_url.toLowerCase()?t=!0:e.match_url==null&&n&&(t=!0)}else if(e.filter_type=="r_domain_exact")e.host?e.host==A&&(t=!0):e.filter_value==A&&(t=!0);else if(e.filter_type=="r_url_beginning"){var n=h(e,P,D);e.full_url?n&&_.indexOf(e.match_url)==0&&(t=!0):n&&_.indexOf(e.match_url)==0?t=!0:e.match_url==null&&n&&(t=!0)}else if(e.filter_type=="r_domain_beginning")e.host&&A.indexOf(e.host)==0?t=!0:A.indexOf(e.filter_value)==0&&(t=!0);else if(e.filter_type=="r_url_containing"){var n=h(e,P,D);e.full_url?n&&_.indexOf(e.match_url)>=0&&(t=!0):n&&_.indexOf(e.match_url)>=0?t=!0:e.match_url==null&&n&&(t=!0)}else e.filter_type=="r_domain_containing"&&(e.host&&A.indexOf(e.host)>=0?t=!0:A.indexOf(e.filter_value)>=0&&(t=!0));else if(e.filter_type=="ua_os"&&p&&p.compareOS){var o=[e.filter_value];e.filter_value=="winmobile"?o=["windows mobile","windows phone"]:e.filter_value=="macos"?o=["mac os"]:e.filter_value=="windesktop"&&(o=["windows"]),o.indexOf(p.compareOS)>=0&&(t=!0)}else if(e.filter_type=="ua_browser"&&p&&p.compareBrowser){var o=[e.filter_value];e.filter_value=="chrome"?o=["chrome","chromium"]:e.filter_value=="ie"?o=["ie","ie mobile"]:e.filter_value=="opera"?o=["opera","opera mini","opera mobile","opera tablet"]:e.filter_value=="safari"&&(o=["safari","mobile safari"]),o.indexOf(p.compareBrowser)>=0&&(t=!0)}else if(e.filter_type=="ua_exact")e.filter_value.toLowerCase()==navigator.userAgent.toLowerCase()&&(t=!0);else if(e.filter_type=="ua_beginning")navigator.userAgent.toLowerCase().indexOf(e.filter_value.toLowerCase())==0&&(t=!0);else if(e.filter_type=="ua_containing")navigator.userAgent.toLowerCase().indexOf(e.filter_value.toLowerCase())>=0&&(t=!0);else if(e.filter_type=="hash_exact"){var u=e.filter_value[0]=="#"?e.filter_value:"#"+e.filter_value;u.toLowerCase()==y.toLowerCase()&&(t=!0)}else if(e.filter_type=="hash_beginning"){var u=e.filter_value[0]=="#"?e.filter_value:"#"+e.filter_value;y.toLowerCase().indexOf(u.toLowerCase())==0&&(t=!0)}else if(e.filter_type=="hash_containing"){var u=e.filter_value[0]=="#"?e.filter_value:"#"+e.filter_value;y.toLowerCase().indexOf(u.toLowerCase())>=0&&(t=!0)}else e.filter_type=="all"&&(t=!0);t||(r=!0)});if(!r)return n=!0,!1}),n},j=o(n,"rule_type","include",!1);if(j&&j.length){var F={},I=0;j.forEach(function(e){e.group_id&&e.group_id.length?F.hasOwnProperty(e.group_id)?F[e.group_id].push(e):F[e.group_id]=[e]:(F[I]=[e],I+=1)}),currentUrlIncluded=B(F)}else currentUrlIncluded=!0;if(!currentUrlIncluded)return!1;var q=o(n,"rule_type","exclude",!1),R=!1;if(!q||!q.length)return!0;var U={},I=0;return q.forEach(function(e){e.group_id&&e.group_id.length?U.hasOwnProperty(e.group_id)?U[e.group_id].push(e):U[e.group_id]=[e]:(U[I]=[e],I+=1)}),R=B(U),R?!1:!0}return!0}}),sumo.define("2c40add5-3570-45d7-8212-8fc2942f7f74/heatmaps",["jquery","underscore","lib/heatmaps","jquery.displayrules"],function(e,t,n){var r=function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},i=function(e,t){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))<t.r?!0:!1},s=function(e,t){return e.x>t.x1&&e.x<t.x2&&e.y>t.y1&&e.y<t.y2},o=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},u=function(t,n){a.containerEl.css("left","100%");var r=document.elementFromPoint(t,n);a.containerEl.css("left","");var i=e(r).getSelector()[0];return i},a={isShown:!1,isRecording:!1,currentData:null,reopenApp:!1,currentCampaign:null,elementData:null,lastPagePos:null,countsEnabled:!0,noAnimationTimer:null,theme:{backgroundColor:"rgba(3, 3, 16, .3)",gradient:{0:"#03030f",.125:"#1f1159",.25:"#952a66",.375:"#b73b50",.5:"#d6693f",.625:"#e8a736",.75:"#efd455",.875:"#fbfbc4"}},load:function(t){a.$control&&a.$control.addClass("sumome-heatmaps-control-show"),a.containerEl&&e('<div class="sumome-heatmaps-loading" />').html("Loading heat map data...<br />Press ESC to exit").appendTo(a.containerEl),e.ajax({type:"POST",dataType:"json",beforeSend:function(t){t.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:a.api.properties.sumoUrl+"/apps/heatmaps/load",data:{site_id:a.api.properties.siteId,path:window.location.pathname+window.location.search,campaign_id:t||null,geoLocation:this.api.properties.geoLocation,pageViews:this.api.properties.views,userAgent:navigator.userAgent},success:function(t){t.success?(a.currentData=t.data,a.theme=t.theme,a.currentCampaign=t.campaigns,a.refresh(),a.updateControl()):(a.currentData=null,a.currentCampaign=null,a.updateControl()),e(".sumome-heatmaps-loading").remove(),a.$control&&setTimeout(function(){e(".sumome-heatmaps-control").removeClass("sumome-heatmaps-control-show")},1e4)}})},refresh:function(){a.findElements(a.currentData)},findElements:function(t){var n=[],r=Number.NaN,i=Number.NaN;if(t){var s={},o=[];for(var u=0;u<t.length;u++){var f,l=t[u].selector;if(["html","body"].indexOf(l)>=0)continue;if(!(l in s)){f=e(l);if(!f.length){s[l]=null;continue}if(!f.is(":visible")){s[l]=null;continue}if(f.hasClass("sumome-heatmap-canvas"))continue;s[l]=f,o.push({element:f[0],selector:l,count:parseInt(t[u].value),left:f.offset().left,top:f.offset().top,width:f.outerWidth(),height:f.outerHeight()})}f=s[l];if(f===null)continue;var c=a.findPosForElement(f,t[u].x,t[u].y);if(!c)continue;var h=parseInt(t[u].value,10);isNaN(i)?i=h:i=Math.min(h,i),isNaN(r)?r=h:r=Math.max(r,h);var p={x:Math.round(c.left),y:Math.round(c.top),value:h};n.push(p)}}a.elementData={min:0,max:r,data:n,elements:o},a.redraw()},redraw:function(){if(!a.elementData||!a.map)return;var t=e(window).scrollTop(),n=e(window).scrollLeft(),r=e(window).height(),i={min:a.elementData.min,max:a.elementData.max,data:[]};for(var s=0;s<a.elementData.data.length;s++){var o=a.elementData.data[s].x-n,u=a.elementData.data[s].y-t;if(u<0||u>r)continue;i.data.push({x:o,y:u,value:a.elementData.data[s].value})}a.map.setData(i),a.map.configure(a.theme)},toggle:function(){a.isShown?a.hide():a.show()},hide:function(){e(window).off(".sumome-heatmaps-widget"),e(document).off(".sumome-heatmaps-widget"),a.containerEl.remove(),a.containerEl=null,a.map=null,a.isShown=!1,a.countsEnabled=!0,a.api.emit("showControl"),a.reopenApp&&(a.api.on("2c40add5-3570-45d7-8212-8fc2942f7f74/app/started",function(e){a.api.off("2c40add5-3570-45d7-8212-8fc2942f7f74/app/started"),a.api.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/app/route","campaigns")}),a.api.emit("startApp","2c40add5-3570-45d7-8212-8fc2942f7f74"),a.reopenApp=!1)},show:function(r){r&&(a.reopenApp=!0);if(a.isShown){a.load(r);return}a.isShown=!0,a.api.emit("hideControl");var i=e("<div />").addClass("sumome-heatmaps").appendTo(document.body);a.$control=e('<div class="sumome-heatmaps-control sumome-heatmaps-control-show" />'),a.$close=e('<a class="sumome-heatmaps-close">&#x2715;</a>').appendTo(a.$control),a.$title=e('<span class="sumome-heatmaps-title" />').text("Loading...").appendTo(a.$control),a.$clicks=e('<span class="sumome-heatmaps-clicks" />').text(" ").appendTo(a.$control),a.$prev=e('<a class="sumome-heatmaps-prev sumome-heatmaps-disabled" />').appendTo(a.$control).text("Previous Campaign").attr("title","Previous Campaign").click(a.previous),a.$stop=e('<a class="sumome-heatmaps-stop sumome-heatmaps-disabled" />').appendTo(a.$control).text("STOP").attr("title","Stop Campaign").click(a.stop),a.$record=e('<a class="sumome-heatmaps-record sumome-heatmaps-disabled" />').appendTo(a.$control).text("RECORD").css("display","none").attr("title","Record New Campaign").click(a.record),a.$next=e('<a class="sumome-heatmaps-next sumome-heatmaps-disabled" />').appendTo(a.$control).text("Next Campaign").attr("title","Next Campaign").click(a.next),a.$counts=e('<a class="sumome-heatmaps-counts sumome-heatmaps-disabled sumome-heatmaps-counts-on" />').appendTo(a.$control).text("HIDE COUNTS").attr("title","Toggle Click Counts").click(a.toggleCounts),a.$wrapper=e('<div class="sumome-heatmaps-control-wrapper" />'),a.$control.appendTo(a.$wrapper),a.$thermometer=e('<div class="sumome-heatmaps-thermometer" />'),a.$thermCount=e('<span class="sumome-heatmaps-thermometer-count" />').appendTo(a.$thermometer),a.$thermStem=e('<span class="sumome-heatmaps-thermometer-stem" />').appendTo(a.$thermometer),a.$thermometer.appendTo(i),a.$clicked=e('<div class="sumome-heatmaps-clicked sumome-heatmaps-clicked-animate" />'),a.$clickedTitle=e('<span class="sumome-heatmaps-clicked-title" />').appendTo(a.$clicked).text(".selector"),a.$clickedStats=e('<div class="sumome-heatmaps-clicked-stats" />').appendTo(a.$clicked).text("0 (0%)"),a.$clicked.appendTo(i),a.$wrapper.appendTo(i),a.$close.click(function(e){e.preventDefault(),a.hide()}),a.containerEl=i;var s={container:i.get(0)};e.extend(s,a.theme);var o=n.create(s);i.css({position:"fixed"}),a.map=o,a.load(r),i.on("mousemove",t.debounce(function(e){a.refreshClickedLabel(e)},150)),i.on("mousemove",t.debounce(function(e){a.refreshThermometer(e)},1)),e(window).on("resize.sumome-heatmaps-widget",t.debounce(function(){var e=a.containerEl.width(),t=a.containerEl.height();a.map._renderer.setDimensions(e,t),a.refresh(),a.refreshClickedLabel()},300)),e(window).on("scroll.sumome-heatmaps-widget",t.debounce(function(){a.redraw(),a.refreshClickedLabel()},1)),e(document).on("keyup.sumome-heatmaps-widget",function(e){e.which==27&&a.hide()})},findPosForElement:function(e,t,n){var r=e.offset(),i=e.outerWidth(),s=e.outerHeight();return r.top+=s*n,r.left+=i*t,r},toggleCounts:function(){a.countsEnabled?(a.$counts.removeClass("sumome-heatmaps-counts-on"),a.$counts.text("VIEW COUNTS"),a.countsEnabled=!1,a.$clicked.css("opacity","0"),a.$thermometer.css("opacity","0")):(a.$counts.addClass("sumome-heatmaps-counts-on"),a.$counts.text("HIDE COUNTS"),a.countsEnabled=!0)},previous:function(){if(e(this).hasClass("sumome-heatmaps-disabled"))return;var t=a.currentCampaign;t&&t.previous&&a.load(t.previous)},next:function(){if(e(this).hasClass("sumome-heatmaps-disabled"))return;var t=a.currentCampaign;t&&t.next&&a.load(t.next)},stop:function(){if(e(this).hasClass("sumome-heatmaps-disabled"))return;e.ajax({type:"POST",dataType:"json",beforeSend:function(t){t.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:a.api.properties.sumoUrl+"/apps/heatmaps/stop",data:{site_id:a.api.properties.siteId,path:window.location.pathname+window.location.search},success:function(e){e.success&&(a.load(),a.api.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/stop"))}})},record:function(){if(e(this).hasClass("sumome-heatmaps-disabled"))return;e.ajax({type:"POST",dataType:"json",beforeSend:function(t){t.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:a.api.properties.sumoUrl+"/apps/heatmaps/start",data:{site_id:a.api.properties.siteId,path:window.location.pathname+window.location.search},success:function(e){e.success&&(a.load(),a.api.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/start"))}})},autoRecord:function(t,n,r){t==null&&(t=a.api.properties.siteId),n==null&&(n=a.api.properties.sumoUrl);if(e(this).hasClass("sumome-heatmaps-disabled"))return;e.ajax({type:"POST",dataType:"json",beforeSend:function(t){t.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:n+"/apps/heatmaps/start/auto",data:{site_id:t,path:window.location.pathname+window.location.search},success:r})},updateControl:function(){var e=a.currentCampaign;if(!a.$control||!a.$title)return;if(e&&e.current){var t="";if(e.current.started_at){var n=new Date(e.current.started_at);t=n.toLocaleDateString()+" "+n.toLocaleTimeString()}if(e.current.finished_at){var i=new Date(e.current.finished_at);t+=" - "+i.toLocaleDateString()+" "+i.toLocaleTimeString()}else t+=" - ACTIVE CAMPAIGN";a.$title.text(t),a.$clicks.html('<span class="sumome-heatmaps-clicks-count">'+r(e.current.total_clicks)+"</span>"+" CLICK"+(e.current.total_clicks==1?"":"S")+" RECORDED")}else a.$title.text(""),a.$clicks.text("");a.$prev.toggleClass("sumome-heatmaps-disabled",e==null||e.previous==null),a.$stop.toggleClass("sumome-heatmaps-disabled",a.isRecording==0),a.$record.toggleClass("sumome-heatmaps-disabled",a.isRecording==1),a.isRecording?(a.$record.hide(),a.$stop.show()):(a.$stop.hide(),a.$record.show()),a.$next.toggleClass("sumome-heatmaps-disabled",e==null||e.next==null),a.$counts.removeClass("sumome-heatmaps-disabled")},setRecording:function(e){a.isRecording=e,a.isShown&&a.updateControl()},refreshClickedLabel:function(t){var n=e(window).scrollTop(),i=e(window).scrollLeft(),o=e(window).height(),f=null,l=null,c=!1;t?(f={x:t.clientX,y:t.clientY},a.lastPagePos=f,c=!0):f=a.lastPagePos,l={x:f.x+i,y:f.y+n};if(l&&a.countsEnabled&&a.elementData){var h=!1,p=a.elementData.elements,d=[],v=0,m=0;for(var g=0;g<p.length;g++){var y={x1:p[g].left,x2:p[g].left+p[g].width,y1:p[g].top,y2:p[g].top+p[g].height};s(l,y)&&(p[g].rectangle=y,d.push(p[g]))}if(d.length>0){var b=0;for(var g=0;g<d.length;g++){var w=u(f.x,f.y);if(w==d[g].selector){b=g;break}}var E=d[b];d.pop(b),d.unshift(E);for(var g=0;g<a.elementData.data.length;g++){var S={x:a.elementData.data[g].x,y:a.elementData.data[g].y};s(S,d[0].rectangle)&&(v+=a.elementData.data[g].value),m+=a.elementData.data[g].value}!c&&a.$clicked.hasClass("sumome-heatmaps-clicked-animate")&&(a.$clicked.removeClass("sumome-heatmaps-clicked-animate"),window.clearTimeout(a.noAnimationTimer),a.noAnimationTimer=setTimeout(function(){a.$clicked.addClass("sumome-heatmaps-clicked-animate")},250));var x=(v*100/m).toFixed(0),T=d[0].left-i-2,N=d[0].top-n-2,C=d[0].width+4,k=d[0].height+4;a.$clicked.css("opacity","1"),a.$clicked.css("left",T).css("top",N).css("width",C).css("height",k),a.$clickedStats.text(r(v)+(v==1?" click":" clicks")+" ("+x+"%)"),a.$clickedTitle.text(d[0].selector);if(N<20){var L=N*-1+o-22;L>k?(a.$clickedTitle.css("top",k-2),a.$clickedTitle.addClass("sumome-heatmaps-clicked-title-bottom")):(a.$clickedTitle.css("top",L),a.$clickedTitle.removeClass("sumome-heatmaps-clicked-title-bottom"))}else a.$clickedTitle.css("top",""),a.$clickedTitle.removeClass("sumome-heatmaps-clicked-title-bottom");k<50&&N+k+24<o?(a.$clickedStats.css("top",k-2),a.$clickedStats.addClass("sumome-heatmaps-clicked-stats-bottom")):k>=50&&(N<0?(a.$clickedStats.css("top",N*-1-2),a.$clickedStats.addClass("sumome-heatmaps-clicked-stats-bottom")):(a.$clickedStats.css("top",""),a.$clickedStats.removeClass("sumome-heatmaps-clicked-title-bottom"))),C<150?a.$clickedStats.css("right","initial").css("left",-2).css("border-radius","0 0 5px 5px"):a.$clickedStats.css("right","").css("left","").css("border-radius","")}else a.$clicked.css("opacity","0")}},refreshThermometer:function(t){var n=e(window).scrollTop(),s=e(window).scrollLeft(),u=e(window).width(),f={x:t.clientX,y:t.clientY},l=!1,c=0;if(a.elementData&&a.countsEnabled){for(var h=0;h<a.elementData.data.length;h++){var p={x:a.elementData.data[h].x-s,y:a.elementData.data[h].y-n,r:40};if(i(f,p)){l=!0;var d=a.elementData.data[h].value,v=o(f,p).toFixed(2),m=(1-v/45).toFixed(2);v<5&&(m=1),c+=Math.round(d*m)}}if(l){var g=f.y-21,y=f.x-0;a.$thermometer.css("opacity","1"),a.$thermometer.css("left",y).css("top",g),c<=0&&(c=1),a.$thermCount.text(c>1?r(c)+" clicks":"1 click"),y>u-200?(a.$thermometer.addClass("sumome-heatmaps-thermometer-left"),a.$thermometer.css("left","initial").css("right",u-y)):(a.$thermometer.removeClass("sumome-heatmaps-thermometer-left"),a.$thermometer.css("right",""))}else a.$thermometer.css("opacity","0")}}};return a}),sumo.define("selectorator",["jquery"],function(e){var t,n,r,i,s,o,u,a;return u=e.map,s=e.extend,o=e.inArray,r=function(e,t){return o(e,t)!==-1},i=function(e){return e.replace(/([\!\"\#\$\%\&'\(\)\*\+\,\.\/\:\;<\=>\?\@\[\\\]\^\`\{\|\}\~])/g,"\\$1")},n=function(e,t){return u(e,function(e){return e===t?null:e})},a=function(e){return u(e,function(t,n){return parseInt(n,10)===parseInt(e.indexOf(t),10)?t:null})},t=function(){function t(t,n){this.element=t,this.options=s(s({},e.selectorator.options),n),this.cachedResults={}}return t.prototype.query=function(t){var n;return(n=this.cachedResults)[t]||(n[t]=e(t.replace(/#([^\s]+)/g,"[id='$1']")))},t.prototype.getProperTagName=function(){if(this.element[0])return this.element[0].tagName.toLowerCase()=="span"&&this.getIgnore("class")&&r(this.element.attr("class"),this.getIgnore("class"))?this.hasParent()?this.element.parent()[0].tagName.toLowerCase():null:this.element[0].tagName.toLowerCase();return null},t.prototype.hasParent=function(){return this.element&&0<this.element.parent().size()},t.prototype.isElement=function(){var e;return e=this.element[0],e&&e.nodeType===e.ELEMENT_NODE},t.prototype.validate=function(e,t,n,i){var s,o;n==null&&(n=!0),i==null&&(i=!1),o=this.query(e);if(n&&1<o.size()||!n&&0===o.size()){if(!t||e.indexOf(":")!==-1)return null;s=i?" > ":" ",e=t+s+e,o=this.query(e);if(n&&1<o.size()||!n&&0===o.size())return null}return r(this.element[0],o.get())?e:null},t.prototype.generate=function(){var e,t,r,i,s;if(!(this.element&&this.hasParent()&&this.isElement()))return[""];t=[],s=[this.generateSimple,this.generateAncestor,this.generateRecursive];for(r=0,i=s.length;r<i;r++){e=s[r],t=a(n(e.call(this)));if(t&&t.length>0)return t}return a(t)},t.prototype.generateText=function(){var e,t,r,i,s;if(!(this.element&&this.hasParent()&&this.isElement()))return[""];t=[],s=[this.generateTextSelector];for(r=0,i=s.length;r<i;r++){e=s[r],t=a(n(e.call(this)));if(t&&t.length>0)return t}return a(t)},t.prototype.generateAncestor=function(){var n,r,i,s,o,u,a,f,l,c,h,p,d,v;o=[],v=this.element.parents();for(f=0,h=v.length;f<h;f++){r=v[f],n=!0,a=this.generateSimple(null,!1);for(l=0,p=a.length;l<p;l++){u=a[l],s=(new t(e(r),this.options)).generateSimple(null,!1);for(c=0,d=s.length;c<d;c++)i=s[c],e.merge(o,this.generateSimple(i,!0,n))}n=!1}return o},t.prototype.generateSimple=function(e,t,r){var i,s,o,a,f,l,c,h;o=this,a=o.getProperTagName(),f=function(n){return o.validate(n,e,t,r)},h=[[o.getIdSelector],[o.getClassSelector],[o.getIdSelector,!0],[o.getClassSelector,!0],[o.getNameSelector],[function(){return[o.getProperTagName()]}]];for(l=0,c=h.length;l<c;l++){i=h[l],s=i[0].call(o,i[1])||[],s=n(u(s,f));if(s.length>0)return s}return[]},t.prototype.generateTextSelector=function(e,t,r){var i,s,o,u,a,f,l,c;o=this,u=o.getProperTagName(),a=function(n){return o.validate(n,e,t,r)},c=[[o.getIdSelector],[o.getTextSelector,!0],[function(){return[o.getProperTagName()]}]];for(f=0,l=c.length;f<l;f++){i=c[f],s=i[0].call(o,i[1])||[],s=n(s);if(s.length>0)return s}return[]},t.prototype.generateRecursive=function(){var e,n,r,i;return i=this.getProperTagName(),i.indexOf(":")!==-1&&(i="*"),n=this.element.parent(),r=(new t(n)).generate()[0],e=n.children(i).index(this.element),i=""+i+":eq("+e+")",r!==""&&(i=r+" > "+i),[i]},t.prototype.getIdSelector=function(e){var t;return e==null&&(e=!1),e=e?this.getProperTagName():"",t=this.element.attr("id"),typeof t=="string"&&t.trim().length&&!r(t,this.getIgnore("id"))&&t.indexOf("yui")!=0?[""+e+"#"+i(t)]:null},t.prototype.getTextSelector=function(n){var r="";if(this.hasParent()){var i=this.element.parent()[0];n=n?i.tagName.toLowerCase():"",i=e(i);var s=i.text();typeof s=="string"&&s.length>0&&(r=n+":similar("+s+")")}var o=this.element.prev();if(o.length){var u=(new t(o)).generateSimple(null,!1);u&&(r+=" > "+u)}return r?[r]:null},t.prototype.getClassSelector=function(e){var t,n,s;return e==null&&(e=!1),s=this.getProperTagName(),/^(body|html)$/.test(s)?null:(e=e?s:"",n=this.getIgnore("class"),t=(this.element.attr("class")||"").replace(/\{.*\}/,"").split(/\s/),u(t,function(t){return t&&!r(t,n)?""+e+"."+i(t):null}))},t.prototype.getNameSelector=function(){var e,t;return t=this.getProperTagName(),e=this.element.attr("name"),e&&!r(e,this.getIgnore("name"))?[""+t+"[name='"+e+"']"]:null},t.prototype.getIgnore=function(e){var t,n,r;return n=this.options.ignore||{},t=e==="class"?"classes":""+e+"s",r=n[e]||n[t],typeof r=="string"?[r]:r},t}(),e.selectorator={options:{},unique:a,clean:n,escapeSelector:i},e.fn.selectorator=function(n){return new t(e(this),n)},e.fn.getSelector=function(e){return this.selectorator(e).generate()},e.fn.getTextSelector=function(e){return this.selectorator(e).generateText()},this}),sumo.define("jquery.similar",["jquery"],function(e){String.prototype.levenshtein=function(e){var t=new Array,n=e,r=this,i=n.length,s=this.length,o,u,a=function(e,t,n){var r=e;return t<r&&(r=t),n<r&&(r=n),r};if(i==0)return;if(s==0)return;for(var o=0;o<=i;o++)t[o]=new Array;for(o=0;o<=i;o++)t[o][0]=o;for(u=0;u<=s;u++)t[0][u]=u;for(o=1;o<=i;o++){var f=n.charAt(o-1);for(u=1;u<=s;u++){var l=r.charAt(u-1);f==l?t[o][u]=t[o-1][u-1]:t[o][u]=1+a(t[o-1][u-1],t[o][u-1],t[o-1][u])}}return t[i][s]},e.fn.textExcept=function(t){if(!this.get(0)||e.inArray(this.get(0).nodeName.toLowerCase(),["script"])!=-1)return"";try{var n=e(this).contents().filter(function(){return e(this).is(t)!=1}).map(function(){if(this.nodeType==1&&e.inArray(this.nodeName.toLowerCase(),["script"])==-1)return e(this).textExcept(t);if(this.nodeType==3)return e.trim(this.data)}).get().join("");return n}catch(r){}return""},e.expr[":"].similar=e.expr.createPseudo(function(t){return function(n){var r=e(n).textExcept(".sumome-leads-edit").replace(/[^0-9a-zA-Z\s.,]/g,"").substr(0,128);return r&&r.levenshtein(t.substr(0,128))<5}})}),sumo.define("2c40add5-3570-45d7-8212-8fc2942f7f74/service",["jquery","2c40add5-3570-45d7-8212-8fc2942f7f74/heatmaps","selectorator","jquery.similar"],function(e,t){return function(n){var r=!1,i=!1,s=0,o=function(e){var t=(new Date).getTime();while((new Date).getTime()<t+e);},u=function(){if(i)return;e(document).on("mousedown.sumome-heatmaps",function(t){if(t.which!=1)return;var r,i,s;if(document.elementFromPoint)i=document.elementFromPoint(t.clientX,t.clientY);else if(document.caretPositionFromPoint)r=document.caretPositionFromPoint(t.clientX,t.clientY),i=r.offsetNode,s=r.offset;else{if(!document.caretRangeFromPoint)return;r=document.caretRangeFromPoint(t.clientX,t.clientY),i=r.startContainer,s=r.startOffset}e(i).parents("svg").length>=1&&(i=e(i).parents("svg")[0]);if(e(i).closest(".sumome-control").length>0||e(i).closest(".sumome-heatmaps").length>0)return;s=e(i).offset();if(!(!!s&&"left"in s&&"top"in s))return;s.left=t.pageX-s.left,s.top=t.pageY-s.top;var u=.05,a=s.left/e(i).outerWidth(),f=s.top/e(i).outerHeight();a=(Math.round(a/u)*u).toFixed(2),f=(Math.round(f/u)*u).toFixed(2);var l={left:a,top:f},c=e(i).getSelector()[0];if(!c||isNaN(l.left)||isNaN(l.top)||!isFinite(l.left)||!isFinite(l.top))return;var h={site_id:n.properties.siteId,selector:c,x:l.left,y:l.top,path:window.location.pathname+window.location.search,_:Math.random()},p=e("<img />").css({display:"none"}).attr("src",n.properties.sumoUrl+"/apps/heatmaps/click?"+e.param(h));p.on("error",function(){e(this).remove()}),p.on("load",function(){e(this).remove()}),e(document.body).append(p),t.target&&"href"in t.target&&t.target.href&&t.target.href.indexOf("#")!==0&&t.target.href.toLowerCase().indexOf("javascript")!=0&&o(500)}),i=!0},a=function(){if(!i)return;e(document).off("mousedown.sumome-heatmaps"),i=!1},f=function(){e.ajax({type:"POST",dataType:"json",beforeSend:function(t){t.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:n.properties.sumoUrl+"/apps/heatmaps/status",data:{site_id:n.properties.siteId,path:window.location.pathname+window.location.search},success:function(i){var o=!0;i.success?(r=i.campaign!=null&&i.campaign.finished_at==null,s=i.count,o=i.track_all_users):r=!1,n.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/status",{recording:r,campaignCount:s});var f=n.properties.geoLocation&&n.properties.geoLocation.ctry?n.properties.geoLocation.ctry:!1,l=n.properties.views?n.properties.views:1;i.pro&&i.count<=0&&i.display_rules.length>0&&e.isCurrentUrlAllowed(i.display_rules,null,f,l)?t.autoRecord(n.properties.siteId,n.properties.sumoUrl,function(e){e.success&&(r=!0,s=1,n.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/status",{recording:r,campaignCount:s}),u())}):r&&(o==1||o==0&&n.properties.user==null)?u():a()}})},l=function(e,t){n.on("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/checkStatus",function(){n.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/status",{recording:r,campaignCount:s})}),n.on("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/start",function(){f()}),n.on("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/stop",function(){f()}),f(),t()},c=function(e){e()};return{init:l,destroy:c}}}),sumo.define("2c40add5-3570-45d7-8212-8fc2942f7f74/service",function(){})})(undefined,undefined);