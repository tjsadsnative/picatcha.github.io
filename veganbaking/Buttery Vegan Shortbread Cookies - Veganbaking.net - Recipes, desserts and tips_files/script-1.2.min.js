function update_counter(a,b){b||(b=0);var c=parseInt(joms.jQuery(a).html(),10);b=parseInt(b,10),1>=c?joms.jQuery(a).css("display","none"):joms.jQuery(a).html(c+b)}function get_cookies_array(){var a={};if(document.cookie&&""!=document.cookie)for(var b=document.cookie.split(";"),c=0;c<b.length;c++){var d=b[c].split("=");d[0]=d[0].replace(/^ /,""),a[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return a}var JSON;JSON||(JSON={}),function(){function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function f(a){return 10>a?"0"+a:a}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),"undefined"==typeof joms&&(joms={jQuery:window.jQuery,extend:function(a){this.jQuery.extend(this,a)}});var joms_message_sending=!1;joms.extend({plugins:{extend:function(a){joms.jQuery.extend(joms.plugins,a)},initialize:function(){joms.jQuery.each(joms.plugins,function(a,b){try{b.initialize()}catch(c){}})}},sharebox:{showFileUpload:function(a,b){var c='jax.call("community", "files,ajaxFileUploadForm","'+a+'",'+b+")";cWindowShow(c,"",600,400)},uploadVideo:function(a,b){var c="jax.call('community', 'videos,ajaxUploadVideo', '"+a+"', '"+b+"');";cWindowShow(c,"",450,500)}},activities:{infiniteScrollLoaded:0,infinitesScrollenable:1,init:function(){joms.jQuery("#activity-stream-container").on("click",".dropdown-menu [data-action=delete]",function(a){a.preventDefault();var b=joms.jQuery(a.target).closest("[data-streamid]");joms.activities.remove("",b.data("streamid"))}),joms.activities.initMap(),joms.activities.loadNewStream(),joms.activities.infinitesScrollenable&&!joms.activities.infiniteScrollLoaded&&joms.activities.infiniteScroll()},showMap:function(a,b){if(0==joms.jQuery("li[data-streamid="+a+"]").find(".cMapHeatzone").length){var c=joms.jQuery("li[data-streamid="+a+"]").find(".cStream-Actions").width(),d='<div class="cMapFade">';d+='<div class="cMapHeatzone"> </div>',d+='<div class="cMapFiller"></div>',d+='<img src="//maps.google.com/maps/api/staticmap?center='+b+"&zoom=14&size="+c+"x150&sensor=false&markers=color:red|"+b+'" />',d+='<img src="//maps.google.com/maps/api/staticmap?center='+b+"&zoom=5&size="+c+"x150&sensor=false&markers=color:red|"+b+'" />',d+='<img src="//maps.google.com/maps/api/staticmap?center='+b+"&zoom=2&size="+c+"x150&sensor=false&markers=color:red|"+b+'" />',d+="</div>",joms.jQuery("#newsfeed-map-"+a+" .newsfeed-mapFade").append(d),joms.jQuery("li[data-streamid="+a+"]").find(".cStream-Actions").prepend(d);var e=c/2-15;joms.jQuery("li[data-streamid="+a+"]").find(".cMapHeatzone").css({top:"40px",left:e+"px"}),joms.maps.init()}if(joms.jQuery("#video-"+a).length){var c=joms.jQuery("#video-"+a).find(".video-map-location").width(),d='<img src="//maps.google.com/maps/api/staticmap?center='+b+"&zoom=5&size="+c+"x250&sensor=false&markers=color:red|"+b+'" />';0==joms.jQuery(".video-map").height()?(joms.jQuery("#video-"+a).find(".video-map-location").html(d),joms.jQuery("#video-"+a).find(".video-map").css({height:"auto"})):(joms.jQuery("#video-"+a).find(".video-map-location").html(""),joms.jQuery("#video-"+a).find(".video-map").css({height:"auto"}))}},getContent:function(a){jax.call("community","activities,ajaxGetContent",a)},setContent:function(a,b){joms.jQuery("#profile-newsfeed-item-content-"+a).html(b).removeClass("small profile-newsfeed-item-action").addClass("newsfeed-content-hidden").slideDown()},showVideo:function(a){joms.jQuery("#profile-newsfeed-item-content-"+a+" .video-object").slideDown(),joms.jQuery("#profile-newsfeed-item-content-"+a+" .video-object embed").css("width",joms.jQuery("#profile-newsfeed-item-content-"+a).width())},selectCustom:function(a){"predefined"==a?(joms.jQuery("#custom-text").css("display","none"),joms.jQuery("#custom-predefined").css("display","block")):(joms.jQuery("#custom-text").css("display","block"),joms.jQuery("#custom-predefined").css("display","none"))},addCustom:function(){if("predefined"==joms.jQuery("input[name=custom-message]:checked").val()){var a=joms.jQuery("#custom-predefined").val(),b=joms.jQuery("#custom-predefined :selected").html();"default"!=a&&jax.call("community","activities,ajaxAddPredefined",a,b)}else customText=joms.jQuery.trim(joms.jQuery("#custom-text").val()),0!=customText.length&&jax.call("community","activities,ajaxAddPredefined","system.message",customText)},append:function(a){joms.jQuery(a).find("ul.cStreamList li");joms.jQuery("#activity-more,#activity-exclusions").remove(),joms.jQuery("#activity-stream-container ul.cStreamList").append(a),joms.jQuery("body").focus()},initMap:function(){(null!=joms.jQuery(".newsfeed-mapFade")||null!=joms.jQuery(".newsfeed-map-heatzone"))&&joms.jQuery(".newsfeed-mapFade").length&&(joms.jQuery(".newsfeed-mapFade").live("mouseover",function(){joms.jQuery(this).find("img:eq(2)").fadeOut(0)}),joms.jQuery(".newsfeed-mapFade").live("mouseout",function(){joms.jQuery(this).find("img:eq(2)").fadeIn(0)}),joms.jQuery(".newsfeed-map-heatzone").live("mouseover",function(){joms.jQuery(this).parent().find("img:eq(1)").fadeOut()}),joms.jQuery(".newsfeed-map-heatzone").live("mouseout",function(){joms.jQuery(this).parent().find("img:eq(1)").fadeIn(0)}))},more:function(){var a=joms.jQuery(".cMain > #activity-stream-container ul.list-unstyled");a.length<=0&&(a=joms.jQuery("#activity-stream-container ul.list-unstyled"));var b="";a.find("li[data-streamid]").length>0&&(b=a.find("li[data-streamid]").last().data("streamid"));var c="",d="";joms.jQuery("#apptype").length>0&&(c=joms.jQuery("#apptype").val()),joms.jQuery("#appid").length>0&&(d=joms.jQuery("#appid").val());var e=a.data("filter"),f=a.data("filterid");joms.jQuery("#activity-more .btn").hide(),joms.jQuery("#activity-more .loading").show(),jax.call("community","activities,ajaxGetOlderActivities",b,e,f,a.data("filter-value"))},prependOldStream:function(a){container=joms.jQuery(".cMain > #activity-stream-container"),container.length<=0&&(container=joms.jQuery("#activity-stream-container")),joms.jQuery(a).children("li").appendTo(".cMain #activity-stream-container > ul.list-unstyled"),container.find("#activity-more .loading").hide(),joms.activities.infiniteScrollLoaded?setTimeout(function(){joms.activities.infiniteScrollDelay=0},1e3):joms.jQuery("#activity-more .btn").show()},loadNewStream:function(){if(joms.jQuery(".joms-latest-activities-container").data("actid")>-1)return void joms.jQuery(".joms-latest-activities-container").css("display","none");var a=joms.jQuery("#activity-stream-container ul");jax.loadingFunction=function(){};var b=new Array,c=0;joms.jQuery("#activity-stream-container > ul li").each(function(){joms.jQuery(this).data("streamid")&&(b[c]=joms.jQuery(this).data("streamid"),c++)}),b.sort(function(a,b){return b-a}),jax.call("community","activities,ajaxGetRecentActivitiesCount",b[0],a.data("filter"),a.data("filterid"),a.data("filter-value"))},announceNewStream:function(a,b,c){return joms.jQuery(".joms-latest-activities-container").data("actid")>-1?void joms.jQuery(".joms-latest-activities-container").css("display","none"):(a>0?joms.jQuery(".joms-latest-activities-container").html('<div class="joms-load-latest"><a href="javascript:" onclick="joms.activities.showNewStream();">'+c+"</div>").show():joms.jQuery(".joms-latest-activities-container").hide(),void(0!=b&&setTimeout("joms.activities.loadNewStream()",b)))},appendNewStream:function(a){joms.jQuery(".joms-latest-activities-container").hide().empty(),joms.jQuery(a).children("li").prependTo(".cMain #activity-stream-container > ul.list-unstyled")},showNewStream:function(){var a=joms.jQuery("#activity-stream-container ul.list-unstyled");return jax.call("community","activities,ajaxGetRecentActivities",a.find("li[data-streamid]").first().data("streamid"),a.data("filter"),a.data("filterid"),a.data("filter-value")),!1},remove:function(a,b){var c="jax.call('community', 'activities,ajaxConfirmDeleteActivity', '"+a+"', '"+b+"');";cWindowShow(c,"",450,100)},editLocation:function(a){var b="jax.call('community', 'activities,ajaxeditLocation', '"+a+"');";cWindowShow(b,"",450,100)},saveLocation:function(a){var b=joms.jQuery("#cWindow").find("#editlocation"),c=b.find("#editlocation-selector input"),d=b.find("#editlocation-map"),e=c.val(),f=d.data("lat"),g=d.data("lng");e&&f&&g&&jax.call("community","activities,ajaxSaveLocation",a,e,f,g)},removeLocation:function(a){var b="jax.call('community', 'activities,ajaxRemoveLocation', '"+a+"');";cWindowShow(b,"",450,100)},infiniteScroll:function(){if(!joms.activities.infiniteScrollLoaded){var a=navigator.userAgent.toLowerCase(),b=!!a.match(/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i);if(!b){var c=joms.jQuery(window),d=joms.jQuery(document);joms.jQuery("#activity-more .btn").show(),c.on("scroll",function(){if(c.scrollTop()==d.height()-c.height()){if(joms.activities.infiniteScrollDelay)return;joms.activities.infiniteScrollDelay=1,joms.activities.more(),setTimeout(function(){joms.activities.infiniteScrollDelay=0},1e4)}}),joms.activities.infiniteScrollLoaded=1}}}},apps:{windowTitle:"",toggle:function(a){joms.jQuery(a).children(".app-box-actions").slideToggle("fast"),joms.jQuery(a).children(".app-box-footer").slideToggle("fast"),joms.jQuery(a).children(".app-box-content").slideToggle("fast",function(){joms.jQuery.cookie(a,joms.jQuery(this).css("display"))})},showAboutWindow:function(a){var b="jax.call('community', 'apps,ajaxShowAbout', '"+a+"');";cWindowShow(b,"",450,100)},showPrivacyWindow:function(a){var b="jax.call('community', 'apps,ajaxShowPrivacy', '"+a+"');";cWindowShow(b,"",450,100)},showSettingsWindow:function(a,b){var c="jax.call('community', 'apps,ajaxShowSettings', '"+a+"', '"+b+"');";cWindowShow(c,"",450,100)},savePrivacy:function(){var a=joms.jQuery("input[name=privacy]:checked").val(),b=joms.jQuery("input[name=appname]").val();jax.call("community","apps,ajaxSavePrivacy",b,a)},saveSettings:function(){jax.call("community","apps,ajaxSaveSettings",jax.getFormValues("appSetting"))},remove:function(a){var b="jax.call('community', 'apps,ajaxRemove', '"+a+"');";cWindowShow(b,this.windowTitle,450,100)},add:function(a){jax.call("community","apps,ajaxAdd",a)},initToggle:function(){joms.jQuery(".app-box").each(function(){var a="#"+joms.jQuery(this).attr("id");"none"==joms.jQuery.cookie(a)&&(joms.jQuery(a).addClass("collapse"),joms.jQuery(a).children(".app-box-actions").css("display","none"),joms.jQuery(a).children(".app-box-footer").css("display","none"),joms.jQuery(a).children(".app-box-content").css("display","none"))})}},bookmarks:{show:function(a){var b="jax.call('community', 'bookmarks,ajaxShowBookmarks','"+a+"');";cWindowShow(b,"",450,100)},email:function(a){var b=jax.getFormValues("bookmarks-email"),c=b[1][1],d=b[0][1],e="jax.call('community', 'bookmarks,ajaxEmailPage','"+a+"','"+d+"',\""+c+'");';cWindowShow(e,"",450,100)}},report:{emptyMessage:"",checkReport:function(){return""==joms.jQuery("#report-message").val()?(joms.jQuery("#report-message-error").html(this.emptyMessage).css("color","red"),!1):!0},showWindow:function(a,b){var c='jax.call("community" , "system,ajaxReport" , "'+a+'","'+location.href+'" ,'+b+");";cWindowShow(c,"",450,100)},submit:function(a,b,c){if(joms.report.checkReport()){var d=jax.getFormValues("report-form"),e='jax.call("community", "system,ajaxSendReport","'+a+'","'+location.href+'","'+d[1][1]+'" , '+c+")";cWindowShow(e,"",450,100)}}},featured:{add:function(a,b){var c="jax.call('community', '"+b+",ajaxAddFeatured', '"+a+"');";cWindowShow(c,"",450,100)},remove:function(a,b){var c="jax.call('community','"+b+",ajaxRemoveFeatured','"+a+"');";cWindowShow(c,"",450,100)}},flash:{enabled:function(){try{try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{a.AllowScriptAccess="always"}catch(b){return"6,0,0"}}catch(b){}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(b){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(b){}}return!1}},invitation:{showForm:function(a,b,c,d,e){var f='jax.call("community", "system,ajaxShowInvitationForm","'+a+'","'+b+'","'+c+'","'+d+'","'+e+'")',g=520;g="0"!=d?g:g-108,g="0"!=e?g:g-108,cWindowShow(f,"",550,g)},send:function(a,b){var c=joms.jQuery("#community-invitation-form"),d=c.serializeArray(),e=[],f=[];if(d&&d.length)for(var g,h=0;h<d.length;h++)g=d[h],"friends[]"===g.name&&e.indexOf(g.value)<0&&e.push(g.value);f.push(["friendsearch",c.find("[name=friendsearch]").val()]),f.push(["emails",c.find("[name=emails]").val()]),f.push(["message",c.find("[name=message]").val()]),e.length&&f.push(["friends",e.join(",")]),jax.call("community","system,ajaxSubmitInvitation",a,b,f)},selectMember:function(a){joms.jQuery("#community-invited-list "+a).remove(),joms.jQuery(a+" input").is(":checked")&&(joms.jQuery(a).clone().appendTo("#community-invited-list"),joms.jQuery(a).addClass("invitation-item-invited").children(".invitation-checkbox").show())},selectMemberUnique:function(a){joms.jQuery(a+" input").is(":checked")?(joms.jQuery("#community-invited-list").empty(),joms.jQuery(a).clone().appendTo("#community-invited-list"),joms.jQuery(a).remove(),joms.jQuery(a).addClass("invitation-item-invited").children(".invitation-checkbox").show()):joms.jQuery(a).remove()},filterMember:function(){joms.jQuery("#community-invitation-list li").each(function(){element=joms.jQuery(this).attr("id"),joms.jQuery("#community-invited-list #"+element).is("li")&&joms.jQuery(this).remove(),joms.jQuery("#inbox-selected-to").length>0&&joms.jQuery("#inbox-selected-to #"+element).is("li")&&joms.jQuery(this).remove()})},showResult:function(){joms.jQuery("#cInvitationTabContainer div").removeClass("active"),joms.jQuery("#cInvitationTabContainer #community-invitation").addClass("active")},showSelected:function(){joms.jQuery("#cInvitationTabContainer div").removeClass("active"),joms.jQuery("#cInvitationTabContainer #community-invited").addClass("active")},selectNone:function(a){joms.jQuery(a).find("li").each(function(){joms.jQuery(this).remove()})},selectAll:function(a){joms.jQuery(a).find("li").each(function(){joms.jQuery(this).find("input").attr("checked","checked"),joms.jQuery(this).find("input").attr("checked")&&joms.invitation.selectMember("#"+joms.jQuery(this).attr("id"))})}},memberlist:{submit:function(){return""==joms.jQuery("input#title").val()?(joms.jQuery("#filter-title-error").show(),!1):""==joms.jQuery("textarea#description").val()?(joms.jQuery("#filter-description-error").show(),!1):void joms.jQuery("#jsform-memberlist-addlist").submit()},showSaveForm:function(a,b){for(var a=a.split(","),c=Array(),d=1!=joms.jQuery("#avatar:checked").val()?0:1,e=0;e<a.length;e++){var f=(new Array,""),g=a[e];f="date"!=b["fieldType"+g]&&"birthdate"!=b["fieldType"+g]||"between"!=b["condition"+g]?b["value"+a[e]]:b["value"+a[e]]+","+b["value"+a[e]+"_2"],c[e]=new Array("field="+b["field"+a[e]],"condition="+b["condition"+a[e]],"fieldType="+b["fieldType"+a[e]],"value="+f)}for(var h="",i=0;i<c.length;i++)h+='"'+c[i]+'"',i+1!=c.length&&(h+=",");var j='jax.call("community", "memberlist,ajaxShowSaveForm","'+joms.jQuery("input[name=operator]:checked").val()+'","'+d+'",'+h+");";cWindowShow(j,"",470,300)}},notifications:{showWindow:function(){var a='jax.call("community", "notification,ajaxGetNotification", "")';cWindowShow(a,"",450,200)},updateNotifyCount:function(){var a=joms.jQuery("#toolbar-item-notify-count").text();""!=joms.jQuery.trim(a)&&a>0&&(a-=1,joms.jQuery("#toolbar-item-notify-count").html(a),0==a&&(joms.jQuery("#toolbar-item-notify").hide(),setTimeout("cWindowHide()",1e3)))},showRequest:function(){var a='jax.call("community", "notification,ajaxGetRequest", "")';cMiniWindowShow(a,"",450,100)},showInbox:function(){var a='jax.call("community", "notification,ajaxGetInbox", "")';cMiniWindowShow(a,"",450,100)},showUploadPhoto:function(a,b){var c='jax.call("community", "photos,ajaxUploadPhoto","'+a+'","'+b+'")';cWindowShow(c,"",600,400)}},filters:{bind:function(){var a=this.loading;joms.jQuery(document).ready(function(){joms.jQuery(".newest-member").bind("click",function(){joms.jQuery(this).hasClass("active-state")||(a(joms.jQuery(this).attr("class")),jax.call("community","frontpage,ajaxGetNewestMember",frontpageUsers))}),joms.jQuery(".active-member").bind("click",function(){joms.jQuery(this).hasClass("active-state")||(a(joms.jQuery(this).attr("class")),jax.call("community","frontpage,ajaxGetActiveMember",frontpageUsers))}),joms.jQuery(".popular-member").bind("click",function(){joms.jQuery(this).hasClass("active-state")||(a(joms.jQuery(this).attr("class")),jax.call("community","frontpage,ajaxGetPopularMember",frontpageUsers))}),joms.jQuery(".featured-member").bind("click",function(){joms.jQuery(this).hasClass("active-state")||(a(joms.jQuery(this).attr("class")),jax.call("community","frontpage,ajaxGetFeaturedMember",frontpageUsers))}),joms.jQuery(".all-activity").bind("click",function(){a(joms.jQuery(this).attr("class")),joms.ajax.call("frontpage,ajaxGetActivities",["all"],{success:function(){}}),joms.jQuery(".all-activity").parents("li.filter").addClass("active").siblings().removeClass("active")}),joms.jQuery(".me-and-friends-activity").bind("click",function(){a(joms.jQuery(this).attr("class")),joms.ajax.call("frontpage,ajaxGetActivities",["me-and-friends"],{success:function(){}}),joms.jQuery(".me-and-friends-activity").parents("li.filter").addClass("active").siblings().removeClass("active")}),joms.jQuery(".active-profile-and-friends-activity").bind("click",function(){joms.jQuery(this).hasClass("active-state")||(a(joms.jQuery(this).attr("class")),jax.call("community","frontpage,ajaxGetActivities","active-profile-and-friends",joms.user.getActive()))}),joms.jQuery(".active-profile-activity").bind("click",function(){joms.jQuery(this).hasClass("active-state")||(a(joms.jQuery(this).attr("class")),jax.call("community","frontpage,ajaxGetActivities","active-profile",joms.user.getActive()))}),joms.jQuery(".p-active-profile-and-friends-activity").bind("click",function(){joms.jQuery(this).hasClass("active-state")||(a(joms.jQuery(this).attr("class")),jax.call("community","frontpage,ajaxGetActivities","active-profile-and-friends",joms.user.getActive(),"profile"))}),joms.jQuery(".p-active-profile-activity").bind("click",function(){joms.jQuery(this).hasClass("active-state")||(a(joms.jQuery(this).attr("class")),jax.call("community","frontpage,ajaxGetActivities","active-profile",joms.user.getActive(),"profile"))}),joms.jQuery(".newest-videos").bind("click",function(){joms.jQuery(this).hasClass("active-state")||(a(joms.jQuery(this).attr("class")),jax.call("community","frontpage,ajaxGetNewestVideos",frontpageVideos))}),joms.jQuery(".popular-videos").bind("click",function(){joms.jQuery(this).hasClass("active-state")||(a(joms.jQuery(this).attr("class")),jax.call("community","frontpage,ajaxGetPopularVideos",frontpageVideos))}),joms.jQuery(".featured-videos").bind("click",function(){joms.jQuery(this).hasClass("active-state")||(a(joms.jQuery(this).attr("class")),jax.call("community","frontpage,ajaxGetFeaturedVideos",frontpageVideos))}),joms.jQuery(".popular-member").css("border-right","0").css("padding-right","0")})},loading:function(a){elParent=joms.jQuery("."+a).parent().parent().attr("id"),"undefined"==typeof elParent&&(elParent=joms.jQuery("."+a).parent().attr("id")),joms.jQuery("#"+elParent+" .loading").show(),joms.jQuery("#"+elParent+" a").removeClass("active-state"),joms.jQuery("."+a).addClass("active-state")},hideLoading:function(){joms.jQuery(".loading").hide(),joms.jQuery(".jomTipsJax").addClass("jomTips"),joms.tooltip.setup()}},groups:{invitation:{accept:function(a){jax.call("community","groups,ajaxAcceptInvitation",a)},reject:function(a){jax.call("community","groups,ajaxRejectInvitation",a)}},addInvite:function(a){var b=joms.jQuery("#"+a).parent().attr("id");"friends-list"==b?joms.jQuery("#friends-invited").append(joms.jQuery("#"+a)).html():joms.jQuery("#friends-list").append(joms.jQuery("#"+a)).html()},removeTopic:function(a,b,c){var d='jax.call("community","groups,ajaxShowRemoveDiscussion", "'+b+'","'+c+'");';cWindowShow(d,a,450,100)},lockTopic:function(a,b,c){var d='jax.call("community","groups,ajaxShowLockDiscussion", "'+b+'","'+c+'");';cWindowShow(d,a,450,100)},editBulletin:function(){"none"==joms.jQuery("#bulletin-edit-data").css("display")?(joms.jQuery("#bulletin-edit-data").show(),joms.jQuery(".cPageStory-Author,.cPageStory-Content").hide()):(joms.jQuery("#bulletin-edit-data").hide(),joms.jQuery(".cPageStory-Author,.cPageStory-Content").show())},removeBulletin:function(a,b,c){var d='jax.call("community", "groups,ajaxShowRemoveBulletin", "'+b+'","'+c+'");';cWindowShow(d,a,450,100)},unpublish:function(a){var b='jax.call("community", "groups,ajaxShowUnpublishGroup", "'+a+'");';cWindowShow(b,"",450,100)},leave:function(a){var b='jax.call("community", "groups,ajaxShowLeaveGroup", "'+a+'");';cWindowShow(b,"",450,100)},join:function(a,b){jax.call("community","groups,ajaxJoinGroup",[a],[b])},joinComplete:function(a){joms.jQuery("input#join").val(a),joms.jQuery(".loading-icon").hide(),joms.jQuery("#add-reply").show(),joms.jQuery("#add-reply").click(function(){joms.jQuery("div#community-groups-wrap").hide(),joms.jQuery("textarea#wall-message").css("width","100%"),joms.jQuery(".reply-form").show()})},edit:function(){joms.jQuery("#community-group-info .cdata").each(function(){joms.jQuery(this).next().html()&&"none"!=joms.jQuery(this).css("display")?joms.jQuery(this).css("display","none"):joms.jQuery(this).css("display","block")}),joms.jQuery("#community-group-info .cinput").each(function(){"none"==joms.jQuery(this).css("display")?joms.jQuery(this).css("display","block"):joms.jQuery(this).css("display","none")}),"none"!=joms.jQuery("div#community-group-info-actions").css("display")?joms.jQuery("div#community-group-info-actions").css("display","none"):joms.jQuery("div#community-group-info-actions").css("display","block")},save:function(a){var b=joms.jQuery("#community-group-name").val(),c=joms.jQuery("#community-group-description").val(),d=joms.jQuery("#community-group-website").val(),e=joms.jQuery("#community-group-category").val(),f=joms.jQuery("input[@name='group-approvals']:checked").val();jax.call("community","groups,ajaxSaveGroup",a,b,c,d,e,f)},update:function(a,b,c,d){joms.jQuery("#community-group-data-name").html(a),joms.jQuery("#community-group-data-description").html(b),joms.jQuery("#community-group-data-website").html(c),joms.jQuery("#community-group-data-category").html(d),this.edit()},deleteGroup:function(a){var b="jax.call('community', 'groups,ajaxWarnGroupDeletion', '"+a+"');";cWindowShow(b,"",450,100,"error")},toggleSearchSubmenu:function(a){joms.jQuery(a).next("ul").toggle().find("input[type=text]").focus()},confirmMemberRemoval:function(a,b){var c=function(){jax.call("community","groups,ajaxConfirmMemberRemoval",a,b)};cWindowShow(c,"",450,80,"warning")},removeMember:function(a,b){var c=joms.jQuery("#cWindow input[name=block]").attr("checked");c?jax.call("community","groups,ajaxBanMember",a,b):jax.call("community","groups,ajaxRemoveMember",a,b)}},photos:{multiUpload:{label:{filename:"Filename",size:"Size",status:"Status",filedrag:"Drag files here.",addfiles:"Add Files",startupload:"Start Upload",invalidfiletype:"Invalid File Type",exceedfilesize:"Image file size exceeded limit",stopupload:"Stop Upload"},groupid:"",noticeDivId:"photoUploaderNotice",defaultMsg:"",groupEmptyValidateMsg:"",uploadingCreateMsg:"",uploadingSelectMsg:"",refreshNeeded:!1,defaultUploadUrl:"index.php?option=com_community&view=photos&task=multiUpload",maxFileSize:"10mb",_init:function(a,b){if(void 0!=a&&parseInt(a)>0&&(joms.photos.multiUpload.groupid=a),void 0!=b&&"object"==typeof b)for(var c in b)joms.photos.multiUpload[c]=b[c];var d=navigator.userAgent.toLowerCase(),e=!!d.match(/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i);pluploader=joms.jQuery("#multi_uploader").pluploadQueue({runtimes:"gears,html5,browserplus,html4",url:"index.php?option=com_community&view=photos&task=multiUpload",max_file_size:joms.photos.multiUpload.maxFileSize,chunk_size:joms.photos.multiUpload.maxFileSize,unique_names:!0,resize:e?!1:{width:2100,height:2100,quality:90},filters:[{title:"Image files",extensions:"jpg,gif,png,jpeg"}],flash_swf_url:"components/com_community/assets/multiupload_js/plupload.flash.swf",silverlight_xap_url:"components/com_community/assets/multiupload_js/plupload.silverlight.xap",preinit:{Init:function(a,b){joms.photos.multiUpload.log("[Init]","Info:",b,"Features:",a.features)},BeforeUpload:function(){if("inline"==joms.jQuery("#new-album").css("display")){if(""!=joms.photos.multiUpload.groupid&&""==joms.jQuery("#album-name").val())return joms.photos.multiUpload.stopUploading(),void alert(joms.photos.multiUpload.groupEmptyValidateMsg);joms.photos.multiUpload.stopUploading();var a=joms.jQuery("#album-name").val().trim();jax.call("community","photos,ajaxCreateAlbum",a,joms.photos.multiUpload.groupid)}else{var b=joms.jQuery("#albumid option:selected").html(),c=joms.photos.multiUpload.uploadingSelectMsg.replace("%1$s","<strong>"+b+"</strong>");joms.photos.multiUpload.displayNotice(c),joms.photos.multiUpload.assignUploadUrl(joms.photos.multiUpload.getSelectedAlbumId())}joms.photos.multiUpload.hideShowInput(!0),joms.jQuery("#photo-uploader").css("overflow","hidden")},UploadFile:function(a,b){joms.photos.multiUpload.log("[UploadFile]",b),joms.jQuery(".plupload_start").addClass("plupload_disabled")},FileUploaded:function(a,b,c){try{var d=joms.jQuery.parseJSON(c.response)}catch(e){joms.photos.multiUpload.removeQueue(b.id),pluploader.pluploadQueue().stop(),joms.photos.multiUpload.displayNotice("<strong>Error Uploading.</strong>")}var f=pluploader.pluploadQueue().getFile(b.id);if(void 0!=d&&void 0!=f)if(void 0!=d.error&&""==d.photoId){joms.photos.multiUpload.removeQueue(b.id),joms.jQuery("#upload-footer").show(),joms.jQuery("#message-between").hide(),joms.jQuery(".add-more").hide(),cWindowResize();try{pluploader.pluploadQueue().stop()}catch(e){}joms.photos.multiUpload.showThumbnail(),joms.photos.multiUpload.displayNotice("<strong>"+d.msg+"</strong>"),joms.jQuery(".plupload_file_name span").bind("click",function(a){joms.photos.multiUpload.editTitle(a)})}else joms.jQuery("#album-name").attr("albumid",d.albumId),f.imgSrc=d.info,f.photoId=d.photoId,joms.photos.multiUpload.refreshNeeded=!0},FilesAdded:function(){joms.jQuery(".plupload_file_name span").unbind("click"),joms.jQuery(".plupload_button.plupload_start").show(),joms.jQuery(".plupload_button.plupload_start").css("display","inline-block")},FilesRemoved:function(){0==pluploader.pluploadQueue().files.length&&joms.jQuery(".plupload_button.plupload_start").hide()},UploadComplete:function(){joms.photos.multiUpload.uploadCompleteShow(),setTimeout("joms.photos.multiUpload.showThumbnail(); joms.photos.multiUpload.enableEditTitle();",1e3)}},init:{Refresh:function(){joms.photos.multiUpload.log("[Refresh]")},StateChanged:function(a){joms.photos.multiUpload.log("[StateChanged]",a.state==plupload.STARTED?"STARTED":"STOPPED")},QueueChanged:function(){joms.photos.multiUpload.log("[QueueChanged]")},UploadProgress:function(a,b){joms.photos.multiUpload.log("[UploadProgress]","File:",b,"Total:",a.total)},FilesAdded:function(a,b){joms.photos.multiUpload.log("[FilesAdded]"),plupload.each(b,function(a){joms.photos.multiUpload.log("  File:",a)})},FilesRemoved:function(a,b){joms.photos.multiUpload.log("[FilesRemoved]"),plupload.each(b,function(a){joms.photos.multiUpload.log("  File:",a)})},FileUploaded:function(a,b,c){joms.photos.multiUpload.log("[FileUploaded] File:",b,"Info:",c)},ChunkUploaded:function(a,b,c){joms.photos.multiUpload.log("[ChunkUploaded] File:",b,"Info:",c)},Error:function(a,b){b.file?joms.photos.multiUpload.log("[error]",b,"File:",b.file):joms.photos.multiUpload.log("[error]",b)}}}),("html4"==pluploader.pluploadQueue().runtime||joms.jQuery.browser.msie&&parseInt(joms.jQuery.browser.version)<=7||joms.jQuery.browser.mozilla&&1.9==joms.jQuery.browser.version.slice(0,3))&&joms.photos.multiUpload.getBrowserNotSupport(),joms.jQuery(".plupload_button.plupload_start").hide(),joms.jQuery("#cwin_close_btn").click(function(){joms.photos.multiUpload.refreshNeeded&&joms.photos.multiUpload.refreshBrowser()}),joms.jQuery.browser.msie&&joms.jQuery("div.plupload.html5").css("top",230)},log:function(){var a="";plupload.each(arguments,function(b){var c="";"string"!=typeof b?(plupload.each(b,function(a,d){if(b instanceof plupload.File)switch(a){case plupload.QUEUED:a="QUEUED";break;case plupload.UPLOADING:a="UPLOADING";break;case plupload.FAILED:a="FAILED";break;case plupload.DONE:a="DONE"}"function"!=typeof a&&(c+=(c?", ":"")+d+"="+a)}),a+=c+" "):a+=b+" "}),joms.jQuery("#log").val(joms.jQuery("#log").val()+a+"\r\n")},getSelectedAlbumId:function(){return"undefined"==typeof pluploader?!1:joms.jQuery("#album-name").length<=0?!1:void 0!=joms.jQuery("#album-name").attr("albumid")&&parseInt(joms.jQuery("#album-name").attr("albumid"))>0&&"inline"==joms.jQuery("#new-album").css("display")?joms.jQuery("#album-name").attr("albumid"):joms.jQuery("#albumid").val()?joms.jQuery("#albumid").val():joms.jQuery("#album-name").attr("albumid")
},showThumbnail:function(){for(var a=pluploader.pluploadQueue(),b=0;b<a.files.length;b++){var c=document.createElement("img");c.id="plupload_"+a.files[b].id,c.setAttribute("class","plupupload_thumbnail"),c.src=a.files[b].imgSrc,joms.jQuery("#"+a.files[b].id+".plupload_done .plupload_file_name").prepend(c)}var d=joms.jQuery("#albumid option:selected").html(),e=joms.photos.multiUpload.uploadedCompleteMsg.replace("%1$s","<strong>"+d+"</strong>");joms.photos.multiUpload.displayNotice(e)},assignUploadUrl:function(a){if("undefined"==typeof pluploader)return!1;var b=joms.photos.multiUpload.defaultUploadUrl,c=pluploader.pluploadQueue();b=b.match(/&+/)?b+"&albumid="+a+"&batchcount="+c.files.length:b+"?albumid="+a+"&batchcount="+c.files.length,joms.jQuery("#multi_uploader").pluploadQueue().settings.url=b},assignNewAlbum:function(a,b){if("undefined"==typeof pluploader)return!1;if(joms.jQuery("#albumid").length<=0)return!1;if(void 0!=b){var c=b,d=new Option(c,a);joms.jQuery("#albumid").append(d).val(a),joms.photos.multiUpload.assignUploadUrl(a),joms.jQuery("#album-name").val("")}else{joms.jQuery("#albumid").val(a);var c=joms.jQuery("#albumid option:selected").html()}var e=joms.photos.multiUpload.uploadingCreateMsg.replace("%1$s","<strong>"+c+"</strong>");joms.photos.multiUpload.displayNotice(e),joms.photos.multiUpload.showExistingAlbum(),setTimeout("joms.jQuery('#multi_uploader').pluploadQueue().start()",500)},showExistingAlbum:function(){joms.jQuery("#select-album").show(),joms.jQuery("#new-album").hide(),joms.jQuery("#newalbum").hide(),pluploader.pluploadQueue().files.length>0&&joms.jQuery(".plupload_start").removeClass("plupload_disabled")},createNewAlbum:function(){joms.jQuery("#select-album").hide(),joms.jQuery("#new-album").show(),joms.jQuery("#newalbum").show()},startUploading:function(){joms.jQuery("#multi_uploader").pluploadQueue().start()},stopUploading:function(){joms.jQuery("#multi_uploader").pluploadQueue().stop()},goToAlbum:function(a){document.location.href=a},getBrowserNotSupport:function(){jax.call("community","photos,ajaxGotoOldUpload",joms.photos.multiUpload.getSelectedAlbumId(),joms.photos.multiUpload.groupid)},goToOldUpload:function(a){document.location.href=a},refreshBrowser:function(){window.location.reload()},updateLabel:function(a){a=joms.jQuery.parseJSON(a);for(var b=["filename","size","status","filedrag","addfiles","startupload","stopupload"],c=0;c<b.length;c++)"undefined"!=typeof a[b[c]]&&""!=a[b[c]]&&(joms.photos.multiUpload.label[b[c]]=a[b[c]])},enableEditTitle:function(){joms.jQuery(".plupload_file_name span").length>0&&(joms.jQuery(".plupload_file_name span").unbind("click"),joms.jQuery(".plupload_file_name span").bind("click",function(a){joms.photos.multiUpload.editTitle(a)}))},editTitle:function(a){joms.jQuery(".plupload_file_name span").unbind("click");var b=a.target?a.target:a.which,c=joms.jQuery(b).parent().parent().attr("id"),d='<input type="text" target="'+c+'" name="photoTitle" value="'+joms.jQuery(b).html()+'" />';joms.jQuery(b).html(d),joms.jQuery(b).find("input").unbind("keypress").unbind("focusout"),joms.jQuery(b).find("input").bind("keypress",function(a){keyCode=a.keyCode,13==keyCode&&(joms.photos.multiUpload.saveCaption(this,joms.jQuery(this).parent()),joms.jQuery(".plupload_file_name span").bind("click",function(a){joms.photos.multiUpload.editTitle(a)}))}),joms.jQuery(b).find("input").bind("focusout",function(){joms.photos.multiUpload.saveCaption(this,joms.jQuery(this).parent()),joms.jQuery(".plupload_file_name span").bind("click",function(a){joms.photos.multiUpload.editTitle(a)})})},saveCaption:function(a,b){var c=joms.jQuery(a).attr("target"),d=pluploader.pluploadQueue().getFile(c),e=joms.jQuery(a).val();d.name=e;var f=encodeURIComponent(e);jax.call("community","photos,ajaxSaveCaption",d.photoId,f,!1),joms.jQuery(b).html(e)},displayNotice:function(a){joms.jQuery("#"+joms.photos.multiUpload.noticeDivId).html(a)},hideShowInput:function(a){void 0!=a&&a===!0?(joms.jQuery("#upload-header").hide(),joms.jQuery(".custom_plupload_buttons").hide()):(joms.jQuery("#upload-header").show(),joms.jQuery(".custom_plupload_buttons").show(),joms.jQuery(".plupload_button.plupload_start").hide()),cWindowResize()},uploadCompleteShow:function(){joms.jQuery("div#upload-footer").show(),cWindowResize();var a=pluploader.pluploadQueue();joms.ajax.call("photos,ajaxUpdateCounter",[joms.photos.multiUpload.getSelectedAlbumId(),JSON.stringify(a)])},removeQueue:function(a){for(var b=pluploader.pluploadQueue().files,c=[],d=0,e=0;e<b.length;e++)b[e].id==a?(c[d]=b[e],d++):d>0&&(c[d]=b[e],d++);for(var e=0;e<c.length;e++)pluploader.pluploadQueue().removeFile(c[e]),c[e]=""}},uploadAvatar:function(a,b){var c=jax.call("community","photos,ajaxUploadAvatar",a,b);cWindowShow(c,"",450,100)},ajaxUpload:function(a,b,c){var d=joms.jQuery("#jsform-uploadavatar").prop("action");return joms.jQuery.ajaxFileUpload({url:d,secureuri:!1,fileElementId:"filedata",dataType:"json",beforeSend:function(){},complete:function(){},success:function(e){if("true"==e.error)return joms.jQuery("span.error").remove(),joms.jQuery("#avatar-upload").prepend('<span class="error">'+e.msg+"</span>"),!1;d=e.msg,joms.jQuery("span.error").remove();var f="";switch(joms.jQuery("#thumb-crop").css("min-height",0),joms.jQuery("#large-avatar-pic").prop("src",d),joms.jQuery("#thumb-hold > img").prop("src",d),joms.jQuery("div.status-anchor img").prop("src",d),joms.jQuery("#large-avatar-pic").load(function(){var a=Math.round(.4*joms.jQuery("#large-avatar-pic").width()),b=Math.round(.4*joms.jQuery("#large-avatar-pic").height());joms.jQuery("#thumb-hold > img").css({width:a+"px",height:b+"px",marginLeft:"0px",marginTop:"0px"})}),a){case"event":f=joms.jQuery(".js-focus-avatar img").prop("src");var g=d.replace("event-","");joms.jQuery(".js-focus-avatar img").prop("src",g),f.search("assets/event.png")>-1&&(c?(selected=joms.jQuery("input:radio[name=repeattype]:checked").val(),custom='{"call":["CEvents","getEventRepeatSaveHTML","'+selected+'"], "library":"events", "arg":["repeattype"]}',jax.call("community","photos,ajaxUploadAvatar",a,b,custom)):jax.call("community","photos,ajaxUploadAvatar",a,b));break;case"group":f=joms.jQuery(".js-focus-avatar img").prop("src");var h=d.replace("group-","");joms.jQuery(".js-focus-avatar img").prop("src",h),f.search("assets/group.png")>-1&&jax.call("community","photos,ajaxUploadAvatar",a,b);break;case"profile":if(f=joms.jQuery(".js-focus-avatar img").prop("src"),0!=e.info.length){var i=e.info,j=i.replace("thumb_","");joms.jQuery(".status-author > img").prop("src",i),joms.jQuery('.cStream-Avatar img[data-author="'+b+'"]').prop("src",i),joms.jQuery(".js-focus-avatar img").prop("src",j)}f.search("assets/user-")>-1&&jax.call("community","photos,ajaxUploadAvatar",a,b)}}}),!1},loadImgSelect:function(){joms.jQuery("#large-avatar-pic").unbind("load"),joms.jQuery("#large-avatar-pic").load(function(){joms.photos.ajaxImgSelect(),cWindowAutoResize()})},ajaxImgSelect:function(){var a=joms.jQuery("#large-avatar-pic").height(),b=160;160>a&&(b=a),a>160&&(a=160),joms.jQuery("#large-avatar-pic").imgAreaSelect({handles:!0,aspectRatio:"1:1",x1:0,y1:0,x2:b,y2:a,show:!1,hide:!0,enable:!1,parent:"#cWindowContentWrap",minHeight:64,minWidth:64,onInit:joms.photos.previewThumb,onSelectChange:joms.photos.previewThumb});var c=joms.jQuery("#large-avatar-pic").imgAreaSelect({instance:!0});c.setOptions({show:!0,hide:!1,enable:!0}),c.update()},saveThumb:function(a,b){var c=joms.jQuery("#large-avatar-pic").imgAreaSelect({instance:!0}),d=c.getSelection();jax.call("community","photos,ajaxUpdateThumbnail",a,b,d.x1,d.y1,d.width,d.height)},previewThumb:function(a,b){var c=64/(b.width||1),d=64/(b.height||1);joms.jQuery("#thumb-hold  >img").css({width:Math.round(c*joms.jQuery("#large-avatar-pic").width())+"px",height:Math.round(d*joms.jQuery("#large-avatar-pic").height())+"px",marginLeft:"-"+Math.round(c*b.x1)+"px",marginTop:"-"+Math.round(d*b.y1)+"px"})},ajaxRemoveImgSelect:function(){joms.jQuery(".imgareaselect-selection").parent().remove(),joms.jQuery(".imgareaselect-outer").remove()},photoSlider:{moveSpace:4,partialOpacity:.6,fullOpacity:1,intervalTime:30,timer:"",controlObj:"",event:"",parentElem:"",stopAnimeId:"",img_thumbId:"photoSlider_thumb",img_thumbClass:"currentView",thumbnail:{width:0,height:0},_init:function(a,b,c){void 0!=c&&joms.photos.photoSlider.updateConfig(c);var d=joms.jQuery("#"+a);if(joms.photos.photoSlider.controlObj=d,joms.photos.photoSlider.parentElem=joms.jQuery(d.parent()),void 0!=b&&""!=b){joms.photos.photoSlider.stopAnimeId=b,joms.jQuery("."+joms.photos.photoSlider.stopAnimeId).css("opacity",joms.photos.photoSlider.partialOpacity);var e=joms.gallery.getPlaylistIndex(joms.gallery.currentPhoto().id);joms.jQuery("."+joms.photos.photoSlider.stopAnimeId).eq(e).css("opacity",joms.photos.photoSlider.fullOpacity)}joms.photos.photoSlider.parentElem.bind({mouseover:function(a){var b=(joms.photos.photoSlider.getValue(joms.jQuery(this).css("width")),joms.photos.photoSlider.getValue(joms.jQuery(this).css("height"))),c=joms.jQuery(this).offset();a.pageY>c.top+.1*b&&a.pageY<c.top+.9*b&&joms.photos.photoSlider.moveContent(a)},mousemove:function(a){joms.photos.photoSlider.updateMousePos(a)},mouseout:function(a){joms.photos.photoSlider.reset(a)}});var f=joms.photos.photoSlider.parentElem.parent().width();joms.jQuery(".photo_slider").css("width",f+"px"),setTimeout(function(){joms.photos.photoSlider.switchPhoto()},0)},updateConfig:function(a){var b=["moveSpace","partialOpacity","fullOpacity","intervalTime"];if("object"==typeof a)for(var c=0;c<b.length;c++)void 0!=a[b[c]]&&"NaN"!=parseInt(a[b[c]])&&a[b[c]]>0&&(joms.photos.photoSlider[b[c]]=a[b[c]])},moveContent:function(){if(joms.photos.photoSlider.parentElem.unbind("mouseover"),joms.photos.photoSlider.timer=setInterval("joms.photos.photoSlider.animate()",joms.photos.photoSlider.intervalTime),""!=joms.photos.photoSlider.stopAnimeId&&joms.jQuery("."+joms.photos.photoSlider.stopAnimeId).length>0){var a=joms.jQuery("."+joms.photos.photoSlider.stopAnimeId).eq(0);joms.photos.photoSlider.thumbnail.width=joms.photos.photoSlider.getValue(a.css("width")),joms.photos.photoSlider.thumbnail.height=joms.photos.photoSlider.getValue(a.css("height"))}},animate:function(){if(joms.jQuery("#startTagMode").length>0&&"none"==joms.jQuery("#startTagMode").css("display"))return joms.photos.photoSlider.stop(),!1;var a=joms.photos.photoSlider.getValue(joms.photos.photoSlider.controlObj.css("left")),b=joms.photos.photoSlider.getValue(joms.photos.photoSlider.controlObj.css("width")),c=joms.photos.photoSlider.getValue(joms.photos.photoSlider.parentElem.css("width")),d=c/2;joms.photos.photoSlider.getMouseXPosition()>d?a+b-c>=0&&joms.photos.photoSlider.controlObj.css("left",a-joms.photos.photoSlider.moveSpace+"px"):0>a&&joms.photos.photoSlider.controlObj.css("left",a+joms.photos.photoSlider.moveSpace+"px")},updateMousePos:function(a){joms.photos.photoSlider.event=a},getMouseXPosition:function(){return joms.photos.photoSlider.event.pageX-joms.photos.photoSlider.parentElem.offset().left},getMouseYPosition:function(){return joms.photos.photoSlider.event.pageY-joms.photos.photoSlider.parentElem.offset().top},getValue:function(a){return""==a||"auto"==a?intVal=0:(intVal=parseInt(a.replace("px","")),("number"!=typeof intVal||"NaN"==intVal)&&(intVal=0)),intVal},viewImage:function(a){return joms.jQuery("#startTagMode").length>0&&"none"==joms.jQuery("#startTagMode").css("display")?!1:void(void 0!=joms.gallery&&void 0!=jsPlaylist&&(joms.photos.photoSlider.stop(),joms.gallery.displayPhoto(jsPlaylist.photos[joms.gallery.getPlaylistIndex(a)])))},switchPhoto:function(){if(void 0==joms.photos.photoSlider.controlObj||""==joms.photos.photoSlider.controlObj)return!1;var a,b=window.location.hash||"",c=window.location.href;c=c.replace(b,""),b&&b.match(/^#photoid=\d+$/)&&(a=b.replace("#photoid=","")),a||(a=c.match(/.+photoid=(\d+).*/),a=a&&a[1]),a||(a=joms.photos.photoSlider.controlObj.find(d).eq(0).attr("id")),joms.photos.photoSlider.controlObj.find("img").removeClass(joms.photos.photoSlider.img_thumbClass),joms.photos.photoSlider.controlObj.find('img[id="'+a+'"]').addClass(joms.photos.photoSlider.img_thumbClass);var d=joms.jQuery("img#photoSlider_thumb"+a).css("opacity",joms.photos.photoSlider.fullOpacity);joms.jQuery(".image_thumb").not(d).css("opacity",joms.photos.photoSlider.partialOpacity),!d.attr("src")&&d.data("src")&&(d[0].src=d.data("src"));for(var e=d,f=0;6>f&&(e=e.closest("li").next("li"),e.length);f++)e=e.find("img"),e.length&&!e.attr("src")&&e.data("src")&&(e[0].src=e.data("src"));for(var g=d,f=6;f>0&&(g=g.closest("li").prev("li"),g.length);f--)g=g.find("img"),g.length&&!g.attr("src")&&g.data("src")&&(g[0].src=g.data("src"));var h=d.closest("li"),i=(h.position()||{}).left,j=h.closest("ul"),k=(j.position()||{}).left,l=j.width(),m=j.closest("div"),n=m.width(),o=n/2-h.outerWidth(!0)/2;k=n>l?n/2-l/2:Math.max(0-(l-n),Math.min(0,0-i+o)),j.stop().animate({left:k})},updateThumb:function(a,b){var c='img[id="'+joms.photos.photoSlider.img_thumbId+a+'"]';1==joms.jQuery(".slider-gallery").find(c).length&&joms.jQuery(".slider-gallery").find(c).attr("src",b)},removeThumb:function(a){joms.jQuery("#cPhoto"+a).remove();var b=joms.photos.photoSlider.controlObj.find("img").length,c=79;joms.photos.photoSlider.controlObj.css("width",b*c+"px")},reset:function(a){var b=joms.photos.photoSlider.parentElem.offset();return a.pageX>b.left&&a.pageX<b.left+joms.photos.photoSlider.getValue(joms.photos.photoSlider.parentElem.css("width"))&&a.pageY>b.top&&a.pageY<b.top+joms.photos.photoSlider.getValue(joms.photos.photoSlider.parentElem.css("height"))?!1:void joms.photos.photoSlider.stop()},stop:function(){clearInterval(joms.photos.photoSlider.timer),joms.photos.photoSlider.timer="",joms.photos.photoSlider.event="",joms.photos.photoSlider.parentElem.unbind("mouseover").unbind("mousemove").unbind("mouseout"),joms.photos.photoSlider._init(joms.photos.photoSlider.controlObj.attr("id"),joms.photos.photoSlider.stopAnimeId)}}},tooltips:{currentJaxCall:"",currentJElement:"",currentTimeout:"",minitipStyle:{top:0,left:0,width:500,height:100},showDialog:function(a){return""==joms.tooltips.currentJElement||""==joms.tooltips.currentJaxCall?(""!=joms.tooltips.currentTimeout&&clearTimeout(joms.tooltips.currentTimeout),!1):void(joms.tooltips.currentJElement.hasClass(a)&&(joms.minitip._init(joms.tooltips.currentJaxCall,"",joms.tooltips.minitipStyle.width,joms.tooltips.minitipStyle.height),joms.tooltips.repositionMinitip(),joms.jQuery("#"+joms.minitip.id.canvas).addClass(a),joms.jQuery("#"+joms.minitip.id.canvas).attr("currentMinitip",joms.tooltips.currentJElement.attr("id"))))},addMinitipContent:function(a){joms.jQuery("#"+joms.minitip.id.canvas).length>0&&(joms.tooltips.repositionMinitip(),joms.minitip.addContent(a))},repositionMinitip:function(){var a=joms.tooltips.currentJElement.offset().top-(joms.jQuery("#"+joms.minitip.id.canvas).height()+20);if(joms.jQuery.browser.msie&&joms.jQuery.browser.version.substr(0,1)<=7)var b=joms.tooltips.currentJElement.offset().left-65;else var b=joms.tooltips.currentJElement.offset().left+30;joms.jQuery("#"+joms.minitip.id.canvas).css({top:a,left:b})},setDelay:function(a,b,c,d,e){return void 0==a.attr("id")&&a.attr("id","temp_minitooltip"+Math.random().toString()),joms.jQuery("#"+joms.minitip.id.canvas).length>0&&a.attr("id")==joms.jQuery("#"+joms.minitip.id.canvas).attr("currentMinitip")?!1:(void 0!=d&&parseInt(d)>0&&(joms.tooltips.minitipStyle.width=d),void 0!=e&&parseInt(e)>0&&(joms.tooltips.minitipStyle.height=e),joms.tooltips.currentJElement=a,joms.tooltips.currentJElement.bind("mouseout",function(){joms.jQuery(this).removeClass(c),clearTimeout(joms.tooltips.currentTimeout),joms.tooltips.reset(),joms.minitip.hide()}),joms.tooltips.currentJElement.addClass(c),joms.tooltips.currentJaxCall=b,void(joms.tooltips.currentTimeout=setTimeout("joms.tooltips.showDialog('"+c+"')",500)))},reset:function(){joms.tooltips.currentJaxCall="",joms.tooltips.currentTimeout=""}},friends:{saveTag:function(){var a=jax.getFormValues("tagsForm");return jax.call("community","friends,ajaxFriendTagSave",a),!1},saveGroup:function(a){""==document.getElementById("newtag").value?window.alert("TPL_DB_INVALIDTAG"):jax.call("community","friends,ajaxAddGroup",a,joms.jQuery("#newtag").val())},cancelRequest:function(a){var b='jax.call("community" , "friends,ajaxCancelRequest" , "'+a+'");';cWindowShow(b,"",450,100)},connect:function(a){var b='jax.call("community", "friends,ajaxConnect", '+a+")";cWindowShow(b,"",450,140)},addNow:function(){var a=jax.getFormValues("addfriend");return jax.call("community","friends,ajaxSaveFriend",a),!1},confirmFriendRemoval:function(a){var b=function(){jax.call("community","friends,ajaxConfirmFriendRemoval",a)};cWindowShow(b,"",450,80,"warning")},remove:function(a){var b,c=joms.jQuery("#cWindow input[name=block]").attr("checked");b=c?function(){jax.call("community","friends,ajaxBlockFriend",a)}:function(){jax.call("community","friends,ajaxRemoveFriend",a)},cWindowShow(b,"",450,80,"warning")},updateFriendList:function(a,b){currentFriends="",noFriend="",joms.jQuery("#community-invitation-list").hasClass("load-more")?currentFriends=joms.jQuery("#community-invitation-list").html():""==joms.jQuery.trim(a)&&(noFriend=b),newFriends=currentFriends+a+noFriend,joms.jQuery("#community-invitation-list").html(newFriends),joms.invitation.filterMember(),joms.jQuery(".cTabNav #ctab-result").click()},loadFriend:function(a,b,c,d,e){joms.jQuery("#community-invitation-list").hasClass("load-more")&&joms.jQuery("#community-invitation-list").removeClass("load-more"),jax.call("community","system,ajaxLoadFriendsList",a,b,c,d,e)},loadMoreFriend:function(a,b,c,d){name=joms.jQuery("#friend-search-filter").val(),joms.jQuery("#community-invitation-list").addClass("load-more"),jax.call("community","system,ajaxLoadFriendsList",name,a,b,c,d)},showForm:function(a,b,c,d,e){var f='jax.call("community", "system,ajaxShowFriendsForm","'+a+'","'+b+'","'+c+'","'+d+'","'+e+'")',g=520;g="0"!=d?g:g-108,g-=108,cWindowShow(f,"",550,g)},selectRecipients:function(){joms.jQuery("#community-invited-list li").each(function(){var a=joms.jQuery(this).attr("id");if(joms.jQuery("#inbox-selected-to #"+a).length>0);else{var b=joms.jQuery(this).clone();b.appendTo("#inbox-selected-to")}}),joms.jQuery(".invitation-check label").empty(),cWindowHide()}},messaging:{loadComposeWindow:function(a){var b='jax.call("community", "inbox,ajaxCompose", '+a+")";cWindowShow(b,"",450,295)},sendCompleted:function(){joms_message_sending=!1},send:function(){if(joms_message_sending)return!1;joms_message_sending=!0;var a=jax.getFormValues("writeMessageForm");return jax.call("community","inbox,ajaxSend",a),!1},confirmDeleteMarked:function(a){var b=new Array;if(joms.jQuery("#inbox-listing INPUT[type='checkbox']").each(function(){joms.jQuery(this).attr("checked")&&b.push(joms.jQuery(this).attr("value"))}),""!=b.toString())var c='jax.call("community", "inbox,ajaxDeleteMessages", "'+a+'")';else var c='jax.call("community", "inbox,ajaxDeleteMessages", "'+a+'","empty")';cWindowShow(c,"",450,100)},deleteMarked:function(a){var b=new Array;return joms.jQuery("#inbox-listing INPUT[type='checkbox']").each(function(){joms.jQuery(this).attr("checked")&&b.push(joms.jQuery(this).attr("value"))}),"inbox"==a?jax.call("community","inbox,ajaxRemoveFullMessages",b.toString()):jax.call("community","inbox,ajaxRemoveSentMessages",b.toString()),!1}},walls:{insertOrder:"prepend",add:function(a,b){jax.loadingFunction=function(){joms.jQuery("#wall-message,#wall-submit").attr("disabled",!0)},jax.doneLoadingFunction=function(){joms.jQuery("#wall-message,#wall-submit").attr("disabled",!1)},cache_id="function"==typeof getCacheId?getCacheId():"",jax.call("community",b,joms.jQuery("#wall-message").val(),a,cache_id)},insert:function(a){joms.jQuery("#wall-message").val(""),"prepend"==joms.walls.insertOrder?joms.jQuery("#wall-containter").prepend(a):joms.jQuery("#wall-containter .cComment:last").length>0?joms.jQuery("#wall-containter .cComment:last").after(a):joms.jQuery("#wall-containter").prepend(a)},remove:function(a,b,c){confirm("Are you sure you want to delete this wall?")&&(jax.call("community",a+",ajaxRemoveWall",b,c),joms.jQuery("#wall_"+b).fadeOut("normal",function(){joms.jQuery(this).remove()}))},update:function(a,b){cWindowHide(),joms.jQuery("#wall_"+a).replaceWith(b)},save:function(a,b){jax.call("community","system,ajaxUpdateWall",a,joms.jQuery("#wall-edit-"+a).val(),b)},edit:function(a,b){null!=joms.jQuery("#wall-edit-"+a).val()?(joms.jQuery("#wall-message-"+a).show(),joms.jQuery("#wall-edit-container-"+a).children().remove()):(joms.jQuery("#wall-message-"+a).hide(),joms.jQuery("#wall_"+a+" div.content").prepend('<span id="wall-edit-container-'+a+'"></span>').prepend('<div class="loading" style="display:block;float: left;"></div>'),jax.call("community","system,ajaxEditWall",a,b),joms.utils.textAreaWidth("#wall-edit-"+a),joms.utils.autogrow("#wall-edit-"+a))},more:function(){var a=joms.jQuery("#wall-groupId").val(),b=joms.jQuery("#wall-discussionId").val(),c=joms.jQuery("#wall-limitStart").val();joms.jQuery("#wall-more .more-wall-text").hide(),joms.jQuery("#wall-more .loading").show(),jax.call("community","system,ajaxGetOlderWalls",a,b,c)},append:function(a){joms.jQuery("#wall-more,#wall-groupId,#wall-discussionId,#wall-limitStart").remove(),joms.jQuery("#wall-containter").append(a)},prepend:function(a){joms.jQuery("#wall-more").remove(),joms.jQuery("#wall-groupId").remove(),joms.jQuery("#wall-discussionId").remove(),joms.jQuery("#wall-limitStart").remove(),joms.jQuery("#wall-containter").prepend(a)},showVideoWindow:function(a){var b='jax.call("community" , "videos,ajaxShowVideoWindow", "'+a+'");';cWindowShow(b,"",640,360)}},toolbar:{timeout:500,closetimer:0,ddmenuitem:0,open:function(a){joms.jQuery("#"+a).length>0&&(joms.toolbar.cancelclosetime(),joms.toolbar.ddmenuitem&&(joms.toolbar.ddmenuitem.style.visibility="hidden"),joms.toolbar.ddmenuitem=document.getElementById(a),joms.toolbar.ddmenuitem.style.visibility="visible")},close:function(){joms.toolbar.ddmenuitem&&(joms.toolbar.ddmenuitem.style.visibility="hidden")},closetime:function(){joms.toolbar.closetimer=window.setTimeout(joms.toolbar.close,joms.toolbar.timeout)},cancelclosetime:function(){joms.toolbar.closetimer&&(window.clearTimeout(joms.toolbar.closetimer),joms.toolbar.closetimer=null)}},registrations:{showTermsWindow:function(a){var b='jax.call("community", "register,ajaxShowTnc", "'+a+'")';cWindowShow(b,this.windowTitle,600,350)},authenticate:function(){jax.call("community","register,ajaxGenerateAuthKey")},authenticateAssign:function(){jax.call("community","register,ajaxAssignAuthKey")},assignAuthKey:function(fname,lblname,authkey){eval("document.forms['"+fname+"'].elements['"+lblname+"'].value = '"+authkey+"';")},showWarning:function(a,b){cWindowShow("joms.jQuery('#cWindowContent').html('"+a+"')",b,450,200,"warning")}},miniwall:{initialize:function(){var a=joms.jQuery("#activity-stream-container");joms.jQuery('a[href="#removeComment"]').on("click",function(){var a=joms.jQuery(this).parents("[data-commentid]").data("commentid");joms.miniwall.remove(a)}),a.on("click",'a[href="#showallcomments"]',function(a){a.preventDefault();var b=joms.jQuery(this);if(!b.data("loading")){b.data("loading",1);var c=b.closest("li").data("streamid");jax.call("community","system,ajaxStreamShowComments",c)}}),joms.jQuery(".cStream-Form textarea").width(joms.jQuery(".cStream-Form").width()-12)},add:function(a,b){if("undefined"!=typeof b){var c=null;c="cModule-ActivityStream"==joms.miniwall.type(b)?joms.jQuery("#cModule-ActivityStream").find("#wall-cmt-"+a):joms.jQuery(".cMain").find("#wall-cmt-"+a);var d=c.find("textarea");return d.data("inittextntags")?void d.textntags("val",function(b){joms.miniwall._add(a,c,b)}):void joms.miniwall._add(a,c,d.val())}},_add:function(a,b,c){c=joms.jQuery.trim(c),c.length>0&&(b.find(".wall-coc-form-action.add").attr("disabled",!0),b.find(".wall-coc-errors").hide(),jax.loadingFunction=function(){b.find("textarea").attr("disabled",!0),b.find(".wall-coc-form-actions").append('<em class="wall-cmt-loading">Posting...</em>'),jax.loadingFunction=function(){}},jax.doneLoadingFunction=function(){b.find(".wall-coc-form-actions").find("em").remove(),b.find("textarea").attr("disabled",!1).val(""),b.find(".wall-coc-form-action.add").attr("disabled",!1),cmtCountObj=b.parent().parent().find(".wall-cmt-count"),curCmtCount=parseInt(cmtCountObj.html()),cmtCountObj.parent().fadeOut("fast",function(){cmtCountObj.html(curCmtCount+1),cmtCountObj.parent().fadeIn("fast")}),jax.doneLoadingFunction=function(){}},jax.call("community","system,ajaxStreamAddComment",a,c))},insert:function(a,b){joms.jQuery("#wall-cmt-"+a+" .wallform").before(b),joms.jQuery("#wall-cmt-"+a+" .wallnone").removeClass("wallnone"),joms.miniwall.cancel(a)},loadall:function(a,b){joms.jQuery("li[data-streamid="+a+"] div[data-commentid]").remove(),joms.jQuery("li[data-streamid="+a+"] div[data-commentmore]").replaceWith(b)},cancel:function(a){joms.jQuery("#wall-cmt-"+a+" .wall-coc-errors").hide(),joms.jQuery("#wall-cmt-"+a+" .wall-coc-form-action.add").removeAttr("disabled"),joms.jQuery("#wall-cmt-"+a+" [data-formblock]").hide(),joms.jQuery("li[data-streamid="+a+"] [data-commentid]").length>0&&joms.jQuery("li[data-streamid="+a+"] [data-replyblock]").show()},remove:function(a){var b=joms.jQuery("#wall-"+a).parent().parent().parent().find(".wall-cmt-count");jax.loadingFunction=function(){joms.jQuery("#wall-"+a).css({backgroundColor:"#ffdddd"}).find(".wall-coc-remove-link").show().html('<em class="wall-cmt-loading wall-cmt-loading-inline">Removing...</em>'),jax.loadingFunction=function(){}},jax.doneLoadingFunction=function(){var c=parseInt(b.html());c>0&&(1==c&&joms.jQuery("#wall-"+a).parent().parent().find(".cComment:last").addClass("wallnone"),b.parent().fadeOut("fast",function(){b.html(c-1),b.parent().fadeIn("fast")})),joms.jQuery("[data-commentid="+a+"]").fadeOut("fast",function(){joms.jQuery(this).remove()}).find(".wall-coc-remove-link").hide(),jax.doneLoadingFunction=function(){}},jax.call("community","system,ajaxStreamRemoveComment",a)},show:function(a,b){if("undefined"!=typeof b){var c=null,d=null;"cModule-ActivityStream"==joms.miniwall.type(b)?(c=joms.jQuery("#cModule-ActivityStream").find("li[data-streamid="+a+"] [data-formblock]"),d=joms.jQuery("#cModule-ActivityStream").find("li[data-streamid="+a+"] [data-replyblock]")):(c=joms.jQuery(".cMain").find("li[data-streamid="+a+"] [data-formblock]"),d=joms.jQuery(".cMain").find("li[data-streamid="+a+"] [data-replyblock]")),c.show(),c.find("button").attr("onclick","joms.miniwall.add('"+a+"', this);return false;"),d.hide();var e=c.find("textarea");e.data("autogrow")||(joms.utils.textAreaWidth(e),joms.utils.autogrow(e),e.focus(),e.blur(function(){""==joms.jQuery(this).val()&&joms.miniwall.cancel(a)}).data("autogrow",!0))}},type:function(a){for(var b=joms.jQuery(a),c=50,d="";void 0!=b.prop("tagName")&&b.prop("tagName")!=joms.jQuery("body").prop("tagName")&&c>0;)""!=d||"cModule-ActivityStream"!=b.attr("id")&&"cMain"!=b.attr("class")||(d=b.attr(void 0!=b.attr("id")?"id":"class")),b=b.parent(),c--;return d}},comments:{add:function(a){var b=joms.jQuery("#"+a+" textarea").val();""!=b&&(joms.jQuery("#"+a+" .wall-coc-form-action.add").attr("disabled",!0),cache_id="function"==typeof getCacheId?getCacheId():"",jax.call("community","plugins,walls,ajaxAddComment",a,b,cache_id))},insert:function(a,b){joms.jQuery("#"+a+" form").before(b),joms.comments.cancel(a)},remove:function(a){var b=joms.jQuery(a).parents(".cComment"),c=joms.jQuery(b).index(),d=joms.jQuery(a).parents(".cComment").parent().attr("id");jax.call("community","plugins,walls,ajaxRemoveComment",d,c)},cancel:function(a){joms.jQuery("#"+a+" textarea").val(""),joms.jQuery("#"+a+" textarea").height("auto"),joms.jQuery("#"+a+" form").hide(),joms.jQuery("#"+a+" .show-cmt").show(),joms.jQuery("#"+a+" .wall-coc-errors").hide(),joms.jQuery("#"+a+" .wall-coc-form-action.add").removeAttr("disabled")},show:function(a){var b=joms.jQuery("#"+a+" form").parent().width();joms.jQuery("#"+a+" .wall-coc-form-action.add").removeAttr("disabled"),joms.jQuery("#"+a+" form").width(b).show(),joms.jQuery("#"+a+" .show-cmt").hide();var c=joms.jQuery("#"+a+" textarea");c.data("autogrow")||(joms.utils.textAreaWidth(c),joms.utils.autogrow(c),c.blur(function(){""==joms.jQuery(this).val()&&joms.comments.cancel(a)}).data("autogrow",!0))},edit:function(a,b,c){if("undefined"!=typeof c){var d=null;d=joms.jQuery("cModule-ActivityStream"==joms.miniwall.type(c)?"#cModule-ActivityStream":".cMain"),d.find("div[data-commentid="+a+"]").hide();var e=document.createElement("div"),f=d.find("div[data-commentid="+a+"] .cStream-Content span.comment").html();d.find("li[data-streamid="+b+"] [data-formblock]").show(),d.find("li[data-streamid="+b+"] [data-replyblock]").hide();var g=d.find("li[data-streamid="+b+"] .cStream-Form").find("textarea");e.innerHTML=f;var h=e.textContent||e.innerText;g.val(h),d.find("li[data-streamid="+b+"] button").attr("onClick","joms.comments.saveEdit("+a+","+b+", this);return false;"),d.find("li[data-streamid="+b+"] .cStream-FormCancel").attr("onClick","joms.comments.cancelEdit("+a+","+b+", this);return false;"),g.data("autogrow")||(joms.utils.textAreaWidth(g),joms.utils.autogrow(g),g.focus())}},cancelEdit:function(a,b){joms.jQuery("div[data-commentid="+a+"]").show(),joms.jQuery("li[data-streamid="+b+"] .cStream-FormCancel").attr("onClick","joms.miniwall.cancel("+b+");return false;"),joms.jQuery("li[data-streamid="+b+"] button").attr("onClick","joms.miniwall.add("+b+");return false;"),joms.miniwall.cancel(b)},saveEdit:function(a,b,c){var d=null;d=joms.jQuery("cModule-ActivityStream"==joms.miniwall.type(c)?"#cModule-ActivityStream":".cMain");var e=d.find("li[data-streamid="+b+"] .cStream-Form").find("textarea");return e.data("inittextntags")?void e.textntags("val",function(c){jax.call("community","system,ajaxeditComment",a,c,b)}):void jax.call("community","system,ajaxeditComment",a,e.val(),b)}},utils:{textAreaWidth:function(target){with(joms.jQuery(target))css("width","100%"),css("width",parseInt(parent().width())-parseInt(css("borderLeftWidth"))-parseInt(css("borderRightWidth"))-parseInt(css("padding-left"))-parseInt(css("padding-right"))+11)},autogrow:function(a,b){void 0==b&&(b={}),b.maxHeight=b.maxHeight||300,joms.jQuery(a).autogrow(b)}},map:{queue:[],execute:function(a){return window.google&&window.google.maps&&window.google.maps.places?void a():joms.map.loading?void joms.map.queue.push(a):(joms.map.loading=!0,joms.map.queue.push(a),void joms.map.loadScript())},loadScript:function(){var a=document.createElement("script");a.type="text/javascript",a.src="//maps.googleapis.com/maps/api/js?libraries=places&sensor=false&callback=joms.map.loadScriptCallback",document.body.appendChild(a)},loadScriptCallback:function(){if(joms.map.queue&&joms.map.queue.length)for(;joms.map.queue.length;)joms.map.queue.shift()();joms.map.loading=!1}},maps:{mapsObj:null,geocoder:null,init:function(){(null!=joms.jQuery(".cMapFade")||null!=joms.jQuery(".cMapHeatzone"))&&(joms.jQuery(".cMapFade").live("mouseover",function(){joms.jQuery(this).find("img:eq(2)").fadeOut(0)}),joms.jQuery(".cMapFade").live("mouseout",function(){joms.jQuery(this).find("img:eq(2)").fadeIn(0)}),joms.jQuery(".cMapHeatzone").live("mouseover",function(){joms.jQuery(this).parent().find("img:eq(1)").fadeOut(0)}),joms.jQuery(".cMapHeatzone").live("mouseout",function(){joms.jQuery(this).parent().find("img:eq(1)").fadeIn(0)}))},initialize:function(a,b,c,d){joms.map.execute(function(){"undefined"==typeof google.maps?setTimeout("joms.maps.initialize('"+a+"', '"+b+"')",1e3):(joms.maps.geocoder=new google.maps.Geocoder,joms.maps.geocoder.geocode({address:b},function(b,e){if(e==google.maps.GeocoderStatus.OK){null==joms.maps.mapsObj&&(joms.maps.mapsObj=new Array);var f=new google.maps.LatLng(-34.397,150.644),g={zoom:14,center:f,mapTypeId:google.maps.MapTypeId.ROADMAP},h=joms.maps.mapsObj.length;
joms.maps.mapsObj[h]=new google.maps.Map(document.getElementById(a),g),joms.maps.mapsObj[h].setCenter(b[0].geometry.location);var i=new google.maps.Marker({map:joms.maps.mapsObj[h],position:b[0].geometry.location,title:c});if(d.length>0){var j=new google.maps.InfoWindow({content:d});google.maps.event.addListener(i,"click",function(){var b=joms.jQuery("div#"+a).data("maps");j.open(joms.maps.mapsObj[b],i)})}joms.jQuery("div#"+a).data("maps",h)}else alert("Geocode was not successful for the following reason: "+e)}))})},addMarker:function(a,b,c,d,e){joms.map.execute(function(){if(null==joms.maps.mapsObj)setTimeout("joms.maps.addMarker('"+a+"', "+b+", "+c+", '"+d+"', '"+e+"')",1e3);else{var f=joms.jQuery("div#"+a).data("maps"),g=new google.maps.LatLng(b,c),h=new google.maps.Marker({position:g,map:joms.maps.mapsObj[f],title:d});if(e.length>0){var i=new google.maps.InfoWindow({content:e});google.maps.event.addListener(h,"click",function(){var b=joms.jQuery("div#"+a).data("maps");i.open(joms.maps.mapsObj[b],h)})}}})}},connect:{checkRealname:function(a){var b=jax.loadingFunction;jax.loadingFunction=function(){},jax.doneLoadingFunction=function(){jax.loadingFunction=b},jax.call("community","connect,ajaxCheckName",a)},checkEmail:function(a){var b=jax.loadingFunction;jax.loadingFunction=function(){},jax.doneLoadingFunction=function(){jax.loadingFunction=b},jax.call("community","connect,ajaxCheckEmail",a)},checkUsername:function(a){var b=jax.loadingFunction;jax.loadingFunction=function(){},jax.doneLoadingFunction=function(){jax.loadingFunction=b},jax.call("community","connect,ajaxCheckUsername",a)},update:function(){var a="jax.call('community', 'connect,ajaxUpdate' );";cWindowShow(a,"",450,200)},updateEmail:function(){joms.jQuery("#facebook-email-update").submit()},importData:function(){var a=joms.jQuery("#importstatus").is(":checked")?1:0,b=joms.jQuery("#importavatar").is(":checked")?1:0;jax.call("community","connect,ajaxImportData",a,b)},mergeNotice:function(){var a="jax.call('community','connect,ajaxMergeNotice');";cWindowShow(a,"",450,200)},merge:function(){var a="jax.call('community','connect,ajaxMerge');";cWindowShow(a,"",450,200)},validateUser:function(){var a="jax.call('community','connect,ajaxValidateLogin','"+joms.jQuery("#existingusername").val()+"','"+joms.jQuery("#existingpassword").val()+"');";cWindowShow(a,"",450,200)},newUser:function(){var a="jax.call('community','connect,ajaxShowNewUserForm');";cWindowShow(a,"",450,200)},existingUser:function(){var a="jax.call('community','connect,ajaxShowExistingUserForm');";cWindowShow(a,"",450,200)},selectType:function(){if("1"==joms.jQuery("[name=membertype]:checked").val()){{joms.jQuery("#tnc:checked").val()}if(0==joms.jQuery("#tnc:checked").length&&1==joms.jQuery("#tnc").length)return joms.jQuery("span#err_msg").css("display","block"),!1;joms.connect.newUser()}else joms.connect.existingUser()},validateNewAccount:function(){jax.call("community","connect,ajaxCheckEmail",joms.jQuery("#newemail").val()),jax.call("community","connect,ajaxCheckUsername",joms.jQuery("#newusername").val()),jax.call("community","connect,ajaxCheckName",joms.jQuery("#newname").val());var a=!0;if((""==joms.jQuery("#newname").val()||"none"!=joms.jQuery("#error-newname").css("display"))&&(a=!1),(""==joms.jQuery("#newusername").val()||"none"!=joms.jQuery("#error-newusername").css("display"))&&(a=!1),(""==joms.jQuery("#newemail").val()||"none"!=joms.jQuery("#error-newemail").css("display"))&&(a=!1),a){var b="";joms.jQuery(".jsProfileType").length>0&&joms.jQuery(".jsProfileType input").length>0&&(b=joms.jQuery(".jsProfileType input:checked").length>0?joms.jQuery(".jsProfileType input:checked").val():b);var c="jax.call('community', 'connect,ajaxCreateNewAccount' , '"+joms.jQuery("#newname").val()+"', '"+joms.jQuery("#newusername").val()+"','"+joms.jQuery("#newemail").val()+"','"+b+"');";cWindowShow(c,"",450,200)}}},videos:{playProfileVideo:function(a,b){var c="jax.call('community', 'profile,ajaxPlayProfileVideo', "+a+", "+b+")";cWindowShow(c,"",640,360)},linkConfirmProfileVideo:function(a){var b="jax.call('community', 'profile,ajaxConfirmLinkProfileVideo', '"+a+"');";cWindowShow(b,"",450,100)},linkProfileVideo:function(a){var b="jax.call('community', 'profile,ajaxLinkProfileVideo', '"+a+"');";cWindowShow(b,"",450,100)},removeConfirmProfileVideo:function(a,b){var c="jax.call('community', 'profile,ajaxRemoveConfirmLinkProfileVideo', '"+a+"', '"+b+"');";cWindowShow(c,"",450,100)},removeLinkProfileVideo:function(a,b){var c="jax.call('community', 'profile,ajaxRemoveLinkProfileVideo', '"+a+"', '"+b+"');";cWindowShow(c,"",450,100)},showEditWindow:function(a,b){"undefined"==typeof b&&(b="");var c="jax.call('community', 'videos,ajaxEditVideo', '"+a+"' , '"+b+"');";cWindowShow(c,"",450,400)},deleteVideo:function(a,b,c){var d="jax.call('community' , 'videos,ajaxRemoveVideo', '"+a+"','"+b+"','"+c+"');";cWindowShow(d,"",450,150)},playerConf:{},addVideo:function(a,b){if("undefined"==typeof a||""==a)var a="",b="";var c="jax.call('community', 'videos,ajaxAddVideo', '"+a+"', '"+b+"');";cWindowShow(c,"",600,500)},linkVideo:function(a,b){var c="jax.call('community', 'videos,ajaxLinkVideo', '"+a+"', '"+b+"');";cWindowShow(c,"",450,100)},uploadVideo:function(a,b){var c="jax.call('community', 'videos,ajaxUploadVideo', '"+a+"', '"+b+"');";cWindowShow(c,"",450,100)},submitLinkVideo:function(){var a=!0;joms.jQuery("form#linkVideo li button").prop("disabled",!0),videoLinkUrl="#linkVideo input[name='videoLinkUrl']",""==joms.jQuery.trim(joms.jQuery(videoLinkUrl).val())?(joms.jQuery(videoLinkUrl).addClass("invalid"),a=!1):joms.jQuery(videoLinkUrl).removeClass("invalid"),a&&(joms.jQuery("#cwin-wait").css("margin-left","20px"),joms.jQuery("#cwin-wait").show(),document.linkVideo.submit())},submitUploadVideo:function(){var a=!0;videoFile="#uploadVideo input[name='videoFile']",""==joms.jQuery.trim(joms.jQuery(videoFile).val())?(joms.jQuery(videoFile).addClass("invalid"),a=!1):joms.jQuery(videoFile).removeClass("invalid"),videoTitle="#uploadVideo input[name='title']",""==joms.jQuery.trim(joms.jQuery(videoTitle).val())?(joms.jQuery(videoTitle).addClass("invalid"),a=!1):joms.jQuery(videoTitle).removeClass("invalid"),a&&(joms.jQuery("#cwin-wait").css("margin-left","20px"),joms.jQuery("#cwin-wait").show(),document.uploadVideo.submit())},fetchThumbnail:function(a){var b="jax.call('community' , 'videos,ajaxFetchThumbnail', '"+a+"','myvideos');";cWindowShow(b,"",450,150)},toggleSearchSubmenu:function(a){joms.jQuery(a).next("ul").toggle().find("input[type=text]").focus()},selectVideoTagFriends:function(a){joms.jQuery("#community-invited-list li").each(function(){var b=joms.jQuery(this).attr("id");b=b.substr("invitation-friend-".length),jax.call("community","videos,ajaxAddVideoTag",a,b)}),joms.jQuery(".invitation-check label").empty(),cWindowHide()},addVideoTextTag:function(tags,textRemove){var videoTextTags=joms.jQuery(".videoTextTags");"string"==typeof tags&&(tags=eval("("+tags+")"));var singleTag=!1;joms.jQuery.isArray(tags)||(tags=[tags],singleTag=!0),joms.jQuery.each(tags,function(a,b){if(void 0!=b.id){var c=joms.jQuery('<span class="videoTextTag"></span>');c.data("tag",b).attr("id","videoTextTag-"+b.id).appendTo(videoTextTags);var d=joms.jQuery("<a>");if(d.attr("href",b.profileUrl).html(b.displayName).prependTo(c),b.canRemove){var e=joms.jQuery('<span class="videoTextTagActions"></span>');e.appendTo(c);var f=joms.jQuery('<a class="videoTextTagAction" href="javascript: void(0);"></a>');f.addClass("_remove").html(textRemove).click(function(){joms.videos.removeVideoTag(b)}).appendTo(e),e.before(" ").prepend("(").append(")")}}}),joms.videos.commifyTextTags()},removeVideoTag:function(a){jax.call("community","videos,ajaxRemoveVideoTag",a.videoId,a.userId),void 0==a?joms.jQuery(".videoTextTags").remove():joms.jQuery("#videoTextTag-"+a.id).remove(),joms.videos.commifyTextTags()},commifyTextTags:function(){joms.jQuery(".videoTextTags .comma").remove(),videoTextTag=joms.jQuery(".videoTextTag"),videoTextTag.each(function(a){if(0!=a){var b=joms.jQuery('<span class="comma"></span>');b.html(", ").prependTo(this)}})},checkSize:function(a){return joms.jQuery("form#uploadVideo button").prop("disabled",!0),joms.jQuery.browser.msie?(joms.jQuery("form#uploadVideo button").prop("disabled",!1),!1):(Size=a.files[0].size,void jax.call("community","videos,ajaxCheckFileSize",Size))}},users:{banUser:function(a,b){var c="jax.call('community', 'profile,ajaxBanUser', '"+a+"' , '"+b+"');";cWindowShow(c,"",450,100)},removePicture:function(a){var b="jax.call('community', 'profile,ajaxRemovePicture', '"+a+"');";cWindowShow(b,"",450,100)},updateURL:function(a){var b="jax.call('community', 'profile,ajaxUpdateURL', '"+a+"');";cWindowShow(b,"",450,100)},uploadNewPicture:function(a){var b="jax.call('community', 'profile,ajaxUploadNewPicture', '"+a+"');";cWindowShow(b,"",450,100)},confirmBlockUser:function(a){var b='jax.call("community", "profile,ajaxConfirmBlockUser", "'+a+'");';cWindowShow(b,"",450,100)},blockUser:function(a){var b='jax.call("community", "profile,ajaxBlockUser", "'+a+'");';cWindowShow(b,"",450,100)},confirmUnBlockUser:function(a){var b='jax.call("community", "profile,ajaxConfirmUnBlockUser", "'+a+'");';cWindowShow(b,"",450,100)},unBlockUser:function(a,b){b=b||null;var c='jax.call("community", "profile,ajaxUnblockUser", "'+a+'", "'+b+'");';cWindowShow(c,"",450,100)},confirmIgnoreUser:function(a){var b='jax.call("community", "profile,ajaxConfirmIgnoreUser", "'+a+'");';cWindowShow(b,"",450,100)},ignoreUser:function(a){var b='jax.call("community", "profile,ajaxIgnoreUser", "'+a+'");';cWindowShow(b,"",450,100)},confirmUnIgnoreUser:function(a){var b='jax.call("community", "profile,ajaxConfirmUnIgnoreUser", "'+a+'");';cWindowShow(b,"",450,100)},unIgnoreUser:function(a){var b='jax.call("community", "profile,ajaxUnIgnoreUser", "'+a+'");';cWindowShow(b,"",450,100)},removeCover:function(a){var b="jax.call('community', 'profile,ajaxRemoveCover', '"+a+"');";cWindowShow(b,"",450,100)}},user:{getActive:function(){return js_profileId}},events:{deleteEvent:function(a){var b="jax.call('community', 'events,ajaxWarnEventDeletion', '"+a+"');";cWindowShow(b,"",450,100,"warning")},join:function(a){var b='jax.call("community", "events,ajaxRequestInvite", "'+a+'", location.href );';cWindowShow(b,"",450,100)},leave:function(a){var b='jax.call("community", "events,ajaxIgnoreEvent", "'+a+'");';cWindowShow(b,"",450,100)},sendmail:function(a){var b='jax.call("community", "events,ajaxSendEmail", "'+a+'");';cWindowShow(b,"",450,300)},confirmBlockGuest:function(a,b){var c='jax.call("community", "events,ajaxConfirmBlockGuest", "'+a+'", "'+b+'");';cWindowShow(c,"",450,100)},blockGuest:function(a,b){var c='jax.call("community", "events,ajaxBlockGuest", "'+a+'", "'+b+'");';cWindowShow(c,"",450,100)},confirmUnblockGuest:function(a,b){var c='jax.call("community", "events,ajaxConfirmUnblockGuest", "'+a+'", "'+b+'");';cWindowShow(c,"",450,100)},unblockGuest:function(a,b){var c='jax.call("community", "events,ajaxUnblockGuest", "'+a+'", "'+b+'");';cWindowShow(c,"",450,100)},confirmRemoveGuest:function(a,b){var c='jax.call("community", "events,ajaxConfirmRemoveGuest", "'+a+'", "'+b+'");';cWindowShow(c,"",450,80,"warning")},removeGuest:function(a,b){var c=joms.jQuery("#cWindow input[name=block]").attr("checked"),d="";d=c?'jax.call("community", "events,ajaxBlockGuest", "'+a+'", "'+b+'");':'jax.call("community", "events,ajaxRemoveGuest", "'+a+'", "'+b+'");',cWindowShow(d,"",450,100,"warning")},joinNow:function(a){jax.call("community","events,ajaxJoinInvitation",a)},rejectNow:function(a){jax.call("community","events,ajaxRejectInvitation",a)},toggleSearchSubmenu:function(a){joms.jQuery(a).next("ul").toggle().find("input[type=text]").focus()},displayNearbyEvents:function(a){joms.ajax.call("events,ajaxDisplayNearbyEvents",[a],{success:function(a){joms.jQuery("#community-event-nearby-listing").html(a)}})},getDayEvent:function(a,b,c,d){jax.loadingFunction=function(){joms.jQuery(".loading-icon").show()},jax.doneLoadingFunction=function(){joms.jQuery(".loading-icon").hide()},jax.cacheCall("community","events,ajaxGetEvents",a,b,c,d)},displayDayEvent:function(response){joms.jQuery(".events-list").html("");var day_event=eval("("+response+")");day_event.length>0?joms.jQuery("strong.happening_title").show():joms.jQuery("strong.happening_title").hide();for(var i=0;i<day_event.length;i++){var start_day=day_event[i].start,end_day=day_event[i].end;joms.jQuery(".events-list").html(joms.jQuery(".events-list").html()+'<li><a class="date_day_'+start_day+"_"+end_day+'" href="'+day_event[i].link+'"> '+day_event[i].title+"</a></li>"),joms.jQuery('a[class^="date_day_"]').mouseenter(function(){for(var a=joms.jQuery(this).attr("class").split("_"),b=a[2],c=parseInt(a[3])+1,d=b;c>d;d++)joms.jQuery(".event_date_"+d).addClass("highlightrunning")}),joms.jQuery('a[class^="date_day_"]').mouseleave(function(){joms.jQuery(".highlightrunning").removeClass("highlightrunning")}),i+1!=day_event.length&&joms.jQuery(".events-list").html(joms.jQuery(".events-list").html())}},getCalendar:function(a,b){jax.cacheCall("community","events,ajaxGetCalendar",a,b)},displayCalendar:function(a){joms.jQuery("div#event").html(a),init_calendar()},switchImport:function(a){"file"==a&&(joms.jQuery("#event-import-url").css("display","none"),joms.jQuery("#event-import-file").css("display","block"),joms.jQuery("#import-type").val("file")),"url"==a&&(joms.jQuery("#event-import-file").css("display","none"),joms.jQuery("#event-import-url").css("display","block"),joms.jQuery("#import-type").val("url"))},showMapWindow:function(){var a='jax.call("community", "events,ajaxShowMap");';cWindowShow(a,"",450,100)},showDesc:function(){joms.jQuery("#event-discription").show(),joms.jQuery("#event-description-link").hide()},submitRSVP:function(a,b){var c=joms.jQuery(b),d=c.parent(),e=c.prev("span"),f=(c.val(),c.attr("class"),c.find("option:selected").text());return joms.events.submitRSVP.processing?!1:(d.append('<div class="noclick" style="position:absolute;top:0;right:0;left:0;bottom:0" />'),void setTimeout(function(){e.html("Processing..."),e.removeAttr("class"),joms.events.submitRSVP.processing=!0,joms.ajax.call("events,ajaxUpdateStatus",[a,c.val()],{success:function(a){joms.events.submitRSVP.processing=!1,joms.jQuery("#community-event-members").replaceWith(a),e.attr("class",c.find("option:selected").attr("class")),e.html(f),d.children(".noclick").remove()}})},100))},save:function(){var a="jax.call('community', 'events,ajaxShowRepeatOption');";cWindowShow(a,"",450,100)},uploadAvatar:function(a,b,c){var d=null;c&&(d='{"call":["CEvents","getEventRepeatSaveHTML"], "library":"events", "arg":{"radio":"repeattype"}}');var e=jax.call("community","photos,ajaxUploadAvatar",a,b,d);cWindowShow(e,"",450,100)}},profile:{confirmRemoveAvatar:function(){var a='jax.call("community", "profile,ajaxConfirmRemoveAvatar");';cWindowShow(a,"",450,100)},setStatusLimit:function(a){joms.jQuery(a).keyup(function(){var a=parseInt(joms.jQuery(this).attr("maxlength"));joms.jQuery(this).val().length>a&&joms.jQuery(this).val(joms.jQuery(this).val().substr(0,joms.jQuery(this).attr("maxlength"))),joms.jQuery("#profile-status-notice span").html(a-joms.jQuery(this).val().length)})}},privacy:{init:function(){joms.jQuery("select.js_PrivacySelect").each(function(){var a,b="";joms.jQuery(this).find("option").each(function(){joms.jQuery(this).attr("selected")&&(a=joms.jQuery(this).val())}),b+="<dl class='js_dropDownMaster'>\n",b+="<dt name="+a+" class='js_dropDown js_dropSelect-"+a+"'><strong>"+joms.jQuery(this).find('option[selected="selected"]').text()+"</strong><span></span></dt>\n",b+="<dd>\n<ul class='js_dropDownParent'>\n",joms.jQuery(this).find("option").each(function(){var c=joms.jQuery(this).val();b+=c==a?"<li class='js_dropDownCurrent'>":"<li>",b+="<a href='javascript:void()' name='"+c+"' class='js_dropDownChild js_dropDown-"+c+"'>"+joms.jQuery(this).text()+"</a></li>\n"}),b+="</ul>\n</dd>\n</dl>",joms.jQuery(this).parent().prepend(b),joms.jQuery(this).hide()}),joms.jQuery(".js_dropDownChild").die("click touchstart"),joms.jQuery(".js_dropDownChild").live("click touchstart",function(a){a.preventDefault();var b=joms.jQuery(this).attr("name"),c="";joms.jQuery(this).closest(".js_PriContainer").find("option").each(function(){joms.jQuery(this).val()==b?(joms.jQuery(this).attr("selected","selected"),c=joms.jQuery(this).text()):joms.jQuery(this).attr("selected",!1)});var d=joms.jQuery(this).parent().parent().parent().parent().find("dt"),e=d.attr("name");d.removeClass("js_dropSelect-"+e).addClass("js_dropSelect-"+b).attr("name",b).html("<strong>"+c+"</strong><span></span>"),joms.privacy.closeAll()}),joms.jQuery(".js_dropDownMaster dt").die("click touchstart"),joms.jQuery(".js_dropDownMaster dt").live("click touchstart",function(a){a.preventDefault(),joms.jQuery(this).parent().data("state")?(joms.privacy.closeAll(),joms.jQuery("body").unbind("click")):(joms.privacy.closeAll(),joms.jQuery(this).parent().parent().addClass("js_PrivacyOpen"),joms.jQuery(this).parent().data("state",1).addClass("js_Current").find("dd").show(),joms.jQuery("body").bind("click",function(a){var b=joms.jQuery(a.target);0==b.parents(".js_PriContainer").length&&joms.privacy.closeAll()}))})},closeAll:function(){joms.jQuery(".js_PriContainer").removeClass("js_PrivacyOpen"),joms.jQuery(".js_dropDownMaster").each(function(){joms.jQuery(this).data("state",0).removeClass("js_Current").find("dd").hide()})}},tooltip:{setup:function(){joms.jQuery(".jomNameTips").tipsy({live:!0,gravity:"sw"}),joms.jQuery(".qtip-active").hide(),setTimeout("joms.jQuery('.qtip-active').hide()",150);try{clearTimeout(joms.jQuery.fn.qtip.timers.show)}catch(a){}return joms.jQuery(".jomTips").each(function(){var a="tipNormal",b=220,c={corner:{target:"topMiddle",tooltip:"bottomMiddle"}},d={when:{event:"mouseout"},effect:{length:10}};joms.jQuery(this).hasClass("tipRight")&&(a="tipRight",b=320,c={corner:{target:"rightMiddle",tooltip:"leftMiddle"}}),joms.jQuery(this).hasClass("tipWide")&&(b=420),joms.jQuery(this).hasClass("tipFullWidth")&&(b=joms.jQuery(this).innerWidth()-20);var e="",f=joms.jQuery(this).attr("title"),g="";f&&(g=f.split("::")),joms.jQuery(this).attr("title",""),2==g.length?(f=g[1],e={text:g[0]}):e=e={text:""},joms.jQuery(this).qtip({content:{text:f,title:e},style:{name:a,width:b},position:c,hide:d,show:{solo:!0,effect:{length:50}}}).removeClass("jomTips")}),!0},setStyle:function(){return joms.jQuery.fn.qtip.styles.tipNormal={width:320,border:{width:7,radius:5},tip:!0,name:"dark"},joms.jQuery.fn.qtip.styles.tipRight={tip:"leftMiddle",name:"tipNormal"},!0}},like:{init:function(){joms.jQuery('a[href="#like"]').live("click",function(){var a=joms.jQuery(this).parents("li.stream").data("streamid");return jax.call("community","system,ajaxStreamAddLike",a),!1}),joms.jQuery('a[href="#unlike"]').live("click",function(){var a=joms.jQuery(this).parents("li.stream").data("streamid");return jax.call("community","system,ajaxStreamUnlike",a),!1})},extractData:function(a){a=a.split("-");var b=[];return b.element=a[1],b.itemid=a[2],b.element=b.element.replace("_","."),b},like:function(a){var b=joms.jQuery(a).parents(".like-snippet"),c=this.extractData(b.attr("id"));joms.jQuery(a).unbind("onclick"),joms.ajax.call("system,ajaxLike",[c.element,c.itemid],{success:function(a){b.replaceWith(a)}})},newLike:function(a){var b=joms.jQuery(a).parent(),c=this.extractData(b.attr("id"));joms.jQuery(a).unbind("onclick");var d=joms.jQuery(joms.jQuery(a).children()[1]).html();joms.ajax.call("system,ajaxLike",[c.element,c.itemid],{success:function(){d=parseInt(d)+1,joms.jQuery(a).addClass("js-focus-like"),joms.jQuery(a).attr("onclick","joms.like.newDislike(this)"),joms.jQuery(joms.jQuery(a).children()[1]).html(d)}})},newDislike:function(a){var b=joms.jQuery(a).parent(),c=this.extractData(b.attr("id"));joms.jQuery(a).unbind("onclick");var d=joms.jQuery(joms.jQuery(a).children()[1]).html();joms.ajax.call("system,ajaxDislike",[c.element,c.itemid],{success:function(){d=parseInt(d)-1,joms.jQuery(a).removeClass("js-focus-like"),joms.jQuery(a).attr("onclick","joms.like.newLike(this)"),joms.jQuery(joms.jQuery(a).children()[1]).html(d)}})},dislike:function(a){var b=joms.jQuery(a).parents(".like-snippet"),c=this.extractData(b.attr("id"));joms.jQuery(a).unbind("onclick"),joms.ajax.call("system,ajaxDislike",[c.element,c.itemid],{success:function(a){b.replaceWith(a)}})},unlike:function(a){var b=joms.jQuery(a).parents(".like-snippet"),c=this.extractData(b.attr("id"));joms.jQuery(a).unbind("onclick"),joms.ajax.call("system,ajaxUnlike",[c.element,c.itemid],{success:function(a){b.replaceWith(a)}})}},tag:{add:function(a,b){jax.call("community","system,ajaxAddTag",a,b,joms.jQuery("#tag-addbox").val())},pick:function(a,b,c){jax.call("community","system,ajaxAddTag",a,b,c)},remove:function(a){jax.call("community","system,ajaxRemoveTag",a)},moreHide:function(){joms.jQuery("#tag-list li").each(function(a,b){a>8&&joms.jQuery(b).hide()}),joms.jQuery(".more-tag-show").show(),joms.jQuery(".more-tag-hide").hide()},moreShow:function(){joms.jQuery("#tag-list li").each(function(a,b){a>8&&joms.jQuery(b).show()}),joms.jQuery(".more-tag-show").hide(),joms.jQuery(".more-tag-hide").show()},toggleMore:function(){joms.jQuery("#tag-list li").each(function(a,b){a>8&&joms.jQuery(b).toggle()})},list:function(a){var b="jax.call('community', 'system,ajaxShowTagged', '"+a+"');";cWindowShow(b,"",450,100)},edit:function(a,b){joms.tag.moreShow(a,b);var c=a+"-"+b;joms.jQuery("#tag-editor.tag-editor-"+c+",.tag-token a.tag-delete").show()},done:function(a,b){joms.tag.moreHide(a,b);var c=a+"-"+b;joms.jQuery("#tag-editor.tag-editor-"+c+",.tag-token a.tag-delete").hide()}},geolocation:{showNearByEvents:function(a){joms.map.execute(function(){joms.jQuery("#community-event-nearby-listing").show(),joms.jQuery("#showNearByEventsLoading").show(),"undefined"==typeof a?navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){var b=a.coords.latitude,c=a.coords.longitude;geocoder=new google.maps.Geocoder;var d=new google.maps.LatLng(b,c);geocoder.geocode({latLng:d},function(b,c){c==google.maps.GeocoderStatus.OK?b[4]&&(a=b[4].formatted_address,joms.geolocation.setCookie("currentLocation",a),joms.events.displayNearbyEvents(a)):alert("Geocoder failed due to: "+c)})}):(alert("Sorry, your browser does not support this feature."),joms.jQuery("#community-event-nearby-listing").hide(),joms.jQuery("#showNearByEventsLoading").hide()):joms.events.displayNearbyEvents(a)})},validateNearByEventsForm:function(){var a=joms.jQuery("#userInputLocation").val();0!=a.length&&joms.geolocation.showNearByEvents(a)},setCookie:function(a,b){var c=new Date;c.setTime(c.getTime()+36e5),document.cookie=a+"="+escape(b)+";expires="+c},getCookie:function(a){return document.cookie.length>0&&(c_start=document.cookie.indexOf(a+"="),-1!=c_start)?(c_start=c_start+a.length+1,c_end=document.cookie.indexOf(";",c_start),-1==c_end&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):""}},file:{showFileUpload:function(a,b){var c='jax.call("community", "files,ajaxFileUploadForm","'+a+'",'+b+")";cWindowShow(c,"",600,400)},enableEditName:function(){joms.jQuery(".plupload_file_name span").length>0&&(joms.jQuery(".plupload_file_name span").unbind("click"),joms.jQuery(".plupload_file_name span").bind("click",function(a){joms.file.editName(a)}))},editName:function(a){joms.jQuery(".plupload_file_name span").unbind("click");var b=a.target?a.target:a.which,c=joms.jQuery(b).parent().parent().attr("id"),d='<input type="text" target="'+c+'" name="filename" value="'+joms.jQuery(b).html()+'" />';joms.jQuery(b).html(d),joms.jQuery(b).find("input").unbind("keypress").unbind("focusout"),joms.jQuery(b).find("input").bind("keypress",function(a){keyCode=a.keyCode,13==keyCode&&(joms.file.saveName(this,joms.jQuery(this).parent()),joms.jQuery(".plupload_file_name span").bind("click",function(a){joms.file.editName(a)}))}),joms.jQuery(b).find("input").bind("focusout",function(){joms.file.saveName(this,joms.jQuery(this).parent()),joms.jQuery(".plupload_file_name span").bind("click",function(a){joms.file.editName(a)})})},saveName:function(a,b){var c=joms.jQuery(a).attr("target"),d=joms.jQuery("#html5_uploader").pluploadQueue().getFile(parseInt(c)),e=joms.jQuery(a).val();d.name=e;var f=encodeURIComponent(e);jax.call("community","files,ajaxSaveName",d.id,f),joms.jQuery(b).html(e)},ajaxDeleteFile:function(a,b){jax.call("community","files,ajaxDeleteFile",a,b)},ajaxUploadFile:function(a,b,c){var d=!1;joms.jQuery("#html5_uploader").pluploadQueue({runtimes:"gears,flash,silverlight,browserplushtml5,html4",url:a,max_file_size:c+"mb",chunk_size:c+"mb",unique_names:!0,filters:[{title:"Media files",extensions:b}],preinit:{FileUploaded:function(a,b,c){try{var d=joms.jQuery.parseJSON(c.response)}catch(e){joms.jQuery("#html5_uploader").pluploadQueue().stop()}var f=joms.jQuery("#html5_uploader").pluploadQueue().getFile(b.id);f.id=d.id,"undefined"!=typeof d.msg&&(joms.jQuery("#html5_uploader").pluploadQueue().stop(),joms.jQuery("#cWindowContent").prepend("<strong>"+d.msg+" </strong>"))},UploadComplete:function(){setTimeout("joms.file.enableEditName();",1e3),d=!0,joms.jQuery("#upload-footer").show(),cWindowResize(),joms.jQuery("a.add-more").click(function(){joms.jQuery("#html5_uploader").pluploadQueue().splice(),joms.jQuery(".plupload_buttons").show(),joms.jQuery(".plupload_file_status").hide(),joms.jQuery("div#upload-footer").hide(),cWindowResize()})}}}),joms.jQuery(".plupload_header").remove(),joms.jQuery("span.plupload_upload_status").remove(),joms.jQuery("input:file").parent().css("top","245px"),joms.jQuery("#cwin_close_btn").click(function(){d&&window.location.reload()})},viewFile:function(a,b){var c='jax.call("community", "files,ajaxviewFiles","'+a+'","'+b+'")';cWindowShow(c,"",600,400)},ajaxdownloadFile:function(a,b){var c='jax.call("community","files,ajaxFileDownload","'+a+'","'+b+'")';cWindowShow(c,"",600,200)},getFileList:function(a,b,c,d,e){joms.jQuery("#load-more-btn").html(""),jax.call("community","files,ajaxgetFileList",a,b,c,d,e)},updateFileList:function(a,b){currentFiles=joms.jQuery("#"+b).html(),newFiles=currentFiles+a,joms.jQuery("#"+b).html(newFiles)},viewMore:function(a,b){var c='jax.call("community","files,ajaxviewMore","'+a+'","'+b+'")';cWindowShow(c,"",600,200)},loadFile:function(a,b,c,d,e){joms.jQuery("#load-more-btn").html(""),jax.call("community","files,ajaxgetFileList",a,b,c,d,e)},searchFileUpdate:function(a){joms.jQuery(joms.jQuery("ul.cTabNav li.active").children().attr("href")).html(a)},startdownload:function(a){joms.jQuery("<iframe>",{src:a,id:"iframe"}).appendTo("body");var b=document.getElementById("iframe");b=b.contentWindow||b.contentDocument,b.document&&(b=b.document);var c=setInterval(function(){"complete"==b.readyState&&(clearInterval(c),cWindowHide(),joms.jQuery("#iframe").remove())},1e3)}},cover:{type:null,parentId:null,position:0,positionPercent:0,init:function(){joms.jQuery(".js-navbar-options, .js-navbar-icon").dropdown({toggle:!1});var a=joms.jQuery(".js-bar-collapse");a.collapse({toggle:!1}),joms.jQuery(".js-bar-collapse-btn").on("click",function(b){b.preventDefault(),a.collapse("toggle")});var b=joms.jQuery(".js-collapse");b.collapse({toggle:!1}),joms.jQuery(".js-collapse-btn").on("click",function(a){a.preventDefault(),b.collapse("toggle")});var c=joms.jQuery(".js-collapse-about");c.collapse({toggle:!1}),joms.jQuery(".js-collapse-about-btn").on("click",function(a){a.preventDefault(),c.collapse("toggle")})},select:function(a,b){joms.cover.type=joms.jQuery(a).data("cover-context"),joms.cover.parentId=b;var c='jax.call("community","photos,ajaxChangeCover","'+joms.cover.type+'","'+joms.cover.parentId+'")';cWindowShow(c,"",600,400)},openalbum:function(a,b){jax.call("community","photos,ajaxGetPhotoList",a,b)},showlist:function(a){joms.jQuery("#coverphotolist").html(a),joms.jQuery("#coverphotolist").show(),joms.jQuery("#coveralbumlist").hide(function(){})},setCover:function(a){jax.call("community","photos,ajaxSetPhotoCover",joms.cover.type,a.id,joms.cover.parentId)},updateCover:function(a,b,c){cWindowHide(),joms.jQuery("#"+joms.cover.parentId).prop("src",a),joms.jQuery("img#"+joms.cover.parentId).css({top:"0px"}),jax.call("community","photos,ajaxSetPhotoPhosition",joms.cover.type,joms.cover.parentId,0),joms.cover.reposition(joms.jQuery("#"+joms.cover.parentId),joms.cover.parentId,b,c)},uploader:function(a){joms.jQuery.ajaxFileUpload({url:a,secureuri:!1,fileElementId:"uploadCover",dataType:"json",beforeSend:function(){},complete:function(){},success:function(a){1==a.success&&joms.cover.updateCover(a.path,a.cancelbutton,a.savebutton),a.error&&(joms.jQuery("p#error_msg").is(":visible")||joms.jQuery("p#error_msg").show(),joms.jQuery("p#error_msg").html(a.error),joms.jQuery("p#error_msg").fadeOut(3e3))}})},reposition:function(a,b,c,d){joms.cover.type=joms.jQuery(a).data("cover-context"),joms.cover.parentId=b,joms.jQuery(".js-focus-gradient").hide(),joms.jQuery(".js-focus-change-cover").hide();var e=joms.jQuery("img#"+b).position().top,f=joms.jQuery(".js-focus-cover").height()-joms.jQuery("img#"+b).height(),g='<button class="btn btn-primary" onClick="joms.cover.repositionCancel('+b+",'"+e+"')\"><span>"+c+'</span></button><button class="btn btn-primary ml-6" onClick="joms.cover.saveReposition()"><span>'+d+"</span></button>";joms.jQuery(".span4.text-right").html(g),joms.jQuery("img#"+b).draggable({axis:"y",cursor:"move",drag:function(a,b){b.position.top<f&&(b.position.top=f),b.position.top>0&&(b.position.top=0)},stop:function(a,c){var d=joms.jQuery("img#"+b),e=d.closest(".js-focus-cover"),f=100*c.position.top/e.height();f=Math.round(1e4*f)/1e4,joms.cover.position=c.position.top,joms.cover.positionPercent=f,d.css("top",f+"%")}})},repositionCancel:function(a,b){joms.jQuery(".js-focus-gradient").show(),joms.jQuery(".js-focus-change-cover").css({display:""}),joms.jQuery(".span4.text-right").html(""),joms.jQuery("img#"+a).css({top:b+"px"}),joms.jQuery("img#"+a).draggable("destroy")},saveReposition:function(){jax.call("community","photos,ajaxSetPhotoPhosition",joms.cover.type,joms.cover.parentId,joms.cover.positionPercent+"%"),joms.jQuery(".js-focus-gradient").show(),joms.jQuery(".js-focus-change-cover").css({display:""}),joms.jQuery(".span4.text-right").html(""),joms.jQuery("img#"+joms.cover.parentId).draggable("destroy"),joms.jQuery(".js-focus-change-cover a.btn.hidden").removeClass("hidden")}},share:{popup:function(a){joms.jQuery(document).off("click","#cWindowAction button.btn-primary");var b="jax.call('community', 'activities,ajaxSharePopup','"+a+"');";cWindowShow(b,"",450,300)},add:function(a,b){joms.jQuery(document).off("click","#cWindowAction button.btn-primary"),jax.call("community","activities,ajaxAddShare",a,b)},map:function(a){var b="jax.call('community', 'activities,ajaxShowMap','"+a+"');";cWindowShow(b,"",650,300)}}}),joms.jQuery(document).click(function(){joms.toolbar.close()}),joms.jQuery(document).ready(function(){joms.tooltip.setStyle(),joms.tooltip.setup(),joms.apps.initToggle(),joms.plugins.initialize(),joms.jQuery(".list-unstyled li").length&&joms.miniwall.initialize();window.location;joms.maps.init(),joms.like.init(),void 0!==joms.jQuery.fn.dropdown&&joms.cover.init();var a=0;joms.jQuery(".cTabsBar li").each(function(){joms.jQuery(this).attr("id","cTab-"+a).children("a").click(function(){if(joms.jQuery(this).parent("li").hasClass("cTabDisabled"))return void joms.jQuery(this).blur();joms.jQuery(".cTabsBar li").removeClass("cTabCurrent"),joms.jQuery(joms.jQuery(this).parents().find("li#cTab-0")).hasClass("cTabDisabled")||joms.jQuery(".cTabsContent").removeClass("cTabsContentCurrent").trigger("onAfterHide");var a=joms.jQuery(this).parent("li").index();joms.jQuery("#cTab-"+a).addClass("cTabCurrent"),joms.jQuery("#cTabContent-"+a).addClass("cTabsContentCurrent").trigger("onAfterShow")}),joms.jQuery(".cTabsContentWrap .cTabsContent:eq("+a+")").attr("id","cTabContent-"+a),joms.jQuery(this).hasClass("cTabCurrent")&&joms.jQuery(".cTabsContentWrap .cTabsContent:eq("+a+")").data("status",1),a++
})}),joms.jQuery.cookie=function(a,b,c){if("undefined"==typeof b){var d=null;if(document.cookie&&""!=document.cookie)for(var e=document.cookie.split(";"),f=0;f<e.length;f++){var g=joms.jQuery.trim(e[f]);if(g.substring(0,a.length+1)==a+"="){d=decodeURIComponent(g.substring(a.length+1));break}}return d}c=c||{},null===b&&(b="",c.expires=-1);var h="";if(c.expires&&("number"==typeof c.expires||c.expires.toUTCString)){var i;"number"==typeof c.expires?(i=new Date,i.setTime(i.getTime()+24*c.expires*60*60*1e3)):i=c.expires,h="; expires="+i.toUTCString()}var j=c.path?"; path="+c.path:"",k=c.domain?"; domain="+c.domain:"",l=c.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(b),h,j,k,l].join("")},function(a){a.fn.autogrow=function(){return this.filter("textarea").each(function(){var b=a(this),c=b.height(),d=(b.css("lineHeight"),a("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:a(this).width()-parseInt(b.css("paddingLeft"))-parseInt(b.css("paddingRight")),fontSize:b.css("fontSize"),fontFamily:b.css("fontFamily"),lineHeight:b.css("lineHeight"),resize:"none"}).appendTo(document.body)),e=function(){var b=function(a,b){for(var c=0,d="";b>c;c++)d+=a;return d},e=this.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(a){return b("&nbsp;",a.length-1)+" "});d.html(e),a(this).css("height",Math.max(d.height()+20,c))};a(this).change(e).keyup(e).keydown(e),e.apply(this)}),this}}(joms.jQuery),function(a){function b(b,c,d){var f=this;f.id=d,f.options=c,f.status={animated:!1,rendered:!1,disabled:!1,focused:!1},f.elements={target:b.addClass(f.options.style.classes.target),tooltip:null,wrapper:null,content:null,contentWrapper:null,title:null,button:null,tip:null,bgiframe:null},f.cache={mouse:{},position:{},toggle:0},f.timers={},a.extend(f,f.options.api,{show:function(b){function c(){"static"!==f.options.position.type&&f.focus(),f.onShow.call(f,b),a.browser.msie&&f.elements.tooltip.get(0).style.removeAttribute("filter")}var d,e;if(!f.status.rendered)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"show");if("none"!==f.elements.tooltip.css("display"))return f;if(f.elements.tooltip.stop(!0,!1),d=f.beforeShow.call(f,b),d===!1)return f;if(f.cache.toggle=1,"static"!==f.options.position.type&&f.updatePosition(b,f.options.show.effect.length>0),"object"==typeof f.options.show.solo?e=a(f.options.show.solo):f.options.show.solo===!0&&(e=a("div.qtip").not(f.elements.tooltip)),e&&e.each(function(){a(this).qtip("api").status.rendered===!0&&a(this).qtip("api").hide()}),"function"==typeof f.options.show.effect.type)f.options.show.effect.type.call(f.elements.tooltip,f.options.show.effect.length),f.elements.tooltip.queue(function(){c(),a(this).dequeue()});else{switch(f.options.show.effect.type.toLowerCase()){case"fade":f.elements.tooltip.fadeIn(f.options.show.effect.length,c);break;case"slide":f.elements.tooltip.slideDown(f.options.show.effect.length,function(){c(),"static"!==f.options.position.type&&f.updatePosition(b,!0)});break;case"grow":f.elements.tooltip.show(f.options.show.effect.length,c);break;default:f.elements.tooltip.show(null,c)}f.elements.tooltip.addClass(f.options.style.classes.active)}return a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_SHOWN,"show")},hide:function(b){function c(){f.onHide.call(f,b)}var d;if(!f.status.rendered)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"hide");if("none"===f.elements.tooltip.css("display"))return f;if(clearTimeout(f.timers.show),f.elements.tooltip.stop(!0,!1),d=f.beforeHide.call(f,b),d===!1)return f;if(f.cache.toggle=0,"function"==typeof f.options.hide.effect.type)f.options.hide.effect.type.call(f.elements.tooltip,f.options.hide.effect.length),f.elements.tooltip.queue(function(){c(),a(this).dequeue()});else{switch(f.options.hide.effect.type.toLowerCase()){case"fade":f.elements.tooltip.fadeOut(f.options.hide.effect.length,c);break;case"slide":f.elements.tooltip.slideUp(f.options.hide.effect.length,c);break;case"grow":f.elements.tooltip.hide(f.options.hide.effect.length,c);break;default:f.elements.tooltip.hide(null,c)}f.elements.tooltip.removeClass(f.options.style.classes.active)}return a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_HIDDEN,"hide")},updatePosition:function(b,c){var d,e,g,h,i,j,k,m,n,o,p,q,s;if(!f.status.rendered)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updatePosition");if("static"==f.options.position.type)return a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.CANNOT_POSITION_STATIC,"updatePosition");if(e={position:{left:0,top:0},dimensions:{height:0,width:0},corner:f.options.position.corner.target},g={position:f.getPosition(),dimensions:f.getDimensions(),corner:f.options.position.corner.tooltip},"mouse"!==f.options.position.target){if("area"==f.options.position.target.get(0).nodeName.toLowerCase()){for(h=f.options.position.target.attr("coords").split(","),d=0;d<h.length;d++)h[d]=parseInt(h[d]);switch(i=f.options.position.target.parent("map").attr("name"),j=a('img[usemap="#'+i+'"]:first').offset(),e.position={left:Math.floor(j.left+h[0]),top:Math.floor(j.top+h[1])},f.options.position.target.attr("shape").toLowerCase()){case"rect":e.dimensions={width:Math.ceil(Math.abs(h[2]-h[0])),height:Math.ceil(Math.abs(h[3]-h[1]))};break;case"circle":e.dimensions={width:h[2]+1,height:h[2]+1};break;case"poly":for(e.dimensions={width:h[0],height:h[1]},d=0;d<h.length;d++)d%2==0?(h[d]>e.dimensions.width&&(e.dimensions.width=h[d]),h[d]<h[0]&&(e.position.left=Math.floor(j.left+h[d]))):(h[d]>e.dimensions.height&&(e.dimensions.height=h[d]),h[d]<h[1]&&(e.position.top=Math.floor(j.top+h[d])));e.dimensions.width=e.dimensions.width-(e.position.left-j.left),e.dimensions.height=e.dimensions.height-(e.position.top-j.top);break;default:return a.fn.qtip.log.error.call(f,4,a.fn.qtip.constants.INVALID_AREA_SHAPE,"updatePosition")}e.dimensions.width-=2,e.dimensions.height-=2}else 1===f.options.position.target.add(document.body).length?(e.position={left:a(document).scrollLeft(),top:a(document).scrollTop()},e.dimensions={height:a(window).height(),width:a(window).width()}):(e.position="undefined"!=typeof f.options.position.target.attr("qtip")?f.options.position.target.qtip("api").cache.position:f.options.position.target.offset(),e.dimensions={height:f.options.position.target.outerHeight(),width:f.options.position.target.outerWidth()});k=a.extend({},e.position),-1!==e.corner.search(/right/i)&&(k.left+=e.dimensions.width),-1!==e.corner.search(/bottom/i)&&(k.top+=e.dimensions.height),-1!==e.corner.search(/((top|bottom)Middle)|center/)&&(k.left+=e.dimensions.width/2),-1!==e.corner.search(/((left|right)Middle)|center/)&&(k.top+=e.dimensions.height/2)}else e.position=k={left:f.cache.mouse.x,top:f.cache.mouse.y},e.dimensions={height:1,width:1};if(-1!==g.corner.search(/right/i)&&(k.left-=g.dimensions.width),-1!==g.corner.search(/bottom/i)&&(k.top-=g.dimensions.height),-1!==g.corner.search(/((top|bottom)Middle)|center/)&&(k.left-=g.dimensions.width/2),-1!==g.corner.search(/((left|right)Middle)|center/)&&(k.top-=g.dimensions.height/2),m=a.browser.msie?1:0,n=a.browser.msie&&6===parseInt(a.browser.version.charAt(0))?1:0,f.options.style.border.radius>0&&(-1!==g.corner.search(/Left/)?k.left-=f.options.style.border.radius:-1!==g.corner.search(/Right/)&&(k.left+=f.options.style.border.radius),-1!==g.corner.search(/Top/)?k.top-=f.options.style.border.radius:-1!==g.corner.search(/Bottom/)&&(k.top+=f.options.style.border.radius)),m&&(-1!==g.corner.search(/top/)?k.top-=m:-1!==g.corner.search(/bottom/)&&(k.top+=m),-1!==g.corner.search(/left/)?k.left-=m:-1!==g.corner.search(/right/)&&(k.left+=m),-1!==g.corner.search(/leftMiddle|rightMiddle/)&&(k.top-=1)),f.options.position.adjust.screen===!0&&(k=l.call(f,k,e,g)),"mouse"===f.options.position.target&&f.options.position.adjust.mouse===!0&&(o=f.options.position.adjust.screen===!0&&f.elements.tip?f.elements.tip.attr("rel"):f.options.position.corner.tooltip,k.left+=-1!==o.search(/right/i)?-6:6,k.top+=-1!==o.search(/bottom/i)?-6:6),!f.elements.bgiframe&&a.browser.msie&&6==parseInt(a.browser.version.charAt(0))&&a("select, object").each(function(){p=a(this).offset(),p.bottom=p.top+a(this).height(),p.right=p.left+a(this).width(),k.top+g.dimensions.height>=p.top&&k.left+g.dimensions.width>=p.left&&r.call(f)}),k.left+=f.options.position.adjust.x,k.top+=f.options.position.adjust.y,q=f.getPosition(),k.left!=q.left||k.top!=q.top){if(s=f.beforePositionUpdate.call(f,b),s===!1)return f;f.cache.position=k,c===!0?(f.status.animated=!0,f.elements.tooltip.animate(k,200,"swing",function(){f.status.animated=!1})):f.elements.tooltip.css(k),f.onPositionUpdate.call(f,b),"undefined"!=typeof b&&b.type&&"mousemove"!==b.type&&a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_POSITION_UPDATED,"updatePosition")}return f},updateWidth:function(b){var c;return f.status.rendered?b&&"number"!=typeof b?a.fn.qtip.log.error.call(f,2,"newWidth must be of type number","updateWidth"):(c=f.elements.contentWrapper.siblings().add(f.elements.tip).add(f.elements.button),b||("number"==typeof f.options.style.width.value?b=f.options.style.width.value:(f.elements.tooltip.css({width:"auto"}),c.hide(),a.browser.msie&&f.elements.wrapper.add(f.elements.contentWrapper.children()).css({zoom:"normal"}),b=f.getDimensions().width+1,f.options.style.width.value||(b>f.options.style.width.max&&(b=f.options.style.width.max),b<f.options.style.width.min&&(b=f.options.style.width.min)))),b%2!==0&&(b-=1),f.elements.tooltip.width(b),c.show(),f.options.style.border.radius&&f.elements.tooltip.find(".qtip-betweenCorners").each(function(){a(this).width(b-2*f.options.style.border.radius)}),a.browser.msie&&(f.elements.wrapper.add(f.elements.contentWrapper.children()).css({zoom:"1"}),f.elements.wrapper.width(b),f.elements.bgiframe&&f.elements.bgiframe.width(b).height(f.getDimensions.height)),a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_WIDTH_UPDATED,"updateWidth")):a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateWidth")},updateStyle:function(b){var c,d,h,i,j;return f.status.rendered?"string"==typeof b&&a.fn.qtip.styles[b]?(f.options.style=o.call(f,a.fn.qtip.styles[b],f.options.user.style),f.elements.content.css(m(f.options.style)),f.options.content.title.text!==!1&&f.elements.title.css(m(f.options.style.title,!0)),f.elements.contentWrapper.css({borderColor:f.options.style.border.color}),f.options.style.tip.corner!==!1&&(a("<canvas>").get(0).getContext?(c=f.elements.tooltip.find(".qtip-tip canvas:first"),h=c.get(0).getContext("2d"),h.clearRect(0,0,300,300),i=c.parent("div[rel]:first").attr("rel"),j=p(i,f.options.style.tip.size.width,f.options.style.tip.size.height),g.call(f,c,j,f.options.style.tip.color||f.options.style.border.color)):a.browser.msie&&(c=f.elements.tooltip.find('.qtip-tip [nodeName="shape"]'),c.attr("fillcolor",f.options.style.tip.color||f.options.style.border.color))),f.options.style.border.radius>0&&(f.elements.tooltip.find(".qtip-betweenCorners").css({backgroundColor:f.options.style.border.color}),a("<canvas>").get(0).getContext?(d=q(f.options.style.border.radius),f.elements.tooltip.find(".qtip-wrapper canvas").each(function(){h=a(this).get(0).getContext("2d"),h.clearRect(0,0,300,300),i=a(this).parent("div[rel]:first").attr("rel"),e.call(f,a(this),d[i],f.options.style.border.radius,f.options.style.border.color)})):a.browser.msie&&f.elements.tooltip.find('.qtip-wrapper [nodeName="arc"]').each(function(){a(this).attr("fillcolor",f.options.style.border.color)})),a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_STYLE_UPDATED,"updateStyle")):a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.STYLE_NOT_DEFINED,"updateStyle"):a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateStyle")},updateContent:function(b,c){function d(){f.updateWidth(),c!==!1&&("static"!==f.options.position.type&&f.updatePosition(f.elements.tooltip.is(":visible"),!0),f.options.style.tip.corner!==!1&&h.call(f))}var e,g,i;if(!f.status.rendered)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateContent");if(!b)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateContent");if(e=f.beforeContentUpdate.call(f,b),"string"==typeof e)b=e;else if(e===!1)return;return a.browser.msie&&f.elements.contentWrapper.children().css({zoom:"normal"}),b.jquery&&b.length>0?b.clone(!0).appendTo(f.elements.content).show():f.elements.content.html(b),g=f.elements.content.find("img[complete=false]"),g.length>0?(i=0,g.each(function(){a('<img src="'+a(this).attr("src")+'" />').load(function(){++i==g.length&&d()})})):d(),f.onContentUpdate.call(f),a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_CONTENT_UPDATED,"loadContent")},loadContent:function(b,c,d){function e(b){f.onContentLoad.call(f),a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_CONTENT_LOADED,"loadContent"),f.updateContent(b)}var g;return f.status.rendered?(g=f.beforeContentLoad.call(f),g===!1?f:("post"==d?a.post(b,c,e):a.get(b,c,e),f)):a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"loadContent")},updateTitle:function(b){return f.status.rendered?b?(returned=f.beforeTitleUpdate.call(f),returned===!1?f:(f.elements.button&&(f.elements.button=f.elements.button.clone(!0)),f.elements.title.html(b),f.elements.button&&f.elements.title.prepend(f.elements.button),f.onTitleUpdate.call(f),a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_TITLE_UPDATED,"updateTitle"))):a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateTitle"):a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateTitle")},focus:function(b){var c,d,e,g;if(!f.status.rendered)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"focus");if("static"==f.options.position.type)return a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.CANNOT_FOCUS_STATIC,"focus");if(c=parseInt(f.elements.tooltip.css("z-index")),d=6e3+a("div.qtip[qtip]").length-1,!f.status.focused&&c!==d){if(g=f.beforeFocus.call(f,b),g===!1)return f;a("div.qtip[qtip]").not(f.elements.tooltip).each(function(){a(this).qtip("api").status.rendered===!0&&(e=parseInt(a(this).css("z-index")),"number"==typeof e&&e>-1&&a(this).css({zIndex:parseInt(a(this).css("z-index"))-1}),a(this).qtip("api").status.focused=!1)}),f.elements.tooltip.css({zIndex:d}),f.status.focused=!0,f.onFocus.call(f,b),a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_FOCUSED,"focus")}return f},disable:function(b){return f.status.rendered?(b?f.status.disabled?a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.TOOLTIP_ALREADY_DISABLED,"disable"):(f.status.disabled=!0,a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_DISABLED,"disable")):f.status.disabled?(f.status.disabled=!1,a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_ENABLED,"disable")):a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.TOOLTIP_ALREADY_ENABLED,"disable"),f):a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"disable")},destroy:function(){var b,c,d;if(c=f.beforeDestroy.call(f),c===!1)return f;if(f.status.rendered?(f.options.show.when.target.unbind("mousemove.qtip",f.updatePosition),f.options.show.when.target.unbind("mouseout.qtip",f.hide),f.options.show.when.target.unbind(f.options.show.when.event+".qtip"),f.options.hide.when.target.unbind(f.options.hide.when.event+".qtip"),f.elements.tooltip.unbind(f.options.hide.when.event+".qtip"),f.elements.tooltip.unbind("mouseover.qtip",f.focus),f.elements.tooltip.remove()):f.options.show.when.target.unbind(f.options.show.when.event+".qtip-create"),"object"==typeof f.elements.target.data("qtip")&&(d=f.elements.target.data("qtip").interfaces,"object"==typeof d&&d.length>0))for(b=0;b<d.length-1;b++)d[b].id==f.id&&d.splice(b,1);return delete a.fn.qtip.interfaces[f.id],"object"==typeof d&&d.length>0?f.elements.target.data("qtip").current=d.length-1:f.elements.target.removeData("qtip"),f.onDestroy.call(f),a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_DESTROYED,"destroy"),f.elements.target},getPosition:function(){var b,c;return f.status.rendered?(b="none"!==f.elements.tooltip.css("display")?!1:!0,b&&f.elements.tooltip.css({visiblity:"hidden"}).show(),c=f.elements.tooltip.offset(),b&&f.elements.tooltip.css({visiblity:"visible"}).hide(),c):a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getPosition")},getDimensions:function(){var b,c;return f.status.rendered?(b=f.elements.tooltip.is(":visible")?!1:!0,b&&f.elements.tooltip.css({visiblity:"hidden"}).show(),c={height:f.elements.tooltip.outerHeight(),width:f.elements.tooltip.outerWidth()},b&&f.elements.tooltip.css({visiblity:"visible"}).hide(),c):a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getDimensions")}})}function c(){var b,c,e,g,h;b=this,b.beforeRender.call(b),b.status.rendered=!0,b.elements.tooltip='<div qtip="'+b.id+'" class="qtip '+(b.options.style.classes.tooltip||b.options.style)+'"style="display:none; -moz-border-radius:0; -webkit-border-radius:0; border-radius:0;position:'+b.options.position.type+';">  <div class="qtip-wrapper" style="position:relative; overflow:hidden; text-align:left;">    <div class="qtip-contentWrapper" style="overflow:hidden;">       <div class="qtip-content '+b.options.style.classes.content+'"></div></div></div></div>',b.elements.tooltip=a(b.elements.tooltip),b.elements.tooltip.appendTo(b.options.position.container),b.elements.tooltip.data("qtip",{current:0,interfaces:[b]}),b.elements.wrapper=b.elements.tooltip.children("div:first"),b.elements.contentWrapper=b.elements.wrapper.children("div:first").css({background:b.options.style.background}),b.elements.content=b.elements.contentWrapper.children("div:first").css(m(b.options.style)),a.browser.msie&&b.elements.wrapper.add(b.elements.content).css({zoom:1}),"unfocus"==b.options.hide.when.event&&b.elements.tooltip.attr("unfocus",!0),"number"==typeof b.options.style.width.value&&b.updateWidth(),a("<canvas>").get(0).getContext||a.browser.msie?(b.options.style.border.radius>0?d.call(b):b.elements.contentWrapper.css({border:b.options.style.border.width+"px solid "+b.options.style.border.color}),b.options.style.tip.corner!==!1&&f.call(b)):(b.elements.contentWrapper.css({border:b.options.style.border.width+"px solid "+b.options.style.border.color}),b.options.style.border.radius=0,b.options.style.tip.corner=!1,a.fn.qtip.log.error.call(b,2,a.fn.qtip.constants.CANVAS_VML_NOT_SUPPORTED,"render")),"string"==typeof b.options.content.text&&b.options.content.text.length>0||b.options.content.text.jquery&&b.options.content.text.length>0?c=b.options.content.text:"string"==typeof b.elements.target.attr("title")&&b.elements.target.attr("title").length>0?(c=b.elements.target.attr("title").replace("\\n","<br />"),b.elements.target.attr("title","")):"string"==typeof b.elements.target.attr("alt")&&b.elements.target.attr("alt").length>0?(c=b.elements.target.attr("alt").replace("\\n","<br />"),b.elements.target.attr("alt","")):(c=" ",a.fn.qtip.log.error.call(b,1,a.fn.qtip.constants.NO_VALID_CONTENT,"render")),b.options.content.title.text!==!1&&j.call(b),b.updateContent(c),k.call(b),b.options.show.ready===!0&&b.show(),b.options.content.url!==!1&&(e=b.options.content.url,g=b.options.content.data,h=b.options.content.method||"get",b.loadContent(e,g,h)),b.onRender.call(b),a.fn.qtip.log.error.call(b,1,a.fn.qtip.constants.EVENT_RENDERED,"render")}function d(){var b,c,d,f,g,h,i,j,k,l,m,n,o,p,r;b=this,b.elements.wrapper.find(".qtip-borderBottom, .qtip-borderTop").remove(),d=b.options.style.border.width,f=b.options.style.border.radius,g=b.options.style.border.color||b.options.style.tip.color,h=q(f),i={};for(c in h)i[c]='<div rel="'+c+'" style="'+(-1!==c.search(/Left/)?"left":"right")+":0; position:absolute; height:"+f+"px; width:"+f+'px; overflow:hidden; line-height:0.1px; font-size:1px">',a("<canvas>").get(0).getContext?i[c]+='<canvas height="'+f+'" width="'+f+'" style="vertical-align: top"></canvas>':a.browser.msie&&(j=2*f+3,i[c]+='<v:arc stroked="false" fillcolor="'+g+'" startangle="'+h[c][0]+'" endangle="'+h[c][1]+'" style="width:'+j+"px; height:"+j+"px; margin-top:"+(-1!==c.search(/bottom/)?-2:-1)+"px; margin-left:"+(-1!==c.search(/Right/)?h[c][2]-3.5:-1)+'px; vertical-align:top; display:inline-block; behavior:url(#default#VML)"></v:arc>'),i[c]+="</div>";k=b.getDimensions().width-2*Math.max(d,f),l='<div class="qtip-betweenCorners" style="height:'+f+"px; width:"+k+"px; overflow:hidden; background-color:"+g+'; line-height:0.1px; font-size:1px;">',m='<div class="qtip-borderTop" dir="ltr" style="height:'+f+"px; margin-left:"+f+'px; line-height:0.1px; font-size:1px; padding:0;">'+i.topLeft+i.topRight+l,b.elements.wrapper.prepend(m),n='<div class="qtip-borderBottom" dir="ltr" style="height:'+f+"px; margin-left:"+f+'px; line-height:0.1px; font-size:1px; padding:0;">'+i.bottomLeft+i.bottomRight+l,b.elements.wrapper.append(n),a("<canvas>").get(0).getContext?b.elements.wrapper.find("canvas").each(function(){o=h[a(this).parent("[rel]:first").attr("rel")],e.call(b,a(this),o,f,g)}):a.browser.msie&&b.elements.tooltip.append('<v:image style="behavior:url(#default#VML);"></v:image>'),p=Math.max(f,f+(d-f)),r=Math.max(d-f,0),b.elements.contentWrapper.css({border:"0px solid "+g,borderWidth:r+"px "+p+"px"})}function e(a,b,c,d){var e=a.get(0).getContext("2d");e.fillStyle=d,e.beginPath(),e.arc(b[0],b[1],c,0,2*Math.PI,!1),e.fill()}function f(b){var c,d,e,f,i;c=this,null!==c.elements.tip&&c.elements.tip.remove(),d=c.options.style.tip.color||c.options.style.border.color,c.options.style.tip.corner!==!1&&(b||(b=c.options.style.tip.corner),e=p(b,c.options.style.tip.size.width,c.options.style.tip.size.height),c.elements.tip='<div class="'+c.options.style.classes.tip+'" dir="ltr" rel="'+b+'" style="position:absolute; height:'+c.options.style.tip.size.height+"px; width:"+c.options.style.tip.size.width+'px; margin:0 auto; line-height:0.1px; font-size:1px;">',a("<canvas>").get(0).getContext?c.elements.tip+='<canvas height="'+c.options.style.tip.size.height+'" width="'+c.options.style.tip.size.width+'"></canvas>':a.browser.msie&&(f=c.options.style.tip.size.width+","+c.options.style.tip.size.height,i="m"+e[0][0]+","+e[0][1],i+=" l"+e[1][0]+","+e[1][1],i+=" "+e[2][0]+","+e[2][1],i+=" xe",c.elements.tip+='<v:shape fillcolor="'+d+'" stroked="false" filled="true" path="'+i+'" coordsize="'+f+'" style="width:'+c.options.style.tip.size.width+"px; height:"+c.options.style.tip.size.height+"px; line-height:0.1px; display:inline-block; behavior:url(#default#VML); vertical-align:"+(-1!==b.search(/top/)?"bottom":"top")+'"></v:shape>',c.elements.tip+='<v:image style="behavior:url(#default#VML);"></v:image>',c.elements.contentWrapper.css("position","relative")),c.elements.tooltip.prepend(c.elements.tip+"</div>"),c.elements.tip=c.elements.tooltip.find("."+c.options.style.classes.tip).eq(0),a("<canvas>").get(0).getContext&&g.call(c,c.elements.tip.find("canvas:first"),e,d),-1!==b.search(/top/)&&a.browser.msie&&6===parseInt(a.browser.version.charAt(0))&&c.elements.tip.css({marginTop:-4}),h.call(c,b))}function g(a,b,c){var d=a.get(0).getContext("2d");d.fillStyle=c,d.beginPath(),d.moveTo(b[0][0],b[0][1]),d.lineTo(b[1][0],b[1][1]),d.lineTo(b[2][0],b[2][1]),d.fill()}function h(b){var c,d,e,f,g;c=this,c.options.style.tip.corner!==!1&&c.elements.tip&&(b||(b=c.elements.tip.attr("rel")),d=positionAdjust=a.browser.msie?1:0,c.elements.tip.css(b.match(/left|right|top|bottom/)[0],0),-1!==b.search(/top|bottom/)?(a.browser.msie&&(positionAdjust=6===parseInt(a.browser.version.charAt(0))?-1!==b.search(/top/)?-3:1:-1!==b.search(/top/)?1:2),-1!==b.search(/Middle/)?c.elements.tip.css({left:"50%",marginLeft:-(c.options.style.tip.size.width/2)}):-1!==b.search(/Left/)?c.elements.tip.css({left:c.options.style.border.radius-d}):-1!==b.search(/Right/)&&c.elements.tip.css({right:c.options.style.border.radius+d}),c.elements.tip.css(-1!==b.search(/top/)?{top:-positionAdjust}:{bottom:positionAdjust})):-1!==b.search(/left|right/)&&(a.browser.msie&&(positionAdjust=6===parseInt(a.browser.version.charAt(0))?1:-1!==b.search(/left/)?1:2),-1!==b.search(/Middle/)?c.elements.tip.css({top:"50%",marginTop:-(c.options.style.tip.size.height/2)}):-1!==b.search(/Top/)?c.elements.tip.css({top:c.options.style.border.radius-d}):-1!==b.search(/Bottom/)&&c.elements.tip.css({bottom:c.options.style.border.radius+d}),c.elements.tip.css(-1!==b.search(/left/)?{left:-positionAdjust}:{right:positionAdjust})),e="padding-"+b.match(/left|right|top|bottom/)[0],f=c.options.style.tip.size[-1!==e.search(/left|right/)?"width":"height"],c.elements.tooltip.css("padding",0),c.elements.tooltip.css(e,f),a.browser.msie&&6==parseInt(a.browser.version.charAt(0))&&(g=parseInt(c.elements.tip.css("margin-top"))||0,g+=parseInt(c.elements.content.css("margin-top"))||0,c.elements.tip.css({marginTop:g})))}function j(){var b=this;null!==b.elements.title&&b.elements.title.remove(),b.elements.title=a('<div class="'+b.options.style.classes.title+'">').css(m(b.options.style.title,!0)).css({zoom:a.browser.msie?1:0}).prependTo(b.elements.contentWrapper),b.options.content.title.text&&b.updateTitle.call(b,b.options.content.title.text),b.options.content.title.button!==!1&&"string"==typeof b.options.content.title.button&&(b.elements.button=a('<a class="'+b.options.style.classes.button+'" style="float:right; position: relative"></a>').css(m(b.options.style.button,!0)).html(b.options.content.title.button).prependTo(b.elements.title).click(function(a){b.status.disabled||b.hide(a)}))}function k(){function b(b){e.status.disabled!==!0&&(clearTimeout(e.timers.inactive),e.timers.inactive=setTimeout(function(){a(h).each(function(){g.unbind(this+".qtip-inactive"),e.elements.content.unbind(this+".qtip-inactive")}),e.hide(b)},e.options.hide.delay))}function c(c){e.status.disabled!==!0&&("inactive"==e.options.hide.when.event&&(a(h).each(function(){g.bind(this+".qtip-inactive",b),e.elements.content.bind(this+".qtip-inactive",b)}),b()),clearTimeout(e.timers.show),clearTimeout(e.timers.hide),e.timers.show=setTimeout(function(){e.show(c)},e.options.show.delay))}function d(b){if(e.status.disabled!==!0){if(e.options.hide.fixed===!0&&-1!==e.options.hide.when.event.search(/mouse(out|leave)/i)&&a(b.relatedTarget).parents("div.qtip[qtip]").length>0)return b.stopPropagation(),b.preventDefault(),clearTimeout(e.timers.hide),!1;clearTimeout(e.timers.show),clearTimeout(e.timers.hide),e.elements.tooltip.stop(!0,!0),e.timers.hide=setTimeout(function(){e.hide(b)},e.options.hide.delay)}}var e,f,g,h;e=this,f=e.options.show.when.target,g=e.options.hide.when.target,e.options.hide.fixed&&(g=g.add(e.elements.tooltip)),"inactive"==e.options.hide.when.event?h=["click","dblclick","mousedown","mouseup","mousemove","mouseout","mouseover","mouseleave","mouseover"]:e.options.hide.fixed===!0&&e.elements.tooltip.bind("mouseover.qtip",function(){e.status.disabled!==!0&&clearTimeout(e.timers.hide)}),1===e.options.show.when.target.add(e.options.hide.when.target).length&&e.options.show.when.event==e.options.hide.when.event&&"inactive"!==e.options.hide.when.event||"unfocus"==e.options.hide.when.event?(e.cache.toggle=0,f.bind(e.options.show.when.event+".qtip",function(a){0==e.cache.toggle?c(a):d(a)})):(f.bind(e.options.show.when.event+".qtip",c),"inactive"!==e.options.hide.when.event&&g.bind(e.options.hide.when.event+".qtip",d)),-1!==e.options.position.type.search(/(fixed|absolute)/)&&e.elements.tooltip.bind("mouseover.qtip",e.focus),"mouse"===e.options.position.target&&"static"!==e.options.position.type&&f.bind("mousemove.qtip",function(a){e.cache.mouse={x:a.pageX,y:a.pageY},e.status.disabled===!1&&e.options.position.adjust.mouse===!0&&"static"!==e.options.position.type&&"none"!==e.elements.tooltip.css("display")&&e.updatePosition(a)})}function l(b,c,d){var e,g,h,i,j;return e=this,"center"==d.corner?c.position:(g=a.extend({},b),i={x:!1,y:!1},j={left:g.left<a.fn.qtip.cache.screen.scroll.left,right:g.left+d.dimensions.width+2>=a.fn.qtip.cache.screen.width+a.fn.qtip.cache.screen.scroll.left,top:g.top<a.fn.qtip.cache.screen.scroll.top,bottom:g.top+d.dimensions.height+2>=a.fn.qtip.cache.screen.height+a.fn.qtip.cache.screen.scroll.top},h={left:j.left&&(-1!=d.corner.search(/right/i)||-1==d.corner.search(/right/i)&&!j.right),right:j.right&&(-1!=d.corner.search(/left/i)||-1==d.corner.search(/left/i)&&!j.left),top:j.top&&-1==d.corner.search(/top/i),bottom:j.bottom&&-1==d.corner.search(/bottom/i)},h.left?(g.left="mouse"!==e.options.position.target?c.position.left+c.dimensions.width:e.cache.mouse.x,i.x="Left"):h.right&&(g.left="mouse"!==e.options.position.target?c.position.left-d.dimensions.width:e.cache.mouse.x-d.dimensions.width,i.x="Right"),h.top?(g.top="mouse"!==e.options.position.target?c.position.top+c.dimensions.height:e.cache.mouse.y,i.y="top"):h.bottom&&(g.top="mouse"!==e.options.position.target?c.position.top-d.dimensions.height:e.cache.mouse.y-d.dimensions.height,i.y="bottom"),g.left<0&&(g.left=b.left,i.x=!1),g.top<0&&(g.top=b.top,i.y=!1),e.options.style.tip.corner!==!1&&(g.corner=new String(d.corner),i.x!==!1&&(g.corner=g.corner.replace(/Left|Right|Middle/,i.x)),i.y!==!1&&(g.corner=g.corner.replace(/top|bottom/,i.y)),g.corner!==e.elements.tip.attr("rel")&&f.call(e,g.corner)),g)}function m(b,c){var d,e;d=a.extend(!0,{},b);for(e in d)c===!0&&-1!==e.search(/(tip|classes)/i)?delete d[e]:c||-1===e.search(/(width|border|tip|title|classes|user)/i)||delete d[e];return d}function n(a){return"object"!=typeof a.tip&&(a.tip={corner:a.tip}),"object"!=typeof a.tip.size&&(a.tip.size={width:a.tip.size,height:a.tip.size}),"object"!=typeof a.border&&(a.border={width:a.border}),"object"!=typeof a.width&&(a.width={value:a.width}),"string"==typeof a.width.max&&(a.width.max=parseInt(a.width.max.replace(/([0-9]+)/i,"$1"))),"string"==typeof a.width.min&&(a.width.min=parseInt(a.width.min.replace(/([0-9]+)/i,"$1"))),"number"==typeof a.tip.size.x&&(a.tip.size.width=a.tip.size.x,delete a.tip.size.x),"number"==typeof a.tip.size.y&&(a.tip.size.height=a.tip.size.y,delete a.tip.size.y),a}function o(){var b,c,d,e,f,g;for(b=this,d=[!0,{}],c=0;c<arguments.length;c++)d.push(arguments[c]);for(e=[a.extend.apply(a,d)];"string"==typeof e[0].name;)e.unshift(n(a.fn.qtip.styles[e[0].name]));return e.unshift(!0,{classes:{tooltip:"qtip-"+(arguments[0].name||"defaults")}},a.fn.qtip.styles.defaults),f=a.extend.apply(a,e),g=a.browser.msie?1:0,f.tip.size.width+=g,f.tip.size.height+=g,f.tip.size.width%2>0&&(f.tip.size.width+=1),f.tip.size.height%2>0&&(f.tip.size.height+=1),f.tip.corner===!0&&(f.tip.corner="center"===b.options.position.corner.tooltip?!1:b.options.position.corner.tooltip),f}function p(a,b,c){var d={bottomRight:[[0,0],[b,c],[b,0]],bottomLeft:[[0,0],[b,0],[0,c]],topRight:[[0,c],[b,0],[b,c]],topLeft:[[0,0],[0,c],[b,c]],topMiddle:[[0,c],[b/2,0],[b,c]],bottomMiddle:[[0,0],[b,0],[b/2,c]],rightMiddle:[[0,0],[b,c/2],[0,c]],leftMiddle:[[b,0],[b,c],[0,c/2]]};return d.leftTop=d.bottomRight,d.rightTop=d.bottomLeft,d.leftBottom=d.topRight,d.rightBottom=d.topLeft,d[a]}function q(b){var c;return a("<canvas>").get(0).getContext?c={topLeft:[b,b],topRight:[0,b],bottomLeft:[b,0],bottomRight:[0,0]}:a.browser.msie&&(c={topLeft:[-90,90,0],topRight:[-90,90,-b],bottomLeft:[90,270,0],bottomRight:[90,270,-b]}),c}function r(){var a,b,c;a=this,c=a.getDimensions(),b='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:false" style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=\'0\'); border: 1px solid red; height:'+c.height+"px; width:"+c.width+'px" />',a.elements.bgiframe=a.elements.wrapper.prepend(b).children(".qtip-bgiframe:first")}a.fn.qtip=function(d,e){var f,g,h,i,j,k,l,m;if("string"==typeof d){if("object"!=typeof a(this).data("qtip")&&a.fn.qtip.log.error.call(self,1,a.fn.qtip.constants.NO_TOOLTIP_PRESENT,!1),"api"==d)return a(this).data("qtip").interfaces[a(this).data("qtip").current];if("interfaces"==d)return a(this).data("qtip").interfaces
}else d||(d={}),("object"!=typeof d.content||d.content.jquery&&d.content.length>0)&&(d.content={text:d.content}),"object"!=typeof d.content.title&&(d.content.title={text:d.content.title}),"object"!=typeof d.position&&(d.position={corner:d.position}),"object"!=typeof d.position.corner&&(d.position.corner={target:d.position.corner,tooltip:d.position.corner}),"object"!=typeof d.show&&(d.show={when:d.show}),"object"!=typeof d.show.when&&(d.show.when={event:d.show.when}),"object"!=typeof d.show.effect&&(d.show.effect={type:d.show.effect}),"object"!=typeof d.hide&&(d.hide={when:d.hide}),"object"!=typeof d.hide.when&&(d.hide.when={event:d.hide.when}),"object"!=typeof d.hide.effect&&(d.hide.effect={type:d.hide.effect}),"object"!=typeof d.style&&(d.style={name:d.style}),d.style=n(d.style),i=a.extend(!0,{},a.fn.qtip.defaults,d),i.style=o.call({options:i},i.style),i.user=a.extend(!0,{},d);return a(this).each(function(){if("string"==typeof d){if(k=d.toLowerCase(),h=a(this).qtip("interfaces"),"object"==typeof h)if(e===!0&&"destroy"==k)for(;h.length>0;)h[h.length-1].destroy();else for(e!==!0&&(h=[a(this).qtip("api")]),f=0;f<h.length;f++)"destroy"==k?h[f].destroy():h[f].status.rendered===!0&&("show"==k?h[f].show():"hide"==k?h[f].hide():"focus"==k?h[f].focus():"disable"==k?h[f].disable(!0):"enable"==k&&h[f].disable(!1))}else{for(l=a.extend(!0,{},i),l.hide.effect.length=i.hide.effect.length,l.show.effect.length=i.show.effect.length,l.position.container===!1&&(l.position.container=a(document.body)),l.position.target===!1&&(l.position.target=a(this)),l.show.when.target===!1&&(l.show.when.target=a(this)),l.hide.when.target===!1&&(l.hide.when.target=a(this)),g=a.fn.qtip.interfaces.length,f=0;g>f;f++)if("undefined"==typeof a.fn.qtip.interfaces[f]){g=f;break}j=new b(a(this),l,g),a.fn.qtip.interfaces[g]=j,"object"==typeof a(this).data("qtip")?("undefined"==typeof a(this).attr("qtip")&&(a(this).data("qtip").current=a(this).data("qtip").interfaces.length),a(this).data("qtip").interfaces.push(j)):a(this).data("qtip",{current:0,interfaces:[j]}),l.content.prerender===!1&&l.show.when.event!==!1&&l.show.ready!==!0?l.show.when.target.bind(l.show.when.event+".qtip-"+g+"-create",{qtip:g},function(b){m=a.fn.qtip.interfaces[b.data.qtip],m.options.show.when.target.unbind(m.options.show.when.event+".qtip-"+b.data.qtip+"-create"),m.cache.mouse={x:b.pageX,y:b.pageY},c.call(m),m.options.show.when.target.trigger(m.options.show.when.event)}):(j.cache.mouse={x:l.show.when.target.offset().left,y:l.show.when.target.offset().top},c.call(j))}})},a(document).ready(function(){a.fn.qtip.cache={screen:{scroll:{left:a(window).scrollLeft(),top:a(window).scrollTop()},width:a(window).width(),height:a(window).height()}};var b;a(window).bind("scroll",function(c){clearTimeout(b),b=setTimeout(function(){for("scroll"===c.type?a.fn.qtip.cache.screen.scroll={left:a(window).scrollLeft(),top:a(window).scrollTop()}:(a.fn.qtip.cache.screen.width=a(window).width(),a.fn.qtip.cache.screen.height=a(window).height()),i=0;i<a.fn.qtip.interfaces.length;i++){var b=a.fn.qtip.interfaces[i];b.status.rendered===!0&&("static"!==b.options.position.type||b.options.position.adjust.scroll&&"scroll"===c.type)&&b.updatePosition(c,!0)}},100)}),a(document).bind("mousedown.qtip",function(b){0===a(b.target).parents("div.qtip").length&&a(".qtip[unfocus]").each(function(){var c=a(this).qtip("api");a(this).is(":visible")&&!c.status.disabled&&a(b.target).add(c.elements.target).length>1&&c.hide(b)})})}),a.fn.qtip.interfaces=[],a.fn.qtip.log={error:function(){return this}},a.fn.qtip.constants={},a.fn.qtip.defaults={content:{prerender:!1,text:!1,url:!1,data:null,title:{text:!1,button:!1}},position:{target:!1,corner:{target:"bottomRight",tooltip:"topLeft"},adjust:{x:0,y:0,mouse:!0,screen:!1,scroll:!0},type:"absolute",container:!1},show:{when:{target:!1,event:"mouseover"},effect:{type:"fade",length:100},delay:140,solo:!1,ready:!1},hide:{when:{target:!1,event:"mouseout"},effect:{type:"fade",length:100},delay:0,fixed:!1},api:{beforeRender:function(){},onRender:function(){},beforePositionUpdate:function(){},onPositionUpdate:function(){},beforeShow:function(){},onShow:function(){},beforeHide:function(){},onHide:function(){},beforeContentUpdate:function(){},onContentUpdate:function(){},beforeContentLoad:function(){},onContentLoad:function(){},beforeTitleUpdate:function(){},onTitleUpdate:function(){},beforeDestroy:function(){},onDestroy:function(){},beforeFocus:function(){},onFocus:function(){}}},a.fn.qtip.styles={defaults:{background:"white",color:"#111",overflow:"hidden",textAlign:"left",width:{min:0,max:250},padding:"5px 9px",border:{width:1,radius:0,color:"#d3d3d3"},tip:{corner:!1,color:!1,size:{width:13,height:13},opacity:1},title:{background:"#e1e1e1",fontWeight:"bold",padding:"7px 12px"},button:{cursor:"pointer"},classes:{target:"",tip:"qtip-tip",title:"qtip-title",button:"qtip-button",content:"qtip-content",active:"qtip-active"}},cream:{border:{width:3,radius:0,color:"#F9E98E"},title:{background:"#F0DE7D",color:"#A27D35"},background:"#FBF7AA",color:"#A27D35",classes:{tooltip:"qtip-cream"}},light:{border:{width:3,radius:0,color:"#E2E2E2"},title:{background:"#f1f1f1",color:"#454545"},background:"white",color:"#454545",classes:{tooltip:"qtip-light"}},dark:{border:{width:3,radius:0,color:"#303030"},title:{background:"#404040",color:"#f3f3f3"},background:"#505050",color:"#f3f3f3",classes:{tooltip:"qtip-dark"}},red:{border:{width:3,radius:0,color:"#CE6F6F"},title:{background:"#f28279",color:"#9C2F2F"},background:"#F79992",color:"#9C2F2F",classes:{tooltip:"qtip-red"}},green:{border:{width:3,radius:0,color:"#A9DB66"},title:{background:"#b9db8c",color:"#58792E"},background:"#CDE6AC",color:"#58792E",classes:{tooltip:"qtip-green"}},blue:{border:{width:3,radius:0,color:"#ADD9ED"},title:{background:"#D0E9F5",color:"#5E99BD"},background:"#E5F6FE",color:"#4D9FBF",classes:{tooltip:"qtip-blue"}}}}(joms.jQuery),function(a){a.fn.stretchToFit=function(){return function(a){a.css("width","100%"),a.css("width",a.width()-parseInt(a.css("borderLeftWidth"))-parseInt(a.css("borderRightWidth"))-parseInt(a.css("padding-left"))-parseInt(a.css("padding-right")))}(this),this}}(joms.jQuery),function(a){a.fn.defaultValue=function(a,b){function c(){e.val()==a&&e.val(""),e.removeClass(b)}function d(){var c=e.data("defaultText"),d=e.data("defaultClass"),f=e.val().length<1||e.val()==c||e.hasClass(d);f&&e.val(a),b!=d&&e.removeClass("_defaultClass"),e.toggleClass(b,f)}var e=this;return e.focus(c).blur(d),d(),e.data("defaultText",a),e.data("defaultClass",b),e}}(joms.jQuery),function(a){a.fn.serializeJSON=function(){var b={};return a.each(this.serializeArray(),function(){b[this.name]=this.value}),b}}(joms.jQuery),function(a){a.fn.tipsy=function(b){return b=a.extend({},a.fn.tipsy.defaults,b),this.each(function(){var c=a.fn.tipsy.elementOptions(this,b);a(this).hover(function(){a.data(this,"cancel.tipsy",!0);var b=a.data(this,"active.tipsy");b||(b=a('<div class="tipsy"><div class="tipsy-inner"/></div>'),b.css({position:"absolute",zIndex:1e5}),a.data(this,"active.tipsy",b)),(a(this).attr("title")||"string"!=typeof a(this).attr("original-title"))&&a(this).attr("original-title",a(this).attr("title")||"").removeAttr("title");var d;"string"==typeof c.title?d=a(this).attr("title"==c.title?"original-title":c.title):"function"==typeof c.title&&(d=c.title.call(this)),b.find(".tipsy-inner")[c.html?"html":"text"](d||c.fallback);var e=a.extend({},a(this).offset(),{width:this.offsetWidth,height:this.offsetHeight});b.get(0).className="tipsy",b.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);var f=b[0].offsetWidth,g=b[0].offsetHeight,h="function"==typeof c.gravity?c.gravity.call(this):c.gravity;switch(h.charAt(0)){case"n":b.css({top:e.top+e.height,left:e.left+e.width/2-f/2}).addClass("tipsy-north");break;case"s":b.css({top:e.top-g,left:e.left+e.width/2-f/2}).addClass("tipsy-south");break;case"e":b.css({top:e.top+e.height/2-g/2,left:e.left-f}).addClass("tipsy-east");break;case"w":b.css({top:e.top+e.height/2-g/2,left:e.left+e.width}).addClass("tipsy-west")}c.fade?b.css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:.8}):b.css({visibility:"visible"})},function(){a.data(this,"cancel.tipsy",!1);var b=this;setTimeout(function(){if(!a.data(this,"cancel.tipsy")){var d=a.data(b,"active.tipsy");c.fade?d.stop().fadeOut(function(){a(this).remove()}):d.remove()}},100)})})},a.fn.tipsy.elementOptions=function(b,c){return a.metadata?a.extend({},c,a(b).metadata()):c},a.fn.tipsy.defaults={fade:!1,fallback:"",gravity:"n",html:!1,title:"title"},a.fn.tipsy.autoNS=function(){return a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"},a.fn.tipsy.autoWE=function(){return a(this).offset().left>a(document).scrollLeft()+a(window).width()/2?"e":"w"}}(joms.jQuery);