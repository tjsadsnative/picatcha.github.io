(function(){
function f(a){throw a;}var h=void 0,l=!0,m=null,p=!1;function aa(a){return function(){return this[a]}}var r,s=this;function ba(a,b){var c=a.split("."),d=s;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&b!==h?d[e]=b:d=d[e]?d[e]:d[e]={}}function ca(a){a=a.split(".");for(var b=s,c;c=a.shift();)if(b[c]!=m)b=b[c];else return m;return b}function da(){}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return a===m}function ga(a){return"array"==ea(a)}function ha(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function u(a){return"string"==typeof a}function ia(a){return"number"==typeof a}function ja(a){return"function"==ea(a)}function ka(a){var b=typeof a;return"object"==b&&a!=m||"function"==b}function v(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;
function na(a,b,c){return a.call.apply(a.bind,arguments)}function oa(a,b,c){a||f(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function w(a,b,c){w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return w.apply(m,arguments)}
function pa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var x=Date.now||function(){return+new Date};function y(a,b){function c(){}c.prototype=b.prototype;a.n=b.prototype;a.prototype=new c};function qa(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}f(Error("Invalid JSON string: "+a))}function ra(a){var b=[];sa(new ta,a,b);return b.join("")}function ta(){this.Ka=h}
function sa(a,b,c){switch(typeof b){case "string":ua(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(b==m){c.push("null");break}if(ga(b)){var d=b.length;c.push("[");for(var e="",g=0;g<d;g++)c.push(e),e=b[g],sa(a,a.Ka?a.Ka.call(b,String(g),e):e,c),e=",";c.push("]");break}c.push("{");d="";for(g in b)Object.prototype.hasOwnProperty.call(b,g)&&(e=b[g],"function"!=typeof e&&(c.push(d),ua(g,c),c.push(":"),
sa(a,a.Ka?a.Ka.call(b,g,e):e,c),d=","));c.push("}");break;case "function":break;default:f(Error("Unknown type: "+typeof b))}}var va={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},wa=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function ua(a,b){b.push('"',a.replace(wa,function(a){if(a in va)return va[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return va[a]=e+b.toString(16)}),'"')};var xa={ed:["BC","AD"],dd:["Before Christ","Anno Domini"],gd:"JFMAMJJASOND".split(""),od:"JFMAMJJASOND".split(""),fd:"January February March April May June July August September October November December".split(" "),nd:"January February March April May June July August September October November December".split(" "),kd:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),qd:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ud:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
sd:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),md:"Sun Mon Tue Wed Thu Fri Sat".split(" "),rd:"Sun Mon Tue Wed Thu Fri Sat".split(" "),hd:"SMTWTFS".split(""),pd:"SMTWTFS".split(""),ld:["Q1","Q2","Q3","Q4"],jd:["1st quarter","2nd quarter","3rd quarter","4th quarter"],ad:["AM","PM"],bd:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],td:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],cd:["{1} 'at' {0}","{1} 'at' {0}","{1}, {0}","{1}, {0}"],nc:6,vd:[5,6],oc:5};function z(a){Error.captureStackTrace?Error.captureStackTrace(this,z):this.stack=Error().stack||"";a&&(this.message=String(a))}y(z,Error);z.prototype.name="CustomError";function ya(a,b){for(var c=1;c<arguments.length;c++){var d=String(arguments[c]).replace(/\$/g,"$$$$");a=a.replace(/\%s/,d)}return a}function za(a){if(!Aa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ba,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ca,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Da,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ea,"&quot;"));return a}var Ba=/&/g,Ca=/</g,Da=/>/g,Ea=/\"/g,Aa=/[&<>\"]/;
function B(a){a=String(a);var b=a.indexOf(".");-1==b&&(b=a.length);b=Math.max(0,2-b);return Array(b+1).join("0")+a};function Fa(a,b){b.unshift(a);z.call(this,ya.apply(m,b));b.shift();this.yd=a}y(Fa,z);Fa.prototype.name="AssertionError";function Ga(a,b){f(new Fa("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};function Ha(a,b,c){ia(a)?(this.b=new Date(a,b||0,c||1),Ia(this,c||1)):ka(a)?(this.b=new Date(a.getFullYear(),a.getMonth(),a.getDate()),Ia(this,a.getDate())):(this.b=new Date(x()),this.b.setHours(0),this.b.setMinutes(0),this.b.setSeconds(0),this.b.setMilliseconds(0))}r=Ha.prototype;r.Ca=xa.nc;r.Da=xa.oc;r.Y=function(){var a=new Ha(this.b);a.Ca=this.Ca;a.Da=this.Da;return a};r.getFullYear=function(){return this.b.getFullYear()};r.getYear=function(){return this.getFullYear()};r.getMonth=function(){return this.b.getMonth()};
r.getDate=function(){return this.b.getDate()};r.getTime=function(){return this.b.getTime()};r.getUTCHours=function(){return this.b.getUTCHours()};r.getTimezoneOffset=function(){return this.b.getTimezoneOffset()};function Ja(a){a=a.getTimezoneOffset();if(0==a)a="Z";else{var b=Math.abs(a)/60,c=Math.floor(b),b=60*(b-c);a=(0<a?"-":"+")+B(c)+":"+B(b)}return a}r.set=function(a){this.b=new Date(a.getFullYear(),a.getMonth(),a.getDate())};r.setFullYear=function(a){this.b.setFullYear(a)};r.setMonth=function(a){this.b.setMonth(a)};
r.setDate=function(a){this.b.setDate(a)};
r.add=function(a){if(a.$c||a.Jc){var b=this.getMonth()+a.Jc+12*a.$c,c=this.getYear()+Math.floor(b/12),b=b%12;0>b&&(b+=12);var d;a:{switch(b){case 1:d=0==c%4&&(0!=c%100||0==c%400)?29:28;break a;case 5:case 8:case 10:case 3:d=30;break a}d=31}d=Math.min(d,this.getDate());this.setDate(1);this.setFullYear(c);this.setMonth(b);this.setDate(d)}a.wc&&(a=new Date((new Date(this.getYear(),this.getMonth(),this.getDate(),12)).getTime()+864E5*a.wc),this.setDate(1),this.setFullYear(a.getFullYear()),this.setMonth(a.getMonth()),
this.setDate(a.getDate()),Ia(this,a.getDate()))};r.Na=function(a,b){return[this.getFullYear(),B(this.getMonth()+1),B(this.getDate())].join(a?"-":"")+(b?Ja(this):"")};r.toString=function(){return this.Na()};function Ia(a,b){a.getDate()!=b&&a.b.setUTCHours(a.b.getUTCHours()+(a.getDate()<b?1:-1))}r.valueOf=function(){return this.b.valueOf()};function Ka(a,b,c,d,e,g,k){this.b=ia(a)?new Date(a,b||0,c||1,d||0,e||0,g||0,k||0):new Date(a?a.getTime():x())}y(Ka,Ha);r=Ka.prototype;r.getHours=function(){return this.b.getHours()};
r.getMinutes=function(){return this.b.getMinutes()};r.getSeconds=function(){return this.b.getSeconds()};r.getMilliseconds=function(){return this.b.getMilliseconds()};r.getUTCHours=function(){return this.b.getUTCHours()};r.setHours=function(a){this.b.setHours(a)};r.setMinutes=function(a){this.b.setMinutes(a)};r.setSeconds=function(a){this.b.setSeconds(a)};r.setMilliseconds=function(a){this.b.setMilliseconds(a)};r.setUTCHours=function(a){this.b.setUTCHours(a)};
r.add=function(a){Ha.prototype.add.call(this,a);a.Fc&&this.setHours(this.b.getHours()+a.Fc);a.Ic&&this.setMinutes(this.b.getMinutes()+a.Ic);a.Rc&&this.setSeconds(this.b.getSeconds()+a.Rc)};r.Na=function(a,b){var c=Ha.prototype.Na.call(this,a);return a?c+" "+B(this.getHours())+":"+B(this.getMinutes())+":"+B(this.getSeconds())+(b?Ja(this):""):c+"T"+B(this.getHours())+B(this.getMinutes())+B(this.getSeconds())+(b?Ja(this):"")};r.toString=function(){return this.Na()};
r.Y=function(){var a=new Ka(this.b);a.Ca=this.Ca;a.Da=this.Da;return a};function La(a,b){var c={},d;for(d in a)b.call(h,a[d],d,a)&&(c[d]=a[d]);return c}function Ma(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Na(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var Oa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pa(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var g=0;g<Oa.length;g++)c=Oa[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var C=Array.prototype,Qa=C.indexOf?function(a,b,c){return C.indexOf.call(a,b,c)}:function(a,b,c){c=c==m?0:0>c?Math.max(0,a.length+c):c;if(u(a))return!u(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ra=C.forEach?function(a,b,c){C.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=u(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)},Sa=C.filter?function(a,b,c){return C.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],g=0,k=u(a)?
a.split(""):a,n=0;n<d;n++)if(n in k){var q=k[n];b.call(c,q,n,a)&&(e[g++]=q)}return e},Ta=C.some?function(a,b,c){return C.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=u(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&b.call(c,e[g],g,a))return l;return p};function Ua(a,b){var c=Qa(a,b),d;(d=0<=c)&&C.splice.call(a,c,1);return d}function Va(a){return C.concat.apply(C,arguments)}function Wa(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]};var Xa;var Ya,Za,$a,ab,bb,cb;function db(){return s.navigator?s.navigator.userAgent:m}ab=$a=Za=Ya=p;var eb;if(eb=db()){var fb=s.navigator;Ya=0==eb.indexOf("Opera");Za=!Ya&&-1!=eb.indexOf("MSIE");$a=!Ya&&-1!=eb.indexOf("WebKit");ab=!Ya&&!$a&&"Gecko"==fb.product}var gb=Ya,D=Za,E=ab,F=$a,hb=s.navigator;bb=-1!=(hb&&hb.platform||"").indexOf("Mac");var ib=db();cb=!!ib&&0<=ib.indexOf("iPhone");var jb=!!ib&&0<=ib.indexOf("iPad");function kb(){var a=s.document;return a?a.documentMode:h}var lb;
a:{var mb="",nb;if(gb&&s.opera)var ob=s.opera.version,mb="function"==typeof ob?ob():ob;else if(E?nb=/rv\:([^\);]+)(\)|;)/:D?nb=/MSIE\s+([^\);]+)(\)|;)/:F&&(nb=/WebKit\/(\S+)/),nb)var pb=nb.exec(db()),mb=pb?pb[1]:"";if(D){var qb=kb();if(qb>parseFloat(mb)){lb=String(qb);break a}}lb=mb}var rb={};
function G(a){var b;if(!(b=rb[a])){b=0;for(var c=String(lb).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),g=0;0==b&&g<e;g++){var k=c[g]||"",n=d[g]||"",q=RegExp("(\\d*)(\\D*)","g"),N=RegExp("(\\d*)(\\D*)","g");do{var t=q.exec(k)||["","",""],A=N.exec(n)||["","",""];if(0==t[0].length&&0==A[0].length)break;b=((0==t[1].length?0:parseInt(t[1],10))<(0==A[1].length?0:parseInt(A[1],10))?-1:(0==t[1].length?0:parseInt(t[1],
10))>(0==A[1].length?0:parseInt(A[1],10))?1:0)||((0==t[2].length)<(0==A[2].length)?-1:(0==t[2].length)>(0==A[2].length)?1:0)||(t[2]<A[2]?-1:t[2]>A[2]?1:0)}while(0==b)}b=rb[a]=0<=b}return b}var sb=s.document,tb=!sb||!D?h:kb()||("CSS1Compat"==sb.compatMode?parseInt(lb,10):5);var ub=!E&&!D||D&&D&&9<=tb||E&&G("1.9.1");D&&G("9");function vb(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function wb(a){this.Aa=a||s.document||document}wb.prototype.createElement=function(a){return this.Aa.createElement(a)};wb.prototype.d=function(){return this.Aa.parentWindow||this.Aa.defaultView};wb.prototype.appendChild=function(a,b){a.appendChild(b)};wb.prototype.Kb=function(a){return ub&&a.children!=h?a.children:Sa(a.childNodes,function(a){return 1==a.nodeType})};var xb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function yb(a){var b=a.match(xb);a=b[1];var c=b[2],d=b[3],b=b[4],e="";a&&(e+=a+":");d&&(e+="//",c&&(e+=c+"@"),e+=d,b&&(e+=":"+b));return e};var zb="StopIteration"in s?s.StopIteration:Error("StopIteration");function H(){}H.prototype.next=function(){f(zb)};H.prototype.Q=function(){return this};function Ab(a){if(a instanceof H)return a;if("function"==typeof a.Q)return a.Q(p);if(ha(a)){var b=0,c=new H;c.next=function(){for(;;){b>=a.length&&f(zb);if(b in a)return a[b++];b++}};return c}f(Error("Not implemented"))}
function Bb(a,b){if(ha(a))try{Ra(a,b,h)}catch(c){c!==zb&&f(c)}else{a=Ab(a);try{for(;;)b.call(h,a.next(),h,a)}catch(d){d!==zb&&f(d)}}}function Cb(a){if(ha(a))return Wa(a);a=Ab(a);var b=[];Bb(a,function(a){b.push(a)});return b};function Db(a){if("function"==typeof a.A)return a.A();if(u(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ma(a)}function Eb(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(ha(a)||u(a))Ra(a,b,c);else{var d;if("function"==typeof a.aa)d=a.aa();else if("function"!=typeof a.A)if(ha(a)||u(a)){d=[];for(var e=a.length,g=0;g<e;g++)d.push(g)}else d=Na(a);else d=h;for(var e=Db(a),g=e.length,k=0;k<g;k++)b.call(c,e[k],d&&d[k],a)}};function Fb(a,b){this.q={};this.g=[];var c=arguments.length;if(1<c){c%2&&f(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Fb?(c=a.aa(),d=a.A()):(c=Na(a),d=Ma(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}r=Fb.prototype;r.c=0;r.va=0;r.A=function(){Gb(this);for(var a=[],b=0;b<this.g.length;b++)a.push(this.q[this.g[b]]);return a};r.aa=function(){Gb(this);return this.g.concat()};r.ka=function(a){return Hb(this.q,a)};
r.clear=function(){this.q={};this.va=this.c=this.g.length=0};r.remove=function(a){return Hb(this.q,a)?(delete this.q[a],this.c--,this.va++,this.g.length>2*this.c&&Gb(this),l):p};function Gb(a){if(a.c!=a.g.length){for(var b=0,c=0;b<a.g.length;){var d=a.g[b];Hb(a.q,d)&&(a.g[c++]=d);b++}a.g.length=c}if(a.c!=a.g.length){for(var e={},c=b=0;b<a.g.length;)d=a.g[b],Hb(e,d)||(a.g[c++]=d,e[d]=1),b++;a.g.length=c}}r.get=function(a,b){return Hb(this.q,a)?this.q[a]:b};
r.set=function(a,b){Hb(this.q,a)||(this.c++,this.g.push(a),this.va++);this.q[a]=b};r.Y=function(){return new Fb(this)};r.Q=function(a){Gb(this);var b=0,c=this.g,d=this.q,e=this.va,g=this,k=new H;k.next=function(){for(;;){e!=g.va&&f(Error("The map has changed since the iterator was created"));b>=c.length&&f(zb);var k=c[b++];return a?k:d[k]}};return k};function Hb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Ib(a,b){var c;if(a instanceof Ib)this.l=b!==h?b:a.l,Jb(this,a.ga),c=a.Oa,I(this),this.Oa=c,c=a.la,I(this),this.la=c,Kb(this,a.Ja),c=a.Ha,I(this),this.Ha=c,Lb(this,a.N.Y()),c=a.Ea,I(this),this.Ea=c;else if(a&&(c=String(a).match(xb))){this.l=!!b;Jb(this,c[1]||"",l);var d=c[2]||"";I(this);this.Oa=d?decodeURIComponent(d):"";d=c[3]||"";I(this);this.la=d?decodeURIComponent(d):"";Kb(this,c[4]);d=c[5]||"";I(this);this.Ha=d?decodeURIComponent(d):"";Lb(this,c[6]||"",l);c=c[7]||"";I(this);this.Ea=c?
decodeURIComponent(c):""}else this.l=!!b,this.N=new Mb(m,0,this.l)}r=Ib.prototype;r.ga="";r.Oa="";r.la="";r.Ja=m;r.Ha="";r.Ea="";r.Hc=p;r.l=p;
r.toString=function(){var a=[],b=this.ga;b&&a.push(Nb(b,Ob),":");if(b=this.la){a.push("//");var c=this.Oa;c&&a.push(Nb(c,Ob),"@");a.push(encodeURIComponent(String(b)));b=this.Ja;b!=m&&a.push(":",String(b))}if(b=this.Ha)this.la&&"/"!=b.charAt(0)&&a.push("/"),a.push(Nb(b,"/"==b.charAt(0)?Pb:Qb));(b=this.N.toString())&&a.push("?",b);(b=this.Ea)&&a.push("#",Nb(b,Rb));return a.join("")};r.Y=function(){return new Ib(this)};
function Jb(a,b,c){I(a);a.ga=c?b?decodeURIComponent(b):"":b;a.ga&&(a.ga=a.ga.replace(/:$/,""))}function Kb(a,b){I(a);b?(b=Number(b),(isNaN(b)||0>b)&&f(Error("Bad port number "+b)),a.Ja=b):a.Ja=m}function Lb(a,b,c){I(a);b instanceof Mb?(a.N=b,a.N.nb(a.l)):(c||(b=Nb(b,Sb)),a.N=new Mb(b,0,a.l))}function I(a){a.Hc&&f(Error("Tried to modify a read-only Uri"))}r.nb=function(a){this.l=a;this.N&&this.N.nb(a);return this};function Nb(a,b){return u(a)?encodeURI(a).replace(b,Tb):m}
function Tb(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Ob=/[#\/\?@]/g,Qb=/[\#\?:]/g,Pb=/[\#\?]/g,Sb=/[\#\?@]/g,Rb=/#/g;function Mb(a,b,c){this.j=a||m;this.l=!!c}function Ub(a){if(!a.f&&(a.f=new Fb,a.c=0,a.j))for(var b=a.j.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),e=m,g=m;0<=d?(e=b[c].substring(0,d),g=b[c].substring(d+1)):e=b[c];e=decodeURIComponent(e.replace(/\+/g," "));e=Vb(a,e);a.add(e,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}r=Mb.prototype;
r.f=m;r.c=m;r.add=function(a,b){Ub(this);this.j=m;a=Vb(this,a);var c=this.f.get(a);c||this.f.set(a,c=[]);c.push(b);this.c++;return this};r.remove=function(a){Ub(this);a=Vb(this,a);return this.f.ka(a)?(this.j=m,this.c-=this.f.get(a).length,this.f.remove(a)):p};r.clear=function(){this.f=this.j=m;this.c=0};r.ka=function(a){Ub(this);a=Vb(this,a);return this.f.ka(a)};r.aa=function(){Ub(this);for(var a=this.f.A(),b=this.f.aa(),c=[],d=0;d<b.length;d++)for(var e=a[d],g=0;g<e.length;g++)c.push(b[d]);return c};
r.A=function(a){Ub(this);var b=[];if(a)this.ka(a)&&(b=Va(b,this.f.get(Vb(this,a))));else{a=this.f.A();for(var c=0;c<a.length;c++)b=Va(b,a[c])}return b};r.set=function(a,b){Ub(this);this.j=m;a=Vb(this,a);this.ka(a)&&(this.c-=this.f.get(a).length);this.f.set(a,[b]);this.c++;return this};r.get=function(a,b){var c=a?this.A(a):[];return 0<c.length?String(c[0]):b};
r.toString=function(){if(this.j)return this.j;if(!this.f)return"";for(var a=[],b=this.f.aa(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.A(d),g=0;g<d.length;g++){var k=e;""!==d[g]&&(k+="="+encodeURIComponent(String(d[g])));a.push(k)}return this.j=a.join("&")};r.Y=function(){var a=new Mb;a.j=this.j;this.f&&(a.f=this.f.Y(),a.c=this.c);return a};function Vb(a,b){var c=String(b);a.l&&(c=c.toLowerCase());return c}
r.nb=function(a){a&&!this.l&&(Ub(this),this.j=m,Eb(this.f,function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),this.remove(d),0<a.length&&(this.j=m,this.f.set(Vb(this,d),Wa(a)),this.c+=a.length))},this));this.l=a};var Wb="closure_listenable_"+(1E6*Math.random()|0),Xb=0;function Yb(a,b,c,d,e,g){this.L=a;this.bc=b;this.src=c;this.type=d;this.capture=!!e;this.na=g;this.key=++Xb;this.s=this.X=p}Yb.prototype.handleEvent=function(a){return this.L.call(this.na||this.src,a)};var Zb=!D||D&&9<=tb,$b=D&&!G("9");!F||G("528");E&&G("1.9b")||D&&G("8")||gb&&G("9.5")||F&&G("528");E&&!G("8")||D&&G("9");function J(){0!=ac&&(this.wd=Error().stack,bc[v(this)]=this)}var ac=0,bc={};J.prototype.$=p;J.prototype.Va=function(){if(!this.$&&(this.$=l,this.e(),0!=ac)){var a=v(this);delete bc[a]}};J.prototype.e=function(){if(this.Zb)for(;this.Zb.length;)this.Zb.shift()()};function cc(a){a&&"function"==typeof a.Va&&a.Va()};function dc(a,b){this.type=a;this.currentTarget=this.target=b}r=dc.prototype;r.e=function(){};r.Va=function(){};r.U=p;r.defaultPrevented=p;r.ic=l;r.preventDefault=function(){this.defaultPrevented=l;this.ic=p};function ec(a){ec[" "](a);return a}ec[" "]=da;function fc(a,b){try{return ec(a[b]),l}catch(c){}return p};function gc(a,b){a&&hc(this,a,b)}y(gc,dc);r=gc.prototype;r.target=m;r.relatedTarget=m;r.offsetX=0;r.offsetY=0;r.clientX=0;r.clientY=0;r.screenX=0;r.screenY=0;r.button=0;r.keyCode=0;r.charCode=0;r.ctrlKey=p;r.altKey=p;r.shiftKey=p;r.metaKey=p;r.Lc=p;r.Ba=m;
function hc(a,b,c){var d=a.type=b.type;dc.call(a,d);a.target=b.target||b.srcElement;a.currentTarget=c;(c=b.relatedTarget)?E&&(fc(c,"nodeName")||(c=m)):"mouseover"==d?c=b.fromElement:"mouseout"==d&&(c=b.toElement);a.relatedTarget=c;a.offsetX=F||b.offsetX!==h?b.offsetX:b.layerX;a.offsetY=F||b.offsetY!==h?b.offsetY:b.layerY;a.clientX=b.clientX!==h?b.clientX:b.pageX;a.clientY=b.clientY!==h?b.clientY:b.pageY;a.screenX=b.screenX||0;a.screenY=b.screenY||0;a.button=b.button;a.keyCode=b.keyCode||0;a.charCode=
b.charCode||("keypress"==d?b.keyCode:0);a.ctrlKey=b.ctrlKey;a.altKey=b.altKey;a.shiftKey=b.shiftKey;a.metaKey=b.metaKey;a.Lc=bb?b.metaKey:b.ctrlKey;a.state=b.state;a.Ba=b;b.defaultPrevented&&a.preventDefault();delete a.U}r.preventDefault=function(){gc.n.preventDefault.call(this);var a=this.Ba;if(a.preventDefault)a.preventDefault();else if(a.returnValue=p,$b)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};r.e=function(){};var ic={},K={},jc={},kc={};
function lc(a,b,c,d,e){if(ga(b)){for(var g=0;g<b.length;g++)lc(a,b[g],c,d,e);return m}c=mc(c);if(a&&a[Wb])a=a.ab(b,c,d,e);else a:{b||f(Error("Invalid event type"));d=!!d;var k=K;b in k||(k[b]={c:0,G:0});k=k[b];d in k||(k[d]={c:0,G:0},k.c++);var k=k[d],g=v(a),n;k.G++;if(k[g]){n=k[g];for(var q=0;q<n.length;q++)if(k=n[q],k.L==c&&k.na==e){if(k.s)break;n[q].X=p;a=n[q];break a}}else n=k[g]=[],k.c++;q=nc();k=new Yb(c,q,a,b,d,e);k.X=p;q.src=a;q.L=k;n.push(k);jc[g]||(jc[g]=[]);jc[g].push(k);a.addEventListener?
a.addEventListener(b,q,d):a.attachEvent(b in kc?kc[b]:kc[b]="on"+b,q);a=ic[k.key]=k}return a}function nc(){var a=oc,b=Zb?function(c){return a.call(b.src,b.L,c)}:function(c){c=a.call(b.src,b.L,c);if(!c)return c};return b}function pc(a,b,c,d,e){if(ga(b))for(var g=0;g<b.length;g++)pc(a,b[g],c,d,e);else if(c=mc(c),a&&a[Wb])a.tb(b,c,d,e);else if(d=!!d,a=qc(a,b,d))for(g=0;g<a.length;g++)if(a[g].L==c&&a[g].capture==d&&a[g].na==e){rc(a[g]);break}}
function rc(a){if(ia(a)||!a||a.s)return p;var b=a.src;if(b&&b[Wb])return sc(b,a);var c=a.type,d=a.bc,e=a.capture;b.removeEventListener?b.removeEventListener(c,d,e):b.detachEvent&&b.detachEvent(c in kc?kc[c]:kc[c]="on"+c,d);b=v(b);jc[b]&&(d=jc[b],Ua(d,a),0==d.length&&delete jc[b]);a.s=l;if(d=K[c][e][b])d.Vb=l,tc(c,e,b,d);delete ic[a.key];return l}
function tc(a,b,c,d){if(!d.Fa&&d.Vb){for(var e=0,g=0;e<d.length;e++)d[e].s?d[e].bc.src=m:(e!=g&&(d[g]=d[e]),g++);d.length=g;d.Vb=p;0==g&&(delete K[a][b][c],K[a][b].c--,0==K[a][b].c&&(delete K[a][b],K[a].c--),0==K[a].c&&delete K[a])}}function qc(a,b,c){var d=K;return b in d&&(d=d[b],c in d&&(d=d[c],a=v(a),d[a]))?d[a]:m}
function uc(a,b,c,d,e){var g=1;b=v(b);if(a[b]){var k=--a.G,n=a[b];n.Fa?n.Fa++:n.Fa=1;try{for(var q=n.length,N=0;N<q;N++){var t=n[N];t&&!t.s&&(g&=vc(t,e)!==p)}}finally{a.G=Math.max(k,a.G),n.Fa--,tc(c,d,b,n)}}return Boolean(g)}function vc(a,b){a.X&&rc(a);return a.handleEvent(b)}
function oc(a,b){if(a.s)return l;var c=a.type,d=K;if(!(c in d))return l;var d=d[c],e,g;if(!Zb){e=b||ca("window.event");var k=l in d,n=p in d;if(k){if(0>e.keyCode||e.returnValue!=h)return l;a:{var q=p;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(N){q=l}if(q||e.returnValue==h)e.returnValue=l}}q=new gc;hc(q,e,this);e=l;try{if(k){for(var t=[],A=q.currentTarget;A;A=A.parentNode)t.push(A);g=d[l];g.G=g.c;for(var O=t.length-1;!q.U&&0<=O&&g.G;O--)q.currentTarget=t[O],e&=uc(g,t[O],c,l,q);if(n){g=d[p];g.G=
g.c;for(O=0;!q.U&&O<t.length&&g.G;O++)q.currentTarget=t[O],e&=uc(g,t[O],c,p,q)}}else e=vc(a,q)}finally{t&&(t.length=0)}return e}c=new gc(b,this);return e=vc(a,c)}var wc="__closure_events_fn_"+(1E9*Math.random()>>>0);function mc(a){return ja(a)?a:a[wc]||(a[wc]=function(b){return a.handleEvent(b)})};function xc(a){return yc(a||arguments.callee.caller,[])}
function yc(a,b){var c=[];if(0<=Qa(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(zc(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var g;g=d[e];switch(typeof g){case "object":g=g?"object":"null";break;case "string":break;case "number":g=String(g);break;case "boolean":g=g?"true":"false";break;case "function":g=(g=zc(g))?g:"[fn]";break;default:g=typeof g}40<g.length&&(g=g.substr(0,40)+"...");c.push(g)}b.push(a);c.push(")\n");try{c.push(yc(a.caller,b))}catch(k){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function zc(a){if(Ac[a])return Ac[a];a=String(a);if(!Ac[a]){var b=/function ([^\(]+)/.exec(a);Ac[a]=b?b[1]:"[Anonymous]"}return Ac[a]}var Ac={};function Bc(a,b,c,d,e){this.reset(a,b,c,d,e)}Bc.prototype.Sc=0;Bc.prototype.Ya=m;Bc.prototype.Xa=m;var Cc=0;Bc.prototype.reset=function(a,b,c,d,e){this.Sc="number"==typeof e?e:Cc++;this.mc=d||x();this.S=a;this.Tb=b;this.Pb=c;delete this.Ya;delete this.Xa};Bc.prototype.ob=function(a){this.S=a};function Dc(a){this.Ub=a}Dc.prototype.r=m;Dc.prototype.S=m;Dc.prototype.Sa=m;Dc.prototype.pa=m;function L(a,b){this.name=a;this.value=b}L.prototype.toString=aa("name");var Ec=new L("SHOUT",1200),M=new L("SEVERE",1E3),P=new L("WARNING",900),Fc=new L("INFO",800),Gc=new L("CONFIG",700),Hc=new L("FINE",500),Ic=new L("FINEST",300);r=Dc.prototype;r.getName=aa("Ub");r.getParent=aa("r");r.Kb=function(){this.Sa||(this.Sa={});return this.Sa};r.ob=function(a){this.S=a};
function Jc(a){if(a.S)return a.S;if(a.r)return Jc(a.r);Ga("Root logger has no level set.");return m}r.log=function(a,b,c){if(a.value>=Jc(this).value){a=this.Dc(a,b,c);b="log:"+a.Tb;s.console&&(s.console.timeStamp?s.console.timeStamp(b):s.console.markTimeline&&s.console.markTimeline(b));s.msWriteProfilerMark&&s.msWriteProfilerMark(b);for(b=this;b;){c=b;var d=a;if(c.pa)for(var e=0,g=h;g=c.pa[e];e++)g(d);b=b.getParent()}}};
r.Dc=function(a,b,c){var d=new Bc(a,String(b),this.Ub);if(c){d.Ya=c;var e;var g=arguments.callee.caller;try{var k;var n=ca("window.location.href");if(u(c))k={message:c,name:"Unknown error",lineNumber:"Not available",fileName:n,stack:"Not available"};else{var q,N,t=p;try{q=c.lineNumber||c.xd||"Not available"}catch(A){q="Not available",t=l}try{N=c.fileName||c.filename||c.sourceURL||s.$googDebugFname||n}catch(O){N="Not available",t=l}k=t||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,
lineNumber:q,fileName:N,stack:c.stack||"Not available"}:c}e="Message: "+za(k.message)+'\nUrl: <a href="view-source:'+k.fileName+'" target="_new">'+k.fileName+"</a>\nLine: "+k.lineNumber+"\n\nBrowser stack:\n"+za(k.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+za(xc(g)+"-> ")}catch(le){e="Exception trying to expose exception! You win, we lose. "+le}d.Xa=e}return d};r.info=function(a,b){this.log(Fc,a,b)};function Q(a){R.log(Hc,a,h)}function S(a){R.log(Ic,a,h)}var Kc={},Lc=m;
function Mc(){Lc||(Lc=new Dc(""),Kc[""]=Lc,Lc.ob(Gc))}function Nc(){Mc();return Lc}function Oc(a){Mc();var b;if(!(b=Kc[a])){b=new Dc(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=Oc(a.substr(0,c));c.Kb()[d]=b;b.r=c;Kc[a]=b}return b};function Pc(){this.gc=x()}var Qc=new Pc;Pc.prototype.set=function(a){this.gc=a};Pc.prototype.reset=function(){this.set(x())};Pc.prototype.get=aa("gc");function Rc(a){this.F=a||"";this.Yc=Qc}r=Rc.prototype;r.kc=l;r.Wc=l;r.Vc=l;r.lc=p;r.Xc=p;function Sc(a){return 10>a?"0"+a:String(a)}function Tc(a,b){var c=(a.mc-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function Uc(a){Rc.call(this,a)}y(Uc,Rc);function Vc(){this.Pc=w(this.qc,this);this.Za=new Uc;this.Za.kc=p;this.Nb=this.Za.lc=p;this.Ob="";this.Cc={}}
Vc.prototype.qc=function(a){if(!this.Cc[a.Pb]){var b;b=this.Za;var c=[];c.push(b.F," ");if(b.kc){var d=new Date(a.mc);c.push("[",Sc(d.getFullYear()-2E3)+Sc(d.getMonth()+1)+Sc(d.getDate())+" "+Sc(d.getHours())+":"+Sc(d.getMinutes())+":"+Sc(d.getSeconds())+"."+Sc(Math.floor(d.getMilliseconds()/10)),"] ")}b.Wc&&c.push("[",Tc(a,b.Yc.get()),"s] ");b.Vc&&c.push("[",a.Pb,"] ");b.Xc&&c.push("[",a.S.name,"] ");c.push(a.Tb,"\n");b.lc&&a.Ya&&c.push(a.Xa,"\n");b=c.join("");if(c=Wc)switch(a.S){case Ec:Xc(c,"info",
b);break;case M:Xc(c,"error",b);break;case P:Xc(c,"warn",b);break;default:Xc(c,"debug",b)}else window.opera?window.opera.postError(b):this.Ob+=b}};var Yc=m,Wc=window.console;function Zc(){Yc||(Yc=new Vc);if(-1!=window.location.href.indexOf("Debug=true")){var a=Yc;if(l!=a.Nb){var b=Nc(),c=a.Pc;b.pa||(b.pa=[]);b.pa.push(c);a.Nb=l}}}function Xc(a,b,c){if(a[b])a[b](c);else a.log(c)};function $c(a){"interactive"==document.readyState||"complete"==document.readyState?a():lc(document,"DOMContentLoaded",a)}ba("nuggad.util.isIOS",function(){var a=db();return 1==jb||1==cb||!fa(a.match(RegExp(".*ipod.*","ig")))});ba("nuggad.disclaimer.hide",function(){(u("nuggadLayerWrap")?document.getElementById("nuggadLayerWrap"):"nuggadLayerWrap").style.display="none"});function ad(){};function bd(){}y(bd,ad);bd.prototype.clear=function(){var a=Cb(this.Q(l)),b=this;Ra(a,function(a){b.remove(a)})};function cd(a,b){this.ea=a;this.F=b+"::"}y(cd,bd);r=cd.prototype;r.ea=m;r.F="";r.set=function(a,b){this.ea.set(this.F+a,b)};r.get=function(a){return this.ea.get(this.F+a)};r.remove=function(a){this.ea.remove(this.F+a)};r.Q=function(a){var b=this.ea.Q(l),c=this,d=new H;d.next=function(){for(var d=b.next();d.substr(0,c.F.length)!=c.F;)d=b.next();return a?d.substr(c.F.length):c.ea.get(d)};return d};function dd(a){this.m=a}y(dd,bd);function ed(a){if(!a.m)return p;try{return a.m.setItem("__sak","1"),a.m.removeItem("__sak"),l}catch(b){return p}}r=dd.prototype;r.set=function(a,b){try{this.m.setItem(a,b)}catch(c){0==this.m.length&&f("Storage mechanism: Storage disabled"),f("Storage mechanism: Quota exceeded")}};r.get=function(a){a=this.m.getItem(a);!u(a)&&a!==m&&f("Storage mechanism: Invalid value was encountered");return a};r.remove=function(a){this.m.removeItem(a)};
r.Q=function(a){var b=0,c=this.m,d=new H;d.next=function(){b>=c.length&&f(zb);var d=c.key(b++);if(a)return d;d=c.getItem(d);u(d)||f("Storage mechanism: Invalid value was encountered");return d};return d};r.clear=function(){this.m.clear()};r.key=function(a){return this.m.key(a)};function fd(){var a=m;try{a=window.localStorage||m}catch(b){}this.m=a}y(fd,dd);function gd(){var a=m;try{a=window.sessionStorage||m}catch(b){}this.m=a}y(gd,dd);var hd=db(),id;if(!fa(hd.match(RegExp("OS 7_","ig")))||!fa(hd.match(RegExp("OS 8_","ig")))){var jd=new gd;id=ed(jd)?new cd(jd,"nuggad"):m}else{var kd=new fd;id=ed(kd)?new cd(kd,"nuggad"):m}var T=id;function ld(a){if(T!=m&&(a=T.get(a),a!=m))return qa(a)};function md(){J.call(this);this.p={};this.pc=this}y(md,J);md.prototype[Wb]=l;r=md.prototype;r.gb=m;r.addEventListener=function(a,b,c,d){lc(this,a,b,c,d)};r.removeEventListener=function(a,b,c,d){pc(this,a,b,c,d)};
r.dispatchEvent=function(a){var b,c=this.gb;if(c)for(b=[];c;c=c.gb)b.push(c);var c=this.pc,d=a.type||a;if(u(a))a=new dc(a,c);else if(a instanceof dc)a.target=a.target||c;else{var e=a;a=new dc(d,c);Pa(a,e)}var e=l,g;if(b)for(var k=b.length-1;!a.U&&0<=k;k--)g=a.currentTarget=b[k],e=nd(g,d,l,a)&&e;a.U||(g=a.currentTarget=c,e=nd(g,d,l,a)&&e,a.U||(e=nd(g,d,p,a)&&e));if(b)for(k=0;!a.U&&k<b.length;k++)g=a.currentTarget=b[k],e=nd(g,d,p,a)&&e;return e};
r.e=function(){md.n.e.call(this);var a=0,b;for(b in this.p){for(var c=this.p[b],d=0;d<c.length;d++)++a,delete ic[c[d].key],c[d].s=l;c.length=0}this.gb=m};r.ab=function(a,b,c,d){var e=this.p[a]||(this.p[a]=[]),g=od(e,b,c,d);-1<g?(a=e[g],a.X=p):(a=new Yb(b,m,this,a,!!c,d),a.X=p,e.push(a));return a};r.tb=function(a,b,c,d){if(!(a in this.p))return p;a=this.p[a];b=od(a,b,c,d);return-1<b?(c=a[b],delete ic[c.key],c.s=l,1==C.splice.call(a,b,1).length):p};
function sc(a,b){var c=b.type;if(!(c in a.p))return p;if(c=Ua(a.p[c],b))delete ic[b.key],b.s=l;return c}function nd(a,b,c,d){if(!(b in a.p))return l;var e=l;b=Wa(a.p[b]);for(var g=0;g<b.length;++g){var k=b[g];k&&(!k.s&&k.capture==c)&&(k.X&&sc(a,k),e=k.handleEvent(d)!==p&&e)}return e&&d.ic!=p}function od(a,b,c,d){for(var e=0;e<a.length;++e){var g=a[e];if(g.L==b&&g.capture==!!c&&g.na==d)return e}return-1};function pd(a,b){md.call(this);this.ca=a||1;this.ha=b||qd;this.Ra=w(this.Zc,this);this.$a=x()}y(pd,md);pd.prototype.enabled=p;var qd=s;r=pd.prototype;r.o=m;r.Zc=function(){if(this.enabled){var a=x()-this.$a;0<a&&a<0.8*this.ca?this.o=this.ha.setTimeout(this.Ra,this.ca-a):(this.o&&(this.ha.clearTimeout(this.o),this.o=m),this.dispatchEvent(rd),this.enabled&&(this.o=this.ha.setTimeout(this.Ra,this.ca),this.$a=x()))}};
r.start=function(){this.enabled=l;this.o||(this.o=this.ha.setTimeout(this.Ra,this.ca),this.$a=x())};r.stop=function(){this.enabled=p;this.o&&(this.ha.clearTimeout(this.o),this.o=m)};r.e=function(){pd.n.e.call(this);this.stop();delete this.ha};var rd="tick";function sd(a,b){ja(a)||(a&&"function"==typeof a.handleEvent?a=w(a.handleEvent,a):f(Error("Invalid listener argument")));return 2147483647<b?-1:qd.setTimeout(a,b||0)};Oc("goog.net.XhrIo");var td=Oc("nuggad.service");function ud(){T!=m&&T.clear()}function vd(a){var b=Math.round(new Ka/1E3);return La(a,function(a,d,e){a=e[d]&&e[d].expires;return a!=m?a>=b:p})}function wd(){var a=ld("cookies"),a=vd(a);T!=m&&T.set("cookies",ra(a))}function xd(a,b){b=qa(b);var c=b.key,d=ld(c);b.value=d;a.send(b.service,b);td.info("Read key "+c+" from local storage:");td.info(ra(d))}
function yd(a){a=qa(a);var b=a.key;a=a.value;var c=ld(b)||{},d={},e;for(e in c)d[e]=c[e];Pa(d,a||{});a=d;T!=m&&T.set(b,ra(a));td.info("Saved key "+b+" to local storage:");td.info(ra(a))};var zd={1:"NativeMessagingTransport",2:"FrameElementMethodTransport",3:"IframeRelayTransport",4:"IframePollingTransport",5:"FlashTransport",6:"NixTransport"},Ad=["pu","lru","pru","lpu","ppu"],U={};function Bd(){for(var a=10,b=Cd,c=b.length,d="";0<a--;)d+=b.charAt(Math.floor(Math.random()*c));return d}var Cd="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",R=Oc("goog.net.xpc");function V(a){J.call(this);this.z=a||Xa||(Xa=new wb)}y(V,J);V.prototype.ia=0;V.prototype.d=function(){return this.z.d()};V.prototype.getName=function(){return zd[this.ia]||""};function Dd(a,b){V.call(this,b);this.a=a;this.ua=this.a.h.ppu;this.Qc=this.a.h.lpu;this.La=[]}var Ed,Fd;y(Dd,V);r=Dd.prototype;r.Mc=5;r.ia=4;r.H=0;r.ja=p;r.R=p;r.fc=m;function Gd(a){return"googlexpc_"+a.a.name+"_msg"}function Hd(a){return"googlexpc_"+a.a.name+"_ack"}function Id(a){try{if(!a.$&&Jd(a.a))return a.a.D.frames||{}}catch(b){Q("error retrieving peer frames")}return{}}
r.w=function(){if(!this.$&&Jd(this.a)){Q("transport connect called");if(!this.R){Q("initializing...");var a=Gd(this);this.fa=Kd(this,a);this.eb=this.d().frames[a];a=Hd(this);this.W=Kd(this,a);this.Pa=this.d().frames[a];this.R=l}if(!Ld(this,Gd(this))||!Ld(this,Hd(this))){S("foreign frames not (yet) present");if(1==W(this.a))this.fc||0<this.Mc--||(S("Inner peer reconnect triggered."),this.a.name=Bd(),S("switching channels: "+this.a.name),Md(this),this.R=p,this.fc=Kd(this,"googlexpc_reconnect_"+this.a.name));
else if(0==W(this.a)){S("outerPeerReconnect called");for(var a=Id(this),b=a.length,c=0;c<b;c++){var d;try{a[c]&&a[c].name&&(d=a[c].name)}catch(e){}if(d){var g=d.split("_");if(3==g.length&&"googlexpc"==g[0]&&"reconnect"==g[1]){this.a.name=g[2];Md(this);this.R=p;break}}}}this.d().setTimeout(w(this.w,this),100)}else Q("foreign frames present"),this.Rb=new Nd(this,Id(this)[Gd(this)],w(this.Oc,this)),this.ub=new Nd(this,Id(this)[Hd(this)],w(this.Nc,this)),this.Bb()}};
function Kd(a,b){S("constructing sender frame: "+b);var c;c=document.createElement("iframe");var d=c.style;d.position="absolute";d.top="-10px";d.left="10px";d.width="1px";d.height="1px";c.id=c.name=b;c.src=a.ua+"#INITIAL";a.d().document.body.appendChild(c);return c}function Md(a){S("deconstructSenderFrames called");a.fa&&(a.fa.parentNode.removeChild(a.fa),a.fa=m,a.eb=m);a.W&&(a.W.parentNode.removeChild(a.W),a.W=m,a.Pa=m)}
function Ld(a,b){S("checking for receive frame: "+b);try{var c=Id(a)[b];if(!c||0!=c.location.href.indexOf(a.Qc))return p}catch(d){return p}return l}r.Bb=function(){var a=Id(this);!a[Hd(this)]||!a[Gd(this)]?(this.Ab||(this.Ab=w(this.Bb,this)),this.d().setTimeout(this.Ab,100),Q("local frames not (yet) present")):(this.Sb=new Od(this.ua,this.eb),this.xa=new Od(this.ua,this.Pa),Q("local frames ready"),this.d().setTimeout(w(function(){this.Sb.send("SETUP");this.ja=this.zd=l;Q("SETUP sent")},this),100))};
function Pd(a){if(a.lb&&a.dc){if(a.a.C(),a.Z){Q("delivering queued messages ("+a.Z.length+")");for(var b=0,c;b<a.Z.length;b++)c=a.Z[b],a.a.I(c.Tc,c.ib);delete a.Z}}else S("checking if connected: ack sent:"+a.lb+", ack rcvd: "+a.dc)}
r.Oc=function(a){S("msg received: "+a);if("SETUP"==a)this.xa&&(this.xa.send("SETUP_ACK"),S("SETUP_ACK sent"),this.lb=l,Pd(this));else if(this.a.u()||this.lb){var b=a.indexOf("|"),c=a.substring(0,b);a=a.substring(b+1);b=c.indexOf(",");if(-1==b){var d;this.xa.send("ACK:"+c);Qd(this,a)}else d=c.substring(0,b),this.xa.send("ACK:"+d),c=c.substring(b+1).split("/"),b=parseInt(c[0],10),c=parseInt(c[1],10),1==b&&(this.hb=[]),this.hb.push(a),b==c&&(Qd(this,this.hb.join("")),delete this.hb)}else R.log(P,"received msg, but channel is not connected",
h)};r.Nc=function(a){S("ack received: "+a);"SETUP_ACK"==a?(this.ja=p,this.dc=l,Pd(this)):this.a.u()?this.ja?parseInt(a.split(":")[1],10)==this.H?(this.ja=p,Rd(this)):R.log(P,"got ack with wrong sequence",h):R.log(P,"got unexpected ack",h):R.log(P,"received ack, but channel not connected",h)};function Rd(a){if(!a.ja&&a.La.length){var b=a.La.shift();++a.H;a.Sb.send(a.H+b);S("msg sent: "+a.H+b);a.ja=l}}
function Qd(a,b){var c=b.indexOf(":"),d=b.substr(0,c),c=b.substring(c+1);a.a.u()?a.a.I(d,c):((a.Z||(a.Z=[])).push({Tc:d,ib:c}),S("queued delivery"))}r.wa=3800;r.send=function(a,b){var c=a+":"+b;if(!D||b.length<=this.wa)this.La.push("|"+c);else for(var d=b.length,e=Math.ceil(d/this.wa),g=0,k=1;g<d;)this.La.push(","+k+"/"+e+"|"+c.substr(g,this.wa)),k++,g+=this.wa;Rd(this)};
r.e=function(){Dd.n.e.call(this);var a=Sd;Ua(a,this.Rb);Ua(a,this.ub);this.Rb=this.ub=m;vb(this.fa);vb(this.W);this.eb=this.Pa=this.fa=this.W=m};
var Sd=[],Td=w(function(){var a=Sd,b,c=p;try{for(var d=0;b=a[d];d++){var e;if(!(e=c)){var g=b,k=g.cc.location.href;if(k!=g.Eb){g.Eb=k;var n=k.split("#")[1];n&&(n=n.substr(1),g.uc(decodeURIComponent(n)));e=l}else e=p}c=e}}catch(q){if(R.info("receive_() failed: "+q),b=b.i.a,R.info("Transport Error"),b.close(),!a.length)return}a=x();c&&(Ed=a);Fd=window.setTimeout(Td,1E3>a-Ed?10:100)},Dd);function Ud(){Q("starting receive-timer");Ed=x();Fd&&window.clearTimeout(Fd);Fd=window.setTimeout(Td,10)}
function Od(a,b){this.ua=a;this.jc=b;this.Ua=0}Od.prototype.send=function(a){this.Ua=++this.Ua%2;a=this.ua+"#"+this.Ua+encodeURIComponent(a);try{F?this.jc.location.href=a:this.jc.location.replace(a)}catch(b){R.log(M,"sending failed",b)}Ud()};function Nd(a,b,c){this.i=a;this.cc=b;this.uc=c;this.Eb=this.cc.location.href.split("#")[0]+"#INITIAL";Sd.push(this);Ud()};function Vd(a,b){V.call(this,b);this.a=a;this.sa=[];this.yc=w(this.zc,this)}y(Vd,V);r=Vd.prototype;r.ia=2;r.kb=p;r.o=0;r.w=function(){0==W(this.a)?(this.B=this.a.ba,this.B.XPC_toOuter=w(this.Lb,this)):this.yb()};
r.yb=function(){var a=l;try{this.B||(this.B=this.d().frameElement),this.B&&this.B.XPC_toOuter&&(this.fb=this.B.XPC_toOuter,this.B.XPC_toOuter.XPC_toInner=w(this.Lb,this),a=p,this.send("tp","SETUP_ACK"),this.a.C())}catch(b){R.log(M,"exception caught while attempting setup: "+b,h)}a&&(this.xb||(this.xb=w(this.yb,this)),this.d().setTimeout(this.xb,100))};r.rb=function(a){0==W(this.a)&&!this.a.u()&&"SETUP_ACK"==a?(this.fb=this.B.XPC_toOuter.XPC_toInner,this.a.C()):f(Error("Got unexpected transport message."))};
r.Lb=function(a,b){!this.kb&&0==this.sa.length?this.a.I(a,b):(this.sa.push({Uc:a,ib:b}),1==this.sa.length&&(this.o=this.d().setTimeout(this.yc,1)))};r.zc=function(){for(;this.sa.length;){var a=this.sa.shift();this.a.I(a.Uc,a.ib)}};r.send=function(a,b){this.kb=l;this.fb(a,b);this.kb=p};r.e=function(){Vd.n.e.call(this);this.B=this.fb=m};function Wd(a,b){V.call(this,b);this.a=a;this.zb=a.at||"";this.hc=a.rat||"";var c=this.d();if(!c.nix_setup_complete){var d="Class GCXPC____NIXVBS_wrapper\n Private m_Transport\nPrivate m_Auth\nPublic Sub SetTransport(transport)\nIf isEmpty(m_Transport) Then\nSet m_Transport = transport\nEnd If\nEnd Sub\nPublic Sub SetAuth(auth)\nIf isEmpty(m_Auth) Then\nm_Auth = auth\nEnd If\nEnd Sub\nPublic Function GetAuthToken()\n GetAuthToken = m_Auth\nEnd Function\nPublic Sub SendMessage(service, payload)\n Call m_Transport."+
Xd+"(service, payload)\nEnd Sub\nPublic Sub CreateChannel(channel)\n Call m_Transport."+Yd+"(channel)\nEnd Sub\nPublic Sub GCXPC____NIXVBS_container()\n End Sub\nEnd Class\n Function GCXPC____NIXVBS_get_wrapper(transport, auth)\nDim wrap\nSet wrap = New GCXPC____NIXVBS_wrapper\nwrap.SetTransport transport\nwrap.SetAuth auth\nSet GCXPC____NIXVBS_get_wrapper = wrap\nEnd Function";try{c.execScript(d,"vbscript"),c.nix_setup_complete=l}catch(e){R.log(M,"exception caught while attempting global setup: "+
e,h)}}this[Xd]=this.Ec;this[Yd]=this.vc}y(Wd,V);var Xd="GCXPC____NIXJS_handle_message",Yd="GCXPC____NIXJS_create_channel";r=Wd.prototype;r.ia=6;r.da=p;r.M=m;r.w=function(){0==W(this.a)?this.wb():this.vb()};r.wb=function(){if(!this.da){var a=this.a.ba;try{a.contentWindow.opener=(0,this.d().GCXPC____NIXVBS_get_wrapper)(this,this.zb),this.da=l}catch(b){R.log(M,"exception caught while attempting setup: "+b,h)}this.da||this.d().setTimeout(w(this.wb,this),100)}};
r.vb=function(){if(!this.da){try{var a=this.d().opener;if(a&&"GCXPC____NIXVBS_container"in a){this.M=a;if(this.M.GetAuthToken()!=this.hc){R.log(M,"Invalid auth token from other party",h);return}this.M.CreateChannel((0,this.d().GCXPC____NIXVBS_get_wrapper)(this,this.zb));this.da=l;this.a.C()}}catch(b){R.log(M,"exception caught while attempting setup: "+b,h);return}this.da||this.d().setTimeout(w(this.vb,this),100)}};
r.vc=function(a){("unknown"!=typeof a||!("GCXPC____NIXVBS_container"in a))&&R.log(M,"Invalid NIX channel given to createChannel_",h);this.M=a;this.M.GetAuthToken()!=this.hc?R.log(M,"Invalid auth token from other party",h):this.a.C()};r.Ec=function(a,b){this.d().setTimeout(w(function(){this.a.I(a,b)},this),1)};r.send=function(a,b){"unknown"!==typeof this.M&&R.log(M,"NIX channel not connected",h);this.M.SendMessage(a,b)};r.e=function(){Wd.n.e.call(this);this.M=m};function X(a){J.call(this);this.oa=a;this.g={}}y(X,J);var Zd=[];X.prototype.ab=function(a,b,c,d,e){ga(b)||(Zd[0]=b,b=Zd);for(var g=0;g<b.length;g++){var k=lc(a,b[g],c||this,d||p,e||this.oa||this);if(!k)break;this.g[k.key]=k}return this};
X.prototype.tb=function(a,b,c,d,e){if(ga(b))for(var g=0;g<b.length;g++)this.tb(a,b[g],c,d,e);else{a:if(e=e||this.oa||this,d=!!d,c=mc(c||this),a&&a[Wb])a=a.p[b],b=-1,a&&(b=od(a,c,d,e)),e=-1<b?a[b]:m;else{if(a=qc(a,b,d))for(b=0;b<a.length;b++)if(!a[b].s&&a[b].L==c&&a[b].capture==d&&a[b].na==e){e=a[b];break a}e=m}e&&(rc(e),delete this.g[e.key])}return this};function $d(a){var b=a.g,c=rc,d;for(d in b)c.call(h,b[d],d,b);a.g={}}X.prototype.e=function(){X.n.e.call(this);$d(this)};
X.prototype.handleEvent=function(){f(Error("EventHandler.handleEvent not implemented"))};function ae(a,b){V.call(this,b);this.a=a;this.Kc=this.a.h.pru;this.ac=this.a.h.ifrid;F&&be()}y(ae,V);if(F)var ce=[],de=0,be=function(){de||(de=window.setTimeout(function(){ee()},1E3))},ee=function(a){var b=x();for(a=a||3E3;ce.length&&b-ce[0].timestamp>=a;){var c=ce.shift().Gc;vb(c);S("iframe removed")}de=window.setTimeout(fe,1E3)},fe=function(){ee()};var ge={};r=ae.prototype;r.ia=3;r.w=function(){this.d().xpcRelay||(this.d().xpcRelay=he);this.send("tp","SETUP")};
function he(a,b){var c=b.indexOf(":"),d=b.substr(0,c),e=b.substr(c+1);if(!D||-1==(c=d.indexOf("|")))var g=d;else{var g=d.substr(0,c),d=d.substr(c+1),c=d.indexOf("+"),k=d.substr(0,c),c=parseInt(d.substr(c+1),10),n=ge[k];n||(n=ge[k]={Jb:[],ec:0,Ib:0});-1!=d.indexOf("++")&&(n.Ib=c+1);n.Jb[c]=e;n.ec++;if(n.ec!=n.Ib)return;e=n.Jb.join("");delete ge[k]}U[a].I(g,decodeURIComponent(e))}r.rb=function(a){"SETUP"==a?(this.send("tp","SETUP_ACK"),this.a.C()):"SETUP_ACK"==a&&this.a.C()};
r.send=function(a,b){var c=encodeURIComponent(b),d=c.length;if(D&&1800<d)for(var e=Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^x()).toString(36),g=0,k=0;g<d;k++){var n=c.substr(g,1800),g=g+1800;ie(this,a,n,e+(g>=d?"++":"+")+k)}else ie(this,a,c)};
function ie(a,b,c,d){if(D){var e=a.d().document.createElement("div");e.innerHTML='<iframe onload="this.xpcOnload()"></iframe>';e=e.childNodes[0];e.xpcOnload=je}else e=a.d().document.createElement("iframe"),F?ce.push({timestamp:x(),Gc:e}):lc(e,"load",je);var g=e.style;g.visibility="hidden";g.width=e.style.height="0px";g.position="absolute";g=a.Kc;g+="#"+a.a.name;a.ac&&(g+=","+a.ac);g+="|"+b;d&&(g+="|"+d);g+=":"+c;e.src=g;a.d().document.body.appendChild(e);S("msg sent: "+g)}
function je(){S("iframe-load");vb(this);this.Ad=m}r.e=function(){ae.n.e.call(this);F&&ee(0)};function ke(a){return function(){f(a)}};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function me(a,b){this.H=[];this.Yb=a;this.Fb=b||m}r=me.prototype;r.t=p;r.ma=p;r.Qa=p;r.rc=p;r.pb=p;r.ya=0;r.cancel=function(a){if(this.t)this.ta instanceof me&&this.ta.cancel();else{if(this.r){var b=this.r;delete this.r;a?b.cancel(a):(b.ya--,0>=b.ya&&b.cancel())}this.Yb?this.Yb.call(this.Fb,this):this.pb=l;this.t||this.Hb(new ne(this))}};r.Db=function(a,b){this.Qa=p;oe(this,a,b)};function oe(a,b,c){a.t=l;a.ta=c;a.ma=!b;pe(a)}function qe(a){a.t&&(a.pb||f(new re(a)),a.pb=p)}
r.v=function(a){qe(this);oe(this,l,a)};r.Hb=function(a){qe(this);oe(this,p,a)};function se(a,b,c,d){a.H.push([b,c,d]);a.t&&pe(a)}function te(a,b){var c=w(b.sc,b);se(a,c,m,h)}r.sc=function(a){var b=new me;se(this,b.v,b.Hb,b);a&&(b.r=this,this.ya++);return b};function ue(a){return Ta(a.H,function(a){return ja(a[1])})}
function pe(a){a.sb&&(a.t&&ue(a))&&(s.clearTimeout(a.sb),delete a.sb);a.r&&(a.r.ya--,delete a.r);for(var b=a.ta,c=p,d=p;a.H.length&&!a.Qa;){var e=a.H.shift(),g=e[0],k=e[1],e=e[2];if(g=a.ma?k:g)try{var n=g.call(e||a.Fb,b);n!==h&&(a.ma=a.ma&&(n==b||n instanceof Error),a.ta=b=n);b instanceof me&&(d=l,a.Qa=l)}catch(q){b=q,a.ma=l,ue(a)||(c=l)}}a.ta=b;d&&(se(b,w(a.Db,a,l),w(a.Db,a,p)),b.rc=l);c&&(a.sb=s.setTimeout(ke(b),0))}function re(a){z.call(this);this.xc=a}y(re,z);re.prototype.message="Deferred has already fired";
re.prototype.name="AlreadyCalledError";function ne(a){z.call(this);this.xc=a}y(ne,z);ne.prototype.message="Deferred was canceled";ne.prototype.name="CanceledError";function ve(a,b,c){J.call(this);this.bb=a;this.ca=b||0;this.oa=c;this.tc=w(this.Ac,this)}y(ve,J);r=ve.prototype;r.qa=0;r.e=function(){ve.n.e.call(this);this.stop();delete this.bb;delete this.oa};r.start=function(a){this.stop();this.qa=sd(this.tc,a!==h?a:this.ca)};r.stop=function(){this.Mb()&&qd.clearTimeout(this.qa);this.qa=0};r.Mb=function(){return 0!=this.qa};r.Ac=function(){this.qa=0;this.bb&&this.bb.call(this.oa)};function Y(a,b,c,d,e){V.call(this,c);this.a=a;this.V=e||2;this.$b=b||"*";this.Wa=new X(this);this.ra=new pd(100,this.d());this.Ga=!!d;this.O=new me;this.P=new me;this.J=new me;this.Bc=Bd();this.Ia=m;this.Ga?1==W(this.a)?te(this.J,this.O):te(this.J,this.P):(te(this.J,this.O),2==this.V&&te(this.J,this.P));se(this.J,this.Wb,m,this);this.J.v(l);this.Wa.ab(this.ra,rd,this.Qb);R.info("NativeMessagingTransport created.  protocolVersion="+this.V+", oneSidedHandshake="+this.Ga+", role="+W(this.a))}y(Y,V);
Y.prototype.k=m;Y.prototype.R=p;Y.prototype.ia=1;var we={};
function xe(a){var b=a.Ba.data;if(!u(b))return p;var c=b.indexOf("|"),d=b.indexOf(":");if(-1==c||-1==d)return p;var e=b.substring(0,c),c=b.substring(c+1,d),b=b.substring(d+1);Q("messageReceived: channel="+e+", service="+c+", payload="+b);if(d=U[e])return d.I(c,b,a.Ba.origin),l;a=ye(b)[0];for(var g in U)if(d=U[g],1==W(d)&&!d.u()&&"tp"==c&&("SETUP"==a||"SETUP_NTPV2"==a))return Q("changing channel name to "+e),d.name=e,delete U[g],U[e]=d,d.I(c,b),l;R.info('channel name mismatch; message ignored"');return p}
r=Y.prototype;r.rb=function(a){var b=ye(a);a=b[1];switch(b[0]){case "SETUP_ACK":ze(this,1);this.O.t||this.O.v(l);break;case "SETUP_ACK_NTPV2":2==this.V&&(ze(this,2),this.O.t||this.O.v(l));break;case "SETUP":ze(this,1);Ae(this,1);break;case "SETUP_NTPV2":if(2==this.V){b=this.k;ze(this,2);Ae(this,2);if((1==b||this.Ia!=m)&&this.Ia!=a)R.info("Sending SETUP and changing peer ID to: "+a),Be(this);this.Ia=a}}};
function Be(a){if(2==a.V&&(a.k==m||2==a.k)){var b;b="SETUP_NTPV2,"+a.Bc;a.send("tp",b)}(a.k==m||1==a.k)&&a.send("tp","SETUP")}function Ae(a,b){if(2==a.V&&(a.k==m||2==a.k)&&2==b)a.send("tp","SETUP_ACK_NTPV2");else if((a.k==m||1==a.k)&&1==b)a.send("tp","SETUP_ACK");else return;a.P.t||a.P.v(l)}function ze(a,b){b>a.k&&(a.k=b);1==a.k&&(!a.P.t&&!a.Ga&&a.P.v(l),a.Ia=m)}r.w=function(){var a=this.d(),b=v(a),c=we[b];ia(c)||(c=0);0==c&&lc(a.postMessage?a:a.document,"message",xe,p,Y);we[b]=c+1;this.R=l;this.Qb()};
r.Qb=function(){var a=0==W(this.a);this.Ga&&a||this.a.u()||this.$?this.ra.stop():(this.ra.start(),Be(this))};
r.send=function(a,b){var c=this.a.D;c?(this.send=function(a,b){var g=this,k=this.a.name;this.Ma=sd(function(){g.Ma=0;try{var n=c.postMessage?c:c.document;n.postMessage?(n.postMessage(k+"|"+a+":"+b,g.$b),Q("send(): service="+a+" payload="+b+" to hostname="+g.$b)):R.log(P,"Peer window had no postMessage function.",h)}catch(q){R.log(P,"Error performing postMessage, ignoring.",q)}},0)},this.send(a,b)):Q("send(): window not ready")};r.Wb=function(){this.a.C(1==this.V||1==this.k?200:h)};
r.e=function(){if(this.R){var a=this.d(),b=v(a),c=we[b];we[b]=c-1;1==c&&pc(a.postMessage?a:a.document,"message",xe,p,Y)}this.Ma&&(qd.clearTimeout(this.Ma),this.Ma=0);cc(this.Wa);delete this.Wa;cc(this.ra);delete this.ra;this.O.cancel();delete this.O;this.P.cancel();delete this.P;this.J.cancel();delete this.J;delete this.send;Y.n.e.call(this)};function ye(a){a=a.split(",");a[1]=a[1]||m;return a};function Z(){J.call(this);this.mb={}}y(Z,J);Z.prototype.cb=Oc("goog.messaging.AbstractChannel");Z.prototype.w=function(a){a&&a()};Z.prototype.u=function(){return l};function Ce(a,b,c){a.mb[b]={v:c,Xb:p}}Z.prototype.e=function(){Z.n.e.call(this);delete this.cb;delete this.mb;delete this.Gb};function De(a,b){Z.call(this);for(var c=0,d;d=Ad[c];c++)d in a&&!/^https?:\/\//.test(a[d])&&f(Error("URI "+a[d]+" is invalid for field "+d));this.h=a;this.name=this.h.cn||Bd();this.z=b||Xa||(Xa=new wb);this.za=[];this.jb=new X(this);a.lpu=a.lpu||yb(this.z.d().location.href)+"/robots.txt";a.ppu=a.ppu||yb(a.pu||"")+"/robots.txt";U[this.name]=this;lc(window,"unload",Ee);R.info("CrossPageChannel created: "+this.name)}y(De,Z);var Fe=/^%*tp$/,Ge=/^%+tp$/;r=De.prototype;r.K=m;r.T=m;r.i=m;r.qb=1;
r.u=function(){return 2==this.qb};r.D=m;r.ba=m;function Jd(a){try{return!!a.D&&!Boolean(a.D.closed)}catch(b){return p}}r.w=function(a){this.Ta=a||da;this.T?se(this.T,this.Cb,m,h):this.Cb()};
r.Cb=function(){R.info("continueConnection_()");this.T=m;this.h.ifrid&&(this.ba=u(this.h.ifrid)?this.z.Aa.getElementById(this.h.ifrid):this.h.ifrid);if(this.ba){var a=this.ba.contentWindow;a||(a=window.frames[this.h.ifrid]);this.D=a}this.D||(window==window.top&&f(Error("CrossPageChannel: Can't connect, peer window-object not set.")),this.D=window.parent);if(!this.i){if(!this.h.tp){var a=this.h,b;if(ja(document.postMessage)||ja(window.postMessage)||D&&window.postMessage)b=1;else if(E)b=2;else if(D&&
this.h.pru)b=3;else{var c;if(c=D){c=p;try{b=window.opener,window.opener={},c=fc(window,"opener"),window.opener=b}catch(d){}}b=c?6:4}a.tp=b}switch(this.h.tp){case 1:this.i=new Y(this,this.h.ph,this.z,!!this.h.osh,this.h.nativeProtocolVersion||2);break;case 6:this.i=new Wd(this,this.z);break;case 2:this.i=new Vd(this,this.z);break;case 3:this.i=new ae(this,this.z);break;case 4:this.i=new Dd(this,this.z)}this.i?R.info("Transport created: "+this.i.getName()):f(Error("CrossPageChannel: No suitable transport found!"))}for(this.i.w();0<
this.za.length;)this.za.shift()()};r.close=function(){this.T&&(this.T.cancel(),this.T=m);this.za.length=0;$d(this.jb);this.qb=3;cc(this.i);this.Ta=this.i=m;cc(this.K);this.K=m;R.info('Channel "'+this.name+'" closed')};r.C=function(a){this.u()||this.K&&this.K.Mb()||(this.qb=2,R.info('Channel "'+this.name+'" connected'),cc(this.K),a?(this.K=new ve(this.Ta,a),this.K.start()):(this.K=m,this.Ta()))};r.Wb=De.prototype.C;
r.send=function(a,b){this.u()?Jd(this)?(ka(b)&&(b=ra(b)),this.i.send(He(a),b)):(R.log(M,"Peer has disappeared.",h),this.close()):R.log(M,"Can't send. Channel not connected.",h)};
r.I=function(a,b,c){if(this.T)this.za.push(w(this.I,this,a,b,c));else{var d=this.h.ph;if(/^[\s\xa0]*$/.test(c==m?"":String(c))||/^[\s\xa0]*$/.test(d==m?"":String(d))||c==this.h.ph)if(this.$)R.log(P,"CrossPageChannel::xpcDeliver(): Disposed.",h);else if(!a||"tp"==a)this.i.rb(b);else if(this.u()){if(a=a.replace(/%[0-9a-f]{2}/gi,decodeURIComponent),a=Ge.test(a)?a.substring(1):a,c=this.mb[a],c||(this.Gb?c={v:pa(this.Gb,a),Xb:ka(b)}:(this.cb.log(P,'Unknown service name "'+a+'"',h),c=m)),c){var e;a:{if((d=
c.Xb)&&u(b))try{e=qa(b);break a}catch(g){this.cb.log(P,"Expected JSON payload for "+a+', was "'+b+'"',h);e=m;break a}else if(!d&&!u(b)){e=ra(b);break a}e=b}e!=m&&c.v(e)}}else R.info("CrossPageChannel::xpcDeliver(): Not connected.");else R.log(P,'Message received from unapproved origin "'+c+'" - rejected.',h)}};function He(a){Fe.test(a)&&(a="%"+a);return a.replace(/[%:|]/g,encodeURIComponent)}function W(a){var b=a.h.role;return b?b:window.parent==a.D?1:0}
r.e=function(){this.close();this.ba=this.D=m;delete U[this.name];cc(this.jb);delete this.jb;De.n.e.call(this)};function Ee(){for(var a in U)cc(U[a])};function Ie(){var a;a=(new Ib(window.location.href)).N.get("xpc");if(a!=m)return qa(a)}ba("nuggad.xpc.peer.init",function(a){$c(function(){wd();Nc().ob(Fc);Zc();var b=Ie(),c=new De(b);c.w(function(){Ce(c,"get-key",pa(xd,c));Ce(c,"set-key",yd);Ce(c,"remove-key",ud);ja(a)&&a(c)});return c})});
})();
