
var EventController=function(decorator){this.decorator=decorator;this.events=[];};EventController.prototype.first=function(func,initialInfo){this.fireFirst=this.decorator?this.decorator(func):func;this.initalInfo=initialInfo;};EventController.prototype.next=function(func){if(this.decorator){func=this.decorator(func);}
this.events.push(func);};EventController.prototype.run=function(){this.events.reverse();var that=this;var fireNext=function(info){if(!that.events.length){return;}
var next=that.events.pop();next(info,function(info){fireNext(info);});};this.fireFirst(this.initalInfo,function(info){fireNext(info);});};


var ModuleLoader=function(config,ErrorDecorator){function config2This(config,that){var prop,val;for(prop in config){if(config.hasOwnProperty(prop)){val=config[prop];that[prop]=val;}}}
config2This(config,this);var modules={};this.syncImport=function(pn,code){code(pn);};this.impt=function(pn,cb){if(modules[pn]){cb(modules[pn]);}
else{this.load(pn,cb);}};this.loadedFiles={};this.execLoad=function(loc,cb,overrideDocument,pn){var loadDocument=overrideDocument||this.document;var s=loadDocument.createElement('SCRIPT');if(pn){loc=this.groupMap[pn]?(this.host+this.groupMap[pn]):loc;}
if(loc in this.loadedFiles){return;}
this.loadedFiles[loc]=true;s.src=loc;if(loadDocument.body){loadDocument.body.appendChild(s);}else if(loadDocument.head){loadDocument.head.appendChild(s);}else{ErrorDecorator.fireError("loadDocument contains neither head nor body","execLoad");}};this.load=function(pn,cb){if(!register(pn,cb)){var fullSrc=this.host+pn;this.execLoad(fullSrc,cb,null,pn);}};this.overrideAddrImpt=function(loc,cb,overrideDocument){if(modules[loc]){cb(modules[loc]);return;}
if(!register(loc,cb)){this.execLoad(loc,cb,overrideDocument);}};var registry={};var register=function(pn,cb){var flag;if(!registry[pn]){registry[pn]=[];flag=false;}
else{flag=true;}
registry[pn].push(cb);return flag;};this.onReady=function(pn,module){if(modules[pn]){module=modules[pn];}
modules[pn]=module;var i=0;var ii=registry[pn]?registry[pn].length:0;for(;i<ii;i++){registry[pn][i](module);}};this.multiImpt=function(modules,cb){var c=0;var limit=0;var that=this;var mod;for(mod in modules){if(modules.hasOwnProperty(mod)){limit++;}}
for(mod in modules){if(modules.hasOwnProperty(mod)){(function(m){var local_cb=function(unit){modules[m]=unit;c++;if(c===limit){cb(modules);}}
that.impt(modules[m],local_cb);})(mod);}}};this.groupMap={};this.registerGroupMap=function(groupMap){var fileName,groupName;for(var fileName in groupMap){if(groupMap.hasOwnProperty(fileName)){this.groupMap[fileName]=groupMap[fileName];}}};};var Debug=function(){var table=[];this.register=function(name,count){table[count]=name;};this.debugCheck=function(modules){var m;for(m in modules){if(modules.hasOwnProperty(m)){if('string'===typeof modules[m]){console.error('ERR');console.error('the offender is '+m);console.log(table);console.log(modules);throw new Error("ModuleTable loaded prematurely");}}}};};var module;if(module){module.exports=ModuleLoader;}


(function(){var startTime=new Date().getTime();var getHookCandidates=function(ttjHostName,win){if(win.tlScriptCandidates){return win.tlScriptCandidates;}
var scripts=document.getElementsByTagName("SCRIPT");var i=0;var ii=scripts.length;var s;var candidates=[]
for(;i<ii;i++){s=scripts[i];if(s.src&&s.src.indexOf(ttjHostName)>-1){(function(){var p=document.createElement('P');p.style.display="none";p.setAttribute('data-src',s.src);s.parentNode.insertBefore(p,s);candidates.push(p);})();}}
win.tlScriptCandidates=candidates;return candidates;};var getRev=function getRev(groupMap){var path,pathParts,revIndex;for(path in groupMap){if(groupMap.hasOwnProperty(path)){pathParts=path.split('/');revIndex=pathParts.indexOf('rev');if(revIndex>-1){return pathParts[revIndex+1].slice(0,7);}}}
return'un';}
var fireLatencyDyn=function(inv_code){if(Math.round(Math.random()*10)!=1){return;}
var loadTime=new Date().getTime();var latency=loadTime-startTime;var p=document.createElement('IMG');p.style.display="none";p.src="//eb2.3lift.com/dyn?long2=60003&string1="+encodeURIComponent(inv_code)+"&long1="+latency;document.body.appendChild(p);};var initializeNativeAd=function(nativeAdInfo,nativeAdCont){nativeAdInfo.TTJHostName='ib.3lift.com';nativeAdInfo.additionalHookCandidates=getHookCandidates(nativeAdInfo.TTJHostName,window);function onModulesLoaded(modules){nativeAdInfo.modules=modules;nativeAdInfo.rev=getRev(moduleWindow._tlModuleLoader.groupMap);try{fireLatencyDyn(modules.placementDetails.placementDetails.invCode);}catch(e){}
var placementDetails=modules.util.objMerge(modules.placementDetails.placementDetails,modules.placementDetails.environmentDetails);modules.placementDetails=placementDetails;placementDetails.customOptions=placementDetails.customOptions||{};var iframeBuster=new modules.IFrameBuster();if(iframeBuster.needsBusting(placementDetails,nativeAdInfo.docInfo.window)){var hookFinder=new modules.HookFinder();var scripts=nativeAdInfo.docInfo.document.getElementsByTagName('SCRIPT');var tlScript=hookFinder.getTLScript(nativeAdInfo.TTJHostName,placementDetails.invCode,scripts);iframeBuster.bust(placementDetails,nativeAdInfo.docInfo.document,tlScript.src,modules.util);return;}
nativeAdInfo.dynamicDimensions=(placementDetails.imageHeight=='0'||placementDetails.imageWidth=='0');modules.EventController=EventController;modules.BrowserInvariants.prototype.doShims(nativeAdInfo.docInfo.window);var debugMessenger=nativeAdInfo.debugMessenger=new modules.DebugMessenger(modules.util);nativeAdInfo.debugMessenger.getDebugInfo(nativeAdInfo.docInfo.window);nativeAdInfo.tlxAuction=(Math.random()<placementDetails.customOptions.directAuctionRate);if(debugMessenger.tlBidUrl){nativeAdInfo.auctionPath='//'+debugMessenger.tlBidUrl;}else if(nativeAdInfo.tlxAuction||debugMessenger.direct){nativeAdInfo.auctionPath="//tlx.3lift.com/web/auction";}else{nativeAdInfo.auctionPath="//mob.adnxs.com/mob";}
nativeAdCont(nativeAdInfo);};var oml=nativeAdInfo.errorDecorator.decorate(onModulesLoaded);moduleWindow._tlModuleLoader.syncImport("placementDetails/gettingbalance_homepage",function(pn){var placementDetails={"id":4550,"invCode":"gettingbalance_homepage","templateCode":"<div class=\"td_mod2 td_mod_wrap\" id=\"tl_item_ad\" itemscope=\"\" itemtype=\"\">\n\t<div class=\"thumb-wrap\">\n\t\t<a href=\"%%%CLICKTHROUGH_URL%%%\" target=\"_blank\" rel=\"bookmark\" title=\"%%%HEADING%%%\">\n\t\t\t<img itemprop=\"image\" class=\"entry-thumb ggnoads kskd-disable\" src=\"%%%IMAGE_URL%%%\" title=\"%%%HEADING%%%\">\n\t\t</a>\n\t\t<div class=\"slide-meta\" style=\"position: absolute; font-family: 'Ubuntu', sans-serif; font-size: 12px; color: white; top: 12px;\">\n\t\t<span class=\"slide-meta-cat\" style=\"display: inline-block; background-color: #4db2ec; line-height: 28px; padding: 0 10px 0 10px; height: 29px;\">Sponsored by</span>\n\t\t<span class=\"slide-meta-author\" style=\"display: inline-block; background-color: rgba(0, 0, 0, 0.5); line-height: 28px; padding: 0 10px 0 10px; height: 29px;\"><a href=\"%%%CLICKTHROUGH_URL%%%\" target=\"_blank\" style=\"color: white\">%%%ADVERTISER_NAME%%%</a></span>\n\t</div>\n\t</div>\n\t<h3 itemprop=\"name\" class=\"entry-title\">\n\t\t<a itemprop=\"url\" href=\"%%%CLICKTHROUGH_URL%%%\" target=\"_blank\" rel=\"bookmark\" title=\"%%%HEADING%%%\">\n\t\t\t%%%HEADING%%%\n\t\t</a>\n\t</h3>\n\t<div class=\"td-post-text-excerpt\">\n\t\t%%%CAPTION%%%\n\t</div>\n\t<meta itemprop=\"author\">\n</div>\n\n<script>\n\t\n\tfunction getPlacement(unit, number){\n\t\tvar x = document.getElementsByClassName(unit);\n\t\tfor(var i = 0; i < x.length; i++){\n\t\t\treturn x[number];\n\t\t}\n\t\treturn null;\n\t}\n\tvar className = \"span6\";\n\tvar replaced_element = getPlacement(className, 3);\n\treplaced_element.innerHTML = \"\";\n\treplaced_element.appendChild(document.getElementById(\"tl_item_ad\"));\n\t\n\t\n</script>","defaultCode":"<script type=\"text/javascript\" src=\"//static.adsnative.com/static/js/an_triplelift_fallback.js\"></script>","imageWidth":330,"imageHeight":200,"demandEnabled":false,"sharingEnabled":true,"timeoutDuration":10000,"replaceParent":0,"logoBlackList":"NW","captionCharacterLimit":0,"iframeWrap":false,"iframeBuster":false,"numUserSyncPixels":5,"async":true,"staging":false,"lastModified":1439918054000};var environmentDetails={"tlImageAddr":"img.3lift.com","adnxsMemberID":1314,"criteoProxyHost":"ibp.3lift.com","engagementBusAddr":"eb2.3lift.com"};moduleWindow._tlModuleLoader.onReady(pn,{placementDetails:placementDetails,environmentDetails:environmentDetails});});moduleWindow._tlModuleLoader.registerGroupMap({"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/LP.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/FrameOverrideWriter.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/addShareButtons.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/DurationMonitor.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/Layout.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/BrowserDetector.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/MessageManager.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/AuctionRunner.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/YouTubeAPI.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/SimpleVideoIFRAME.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/WindowDetector.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/CSSHelper.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/Message.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/DebugMessenger.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/FirePix.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/util.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/HookFinder.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/ThirdPartyJS.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/Button.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/CSR.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/ProgressBar.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/Analytics.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/MetaTag.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/IFrameBuster.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/AuctionPathBuilder.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/UserSync.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/Selector.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/ShareType.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/AdChoices.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/GetCreativeJSON.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/ProgressBarController.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/Render.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/VideoController.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/SimpleImage.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/ServeDefault.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/ButtonManager.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/Ad.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/ViewabilityController.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/TemplateBuilder.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/BrowserInvariants.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js","/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/Creative.js":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/group.js"});moduleWindow._tlModuleLoader.multiImpt({"IFrameBuster":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/IFrameBuster.js","FirePix":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/FirePix.js","SimpleImage":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/SimpleImage.js","FrameOverrideWriter":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/FrameOverrideWriter.js","ServeDefault":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/ServeDefault.js","Creative":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/Creative.js","TemplateBuilder":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/TemplateBuilder.js","HookFinder":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/HookFinder.js","ProgressBarController":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/ProgressBarController.js","Analytics":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/Analytics.js","VideoController":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/VideoController.js","AdChoices":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/AdChoices.js","LP":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/LP.js","Button":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/Button.js","addShareButtons":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/addShareButtons.js","YouTubeAPI":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/YouTubeAPI.js","Ad":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/Ad.js","ViewabilityController":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/ViewabilityController.js","ShareType":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/ShareType.js","WindowDetector":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/WindowDetector.js","ButtonManager":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/ButtonManager.js","CSSHelper":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/CSSHelper.js","BrowserInvariants":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/BrowserInvariants.js","UserSync":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/UserSync.js","MessageManager":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/MessageManager.js","DebugMessenger":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/DebugMessenger.js","Message":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/Message.js","ThirdPartyJS":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/ThirdPartyJS.js","CSR":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/CSR.js","Render":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/Render.js","BrowserDetector":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/BrowserDetector.js","MetaTag":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/MetaTag.js","AuctionRunner":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/AuctionRunner.js","Layout":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/Layout.js","placementDetails":"placementDetails/gettingbalance_homepage","DurationMonitor":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/DurationMonitor.js","AuctionPathBuilder":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/AuctionPathBuilder.js","Selector":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/Selector.js","SimpleVideoIFRAME":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/SimpleVideoIFRAME.js","GetCreativeJSON":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/GetCreativeJSON.js","ProgressBar":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/ProgressBar.js","util":"/rev/888efc5966333972a15c5e3754703ac7caf7dd5b/util.js"},oml);};var setBaseClass=function(nativeAdInfo,nativeAdCont){var baseClasses=["BrowserInvariants","util","MessageManager"];var i,ii;var baseClass;for(i=0,ii=baseClasses.length;i<ii;i++){var bc;if(typeof(nativeAdInfo.modules[baseClasses[i]])==='function'){bc=baseClass=new nativeAdInfo.modules[baseClasses[i]];}else{bc=baseClass=nativeAdInfo.modules[baseClasses[i]];}
if(baseClasses[i+1]){if(typeof(nativeAdInfo.modules[baseClasses[i+1]])=='function'){addBase2Proto(nativeAdInfo.modules[baseClasses[i+1]],bc);}
else{var newModule=Object.create(bc);var oldModule=nativeAdInfo.modules[baseClasses[i+1]];var member;for(member in oldModule){if(oldModule.hasOwnProperty(member)){newModule[member]=oldModule[member];}}
nativeAdInfo.modules[baseClasses[i+1]]=newModule;}}}
addBase2Modules(baseClass,nativeAdInfo.modules,baseClasses);nativeAdCont(nativeAdInfo);};var addBase2Modules=function(baseClass,modules,baseClasses){var m;for(m in modules){if(!modules.hasOwnProperty(m)){continue;}
if(baseClasses.indexOf(m)>=0){continue;}
if(typeof(modules[m])==='function'){addBase2Proto(modules[m],baseClass);}
else{var newModule=Object.create(baseClass);var member;for(member in modules[m]){if(modules[m].hasOwnProperty(member)){newModule[member]=modules[m][member];}}
modules[m]=newModule;}}};var addBase2Proto=function(module,baseClass){var currentProto=module.prototype;module.prototype=Object.create(baseClass);var member;for(member in currentProto){if(currentProto.hasOwnProperty(member)){module.prototype[member]=currentProto[member];}}};var checkForBrandSafety=function(nativeAdInfo,nativeAdCont){var doc=nativeAdInfo.docInfo.document;if(nativeAdInfo.modules.MetaTag.prototype.checkForMetaTag(doc)){return;}
nativeAdCont(nativeAdInfo);};var checkForSaveurFrame=function(nativeAdInfo,nativeAdCont){var placementDetails=nativeAdInfo.modules.placementDetails;if(placementDetails.invCode==='saveurtv_video_right_direct'){if(window.frameElement){window.frameElement.id='';}}
nativeAdCont(nativeAdInfo);};var instantiateDocInfo=function(){var scriptDocument=document;var scriptWindow=window;var topWindow,topDocument;try{topWindow=top;topDocument=top.document;}
catch(e){topWindow=null;topDocument=null;}
var ret={};ret.scriptDocument=scriptDocument;ret.scriptWindow=scriptWindow;ret.topWindow=topWindow;ret.topDocument=topDocument;ret.window=scriptWindow;ret.document=scriptDocument;return ret;};var runPreAuction=function(nativeAdInfo,nativeAdCont){var docInfo=nativeAdInfo.docInfo,host=nativeAdInfo.TTJHostName,invCode=nativeAdInfo.modules.placementDetails.invCode,replaceParent=nativeAdInfo.modules.placementDetails.replaceParent;if(nativeAdInfo.modules.placementDetails.iframeWrap){replaceParent++};var hookFinder=nativeAdInfo.hookFinder=new nativeAdInfo.modules.HookFinder(nativeAdInfo);var hook=hookFinder.getHook(docInfo,host,invCode,replaceParent);nativeAdInfo.hook=hook;var scriptPath=hookFinder.getScriptPath();var unitNumber=getUnitNumberFromPath(scriptPath);nativeAdInfo.isAdserving=!!unitNumber;if(nativeAdInfo.debugMessenger.tl_scu_id||nativeAdInfo.isAdserving){nativeAdInfo.unitSpecified=true;nativeAdInfo.specifiedUnitID=nativeAdInfo.debugMessenger.tl_scu_id||unitNumber;}
nativeAdInfo.docInfo=instantiateDocInfo();nativeAdInfo.cssHelper=new nativeAdInfo.modules.CSSHelper(nativeAdInfo);var dynamicCreativePseudoId=hookFinder.getDynamicCreativePseudoId();if(dynamicCreativePseudoId){nativeAdInfo.dynamicCreativeSpecified=true;nativeAdInfo.dynamicCreative=nativeAdInfo.docInfo.scriptWindow["tl_dynamic_creative_"+dynamicCreativePseudoId];}
var docInfo=nativeAdInfo.docInfo,FirePix=nativeAdInfo.modules.FirePix,Analytics=nativeAdInfo.modules.Analytics,placementDetails=nativeAdInfo.modules.placementDetails,placementID=placementDetails.id,engagementBusAddr="eb2.3lift.com";nativeAdInfo.firePix=new FirePix(docInfo,placementID,engagementBusAddr,hook);nativeAdInfo.analytics=new Analytics(docInfo,placementDetails,nativeAdInfo.firePix);nativeAdInfo.analytics.loadPreAuctionParams(nativeAdInfo.isAdserving,nativeAdInfo.rev);nativeAdInfo.serveDefault=new nativeAdInfo.modules.ServeDefault();if(!placementDetails.demandEnabled&&!nativeAdInfo.isAdserving&&!nativeAdInfo.debugMessenger.debugFlag){nativeAdInfo.serveDefault.serve(nativeAdInfo,'demand_disabled');return;}
nativeAdCont(nativeAdInfo);};var getUnitNumberFromPath=function(path){path=path.split('/');if(path[1]==='dtj'){return path[3];}};var startViewability=function(nativeAdInfo,nativeAdCont){var navigator=nativeAdInfo.docInfo.window.navigator;var userAgentString=navigator.userAgent;var browserDetector=new nativeAdInfo.modules.BrowserDetector(userAgentString);var continueAd=function(){nativeAdCont(nativeAdInfo);};nativeAdInfo.browserInfo=browserDetector.getBrowserInfo();nativeAdInfo.viewabilityController=new nativeAdInfo.modules.ViewabilityController(nativeAdInfo,continueAd);nativeAdInfo.viewabilityController.start();};var runAuctionAndGetCreative=function(nativeAdInfo,nativeAdCont){var placementDetails=nativeAdInfo.modules.placementDetails;placementDetails.timeoutDuration=parseInt(placementDetails.timeoutDuration,10)||10000;var globalTimeoutDuration=placementDetails.timeoutDuration*1.33;nativeAdInfo.serveDefault.setTimeout(nativeAdInfo,'adRendered','global_timeout',globalTimeoutDuration);var runner=new nativeAdInfo.modules.AuctionRunner(nativeAdInfo);var auctionIFRAMEWriterOverride=new nativeAdInfo.modules.FrameOverrideWriter(runner.auctionIFRAME,nativeAdInfo);auctionIFRAMEWriterOverride.setListeners();var auctionIFRAME=runner.auctionIFRAME;var getCreativeJSONConfig={nativeAdInfo:nativeAdInfo,dynamicHostName:"dynamic.3lift.com",moduleLoader:moduleWindow._tlModuleLoader,onCreativeJSONLoaded:nativeAdInfo.errorDecorator.decorate(function(creativeJSON){nativeAdInfo.creativeJSON=creativeJSON;nativeAdInfo.dynamicComplete=true;nativeAdCont(nativeAdInfo);}),docInfo:{window:auctionIFRAME.contentWindow,document:auctionIFRAME.contentWindow.document}};nativeAdInfo.getCreativeJSON=new nativeAdInfo.modules.GetCreativeJSON(getCreativeJSONConfig);nativeAdInfo.getCreativeJSON.registerAuctionListeners();if(nativeAdInfo.dynamicCreativeSpecified){nativeAdInfo.getCreativeJSON.dynamicCreativeRender(nativeAdInfo.dynamicCreative);return;}
if(nativeAdInfo.unitSpecified){nativeAdInfo.getCreativeJSON.getCreativeJSONDirect(nativeAdInfo.specifiedUnitID);return;}
var useIFRAME=nativeAdInfo.modules.placementDetails.customOptions.useSourcedIframe;var iframeSrc;if(useIFRAME){iframeSrc='//'+nativeAdInfo.TTJHostName+'/sourcedMob.html'}
var iframeInfo={useIFRAME:useIFRAME,src:iframeSrc};var auctionPathBuilder=new nativeAdInfo.modules.AuctionPathBuilder(nativeAdInfo);var auctionPath=auctionPathBuilder.buildAuctionPath();runner.run({pathToAuction:auctionPath,iframeInfo:iframeInfo});};var parseLogoPlacementBlackList=function(logoPlacementBlackListString){if(!logoPlacementBlackListString){return false;}
return logoPlacementBlackListString.split(',');};var createHTML=function(nativeAdInfo,nativeAdCont){if(nativeAdInfo.hasDefaulted){return;}
nativeAdInfo.adRendered=true;var modules=nativeAdInfo.modules,parseURI=modules.util.parseURI,hook=nativeAdInfo.hook,docInfo=nativeAdInfo.docInfo,placementDetails=modules.placementDetails;var clickTrackerDTJ=parseURI(nativeAdInfo.hookFinder.script.src).queryKey.ct;var thirdPartyMacros=nativeAdInfo.getCreativeJSON.thirdPartyMacros;var creativeConfig={settings:nativeAdInfo.creativeJSON.tl_advertiser_data.settings,images:nativeAdInfo.creativeJSON.tl_advertiser_data.images,placementDetails:placementDetails,thirdPartyMacros:thirdPartyMacros,clickTrackerDTJ:clickTrackerDTJ,tlImageId:nativeAdInfo.debugMessenger.tlImageId};nativeAdInfo.creative=new modules.Creative(creativeConfig);nativeAdInfo.analytics.loadPostDynamicParams(nativeAdInfo.creative);var templateBuilder=new modules.TemplateBuilder(docInfo,nativeAdInfo.creative,placementDetails.templateCode);var adString=templateBuilder.build();var render=nativeAdInfo.render=new modules.Render(nativeAdInfo);nativeAdInfo.adDIV=render.wrapAd(adString);if(placementDetails.customOptions&&placementDetails.customOptions.unwrappedUnit){nativeAdInfo.adDIV=render.unwrapAd(nativeAdInfo.adDIV);}
nativeAdInfo.ad=new modules.Ad(nativeAdInfo);nativeAdInfo.ad.setClickHandler();nativeAdCont(nativeAdInfo);};var renderCSR=function(nativeAdInfo,nativeAdCont){if(nativeAdInfo.creative.params.isCSR){var csr=nativeAdInfo.csr=new nativeAdInfo.modules.CSR(nativeAdInfo,nativeAdCont);var tlMainImage=nativeAdInfo.ad.getMainImage();if(!nativeAdInfo.dynamicDimensions&&tlMainImage.tagName=='IMG'){csr.doCSR(tlMainImage);}else{nativeAdCont(nativeAdInfo);}}
else{nativeAdCont(nativeAdInfo);}};var setUpButtonManager=function(nativeAdInfo,nativeAdCont){nativeAdInfo.buttonManager=new nativeAdInfo.modules.ButtonManager(nativeAdInfo);nativeAdInfo.buttonManager.registerBlock(nativeAdInfo.ad.getMainImage());var blacklist=parseLogoPlacementBlackList(nativeAdInfo.modules.placementDetails.logoBlackList);if(blacklist){blacklist.forEach(function(corner){if(nativeAdInfo.buttonManager.isCorner(corner)){nativeAdInfo.buttonManager.addImpediment(corner);}});}
if(nativeAdInfo.creative.params.isCSR&&nativeAdInfo.dynamicDimensions){nativeAdInfo.csr.setDynamicLogo();}
nativeAdCont(nativeAdInfo);};var renderNativeAd=function(nativeAdInfo,nativeAdCont){var modules=nativeAdInfo.modules,hook=nativeAdInfo.hook,render=nativeAdInfo.render,ad=nativeAdInfo.ad;nativeAdInfo.hookFinder.hideHook(hook);render.insertAd(nativeAdInfo.adDIV,hook);var mainImage=ad.getMainImage();if(mainImage&&mainImage.tagName==='IMG'){mainImage.onload=function(){nativeAdCont(nativeAdInfo);};}else{nativeAdCont(nativeAdInfo);}};var layout=function(nativeAdInfo,nativeAdCont){nativeAdInfo.layout=new nativeAdInfo.modules.Layout();if(nativeAdInfo.layout.jQueryPresent){nativeAdInfo.layout.layout(nativeAdInfo.hook);}
nativeAdCont(nativeAdInfo);};var appendThirdPartyJS=function(nativeAdInfo,nativeAdCont){var thirdPartySources=nativeAdInfo.creative.params.thirdPartyTrackers.viewabilityPixels;if(thirdPartySources&&!nativeAdInfo.analytics.isGhost){var thirdPartyJS=new nativeAdInfo.modules.ThirdPartyJS({docInfo:nativeAdInfo.docInfo,placementDetails:nativeAdInfo.modules.placementDetails,ad:nativeAdInfo.ad});thirdPartyJS.appendTags(thirdPartySources);}
nativeAdCont(nativeAdInfo);};var renderVideoAd=function(nativeAdInfo,nativeAdCont){var unitType=nativeAdInfo.creative.params.type;var onVideoRendered=function(){nativeAdCont(nativeAdInfo);};if(unitType==="video"||unitType==="youtube"){nativeAdInfo.videoFlag=true;var videoController=new nativeAdInfo.modules.VideoController(nativeAdInfo,onVideoRendered);videoController.initializeVideo();}
else{nativeAdCont(nativeAdInfo);}};var postRenderAnalytics=function(nativeAdInfo,nativeAdCont){var viewability=nativeAdInfo.viewabilityController;var analytics=nativeAdInfo.analytics;var ad=nativeAdInfo.ad;viewability.vbasEnabled?analytics.render():analytics.viewabilityStartRender();analytics.engagementStart(ad);viewability.listenForInView(ad.getAd(),analytics.viewable.bind(analytics));nativeAdCont(nativeAdInfo);};var setUserSync=function(nativeAdInfo,nativeAdCont){var userSync=new nativeAdInfo.modules.UserSync(nativeAdInfo.firePix);var nusp=nativeAdInfo.modules.placementDetails.numUserSyncPixels||'0';var tlSrc=nativeAdInfo.hookFinder.getScriptSrc();if(!tlSrc.match("/dtj?")){userSync.doSync(nativeAdInfo.debugMessenger.debugFlag,nativeAdInfo.TTJHostName,nusp);}
nativeAdCont(nativeAdInfo);};var getLP=function(nativeAdInfo,nativeAdCont){if(nativeAdInfo.creative.params.isCSR){return nativeAdCont(nativeAdInfo);}
var win=nativeAdInfo.docInfo.window;if(!win.tlLPManager){win.tlLPManager=nativeAdInfo.modules.LP;win.updateLogoZones=nativeAdInfo.modules.LP.updateLogoZones;}
var wrappedNativeAdCont=function(logoZoneInfo){nativeAdInfo.buttonManager.addImpediment(logoZoneInfo);nativeAdCont(nativeAdInfo);};var qs=nativeAdInfo.ad.getMainImageSrc().split("?")[1];win.tlLPManager.register(qs,wrappedNativeAdCont);var lpScript=nativeAdInfo.docInfo.document.createElement('SCRIPT');lpScript.src="//"+nativeAdInfo.modules.placementDetails.tlImageAddr+"/lp?"+qs;nativeAdInfo.docInfo.document.body.appendChild(lpScript);};var placeButtonsInternal=function(nativeAdInfo){var shareButtonElements=nativeAdInfo.modules.addShareButtons.addShareButtons(nativeAdInfo,null,0,0),adChoices,adChoicesElement;if(nativeAdInfo.creative.params.use_adchoices&&minDimensionsForAdChoices(nativeAdInfo.ad.getMainImageDimensions())){adChoices=nativeAdInfo.adChoices=new nativeAdInfo.modules.AdChoices(nativeAdInfo);adChoicesElement=adChoices.init();}};var placeButtons=function(nativeAdInfo,nativeAdCont){if(nativeAdInfo.videoFlag){return;}
placeButtonsInternal(nativeAdInfo);nativeAdInfo.resetButtons=function(){nativeAdInfo.buttonManager.clearButtons();placeButtonsInternal(nativeAdInfo);};nativeAdCont(nativeAdInfo);};var minDimensionsForAdChoices=function(dimensions){var min=15000;var area=dimensions.width*dimensions.height;if(area>min){return true;}
return false;};var ErrorDecorator=function(nativeAdInfo){this.nativeAdInfo=nativeAdInfo;};ErrorDecorator.prototype.fireError=function(e,funName){try{var invCode;if(this.nativeAdInfo.modules){invCode=this.nativeAdInfo.modules.placementDetails.invCode;}else{invCode="undisclosed";}
if(this.nativeAdInfo.debugMessenger&&this.nativeAdInfo.debugMessenger.debugFlag){this.nativeAdInfo.debugMessenger.debugMessage(e.stack.toString());}else{var errorMessage=e.toString?e.toString():e;if(this.nativeAdInfo.firePix){this.nativeAdInfo.firePix.fireEB("sce",{block:funName,inv_code:invCode,lvl:2,e:encodeURIComponent(errorMessage)});}else{var p=document.createElement('IMG');p.src="//eb2.3lift.com/sce?cb="+Math.round(Math.random()*100000).toString()+"&block="+funName+"&inv_code="+invCode+"&lvl=2&e="+encodeURIComponent(errorMessage);p.style.width=0;p.style.height=0;document.body.appendChild(p);}}}catch(er){}};ErrorDecorator.prototype.parseFunCallFromStack=function(e){var m;try{m=e.stack.split('\n')[1].split('at')[1].split('(')[0].trim();}
catch(e){m="unknown";}
return m;};ErrorDecorator.prototype.decorate=function(fn){var that=this;return function(){try{var ret=fn.apply(this,arguments);return ret;}
catch(e){var funName;if(fn.name&&fn.name.length>0){funName=fn.name;}
else{funName=that.parseFunCallFromStack(e);}
that.fireError(e,funName);}};};var main=function(){var nativeAdInfo={};nativeAdInfo.debugThrow=true;var errorDecorator=new ErrorDecorator(nativeAdInfo);nativeAdInfo.errorDecorator=errorDecorator;var dec=function(fn){return errorDecorator.decorate(fn);};nativeAdInfo.docInfo={window:window,document:document};var eventController=new EventController(dec);eventController.first(initializeNativeAd,nativeAdInfo);eventController.next(setBaseClass);eventController.next(checkForBrandSafety);eventController.next(checkForSaveurFrame);eventController.next(runPreAuction);eventController.next(startViewability);eventController.next(runAuctionAndGetCreative);eventController.next(createHTML);eventController.next(renderCSR);eventController.next(setUpButtonManager);eventController.next(renderNativeAd);eventController.next(layout);eventController.next(appendThirdPartyJS);eventController.next(renderVideoAd);eventController.next(postRenderAnalytics);eventController.next(setUserSync);eventController.next(getLP);eventController.next(placeButtons);eventController.run();};var moduleWindow;try{top.window.document;moduleWindow=top;}
catch(e){moduleWindow=window;}
if(!moduleWindow._tlModuleLoader){moduleWindow._tlModuleLoader=new ModuleLoader({document:moduleWindow.document,window:moduleWindow,host:"//ib.3lift.com"},ErrorDecorator.prototype);}main();})();

