registerNamespace("Reuters.parsely");
Reuters.parsely.parseParsely=function(c){var e=c[0],d=e.data.length,a=$("#parselyArticles ul").attr("class"),b=/limit-([0-9]{1,2})/,c=1,h="#ff8000,#fd850b,#fb8915,#f98d20,#f7922b,#f59636,#f49b41,#f29f4c,#f0a457,#eea862".split(",");typeof a!=="undefined"&&a.match(b)&&(d=parseInt(a.match(b)[1]));console.log("parsing parsely, maxitems: "+d);if(d>0){d="";e=e.data;for(p=a=0;p<e.length;p++)if(curr=e[p],a>=max_json_num)break;else if(curr.title.length>0){if(a<1)c=curr._hits;b=1;for(i=0;i<filter_arr.length;i++)curr.url.indexOf(filter_arr[i].trim())>=
0&&(b=0);if(b>0){b=a+1;rank_pct=Math.round(curr._hits/c*100);var g=curr.url.lastIndexOf("-id"),f=curr.url,g=f.lastIndexOf("-id");g!=-1&&(f="/article/"+f.substr(g+1));d+='<li> <div class="parselyRank">'+b+'</div> <div class="parselyTitle"> <a href="'+f+'" >'+curr.title+'</a> </div> <div class="rankBackground"><div class="rankProgress" style="width:'+rank_pct+"%; background-color:"+h[a]+'"></div></div></li>';a++}}$("#parselyArticles ul").html(d);$("#parselyArticles").show();c=$("#parselyArticles a");
Reuters.win.event.fire_link(c,"Trending Stories Click",{interactionType:"Trending Stories"})}};