var Reuters=Reuters||{};Reuters.search={};Reuters.search.searchSuggestion={};Reuters.search.newsSearchAjax="http://search.us.reuters.com/query/suggestion.do";Reuters.search.mdSearchAjax="/do/marketDataAjax";var searchbox;
Reuters.search.enableSearchBox=function(a){if(document.getElementById(a))searchbox=document.getElementById(a),searchbox.onblur=function(){setTimeout(function(){if(document.getElementById("suggestion"))document.getElementById("suggestion").innerHTML=""},500)},searchbox.onkeyup=function(){var b=$.trim(searchbox.value);if(b!=""&&b.length>=2){var e=Reuters.search.newsSearchAjax+"?q="+encodeURIComponent(b)+"&site=us&resultsPerPage=5&callback=Reuters.search.storeNewsSuggestion";Reuters.utils.loadScript("newsSearchAjax",
e)}else document.getElementById("suggestion").innerHTML="";b!=""?$("#"+a).nextAll("span.search-clear").addClass("active"):$("#"+a).nextAll("span.search-clear").removeClass("active")},$("#"+a).nextAll("span.search-clear").on("click",function(){$("#"+a).val("");$(this).removeClass("active")}),$.trim(searchbox.value)!=""?$("#"+a).nextAll("span.search-clear").addClass("active"):$("#"+a).nextAll("span.search-clear").removeClass("active")};
Reuters.search.storeNewsSuggestion=function(a){Reuters.search.searchSuggestion.news=a;a=Reuters.search.mdSearchAjax+"?type=search&searchType=symbol&search="+encodeURIComponent($.trim(searchbox.value))+"&callback=Reuters.search.storeSymbolSuggestion";Reuters.utils.loadScript("mdSearchAjax",a)};
Reuters.search.storeSymbolSuggestion=function(a){a.length<=0?(a=Reuters.search.mdSearchAjax+"?type=search&searchType=name&search="+encodeURIComponent($.trim(searchbox.value))+"&callback=Reuters.search.storeNameSuggestion",Reuters.utils.loadScript("mdSearchAjax",a)):(Reuters.search.searchSuggestion.quote=a,Reuters.search.loadSearchSuggestion())};Reuters.search.storeNameSuggestion=function(a){Reuters.search.searchSuggestion.quote=a;Reuters.search.loadSearchSuggestion()};
Reuters.search.loadSearchSuggestion=function(){function a(a){var c=a.search(RegExp(d,"i")),b=c+d.length;return c==-1?a:a.substr(0,c)+"<span class='query'>"+a.substr(c,d.length)+"</span>"+a.substr(b)}var b=Reuters.search.searchSuggestion.news,e=Reuters.search.searchSuggestion.quote,d=$.trim(searchbox.value);(function(){var d=document.getElementById("suggestion"),c=0,f=document.createElement("ul");if(b.newsSearchResult.length>=1)for(i=0;i<b.newsSearchResult.length;i++)result=b.newsSearchResult[i],li=
document.createElement("li"),li.id="sugg"+c,li.setAttribute("suggSearch",result.queryString),li.innerHTML='<a href="/search/news?blob='+result.queryString+'" onmousedown=dataLayer.push({"event":"click-event","category":"navigation","action":"search","label":$(this).attr("href")});>'+a(result.queryString)+"</a>",f.appendChild(li),c++;if(e.length>=1)for(i=0;i<e.length&&i<5;i++)result=e[i],li=document.createElement("li"),li.id="sugg"+c,li.setAttribute("suggSearch",result.ric),linkEnc=document.createElement("a"),
linkEnc.setAttribute("href","/finance/stocks/overview?symbol="+result.ric+""),linkEnc.id="suggLink"+c,ricDiv=document.createElement("div"),ricDiv.className="suggestion-ric",ricDiv.innerHTML='<span class="ric">'+a(result.ric)+"</span>",exchangeDiv=document.createElement("div"),exchangeDiv.className="suggestion-market",exchangeDiv.innerHTML='<span class="exchange">'+result.exchange+"</span>",li.appendChild(linkEnc),linkEnc.appendChild(ricDiv),linkEnc.appendChild(exchangeDiv),f.appendChild(li),c++;d.innerHTML=
"";d.appendChild(f)})()};