var STRUQ=STRUQ||{};
(function(){STRUQ.Horizontal=function(F){function t(c){STRUQ.MessageCenter.publish(STRUQ.MessageCenter.TRANSITION_STARTED);a.navigating(d);STRUQ.vo.isTouchDevice&&u&&y();if("item"==a.layout.navTarget||"pageOverItem"==a.layout.navTarget)if(a.navigated(Math.floor(d/h),d),0!=d%h&&d%h!=h-1||Math.floor(d/h)==e){TweenLite.to({},0,{delay:k+v,onComplete:A,onCompleteParams:[w]});return}if(!(1>=a.pages.length)){a.animationInProgress=!0;var q,b;b=a.pages[e];q=-1*c*Number(STRUQ.vo.adWidth);if(D){n=0;b=b.el.childNodes;
for(var f=0;f<b.length;f++){var p=f;-1==c&&(p=b.length-1-f);b[p].hasAttribute("initx")||b[p].setAttribute("initx",b[p].style.top);TweenLite.to(b[p],k,{delay:n*z,left:Number(b[p].getAttribute("initx").split("px")[0])+q,ease:l.easeOut,overwrite:1});r&&TweenLite.to(b[p],k,{delay:n*z,alpha:0,ease:l.easeOut,overwrite:2});n++}}else TweenLite.to(b.el,k,{left:q,ease:l.easeOut,overwrite:1}),r&&TweenLite.to(b.el,k,{alpha:0,ease:l.easeOut,overwrite:2});e="page"==a.layout.navTarget?g:Math.floor(d/h);e>a.pages.length-
1&&(e=a.pages.length-1);0>c&&(m=e+1);0<c&&(m=e-1);0>m&&(m=a.pages.length-1);m>a.pages.length-1&&(m=0);b=a.pages[e];b.el.style.display="block";STRUQ.HTMLHelper.setAlpha(b.el,1);if(D)for(b=b.el.childNodes,f=0;f<b.length;f++)b[f].hasAttribute("initx")||b[f].setAttribute("initx",b[f].style.left),q=Number(b[f].getAttribute("initx").split("px")[0]),b[f].style.left=q+c*Number(STRUQ.vo.adWidth)+"px",r&&STRUQ.HTMLHelper.setAlpha(b[f],0),TweenLite.to(b[f],k,{delay:v+n*z,left:q,ease:l.easeOut,overwrite:1,onComplete:A,
onCompleteParams:f==b.length-1?[w]:[]}),r&&TweenLite.to(b[f],k/2,{delay:k/2+v+n*z,alpha:1,ease:l.easeOut,overwrite:2}),n++;else b.el.style.left=c*Number(STRUQ.vo.adWidth)+"px",b.el.style.display="block",r&&STRUQ.HTMLHelper.setAlpha(b.el,0),TweenLite.to(b.el,k,{delay:v,left:0,ease:l.easeOut,overwrite:1,onComplete:A,onCompleteParams:[w]}),r&&TweenLite.to(b.el,k/2,{delay:k/2+v,alpha:1,ease:l.easeOut,overwrite:2})}}function A(c){c&&(y(c),"page"==a.layout.navTarget&&a.navigated(e,d));m!=e&&(a.pages[m].el.style.display=
"hidden",STRUQ.HTMLHelper.setAlpha(a.pages[m].el,0))}function y(c){a.animationInProgress=!1;x&&clearTimeout(x);u&&!B&&(c||(c=w),x=setTimeout(E,c))}function E(c){"pageOverItem"==a.layout.navTarget&&c?(g=e+1<a.pages.length?e+1:0,d=g*h):"page"==a.layout.navTarget?(g=e+1<a.pages.length?e+1:0,d=g*h):d+1<a.items.length?d++:d=0;t(1)}STRUQ.MessageCenter.subscribe(STRUQ.MessageCenter.STOP_ANIMATION,function(){u=!1;clearTimeout(x)});STRUQ.MessageCenter.subscribe(STRUQ.MessageCenter.ACTIVE,function(){B=!0;u&&
clearTimeout(x)});STRUQ.MessageCenter.subscribe(STRUQ.MessageCenter.INACTIVE,function(){B=!1;u&&y()});STRUQ.MessageCenter.subscribe(STRUQ.MessageCenter.NEXT,E);STRUQ.MessageCenter.subscribe(STRUQ.MessageCenter.PREV,function(c){"pageOverItem"==a.layout.navTarget&&c?(g=e+1<a.pages.length?e+1:0,d=g*h):"page"==a.layout.navTarget?(g=0<=e-1?e-1:a.pages.length-1,d=g*h):0<=d-1?d--:d=a.items.length-1;t(-1)});STRUQ.MessageCenter.subscribe(STRUQ.MessageCenter.NAV_TO,function(c){"pageOverItem"==a.layout.navTarget&&
parseInt(c.itemPos)!=d?(d=Number(c.itemPos),t(C)):"page"==a.layout.navTarget&&parseInt(c.itemPos)!=g?(g=Number(c.itemPos),d=g*h,t(C)):parseInt(c.itemPos)!=d&&(d=Number(c.itemPos),t(C))});var a=F,u=!0,B=!1,l,D="true"==a.xmlNode.getElementsByTagName("transition")[0].getAttribute("stagger")?!0:!1,w=Number(a.xmlNode.getAttribute("interval")),v=Number(a.xmlNode.getElementsByTagName("transition")[0].getAttribute("delay")),k=a.xmlNode.getElementsByTagName("transition")[0].getAttribute("time")?Number(a.xmlNode.getElementsByTagName("transition")[0].getAttribute("time")):
.5,r="true"==a.xmlNode.getElementsByTagName("transition")[0].getAttribute("fade")?!0:!1,n=0,z=.1,g=0,m=0,e=0,d=0,C=1,h=a.layout.rows*a.layout.cols,x;(function(a){l=a?eval(a.substr(0,1).toUpperCase()+a.substr(1,a.length-1)):Quad})(a.xmlNode.getElementsByTagName("transition")[0].getAttribute("ease"));STRUQ.vo.maxTime>w/1E3&&y()}})();