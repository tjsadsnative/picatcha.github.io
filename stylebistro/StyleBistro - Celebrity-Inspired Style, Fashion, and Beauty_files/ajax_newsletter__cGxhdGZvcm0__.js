var Zimbio=Zimbio||{};Zimbio.ajaxNewsLetter=(function(){var a=function(d,e){if(d.error){switch(d.error_code){case 1:var c="Invalid Email Address. Try again.";showNewsletterError(c);break;default:showNewsletterError(d.message);break}Track.Click.syntheticGet("newsletterFail",true)}else{if(e){e()}else{b()}Track.Click.syntheticGet("newsletterSuccess",true)}},b=function(){$("#signUp").hide();$("#success").show()};subscribeUser=function(d,g,f,e){d.preventDefault();var c=$("#emailAddress").val();$.ajax({type:"POST",dataType:"json",url:"/tools/api",data:{method:"ui.tools.email_tools.views.subscribe_email_to_list",email_address:c,list_id:g||"",send_welcome:f&&1}}).done(function(h){a(h,e)}).fail(function(h){showNewsletterError("We encountered an error while trying to subscribe you to our newsletter. Please try again.")})},showNewsletterError=function(c){$("#newsletterError").text(c).show()};return{init:function(){$("#followBox").on("click",'input[type="submit"]',function(c){subscribeUser(c,false,1,false)})},subscribeUser:subscribeUser}})();$(document).ready(function(){Zimbio.ajaxNewsLetter.init()});