if("undefined"==typeof console)var console={log:function(){},time:function(){},timeEnd:function(){}};!function(str){"undefined"==typeof str.prototype.trim&&(str.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})}(String),Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(prop){var proto=this.__proto__||this.constructor.prototype;return prop in this&&(!(prop in proto)||proto[prop]!==this[prop])}),"function"!=typeof Object.getOwnPropertyNames&&(Object.getOwnPropertyNames=function(obj){var keys=[];if("object"==typeof obj&&null!==obj)for(var x in obj)obj.hasOwnProperty(x)&&keys.push(x);return keys}),String.prototype.positiveIntegerHash=function(){var i,chr,len,hash=0;if(0==this.length)return hash;for(i=0,len=this.length;len>i;i++)chr=this.charCodeAt(i),hash=(hash<<5)-hash+chr,hash|=0;return Math.abs(hash)},function(){function doScrollCheck(){if(!an_jQuery.isReady){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(doScrollCheck,1)}an_jQuery.ready()}}var rootan_jQuery,DOMContentLoaded,an_jQuery=function(){},readyBound=(window.an_jQuery,window.$an,!1),readyList=[];an_jQuery.fn={ready:function(fn){return an_jQuery.bindReady(),an_jQuery.isReady?fn.call(document,an_jQuery):readyList&&readyList.push(fn),this}},an_jQuery.isReady=!1,an_jQuery.ready=function(){if(!an_jQuery.isReady){if(!document.body)return setTimeout(an_jQuery.ready,13);if(an_jQuery.isReady=!0,readyList){for(var fn,i=0;fn=readyList[i++];)fn.call(document,an_jQuery);readyList=null}an_jQuery.fn.triggerHandler&&an_jQuery(document).triggerHandler("ready")}},an_jQuery.bindReady=function(){if(!readyBound){if(readyBound=!0,"complete"===document.readyState)return an_jQuery.ready();if(document.addEventListener)document.addEventListener("DOMContentLoaded",DOMContentLoaded,!1),window.addEventListener("load",an_jQuery.ready,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded),window.attachEvent("onload",an_jQuery.ready);var toplevel=!1;try{toplevel=null==window.frameElement}catch(e){}document.documentElement.doScroll&&toplevel&&doScrollCheck()}}},rootan_jQuery=an_jQuery(document),document.addEventListener?DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,!1),an_jQuery.ready()}:document.attachEvent&&(DOMContentLoaded=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",DOMContentLoaded),an_jQuery.ready())}),window.an_jQuery=window.$an=an_jQuery}(),function(){var utils=new function(){"use strict";var hostname="",urlParams=null;this.activeWindow=function(){var win=window;try{if(window.top.document&&!this.isPreview()&&window.top!=window.self){win=window.top;{win.document}}else win=window}catch(err){win=window}return win},this.activeWindowDocument=function(){var doc,win=this.activeWindow();try{doc=win.document}catch(err){doc=window.document}return doc},this.isPreviewGenerator=function(){if(this.isPreview()){document.domain="adsnative.com";try{return window.top.document&&window.top!=window.self&&-1!=window.top.document.location.href.indexOf("adsnative.com/preview/")?!0:!1}catch(err){return!1}}return!1},this.isPreview=function(){var hostname=this.getPageHostName();return-1!=hostname.indexOf("adsnative.com")?!0:!1},this.getPageHostName=function(){if(hostname)return hostname;try{hostname=window.top.document?window.top.document.location.host:window.document.location.host}catch(err){hostname=window.document.location.host}return hostname},this.isPreviewMode=function(){var urlParams=this.getURLParams();return this.isPreview()||urlParams.hasOwnProperty("adsnative_preview")?!0:!1},this.isProfilingMode=function(){var urlParams=this.getURLParams();return this.isPreviewMode()&&urlParams.hasOwnProperty("profile")&&urlParams.profile?!0:!1},this.urlPrefix=function(){return"https:"==location.protocol?"https:":"http:"},this.getPreviewModeHost=function(){if(this.isPreview()&&this.isPreviewGenerator()){var hostname=this.getPageHostName();if("dev-www.adsnative.com"==hostname)return"http://dev-api.adsnative.com";if("stage.adsnative.com"==hostname)return this.urlPrefix()+"//stage-api.adsnative.com";if("demo2.adsnative.com"==hostname)return this.urlPrefix()+"//demo-api2.adsnative.com";if("demo.adsnative.com"==hostname)return this.urlPrefix()+"//demo-api.adsnative.com";if("console.adsnative.com"==hostname||"adsnative.com"==hostname)return this.urlPrefix()+"//api.adsnative.com"}else{var urlParams=this.getURLParams();if(urlParams.hasOwnProperty("server")){if("prod"==urlParams.server)return this.urlPrefix()+"//api.adsnative.com";if("stage"==urlParams.server)return this.urlPrefix()+"//stage-api.adsnative.com";if("demo"==urlParams.server)return this.urlPrefix()+"//demo-api.adsnative.com";if("local"==urlParams.server)return"http://dev-api.adsnative.com"}}return null},this.getURLParams=function(){if(urlParams)return urlParams;var match,query,pl=/\+/g,search=/([^&=]+)=?([^&]*)/g,decode=function(s){return decodeURIComponent(s.replace(pl," "))};try{query=this.activeWindow().location.search.substring(1)}catch(err){query=window.location.search.substring(1)}for(urlParams={};match=search.exec(query);)urlParams[decode(match[1])]=decode(match[2]);return urlParams},this.encodeQueryData=function(data){var ret=[];for(var d in data)ret.push(encodeURIComponent(d)+"="+encodeURIComponent(data[d]));return ret.join("&")},this.get_document_keywords=function(max_keywords){if(!arguments.length)var max_keywords=100;var keywords="",metas=document.getElementsByTagName("meta");if(metas)for(var x=0,y=metas.length;y>x;x++)"keywords"==metas[x].name.toLowerCase()&&(keywords+=metas[x].content);var keywords_arr=[],keywords_str="";if(""!=keywords){keywords_str="[",keywords_arr=keywords.split(",");for(var i=0;i<keywords_arr.length&&max_keywords>i;i++)keywords_str+='"'+keywords_arr[i].trim()+'"',i!=keywords_arr.length-1&&i!=max_keywords-1&&(keywords_str+=", ");keywords_str+="]"}return keywords_str},this.extend=function(a,b){for(var key in b)b.hasOwnProperty(key)&&(a[key]=b[key]);return a},this.isEmpty=function(obj){for(var prop in obj)if(obj.hasOwnProperty(prop))return!1;return!0},this.removeClickEvents=function(elem){for(var anchors=elem.getElementsByTagName("a"),i=0;i<anchors.length;i++)-1===anchors[i].className.indexOf("adsnative-share-button")&&-1===anchors[i].className.indexOf("adsnative-cta-button")&&(anchors[i].onclick=function(){return!1})},this.anyClickTags=function(elem){for(var anchors=elem.getElementsByTagName("a"),clickFlag=!1,i=0;i<anchors.length;i++)if(-1===anchors[i].className.search("adsnative")&&null!=anchors[i].getAttribute("href")){clickFlag=!0;break}return clickFlag},this.isScriptInBody=function(){for(var arrScripts=document.getElementsByTagName("script"),currScript=arrScripts[arrScripts.length-1],curElem=currScript;curElem;curElem=curElem.parentNode){if("BODY"==curElem.tagName)return!0;if("HEAD"==curElem.tagName)return!1}return!1},this.checkCSSPath=function(cssPath){for(var win_doc=this.activeWindowDocument(),response={status:!1},currentElement=win_doc,nodes=cssPath.trim().split(">"),index=0,position="before",i=0;i<nodes.length;i++){var node=nodes[i].trim(),node_found=!1;if("#"==node[0]){var parts=node.split(":");if(currentElement=win_doc.getElementById(parts[0].slice(1)),parts.length>1&&(position=parts[1]),!currentElement)return!1}else{var parts=node.split(":");if(!(parts.length>1))return!1;var match=/eq\((\d+)\)/g.exec(parts[1].trim());match&&match.length>1&&(index=parseInt(match[1])),parts.length>2&&(position=parts[2]),parts=parts[0].split(".");var elementName=parts[0],matchClass=null,count=0,elems=currentElement.childNodes;parts.length>1&&(matchClass=parts[1]),elementName&&(elems=currentElement.getElementsByTagName(elementName)),matchClass&&"getElementsByClassName"in document&&(elems=currentElement.getElementsByClassName(matchClass));for(var j=0;j<elems.length;j++)if(1==elems[j].nodeType&&(!matchClass||(" "+elems[j].className+" ").indexOf(" "+matchClass+" ")>-1)){if(count==index){currentElement=elems[j],node_found=!0;break}count++}if(0==node_found)return!1}}return response.status=!0,response.currentElement=currentElement,response.position=position,response},this.dropTags=function(referenceElement,tagsHTML,callback,add_script_attribute){function renderScripts(curTag){for(var k=0;k<curTag.childNodes.length;k++)if("SCRIPT"==curTag.childNodes[k].tagName){var tempElem=curTag.childNodes[k];curTag.removeChild(curTag.childNodes[k]),renderScript(curTag,tempElem,callback)}else curTag.childNodes[k].childNodes.length&&renderScripts(curTag.childNodes[k])}function renderScript(refElem,currentTag){var done=!1,oScript=document.createElement("script");if(oScript.type=currentTag.type,currentTag.src&&(oScript.src=currentTag.src,"undefined"==typeof window.an_doc_write_scripts&&(window.an_doc_write_scripts=[],window.an_doc_write_referenceElement=[]),window.an_doc_write_scripts.push(oScript.src),window.an_doc_write_referenceElement.push(refElem)),oScript.async="true",currentTag.innerHTML&&(oScript.innerHTML=currentTag.innerHTML),"undefined"!=typeof add_script_attribute&&add_script_attribute)for(var key in add_script_attribute)add_script_attribute.hasOwnProperty(key)&&oScript.setAttribute(key,add_script_attribute[key]);"undefined"!=typeof callback&&(currentTag.innerHTML&&!currentTag.src||(oScript.onload=oScript.onreadystatechange=function(){try{done||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(done=!0,callback(),oScript.onload=oScript.onreadystatechange=null)}catch(e){console.log(e)}}));for(var k=0;k<currentTag.attributes.length;k++)!currentTag.attributes[k].value||currentTag.attributes[k].value in{"null":"","false":"",0:""}||"src"==currentTag.attributes[k].name||oScript.setAttribute(currentTag.attributes[k].name,currentTag.attributes[k].value);refElem.appendChild(oScript)}var tempDiv=document.createElement("div");tempDiv.innerHTML=tagsHTML;for(var tags=tempDiv.childNodes,i=0,j=0;tags.length&&j<tags.length&&!(i>6);i++){var currentTag=tags[j];"IMG"==currentTag.tagName?(currentTag.style.cssText="margin:0;padding:0;height:1px;width:1px;border:none;float:left;display:block;",referenceElement.appendChild(currentTag)):"SCRIPT"==currentTag.tagName?(renderScript(referenceElement,currentTag),j++):"IFRAME"==currentTag.tagName?(arguments.length>2&&(currentTag.onload=callback),referenceElement.appendChild(currentTag)):(referenceElement.appendChild(currentTag),renderScripts(currentTag))}},this.indexOf=function(needle){var indexOf;return indexOf="function"==typeof Array.prototype.indexOf?Array.prototype.indexOf:function(needle){var i=-1,index=-1;for(i=0;i<this.length;i++)if(this[i]===needle){index=i;break}return index},indexOf.call(this,needle)},this.getWindowSize=function(Name){var size,name=Name.toLowerCase(),win=this.activeWindow(),doc=win.document,documentElement=doc.documentElement;if(void 0===win["inner"+Name])size=documentElement["client"+Name];else if(win["inner"+Name]!=documentElement["client"+Name])try{var bodyElement=document.createElement("body");bodyElement.id="vpw-test-b",bodyElement.style.cssText="overflow:scroll";var divElement=document.createElement("div");divElement.id="vpw-test-d",divElement.style.cssText="position:absolute;top:-1000px",divElement.innerHTML="<style>@media("+name+":"+documentElement["client"+Name]+"px){body#vpw-test-b div#vpw-test-d{"+name+":7px!important}}</style>",bodyElement.appendChild(divElement),documentElement.insertBefore(bodyElement,document.head),size=7==divElement["offset"+Name]?documentElement["client"+Name]:win["inner"+Name],documentElement.removeChild(bodyElement)}catch(e){size=win["inner"+Name]}else size=win["inner"+Name];return size},this.bindEvent=function(element,type,handler){element.addEventListener?element.addEventListener(type,handler,!1):element.attachEvent("on"+type,handler)},this.broadcastEvent=function(element,event_string){var evnt;document.createEvent?(evnt=document.createEvent("HTMLEvents"),evnt.initEvent(event_string,!0,!0),evnt.eventName=event_string,element.dispatchEvent(evnt)):(evnt=document.createEventObject(),evnt.eventType=event_string,evnt.eventName=event_string,element.fireEvent("on"+evnt.eventType,evnt))}},lightbox=(new function(){function createExpandElements(ad,width,height,storyElement,origClientHeight){embed=document.createElement("iframe"),embed.width=width,embed.height=height,embed.setAttribute("src",ad.embedUrl),embed.style.margin="20px auto 10px",embed.style.border="none",embed.className="adsnative-video-embed",summary=document.createElement("div"),summary.innerHTML=ad.summary,"story"==ad.type&&(summary.innerHTML=summary.innerHTML+'&#32;<a href="'+ad.url+'" class="adsnative-read-more" '+("_blank"==ad.target?'target="_blank"':"")+">Read more</a>"),summary.className="adsnative-video-summary",summary.style.cssText="line-height:120%; font-size:14px; margin:10px auto 20px;","video"==ad.type&&storyElement.appendChild(embed),storyElement.appendChild(summary),expandElementsHeight=origClientHeight+embed.offsetHeight+summary.offsetHeight,summary.style.display="none",embed.style.display="none"}function toggleEmbed(){expanded?(embed.style.display="none",summary.style.display="none"):(embed.style.display="block",summary.style.display="block")}var expandElementsHeight,embed,summary,expanded=!1;this.expandStoryElement=function(ad,storyElement,origClientHeight){expandElementsHeight||createExpandElements(ad,storyElement.clientWidth,180,storyElement,origClientHeight),expanded&&toggleEmbed();var maxheight=expandElementsHeight,minheight=origClientHeight,time=300,init=(new Date).getTime(),instanceheight=parseInt(storyElement.clientHeight),height=expanded?minheight:maxheight,disp=height-instanceheight;storyElement.style.height=height;var timer=setInterval(function(){var instance=(new Date).getTime()-init;if(time>=instance){var pos=instanceheight+Math.floor(disp*instance/time);storyElement.style.height=pos+"px"}else clearInterval(timer),storyElement.style.height=height+"px",expanded||toggleEmbed(),expanded=!expanded},1)}},new function(){function display_overlay(){if(this.overlay)this.overlay.style.display="block";else{var win=utils.activeWindow();this.overlay=win.document.createElement("div"),this.overlay.style.cssText="position:fixed;z-index:999999;width:100%;height:100%;text-align:center;top:0;left:0;background:rgba(0,0,0,0.7);",this.overlay.id="an-lightbox-overlay";this.overlay.onclick=function(){return close_lightbox(),!1},win.document.getElementsByTagName("body")[0].appendChild(this.overlay)}}function hide_overlay(){this.overlay.style.display="none"}function display_lightbox(html){display_overlay();var p_w,p_h,win=utils.activeWindow();window_height>window_width?(p_w=Math.floor(.8*window_width),p_h=Math.floor(3*p_w/4)):(p_h=Math.floor(.8*window_height),p_w=Math.floor(4*p_h/3)),this.lightbox_elem||(this.lightbox_elem=win.document.createElement("div"),this.lightbox_elem.style.cssText="background-color:#FFF;position:fixed;z-index:9999999;box-shadow:0px 0px 30px rgba(0,0,0,0.8);",this.lightbox_elem.style.width=p_w+"px",this.lightbox_elem.style.height=p_h-50+"px",this.lightbox_elem.style.left=Math.floor((window_width-p_w)/2)+"px",this.lightbox_elem.style.top=Math.floor((window_height-p_h)/2)+"px",this.lightbox_elem.id="an-lightbox");var header_html;header_html='<style>#an-lightbox-header a:hover h2 { color:#4775FF; }</style><div id="an-lightbox-header" style="text-align:center;margin:10px;"><a href="'+self.ad.url+'" target="_blank" style="text-decoration:none;color:#000000;"><h2 style="font-size: 20px; font-family:Georgia,sans-serif; padding: 0;margin: 10px;">'+self.ad.title+'</h2></a><span style="font-size: 15px;color: #666;">'+self.ad.promotedByTag+" "+self.ad.promotedBy+"</span></div>",this.lightbox_elem.innerHTML=header_html+html,win.document.getElementsByTagName("body")[0].appendChild(this.lightbox_elem),this.close_button=win.document.createElement("div"),this.close_button.style.cssText="width:32px;height:32px;cursor:pointer;position:fixed;z-index:99999999;background:url(http://static.adsnative.com/static/img/nativead/close3.png) 0px 0px no-repeat;display: inline-block;",this.close_button.style.marginLeft="-16px",this.close_button.style.top=Math.floor((window_height-p_h)/2)-16+"px",this.close_button.onclick=function(){return close_lightbox(),!1},this.lightbox_elem.appendChild(this.close_button),this.lightbox_elem.style.display="block"}function clear_lightbox(){this.lightbox_elem.style.display="none",this.lightbox_elem.innerHTML=""}function close_lightbox(){hide_overlay(),clear_lightbox()}this.overlay=null,this.lightbox_elem=null;var self=this;this.ad=null;var window_width=(utils.activeWindow(),utils.getWindowSize("Width")),window_height=utils.getWindowSize("Height");this.open=function(ad,autoplay){autoplay=Boolean(autoplay),self.ad=ad,display_lightbox('<iframe id="an-lightbox-player-iframe" src="'+ad.embedUrl+"&auto_play="+autoplay+'" style="width:100%;height:100%;overflow:hide;" frameborder="0" allowfullscreen="true" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe')},this.close=function(){close_lightbox()}}),async=new function(){this.postRequest=function(url,params,success,failure){var xmlhttp;xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&(200==xmlhttp.status?arguments.length>2&&success(xmlhttp.responseText):arguments.length>3&&failure())},xmlhttp.open("POST",url,!0),xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xmlhttp.send(params)},this.getJSONP=function(url,callback,callback_handle){var rand;rand=arguments.length>2?callback_handle:Math.floor(1e9*Math.random()+1e4),window["an_callback_"+rand]=function(data){callback(data)};var script=document.createElement("script");script.src=url+"&callback=an_callback_"+rand,document.getElementsByTagName("head")[0].appendChild(script)}},AdsNativeCookieDrop=new function(){this.dropCookieMatchingPixel=function(){var pixel=document.createElement("img");pixel.src=utils.urlPrefix()+"//rudy.adsnative.com/cm.gif",pixel.style.cssText="height:1px;width:1px;border:none;display:block;",document.getElementsByTagName("body").length?document.getElementsByTagName("body")[0].appendChild(pixel):$an.fn.ready(function(){document.getElementsByTagName("body")[0].appendChild(pixel)})}},AdsNativeMaster=function(_options){"use strict";function isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)||settings.forceMobile}function PlacementProcessor(_content){this.status=!1,this.apiKey=null,this.current_network_index=0,this.placement_finished_processing=!1,this.addVideoDetectiveListner=function(nativeAdElement){var handler=function(e){var message=e.message||e.data;if(message.hasOwnProperty("video_detective")&&e.origin==settings.apiUrl)try{nativeAdElement.getElementsByTagName("vd_title")[0].outerHTML=message.title,nativeAdElement.getElementsByTagName("vd_summary")[0].outerHTML=message.description}catch(err){}};window.addEventListener?window.addEventListener("message",handler,!1):window.attachEvent&&window.attachEvent("onmessage",handler)};!function(that){if(that.content=_content,that.content.hasOwnProperty("zid")?that.apiKey=that.content.zid:settings.apiKey&&(that.apiKey=settings.apiKey),"OK"==that.content.status&&(that.status=!0),that.win=utils.activeWindow(),that.win_doc=utils.activeWindowDocument(),that.inview=!1,that.nativeAdElement=null,that.viewTracked=!1,that.filledWithAdsNativeAd=!1,settings.inviewEvent&&settings.outviewEvent){var eventMethod=window.addEventListener?"addEventListener":"attachEvent",eventer=window[eventMethod],messageEvent="attachEvent"==eventMethod?"onmessage":"message";eventer(messageEvent,function(e){var message=e.message||e.data;message==settings.inviewEvent?(that.inview=!0,utils.broadcastEvent(document,"adsnative.mrc50.view:in"),that.content.hasOwnProperty("ad")&&that.content.ad.hasOwnProperty("viewableTags")&&that.nativeAdElement&&!that.viewTracked&&that.filledWithAdsNativeAd&&(utils.dropTags(that.nativeAdElement,that.content.ad.viewableTags),that.viewTracked=!0)):message==settings.outviewEvent&&(that.inview=!1,utils.broadcastEvent(document,"adsnative.mrc50.view:out"))})}}(this)}function _writeDummyDiv(){var arrScripts=document.getElementsByTagName("script"),currScript=arrScripts[arrScripts.length-1],dummyElem=document.createElement("div"),elemId="adsnative-dummy-";return settings.apiKey?elemId+=settings.apiKey:settings.widgetId&&(elemId+=settings.widgetId),dummyElem.id=elemId,currScript.parentNode.insertBefore(dummyElem,currScript.nextSibling),elemId}function _getApplicablePlacements(apiKey,callback){var url=settings.domainLookupUrl+settings.domainLookupEndpoint+utils.getPageHostName()+"/?";if(apiKey&&("string"==typeof apiKey||apiKey instanceof String))var callbackHandler="lookup_"+apiKey.positiveIntegerHash();else var callbackHandler="lookup";logger.log("console","Loading host file from: "+url+"callback="+callbackHandler),async.getJSONP(url,callback,callbackHandler)}function _getAdData(tag_settings,numAds,keywords,callback){var _callback;_callback=arguments.length>3?function(callbackData){profiler.end("GET AD DATA");try{callback(callbackData)}catch(e){logger.log("error","name: "+e.name+" message: "+e.message,e)}}:function(callbackData){profiler.end("GET AD DATA"),_render(callbackData)};var getAdUnitsByCSSPath=function(data){profiler.start("DOMAIN LOOKUP CHECK");for(var adUnits=[],i=0;i<data.length;i++)utils.checkCSSPath(data[i].cssPath)&&adUnits.push(data[i].zid);return logger.log("console","CSS path found: "),logger.log("console",adUnits),adUnits},getAdUnitsAndLoadAds=function(apiKey,data){apiKey||!utils.getPageHostName()?_loadAds([apiKey],data):session.isScriptInBody?_loadAds(getAdUnitsByCSSPath(data),data):(profiler.start("SCRIPT IN BODY WAIT"),$an.fn.ready(function(){profiler.end("SCRIPT IN BODY WAIT"),_loadAds(getAdUnitsByCSSPath(data),data)}))},_loadAds=function(adUnits,data){adUnits.length?(_preloadClientAdData(adUnits,data),_callAdData(adUnits,numAds,keywords,_callback)):logger.log("console","No valid placements found for this domain")};tag_settings.widgetId&&tag_settings.networkKey?_callAdData(null,numAds,keywords,_callback):(profiler.start("HOST FILE FETCH"),_getApplicablePlacements(tag_settings.apiKey,function(data){profiler.end("HOST FILE FETCH"),data&&data.length||logger.log("console","No active placements in host file"),logger.log("console","Domain placements: "),logger.log("console",data),getAdUnitsAndLoadAds(tag_settings.apiKey,data)}))}function _preloadClientAdData(adUnits,data){window.clientSideData=window.clientSideData||{};for(var _fetchClientSideAdData=function(zid,url){profiler.start("PRELOAD CLIENT-SIDE AD DATA: "+zid),async.getJSONP(url,function(clientData){profiler.end("PRELOAD CLIENT-SIDE AD DATA: "+zid),window.clientSideData[zid]=clientData,console.log(clientData)})},i=0;i<data.length;i++)adUnits.indexOf(data[i].zid)>-1&&data[i].clientUrl?_fetchClientSideAdData(data[i].zid,data[i].clientUrl):window.clientSideData[data[i].zid]={}}function _callAdData(adUnits,numAds,keywords,callback){var len,data={force_mobile:settings.forceMobile?1:0},queryString=[],apiKeyQuery="";if(adUnits)for(len=adUnits.length;len--;)queryString.push("zid="+adUnits[len]);else{data.widget_id=settings.widgetId,data.network_key=settings.networkKey,data.safety_level=settings.safetyLevel,data.url=settings.currentPageUrl;for(var i=0;i<settings.categories.length;i++)queryString.push("cat="+settings.categories[i])}if(apiKeyQuery=queryString.join("&"),keywords&&(data.kw=keywords),numAds>0&&(data.num_ads=numAds),!data.hasOwnProperty("url")||!data.url)try{window.top.document&&window.top!=window.self&&"undefined"!=typeof window.top.location.href&&window.top.location.href?(data.url=window.top.location.href,data.ref=window.top.document.referrer):(data.url=window.location.href,data.ref=document.referrer)}catch(err){data.url=window.location.href,data.ref=document.referrer}session.isPreviewMode&&(session.forceCampaignID&&(data.preview=1,data.cid=session.forceCampaignID),session.forceCreativeID&&(data.crid=session.forceCreativeID));var url=settings.apiUrl+settings.apiEndpoint+"?"+apiKeyQuery+"&"+utils.encodeQueryData(data);logger.log("console","Loading ad data from: "+url),profiler.start("GET AD DATA"),async.getJSONP(url,callback)}function _render(callbackData){session.apiData=callbackData,_processResponse(callbackData)}function _processResponse(adunits_content){if(profiler.start("TOTAL RENDER"),adunits_content instanceof Array)for(var i=0;i<adunits_content.length;i++){var p=new PlacementProcessor(adunits_content[i]);p.processAd()}else{var p=new PlacementProcessor(adunits_content);p.processAd()}profiler.end("TOTAL RENDER"),profiler.end("TOTAL CLIENT"),profiler.timeSincePageStart("TOTAL OVERALL")}{var settings={apiUrl:utils.urlPrefix()+"//api.adsnative.com",apiEndpoint:"/v1/ad-template.json",domainLookupUrl:utils.urlPrefix()+"//d2b3uqm49lqeua.cloudfront.net",domainLookupEndpoint:"/v1/host/",apiKey:"",apiData:null,staticUrl:utils.urlPrefix()+"//static.adsnative.com/static/",version:"1.0",subversion:"1.397",onready:null,userCallbackOnAdLoad:null,processNativeAdElement:null,numAds:0,forceMobile:!1,callbackOnNoAds:null,blockAdLoad:!1,blockAdDisplay:!1,nativeAdElementId:null,keywords:null,autoPosition:!1,preview:!1,networkKey:null,currentPageUrl:null,categories:null,widgetId:null,safetyLevel:null,inviewEvent:null,outviewEvent:null},session={isScriptInBody:!1,isPreviewMode:!1,isProfilingMode:!1,forceCampaignID:null,forceCreativeID:null,apiData:null,adUnits:{}},logger=new function(){function _postErrorMessage(message,jsonData,level){var url=settings.apiUrl+"/v1/log/error/?",params="level="+level+"&message_type="+encodeURIComponent(message)+"&data="+encodeURIComponent(jsonData);async.postRequest(url,params)}this.log=function(type,message,errObj){if(session.isPreviewMode&&(console.log("string"==typeof message||message instanceof String?"[AN] "+message:message),arguments.length>2&&console.log(errObj)),"error"==type){var responseObj=(settings.apiKey?settings.apiKey:utils.getPageHostName(),{settings:settings,session:session,pageURL:utils.activeWindow().location.href,userAgent:navigator.userAgent});if(arguments.length>2&&(responseObj.error=errObj),"name: TypeError message: null is not an object (evaluating 'this.referenceElement.parentNode')"==message||"name: TypeError message: 'null' is not an object (evaluating 'this.referenceElement.parentNode')"==message||"name: TypeError message: Cannot read property 'parentNode' of null"==message)return;_postErrorMessage(message,JSON.stringify(responseObj),type)}}},profiler=new function(){this.timeSincePageStart=function(identifier){if(session.isProfilingMode)try{console.debug("[AN] "+identifier+": "+(Date.now()-utils.activeWindow().performance.timing.navigationStart)+"ms")}catch(err){}},this.start=function(identifier){session.isProfilingMode&&console.time("[AN] "+identifier)},this.end=function(identifier){session.isProfilingMode&&console.timeEnd("[AN] "+identifier)}},tracker=new function(){function _isElementInViewport(el){var rect=el.getBoundingClientRect(),area=rect.height*rect.width,inview_height=Math.min(rect.height,rect.bottom,(window.innerHeight||document.documentElement.clientHeight)-rect.top),inview_width=Math.min(rect.width,rect.right,(window.innerWidth||document.documentElement.clientWidth)-rect.left),inview_area=inview_height*inview_width;return inview_area/area>=.5}function _isVisible(el,t,r,b,l,w,h){var p=el.parentNode,VISIBLE_PADDING=2;return _elementInDocument(el)?"BODY"===p.tagName?!0:"0"===_getStyle(el,"opacity")||"none"===_getStyle(el,"display")||"hidden"===_getStyle(el,"visibility")?!1:(("undefined"==typeof t||"undefined"==typeof r||"undefined"==typeof b||"undefined"==typeof l||"undefined"==typeof w||"undefined"==typeof h)&&(t=el.offsetTop,l=el.offsetLeft,b=t+el.offsetHeight,r=l+el.offsetWidth,w=el.offsetWidth,h=el.offsetHeight),p?"hidden"!==_getStyle(p,"overflow")&&"scroll"!==_getStyle(p,"overflow")||!(l+VISIBLE_PADDING>p.offsetWidth+p.scrollLeft||l+w-VISIBLE_PADDING<p.scrollLeft||t+VISIBLE_PADDING>p.offsetHeight+p.scrollTop||t+h-VISIBLE_PADDING<p.scrollTop)?(el.offsetParent===p&&(l+=p.offsetLeft,t+=p.offsetTop),_isVisible(p,t,r,b,l,w,h)):!1:!0):!1}function _getStyle(el,property){return window.getComputedStyle?document.defaultView.getComputedStyle(el,null)[property]:el.currentStyle?el.currentStyle[property]:void 0}function _elementInDocument(element){for(;element=element.parentNode;)if(element==document)return!0;return!1}this.inViewCheck=function(el,viewTag){var count=0,timer=setInterval(function(){_isElementInViewport(el)&&_isVisible(el)?count++:count=0,count>=9&&(utils.dropTags(el,viewTag),clearInterval(timer),logger.log("console","view logged!"))},100)}};!function(){settings=utils.extend(settings,_options),session.isScriptInBody=utils.isScriptInBody(),session.isPreviewMode=utils.isPreviewMode()||settings.preview,session.isProfilingMode=utils.isProfilingMode(),session.previewModeHost=utils.getPreviewModeHost(),session.urlParams=utils.getURLParams(),profiler.timeSincePageStart("TIME SINCE PAGE START"),profiler.start("TOTAL CLIENT"),session.isPreviewMode&&(session.previewModeHost?(settings.apiUrl=session.previewModeHost,settings.domainLookupUrl=session.previewModeHost):session.previewModeHost=settings.apiUrl,session.urlParams.hasOwnProperty("zid")&&(settings.apiKey=session.urlParams.zid),session.urlParams.hasOwnProperty("force_mobile")&&(settings.forceMobile=Boolean(session.urlParams.force_mobile)),session.urlParams.hasOwnProperty("cid")&&(session.forceCampaignID=session.urlParams.cid),session.urlParams.hasOwnProperty("crid")&&(session.forceCreativeID=session.urlParams.crid))}()}PlacementProcessor.prototype.applyCommonStyle=function(additional_style){var style=document.createElement("style");style.setAttribute("type","text/css");var adsnativeStyle='div.adsnative-labels { } div.adsnative-powered-by { margin-right:5px !important; font-size: 11px; color: #777; float: right; text-align: right; margin-right: 0px; }div.adsnative-powered-by a { text-decoration: none; color: #333; font-size:14px;  font-family: "BenchNine", sans-serif; }div.adsnative-powered-by a:hover { color: #cc0033; }.adsnative-sponsored-label { font-size:12px; color: #999; margin-bottom:5px; }.adsnative-share-buttons { float: left; margin-left:8px; margin-bottom:5px; }.adsnative-share-button { text-decoration:none; display:block; height:24px; float:left; margin-right:10px; padding-left:25px; line-height:21px; font-size:14px; font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;  }.adsnative-fb-share { background:url('+settings.staticUrl+"img/facebook.png) no-repeat; color:#3a5899; }.adsnative-tw-share { background:url("+settings.staticUrl+"img/twitter.png) no-repeat; color:#40aceb; }.adsnative-cta-button { display:block; float:left; width:100%; margin:8px 0px auto; border-radius: 0px; background:-webkit-gradient( linear, left top, left bottom, color-stop(5%, #ededed), color-stop(100%, #dfdfdf) ); border:1px solid #DDD; padding:8px 0; font-size:14px; font-family:Helvetica, Arial, sans-serif; text-decoration:none; text-align:center; text-shadow:none; color:#004276; text-shadow:0 1px 0 rgba(255,255,255, 1); }div.adsnative-reset { clear: both; }";adsnativeStyle+='[class^="adsnative-icon-"], [class*=" adsnative-icon-"] { display:none; }';var doc=document;if(settings.autoPosition&&(doc=this.win_doc),doc.getElementsByTagName("head")[0].appendChild(style),Object.prototype.hasOwnProperty.call(style,"styleSheet"))style.styleSheet.cssText=adsnativeStyle+additional_style;else try{style.innerHTML=adsnativeStyle+additional_style}catch(e){try{style.textContent=adsnativeStyle+additional_style}catch(e){style.innerText=adsnativeStyle+additional_style}}},PlacementProcessor.prototype.outputAd=function(ad){var tempElement=document.createElement("div");tempElement.innerHTML=ad.html;var nativeAdElement;if(tempElement.childNodes.length>1?(nativeAdElement=tempElement,ad.backgroundColor&&(nativeAdElement.style.backgroundColor=ad.backgroundColor),this.referenceElement.parentNode.insertBefore(nativeAdElement,this.referenceElement)):(nativeAdElement=tempElement.firstChild,ad.backgroundColor&&(nativeAdElement.style.backgroundColor=ad.backgroundColor),this.referenceElement.parentNode.insertBefore(nativeAdElement,this.referenceElement)),ad.hasOwnProperty("trackingTags")&&utils.dropTags(nativeAdElement,ad.trackingTags),settings.processNativeAdElement&&settings.processNativeAdElement(nativeAdElement),this.ctaButton=document.createElement("div"),this.ctaButton.innerHTML='<a href="'+ad.ctaUrl+'" class="adsnative-cta-button" target="_blank">'+ad.ctaTitle+"</a>",this.shareButtons=document.createElement("div"),this.shareButtons.innerHTML='<a href="https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(ad.url)+'" class="adsnative-fb-share adsnative-share-button" target="_blank">Share</a><a href="https://twitter.com/intent/tweet/?text='+encodeURIComponent(ad.title)+"&url="+ad.url+'" class="adsnative-tw-share adsnative-share-button" target="_blank">Tweet</a><div class="adsnative-reset"></div>',this.shareButtons.style.cssText="display:block;margin-top:10px;",this.shareButtons.className="adsnative-share-buttons",ad.hasOwnProperty("privacy")){var privacyIcon=document.createElement("div");
privacyIcon.style.cssText="position: absolute;top: 0px;right: 0px;z-index:9999999;",privacyIcon.innerHTML='<a href="'+ad.privacy.optOutClickUrl+'" target="_blank"><img class="adsnative-privacy-button" src="'+ad.privacy.optOutImageUrl+'"></a>',nativeAdElement.style.position="relative",nativeAdElement.appendChild(privacyIcon)}var clearElem=document.createElement("div");clearElem.className="adsnative-reset";var labels=document.createElement("div");labels.style.cssText="",ad.ctaUrl&&ad.ctaTitle&&""!=ad.ctaTitle?nativeAdElement.appendChild(this.ctaButton):labels.appendChild(this.shareButtons),labels.appendChild(clearElem),labels.className="adsnative-labels";try{this.origClientHeight=window.getComputedStyle(nativeAdElement).getPropertyValue("height")?parseInt(window.getComputedStyle(nativeAdElement).getPropertyValue("height").slice(0,-2)):nativeAdElement.clientHeight}catch(err){origClientHeight=nativeAdElement.getBoundingClientRect().bottom-nativeAdElement.getBoundingClientRect().top}this.setupClick(ad,nativeAdElement),!ad.hasOwnProperty("viewableTags")||settings.inviewEvent&&settings.outviewEvent||tracker.inViewCheck(nativeAdElement,ad.viewableTags),this.nativeAdElement=nativeAdElement,this.addVideoDetectiveListner(nativeAdElement)},PlacementProcessor.prototype.setupClick=function(ad,adElement){var origClientHeight=this.origClientHeight,that=this;adElement.onclick=function(event){return event.target.className.indexOf("adsnative-privacy-button")>-1?!0:-1===event.target.className.indexOf("adsnative-share-button")&&-1===event.target.className.indexOf("adsnative-cta-button")&&-1===event.target.className.indexOf("adsnative-read-more")?that.onUserClick(ad,adElement,origClientHeight):void 0},utils.anyClickTags(adElement)||!ad.url&&("video"!=ad.type||ad.inlineVideo)||(adElement.style.cursor="pointer")},PlacementProcessor.prototype.onUserClick=function(ad,adElement){if("video"==ad.type&&session.apiData&&session.adUnits.hasOwnProperty(session.apiData.zid)&&session.adUnits[session.apiData.zid].hasOwnProperty("onclick"))return session.adUnits[session.apiData.zid].onclick({type:ad.type,url:ad.url,embedUrl:ad.embedUrl,title:ad.title,summary:ad.summary,brand_name:ad.promotedBy,image:ad.imageSrc}),!1;if("video"!=ad.type||ad.inlineVideo){if(!(!isMobile()&&utils.anyClickTags(adElement)||ad.inlineVideo)&&ad.url){if("undefined"!=typeof ad.clickCallback){var clickCallbackFn=ad.clickCallback["function"],clickCallbackArgs=ad.clickCallback.args;"function"==typeof window[clickCallbackFn]&&window[clickCallbackFn].apply(this,clickCallbackArgs)}var win=utils.activeWindow();if("_blank"==ad.target){var window_instance=win.open(ad.url,"_blank");window_instance.focus()}else win.location.href=ad.url;return!1}if(!ad.url)return!1}else if("autoplay_lightbox"==ad.videoExperience)return lightbox.open(ad,!0),!1;return!0},PlacementProcessor.prototype.outputHTML=function(html){var tempElement=document.createElement("div");tempElement.innerHTML=html;for(var i=0;i<tempElement.childNodes.length;i++){var htmlElement=tempElement.childNodes[i];this.referenceElement.parentNode.insertBefore(htmlElement,this.referenceElement)}},PlacementProcessor.prototype.renderNativeAd=function(){if(this.content.hasOwnProperty("ads")&&!utils.isEmpty(this.content.ads)){this.applyCommonStyle(this.content.ads[0].ad.style),this.outputHTML(this.content.htmlWrapperTop);for(var i=0;i<this.content.ads.length;i++)this.outputAd(this.content.ads[i].ad);this.outputHTML(this.content.htmlWrapperBottom)}else this.content.hasOwnProperty("ad")&&Object.getOwnPropertyNames(this.content.ad).length&&(this.applyCommonStyle(this.content.ad.style),this.outputAd(this.content.ad));this.filledWithAdsNativeAd=!0},PlacementProcessor.prototype.renderNetworkAd=function(ad){var that=this,triplelift_fallback=!1,fm_fallback=!1,sharethrough_network_filled=!1,saymedia_fallback=!1,nativo_fallback=!1,feedsArray=["ntent_feed","inmobi_feed","aol_feed","ebay_feed","gravity_feed","kixer_feed","admarketplace_feed","criteo_feed"];this.thirdPartyElement=document.createElement("div"),this.referenceElement.parentNode.insertBefore(this.thirdPartyElement,this.referenceElement),this.nativeAdElement=this.thirdPartyElement;var whitelisted_networks=["ntent_feed","aol_feed","ebay_feed","gravity_feed","inmobi_feed","kixer_feed","triple_lift","federated_media","kixer","saymedia","contentad","connatix","outbrain","sharethrough","taboola","nativo","other","admarketplace_feed","medianet","dianomi","criteo_feed","openx","mobilemajority","nativeads","urx"],standard_integrations=["openx","mobilemajority","nativeads","kixer","urx"];if(utils.indexOf.call(whitelisted_networks,ad.providerName)>-1){var url=utils.urlPrefix()+"//bevo.adsnative.com/ca.gif?sid="+ad.sid+"&action_name=req_"+ad.providerName.substring(0,2)+"&action_value=1";utils.dropTags(this.thirdPartyElement,'<img src="'+url+'" height="1" width="1" style="margin:0;padding:0;height:1px;width:1px;border:none;display:block;"/>')}if(window._an_adFill=function(network_handle){utils.indexOf.call(standard_integrations,network_handle)>-1&&network_handle==ad.providerName&&(logger.log("console","filled and done: "+that.current_network_index+" - "+ad.providerName+" (zid: "+that.apiKey+")"),ad.hasOwnProperty("trackingTags")&&utils.dropTags(that.thirdPartyElement,ad.trackingTags),network_response_flag=!0,that.finish())},window._an_adNoFill=function(network_handle){utils.indexOf.call(standard_integrations,network_handle)>-1&&network_handle==ad.providerName&&(logger.log("console","fallback: "+that.current_network_index+" - "+ad.providerName+" (zid: "+that.apiKey+")"),network_response_flag=!0,that.fallbackNetwork())},utils.indexOf.call(standard_integrations,ad.providerName)>-1){var network_response_flag=!1;setTimeout(function(){network_response_flag||(logger.log("console","fallback: "+that.current_network_index+" - "+ad.providerName+" (zid: "+that.apiKey+")"),that.fallbackNetwork())},1e3)}var add_script_attribute=null;if("connatix"==ad.providerName&&(ad.headerTags&&(ad.html=ad.headerTags,ad.headerTags=""),utils.bindEvent(window,"connatix_no_content",function(){logger.log("console","fallback: "+that.current_network_index+" - "+ad.providerName+" (zid: "+that.apiKey+")"),that.fallbackNetwork()}),utils.bindEvent(window,"connatix_content_fill",function(){logger.log("console","filled and done: "+that.current_network_index+" - "+ad.providerName+" (zid: "+that.apiKey+")"),ad.hasOwnProperty("trackingTags")&&utils.dropTags(that.thirdPartyElement,ad.trackingTags),that.finish()}),add_script_attribute={"data-connatix-event":"connatix_content_fill"}),feedsArray.indexOf(ad.providerName)>-1){var custom_fields={};ad.hasOwnProperty("customFields")&&!utils.isEmpty(ad.customFields)&&(custom_fields=ad.customFields),this.fetchNetworkCreative(ad.sid,ad.providerName,custom_fields)}else utils.dropTags(this.thirdPartyElement,ad.html,function(){if("medianet"==ad.providerName||"dianomi"==ad.providerName)logger.log("console","filled and done: "+that.current_network_index+" - "+ad.providerName+" (zid: "+that.apiKey+")"),ad.hasOwnProperty("trackingTags")&&utils.dropTags(that.thirdPartyElement,ad.trackingTags),that.finish();else if("kixer"==ad.providerName)"function"==typeof __kx_ad_start&&(__kx_ad_start(),ad.hasOwnProperty("trackingTags")&&utils.dropTags(that.thirdPartyElement,ad.trackingTags));else if("triple_lift"==ad.providerName)if(document.getElementById("tlif_"+String(window._tl.getTlSN()))){var win=document.getElementById("tlif_1").contentWindow||document.getElementById("tlif_1"),tl_no_ad_callback=win.serveDefault;win.serveDefault=function(){logger.log("console","fallback: "+that.current_network_index+" - "+ad.providerName+" (zid: "+that.apiKey+")"),that.fallbackNetwork(),triplelift_fallback=!0,tl_no_ad_callback.apply(this,arguments)};var tl_ad_fill_callback=win.generic_get_unit,tl_ad_filled=!1;win.generic_get_unit=function(){triplelift_fallback||(logger.log("console","filled and done: "+that.current_network_index+" - "+ad.providerName+" (zid: "+that.apiKey+")"),tl_ad_filled=!0,ad.hasOwnProperty("trackingTags")&&utils.dropTags(that.thirdPartyElement,ad.trackingTags),that.finish(),tl_ad_fill_callback.apply(this,arguments))};var tl_ad_fill_callback2=win.tl_advertiser_json;win.tl_advertiser_json=function(){tl_ad_filled||triplelift_fallback||(logger.log("console","filled and done: "+that.current_network_index+" - "+ad.providerName+" (zid: "+that.apiKey+")"),ad.hasOwnProperty("trackingTags")&&utils.dropTags(that.thirdPartyElement,ad.trackingTags),that.finish()),tl_ad_fill_callback2.apply(this,arguments)}}else logger.log("console","filled and done: "+that.current_network_index+" - "+ad.providerName+" (zid: "+that.apiKey+")"),ad.hasOwnProperty("trackingTags")&&utils.dropTags(that.thirdPartyElement,ad.trackingTags),that.finish();else"federated_media"==ad.providerName?setTimeout(function(){fm_fallback||(logger.log("console","filled and done: "+that.current_network_index+" - "+ad.providerName+" (zid: "+that.apiKey+")"),ad.hasOwnProperty("trackingTags")&&utils.dropTags(that.thirdPartyElement,ad.trackingTags),that.finish())},2e3):"saymedia"==ad.providerName?setTimeout(function(){saymedia_fallback||(logger.log("console","filled and done: "+that.current_network_index+" - "+ad.providerName+" (zid: "+that.apiKey+")"),ad.hasOwnProperty("trackingTags")&&utils.dropTags(that.thirdPartyElement,ad.trackingTags),that.finish())},2e3):"contentad"==ad.providerName&&(ad.hasOwnProperty("trackingTags")&&utils.dropTags(that.thirdPartyElement,ad.trackingTags),that.finish())},add_script_attribute);if("saymedia"==ad.providerName&&(window._an_noSayMediaAdFill=function(){logger.log("console","fallback: "+that.current_network_index+" - "+ad.providerName+" (zid: "+that.apiKey+")"),that.fallbackNetwork(),saymedia_fallback=!0}),"federated_media"==ad.providerName&&(window._an_noFMAdFill=function(){logger.log("console","fallback: "+that.current_network_index+" - "+ad.providerName+" (zid: "+that.apiKey+")"),that.fallbackNetwork(),fm_fallback=!0}),"other"==ad.providerName&&(ad.hasOwnProperty("trackingTags")&&utils.dropTags(this.thirdPartyElement,ad.trackingTags),this.finish()),"sharethrough"==ad.providerName){var handler=function(e){var message=e.message||e.data;if("http://btlr.sharethrough.com"==e.origin&&message){var message_json=window.JSON&&window.JSON.parse?window.JSON.parse(message.trim()):new Function("return "+message.trim())();message_json.response.creatives.length?(logger.log("console","filled and done: "+that.current_network_index+" - "+ad.providerName+" (zid: "+that.apiKey+")"),ad.hasOwnProperty("trackingTags")&&utils.dropTags(that.thirdPartyElement,ad.trackingTags),that.finish(),sharethrough_network_filled=!0):(logger.log("console","fallback: "+that.current_network_index+" - "+ad.providerName+" (zid: "+that.apiKey+")"),that.fallbackNetwork())}};window.addEventListener?window.addEventListener("message",handler,!1):window.attachEvent&&window.attachEvent("onmessage",handler)}ad.hasOwnProperty("headerTags")&&ad.headerTags&&utils.dropTags(document.getElementsByTagName("head")[0],ad.headerTags,function(){if("outbrain"==ad.providerName||"taboola"==ad.providerName)logger.log("console","filled and done: "+that.current_network_index+" - "+ad.providerName+" (zid: "+that.apiKey+")"),ad.hasOwnProperty("trackingTags")&&utils.dropTags(that.thirdPartyElement,ad.trackingTags),that.finish();else if("nativo"==ad.providerName){var _an_nativo_fallback=_pr.prototype.Render_TemplateAd;that.an_nativo_fill=!1,_pr.prototype.Render_TemplateAd=function(a){nativo_fallback||that.placement_finished_processing||(that.an_nativo_fill=!0,logger.log("console","filled and done: "+that.current_network_index+" - "+ad.providerName+" (zid: "+that.apiKey+")"),ad.hasOwnProperty("trackingTags")&&utils.dropTags(that.thirdPartyElement,ad.trackingTags),that.finish(),_an_nativo_fallback(a))};var _an_nativo_fallback2=_pr.prototype.PushAd;_pr.prototype.PushAd=function(a){nativo_fallback||that.placement_finished_processing||(that.an_nativo_fill=!0,logger.log("console","filled and done: "+that.current_network_index+" - "+ad.providerName+" (zid: "+that.apiKey+")"),ad.hasOwnProperty("trackingTags")&&utils.dropTags(that.thirdPartyElement,ad.trackingTags),that.finish(),_an_nativo_fallback2.call(PostRelease,a))},setTimeout(function(){that.an_nativo_fill||that.placement_finished_processing||(nativo_fallback=!0,logger.log("console","fallback: "+that.current_network_index+" - "+ad.providerName+" (zid: "+that.apiKey+")"),that.fallbackNetwork())},800)}},add_script_attribute),ad.hasOwnProperty("footerTags")&&ad.footerTags&&utils.dropTags(document.getElementsByTagName("body")[0],ad.footerTags)},PlacementProcessor.prototype.fallbackNetwork=function(){if(this.content.networks){var ad=this.content.networks[this.current_network_index],url=utils.urlPrefix()+"//bevo.adsnative.com/ca.gif?sid="+ad.sid+"&action_name=no_"+ad.providerName.substring(0,2)+"&action_value=1";utils.dropTags(this.thirdPartyElement,'<img src="'+url+'" height="1" width="1" style="margin:0;padding:0;height:1px;width:1px;border:none;display:block;"/>')}this.placement_finished_processing||(this.content.networks&&this.content.networks.length>this.current_network_index+1?(this.cleanupNetwork(),this.current_network_index++,this.renderNetworkAd(this.content.networks[this.current_network_index])):!utils.isEmpty(this.content.ad)&&this.content.ad.hasOwnProperty("html")?(this.cleanupNetwork(),this.renderNativeAd(),this.finish()):this.finish(!1))},PlacementProcessor.prototype.fetchNetworkCreative=function(sid,providerName,custom_fields){var that=this,renderNetworkFeedAd=function(callbackData){logger.log("console",callbackData),callbackData&&"OK"==callbackData.status&&callbackData.ads&&callbackData.ads.length>0?(that.applyCommonStyle(callbackData.ads[0].style),that.outputAd(callbackData.ads[0]),that.finish()):that.fallbackNetwork()};if("admarketplace_feed"==providerName){var k=utils.get_document_keywords(4);if(""==k)return void this.fallbackNetwork();custom_fields.kw=k}var data={sid:sid,kw:custom_fields.hasOwnProperty("kw")?custom_fields.kw:"",pub_id:custom_fields.hasOwnProperty("pub_id")?custom_fields.pub_id:"",placement_id:custom_fields.hasOwnProperty("placement_id")?custom_fields.placement_id:"",platform:custom_fields.hasOwnProperty("platform")?custom_fields.platform:"",device:custom_fields.hasOwnProperty("device")?custom_fields.device:"",num_ads:custom_fields.hasOwnProperty("num_ads")?custom_fields.num_ads:1,ip:session.urlParams.hasOwnProperty("ip")?session.urlParams.ip:""};if("criteo_feed"==providerName){var counter=0,sleepTime=10,maxIterations=40;window.checkClientSideResponse=function(){if(0==counter&&profiler.start("CRITEO EXTRA WAIT TIME"),counter++,that.apiKey in window.clientSideData){profiler.end("CRITEO EXTRA WAIT TIME");var clientAd=window.clientSideData[that.apiKey];return logger.log("console",clientAd),0==clientAd.response_status?(data.provider_data=btoa(JSON.stringify(clientAd)),async.getJSONP(settings.apiUrl+"/v1/proxy/"+providerName+"/?"+utils.encodeQueryData(data),renderNetworkFeedAd),!0):(logger.log("console","Criteo returned 0 ads: using fallback"),that.fallbackNetwork(),!1)}return counter>=maxIterations?(profiler.end("CRITEO EXTRA WAIT TIME"),logger.log("console","Criteo failed to respond in time: using fallback"),that.fallbackNetwork(),!1):void window.setTimeout("window.checkClientSideResponse();",sleepTime)},window.checkClientSideResponse()}else async.getJSONP(settings.apiUrl+"/v1/proxy/"+providerName+"/?"+utils.encodeQueryData(data),renderNetworkFeedAd)},PlacementProcessor.prototype.cleanupNetwork=function(){this.thirdPartyElement&&this.thirdPartyElement.parentNode&&this.thirdPartyElement.parentNode.removeChild(this.thirdPartyElement)},PlacementProcessor.prototype.finish=function(ad_filled_status){if(0==arguments.length)var ad_filled_status=!0;settings.userCallbackOnAdLoad&&settings.userCallbackOnAdLoad(ad_filled_status),this.inview&&utils.broadcastEvent(document,"adsnative.mrc50.view:in"),logger.log("console","Finished: "),this&&this.referenceElement&&this.referenceElement.parentNode?this.referenceElement.parentNode.removeChild(this.referenceElement):logger.log("console","No reference element found"),this.placement_finished_processing=!0},PlacementProcessor.prototype.processAd=function(){if(logger.log("console",this.content),settings.userCallbackOnAdLoad&&"OK"!=this.content.status&&settings.userCallbackOnAdLoad("OK"!=this.content.status),this.content.hasOwnProperty("zid")&&session.adUnits.hasOwnProperty(this.content.zid)){var adObject={};this.status&&(adObject={type:this.content.ad.type,url:this.content.ad.url,embedUrl:this.content.ad.embedUrl,title:this.content.ad.title,summary:this.content.ad.summary,brand_name:this.content.ad.promotedBy,image:this.content.ad.imageSrc}),session.adUnits[this.content.zid].content=this.content,session.adUnits[this.content.zid].hasOwnProperty("callback")&&session.adUnits[this.content.zid].callback("OK"==this.content.status,this.apiKey,adObject)}if(!settings.blockAdDisplay){if(!this.status)return settings.callbackOnNoAds&&settings.callbackOnNoAds(),void(this.content.hasOwnProperty("message")?"no active campaigns found"!=this.content.message&&"ad-unit is not active"!=this.content.message&&logger.log("warning",this.content.message):logger.log("warning","An unknown error occurred."));if(settings.nativeAdElementId){if(this.referenceElement=document.getElementById(settings.nativeAdElementId),!this.referenceElement)return void logger.log("warning","Given nativeAdElementId not found.")}else{if(settings.autoPosition){var cssPath;if(!this.content.hasOwnProperty("cssPath")||!this.content.cssPath)return void logger.log("warning","No CSS path configured for this page.");if(cssPath=this.content.cssPath,session.isScriptInBody){var status=this.insertReferenceElement(cssPath);status?this.startRender():this.waitPositionAdAndRender(cssPath)}else this.waitPositionAdAndRender(cssPath);return}if(session.adUnits.hasOwnProperty(this.apiKey)&&session.adUnits[this.apiKey].hasOwnProperty("nativeAdElementId")){if(this.referenceElement=document.getElementById(session.adUnits[this.apiKey].nativeAdElementId),!this.referenceElement)return void logger.log("warning","Given nativeAdElementId not found for apiKey")}else this.referenceElement=document.getElementById(settings.apiKey?"adsnative-dummy-"+this.apiKey:"adsnative-dummy-"+settings.widgetId)}this.startRender()}},PlacementProcessor.prototype.waitPositionAdAndRender=function(cssPath){var that=this;profiler.start("WAIT TO RENDER"),$an.fn.ready(function(){profiler.end("WAIT TO RENDER"),that.positionAdAndRender(cssPath)})},PlacementProcessor.prototype.positionAdAndRender=function(cssPath){var status=this.insertReferenceElement(cssPath);return status?void this.startRender():void logger.log("warning","Configured CSS path not found on this page.")},PlacementProcessor.prototype.startRender=function(){if(this.content.hasOwnProperty("networks")&&this.content.networks.length)this.renderNetworkAd(this.content.networks[0]);else if(this.content.hasOwnProperty("ad")&&this.content.ad.hasOwnProperty("customFields")&&this.content.ad.customFields.hasOwnProperty("network_feed")){var custom_fields={};this.content.ad.hasOwnProperty("customFields")&&!utils.isEmpty(this.content.ad.customFields)&&(custom_fields=this.content.ad.customFields),this.fetchNetworkCreative(this.content.sid,this.content.ad.customFields.network_feed,custom_fields)}else this.renderNativeAd(),this.finish()},PlacementProcessor.prototype.insertReferenceElement=function(cssPath){profiler.start("CSS PATH SEARCH");var tempElement=this.win_doc.createElement("div"),response=utils.checkCSSPath(cssPath);return response?("after"==response.position?response.currentElement.parentNode.insertBefore(tempElement,response.currentElement.nextSibling):"append"==response.position?response.currentElement.appendChild(tempElement):response.currentElement.parentNode.insertBefore(tempElement,response.currentElement),this.referenceElement=tempElement,profiler.end("CSS PATH SEARCH"),!0):!1},window.AdsNative=function(_apiKey,_keywords){!function(that){that.apiKey=_apiKey,that.keywords="undefined"!==_keywords?_keywords:"",that.status=!1,that.adRendered=!1}(this)},window.AdsNative.prototype.fetchAd=function(callback){var that=this;_getAdData({apiKey:this.apiKey},1,settings.keywords?settings.keywords:this.keywords,function(callbackData){that.callbackData=callbackData,that.placementProcessor=new PlacementProcessor(that.callbackData),callbackData.hasOwnProperty("status")&&"OK"==callbackData.status&&(that.status=!0,that.adRendered=!1),callback(that.status)})},window.AdsNative.prototype.displayAd=function(elementId){return this.status?this.adRendered?(logger.log("console","Placement "+this.apiKey+" : This ad unit already rendered. A placement can be rendered only once."),!1):(this.elementId=document.getElementById(elementId),this.elementId?(this.placementProcessor.referenceElement=this.elementId,this.placementProcessor.startRender(),this.adRendered=!0,!0):(logger.log("console","Placement "+this.apiKey+" : Element not found"),!1)):(logger.log("console","Placement "+this.apiKey+" : No valid campaign returned"),!1)},window.AdsNative.prototype.refresh=function(){var placementElement,that=this;if(this.status&&this.adRendered)placementElement=this.placementProcessor.nativeAdElement;else{if(!this.elementId)return logger.log("console","Placement "+this.apiKey+" : The placement was never fetched so cannot be refreshed."),!1;placementElement=this.elementId}return this.fetchAd(function(){that.placementProcessor.referenceElement=placementElement,that.placementProcessor.startRender()}),!0},this.load=function(){if(logger.log("console","RenderJS Loaded!"),settings.onready&&settings.onready(),!settings.blockAdLoad)if(settings.hasOwnProperty("adUnits"))for(var i in settings.adUnits){var adUnit=settings.adUnits[i];if(adUnit.hasOwnProperty("apiKey")&&adUnit.apiKey){var numAds=settings.numAds;adUnit.hasOwnProperty("numAds")&&(numAds=adUnit.numAds);var keywords="";adUnit.hasOwnProperty("keywords")&&adUnit.keywords&&(keywords=adUnit.keywords.join()),adUnit.hasOwnProperty("nativeAdElementId")&&document.getElementById(adUnit.nativeAdElementId)&&(session.adUnits.hasOwnProperty(adUnit.apiKey)||(session.adUnits[adUnit.apiKey]={}),session.adUnits[adUnit.apiKey].nativeAdElementId=adUnit.nativeAdElementId),_getAdData({apiKey:adUnit.apiKey},numAds,keywords)}}else!(settings.apiKey||settings.widgetId&&settings.networkKey)||settings.nativeAdElementId||settings.autoPosition||_writeDummyDiv(),_getAdData(settings,settings.numAds,settings.keywords)},this.fetchAds=function(_apiKeys,_keywords,_callback){settings.blockAdDisplay=!0;for(var i=0;i<_apiKeys.length;i++)session.adUnits.hasOwnProperty(_apiKeys[i])||(session.adUnits[_apiKeys[i]]={}),session.adUnits[_apiKeys[i]].callback=_callback,_getAdData({apiKey:_apiKeys[i]},1,settings.keywords?settings.keywords:_keywords)},this.displayAd=function(_apiKey,_elementId){if(session.adUnits.hasOwnProperty(_apiKey)&&session.adUnits[_apiKey].hasOwnProperty("content")){var content=session.adUnits[_apiKey].content,referenceElement=document.getElementById(_elementId),p=new PlacementProcessor(content);p.referenceElement=referenceElement,p.startRender()}},this.renderAd=function(_elementId,_keywords,_callback,_apiKey){var that=this;this.fetchAds([_apiKey],_keywords,function(status,apiKey){status&&that.displayAd(apiKey,_elementId),_callback(status)})},this.onClickHandler=function(_apiKey,_callback){session.adUnits.hasOwnProperty(_apiKey)||(session.adUnits[_apiKey]={}),session.adUnits[_apiKey].onclick=_callback},this.getVersion=function(){return settings.version}};if("undefined"==typeof _AdsNativeQ)var _AdsNativeQ=[],_AdsNativeOptsQ=[];"undefined"==typeof window._AdsNativeOpts?window._AdsNativeOpts={autoPosition:!0}:window._AdsNativeOpts.hasOwnProperty("apiKey")||window._AdsNativeOpts.hasOwnProperty("widgetId")||window._AdsNativeOpts.hasOwnProperty("adUnits")||window._AdsNativeOpts.hasOwnProperty("blockAdLoad")||(window._AdsNativeOpts.autoPosition=!0),_AdsNativeOptsQ.push(window._AdsNativeOpts),_AdsNativeQ.push(new AdsNativeMaster(_AdsNativeOptsQ[_AdsNativeOptsQ.length-1])),_AdsNativeQ[_AdsNativeQ.length-1].load(),"undefined"==typeof window._AdsNative&&(window._AdsNative=new AdsNativeMaster({blockAdLoad:!0}),window._AdsNative.load()),AdsNativeCookieDrop.dropCookieMatchingPixel()}();