// The Seattle Times // http://www.seattletimes.com
!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div class="article-top-comment">\n  <h3 class="header"><i class="icon-chat large"></i>Top Comment</h3>\n\n  ',results.forEach(function(result,index){__p+='\n    <p class="body">'+(null==(__t=result.comment)?"":__t)+'</p>\n    <span class="username">'+(null==(__t=result.author)?"":__t)+"</span>\n  "}),__p+='\n\n  <ul class="links">\n    <li><a class="comment-count comment-link" href="#comments">Comments</a></li>\n    <li><a href="#comments" class="comment-link">Add Yours</a></li>\n  </ul>\n</div>';return __p}},{}],2:[function(require,module,exports){module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div class="slide-caption article-figure-caption">\n    <span class="slide-count">\n      <span class="slide-current">'+(null==(__t=currentSlide)?"":__t)+'</span>\n      of <span class="slide-total">'+(null==(__t=numberOfSlides)?"":__t)+"</span>\n    </span>\n\n    ","truncated"==currentSlideCaptionState&&1==currentSlideCaptionToggleEnabled?(__p+='\n      <span class="caption">'+(null==(__t=currentSlideCaptionTruncated)?"":__t)+'</span>\n\n      <span class="caption-toggle">\n      ',__p+=inModal?'\n      <i class="icon-chevron-up"></i>\n      ':'\n      More <i class="icon-chevron-thin-down"></i>\n      ',__p+="\n      </span>\n\n    "):"full"==currentSlideCaptionState&&1==currentSlideCaptionToggleEnabled?(__p+='\n      <span class="caption">'+(null==(__t=currentSlideCaption)?"":__t)+'</span>\n\n      <span class="caption-toggle">\n      ',__p+=inModal?'\n      <i class="icon-chevron-down"></i>\n      ':'\n      Less <i class="icon-chevron-thin-up"></i>\n      ',__p+="\n      </span>\n\n    "):__p+='\n      <span class="caption">'+(null==(__t=currentSlideCaption)?"":__t)+"</span>\n    ",__p+="\n\n</div>\n\n";return __p}},{}],3:[function(require,module,exports){module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="",inModal?(__p+='\n  <img src="'+(null==(__t=currentImage)?"":__t)+'" alt="'+(null==(__t=caption)?"":__t)+'">\n\n  ',""!==caption&&(__p+='\n  <figcaption class="article-figure-caption">\n    ',__p+="truncated"==captionState?'\n    <span class="caption">'+(null==(__t=captionTruncated)?"":__t)+"</span>\n    ":'\n    <span class="caption full">'+(null==(__t=caption)?"":__t)+"</span>\n    ",__p+="\n  </figcaption>\n  "),__p+="\n\n  ",captionToggleEnabled&&(__p+='\n    <span class="caption-toggle">\n      ',__p+="truncated"==captionState?'\n      <i class="icon-chevron-up"></i>\n      ':'\n      <i class="icon-chevron-down"></i>\n      ',__p+="\n    </span>\n  "),__p+="\n\n"):(__p+='\n\n  <picture>\n    <img src="'+(null==(__t=currentImage)?"":__t)+'" alt="'+(null==(__t=alt)?"":__t)+'">\n  </picture>\n\n  ',""!==caption&&(__p+='\n  <figcaption class="article-figure-caption">\n\n    ',__p+="truncated"==captionState?'\n    <span class="caption">'+(null==(__t=captionTruncated)?"":__t)+"</span>\n    ":'\n    <span class="caption full">'+(null==(__t=caption)?"":__t)+"</span>\n    ",__p+="\n\n    ",captionToggleEnabled&&(__p+='\n      <span class="caption-toggle">\n        ',__p+="truncated"==captionState?'\n        More <i class="icon-chevron-thin-down"></i>\n        ':'\n        Less <i class="icon-chevron-thin-up"></i>\n        ',__p+="\n      </span>\n    "),__p+="\n  </figcaption>\n  "),__p+='\n\n\n\n  <span class="expand"><i class="icon-expand"></i></span>\n\n\n\n\n'),__p+="";return __p}},{}],4:[function(require,module,exports){module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div id="modal" class="modal bar inactive subscribe-reminder">\n  <div class="bar-wrapper">\n    <div class="message-wrapper">\n      <h1 class="article-count">'+(null==(__t=currentMessage.headline)?"":__t)+'</h1>\n      <span id="cornerMessageText" class="message">'+(null==(__t=currentMessage.message)?"":__t)+'</span>\n    </div>\n    <div class="button-wrapper',currentMessage.headline&&currentMessage.message&&(__p+=" two-line"),__p+='">\n    ',"anon"==currentUserType?__p+='\n      <span class="subscribe-button"> <a class="subscribe button" href="'+(null==(__t=urlSubscribe)?"":__t)+'">'+(null==(__t=currentMessage.buttontext)?"":__t)+'</a> </span>\n      <span class="login login-link">Already a subscriber? <br> <a href="'+(null==(__t=urlLogin)?"":__t)+'">Log In</a></span>\n    ':"reg"==currentUserType&&(__p+='\n      <span class="subscribe-button"> <a class="subscribe button" href="'+(null==(__t=urlSubscribe)?"":__t)+'">'+(null==(__t=currentMessage.buttontext)?"":__t)+'</a> </span>\n      <span id="activateAccountModalLink" class="login-link">Already a subscriber? <br> <a href="'+(null==(__t=urlRegister)?"":__t)+'">Activate your account</a></span>\n    '),__p+='\n    </div>\n    <span id="close" class="close reminder-close"><i class="icon-x"></i></span>\n</div>\n</div>';return __p}},{}],5:[function(require,module,exports){module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div id="modal" class="modal corner inactive subscribe-reminder">\n	<h1 class="article-count">'+(null==(__t=currentMessage.headline)?"":__t)+'</h1>\n	<p id="cornerMessageText" class="message"><em>'+(null==(__t=currentMessage.message)?"":__t)+'</em></p>\n	<div class="modal-links">\n		',"anon"==currentUserType?__p+='\n			<a class="subscribe button" href="'+(null==(__t=urlSubscribe)?"":__t)+'">'+(null==(__t=currentMessage.buttontext)?"":__t)+'</a>\n			<span id="loginModalLink" class="login login-link">Already a subscriber? <a href="'+(null==(__t=urlLogin)?"":__t)+'">Log in</a></span>\n		':"reg"==currentUserType&&(__p+='\n			<a id="subcribeModalLink" class="st-return button subscribe" href="'+(null==(__t=urlSubscribe)?"":__t)+'">'+(null==(__t=currentMessage.buttontext)?"":__t)+'</a>\n			<span id="activateAccountModalLink" class="login-link"><a href="'+(null==(__t=urlRegister)?"":__t)+'">Activate Subscriber Account</a></span>\n		'),__p+='\n	</div>\n	<div class="reminder-logo"></div>\n	<div id="close" class="close reminder-close"><i class="icon-x"></i></div>\n</div>\n';return __p}},{}],6:[function(require,module,exports){module.exports=function(obj){var __p="";Array.prototype.join;with(obj||{})__p+='<div class="modal-content"></div>\n<span class="modal-toggle"><i></i></span>';return __p}},{}],7:[function(require,module,exports){module.exports=function(obj){var __p="";Array.prototype.join;with(obj||{})__p+='\n<div id="fb-root"></div>\n<div class="fb-like"\n  data-href="https://developers.facebook.com/docs/plugins/"\n  data-layout="button"\n  data-action="like"\n  data-show-faces="true"\n  data-share="false">\n</div>\n\n<p>Like The Seattle Times on Facebook</p>\n\n<span class="facebook-close"><i class="icon-x"></i></span>\n';return __p}},{}],8:[function(require,module,exports){module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div id="modal" class="modal middle inactive subscribe-prompt-overlay">\n  <div class="subscribe-prompt modal-content">\n    <div class="logo"></div>\n    <div class="modal-text">\n      ',currentMessageHeader&&(__p+='<h1 class="message-header">'+(null==(__t=currentMessageHeader)?"":__t)+"</h1>"),__p+='        \n      <p id="middleMessageText" class="message">'+(null==(__t=currentMessage.message)?"":__t)+' </p>\n	  <p id="messageOffer" class="message-offer">'+(null==(__t=currentMessageOffer)?"":__t)+' </p>\n    </div>\n    <div class="modal-media">',currentMessageImage&&(__p+='<img class="message-image" src="'+(null==(__t=currentMessageImage)?"":__t)+'" alt="paymeter image">'),__p+='</div>\n\n    <div class="modal-links">\n      ',"anon"==currentUserType?__p+='\n        <p><a id="subcribeModalLink" class="st-return button subscribe" href="'+(null==(__t=urlSubscribe)?"":__t)+'">'+(null==(__t=currentMessage.buttontext)?"":__t)+'</a></p>\n        <p class="login">Already a subscriber? <a href="'+(null==(__t=urlLogin)?"":__t)+'">Log in</a></p>\n      ':"reg"==currentUserType&&(__p+='\n        <p><a class="subscribe button" href="'+(null==(__t=urlSubscribe)?"":__t)+'">'+(null==(__t=currentMessage.buttontext)?"":__t)+'</a></p>\n        <p id="activateAccountModalLink"><a href="'+(null==(__t=urlRegister)?"":__t)+'">Activate Subscriber Account</a></p>\n      '),__p+='\n    </div>\n\n    <div id="close" class="close hardwall-close"><i class="icon-x"></i></div>\n\n  </div>\n</div>';return __p}},{}],9:[function(require,module,exports){module.exports=function(obj){var __p="";Array.prototype.join;with(obj||{})__p+='<form method="get" action="/search/?">\n  <input name="q" placeholder="Search" class="global-search-input" type="search">\n  <button class="global-search-submit"><i class="icon-search large"></i></button>\n</form>';return __p}},{}],10:[function(require,module,exports){module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="",previousPage=first,__p+="\n",nextPage=last,__p+="\n\n",current>1&&(__p+="\n  ",previousPage=current-1,__p+="\n"),__p+="\n\n",current<last&&(__p+="\n  ",nextPage=current+1,__p+="\n"),__p+='\n\n<div class="first"><a href="?sp='+(null==(__t=previousPage)?"":__t)+"&sb="+(null==(__t=sortBy)?"":__t)+"&q="+(null==(__t=query)?"":__t)+'">Previous</a></div>\n<ol>\n  ',pages.forEach(function(page,index){__p+="\n    <li ",page==current&&(__p+=' class="current" '),__p+=' >\n      <a href="?sp='+(null==(__t=page)?"":__t)+"&sb="+(null==(__t=sortBy)?"":__t)+"&q="+(null==(__t=query)?"":__t)+'">'+(null==(__t=page)?"":__t)+"</a>\n    </li>\n  "}),__p+='\n</ol>\n<div class="last"><a href="?sp='+(null==(__t=nextPage)?"":__t)+"&sb="+(null==(__t=sortBy)?"":__t)+"&q="+(null==(__t=query)?"":__t)+'">Next</a></div>';return __p}},{}],11:[function(require,module,exports){module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<div id="search-result">\n  <div class="results-story">\n    ',""!==teaserImageURL&&(__p+='\n    <a href="'+(null==(__t=url)?"":__t)+'" class="results-story-image">\n      <img src="'+(null==(__t=teaserImageURL)?"":__t)+'" />\n    </a>\n    '),__p+='\n    <div class="results-story-body">\n      <div class="results-story-date">'+(null==(__t=publishDate)?"":__t)+'</div>\n      <h3 class="results-story-title"><a href="'+(null==(__t=url)?"":__t)+'">'+(null==(__t=title)?"":__t)+'</a></h3>\n      <p class="results-story-excerpt">'+(null==(__t=summary)?"":__t)+"</p>\n    </div>\n  </div>\n</div>";return __p}},{}],12:[function(require,module,exports){module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="",editProfileURL="https://"+stEnvironment+"secure.seattletimes.com/accountcenter/editprofile",accountCenterURL="https://"+stEnvironment+"secure.seattletimes.com/accountcenter/",__p+="\n\n",__p+=loggedIn?'\n\n  <li class="logout"><a href="#" >Log Out</a></li>\n  <li><a href="/help/">Help</a></li>\n  <li class="edit-profile" ><a  href="'+(null==(__t=editProfileURL)?"":__t)+'">Edit Profile</a></li>\n\n':'\n\n  <li><a href="'+(null==(__t=accountCenterURL)?"":__t)+'" class=" st-return">Log In</a></li>\n  <li><a href="/help/">Help</a></li>\n  <li class="subscribe" ><a href="/subscribe/signup/">Subscribe</a></li>\n\n',__p+='\n\n<li>\n  <a href="/contact/">Contact</a>\n</li>';return __p}},{}],13:[function(require,module,exports){module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="",newsLetterURL="https://"+stEnvironment+"secure.seattletimes.com/accountcenter/newsletters",editProfileURL="https://"+stEnvironment+"secure.seattletimes.com/accountcenter/editprofile",accountCenterURL="https://"+stEnvironment+"secure.seattletimes.com/accountcenter/",__p+="\n\n<ul>\n\n",loggedIn?(__p+='\n  <li class="user">\n    <span class="username">My Account</span>\n\n    <ul class="user-menu '+(null==(__t=accountType)?"":__t)+'">\n\n      <li class="username"><span >My Account</span></li>\n      <li class="edit-profile" ><a  href="'+(null==(__t=editProfileURL)?"":__t)+'">Edit Profile</a></li>\n\n      ',("nonDigitalSubAcct"==accountType||"digitalSubAcct"==accountType)&&(__p+='\n      <li class="subscriptions"><a href="https://subscriberservices.seattletimes.com" >Manage Subscriptions</a></li>\n      '),__p+='\n\n      <li class="newsletters"><a href="'+(null==(__t=newsLetterURL)?"":__t)+'">Newsletters</a></li>\n      <li class="logout"><a href="#">Log Out</a></li>\n\n    </ul>\n  </li>\n\n'):__p+='\n  <li class="login"><a href="'+(null==(__t=accountCenterURL)?"":__t)+'" class="st-return">Log In</a></li>\n',__p+="\n\n",("commenterAcct"==accountType||"noAcct"==accountType)&&(__p+='\n  <li class="subscribe"><a href="/subscribe/signup/" class=" st-return">Subscribe</a></li>\n'),__p+="\n\n</ul>\n";return __p}},{}],14:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone"));Backbone.$=$;var helpers=(require("../../../events/events.js"),require("../../../helpers/helpers.js"));module.exports=Backbone.Model.extend({defaults:{stEnvironment:window.SEATIMESCO.singleSignOn.info.stEnvironment,profileURL:window.SEATIMESCO.singleSignOn.info.profileURL},initialize:function(displayname){this.getProfileData(displayname)},getProfileData:function(displayName){var self=this,url="https://"+self.get("stEnvironment")+self.get("profileURL")+displayName,request=helpers.makeCORSRequest("GET",url);request.onload=function(){if(200==request.status){var response=JSON.parse(request.responseText);console.log(response),$("#displayname").html(decodeURIComponent(displayName));var output='<div id="comment-counts">';if(output+=isNaN(response.commentCount)?'<span class="error">'+response.commentCount+"</span>":'<span class="count">'+response.commentCount+"</span> comments",output+=" | ",output+=isNaN(response.receivedLikes)?'<span class="error">'+response.receivedLikes+"</span>":'<span class="count">'+response.receivedLikes+"</span> likes received",output+="</div>",response.profiledata.hasOwnProperty("about")&&""!=response.profiledata.about&&null!==response.profiledata.about&&(output+='<div class="about">'+response.profiledata.about+"</div>"),output+='<div id="profile-data">',output+='<div>Member Since: <span class="bold">'+response.profiledata.datecreated+"</span></div>",response.profiledata.hasOwnProperty("location")&&""!=response.profiledata.location&&null!==response.profiledata.location&&(output+='<div class="location">Location: <span class="bold">'+response.profiledata.location+"</span></div>"),response.profiledata.hasOwnProperty("gender")){var gender=response.profiledata.gender.toLowerCase();gender=gender.charAt(0).toUpperCase()+gender.slice(1),output+='<div class="gender">Gender: <span class="bold">'+gender+"</span></div>"}return response.profiledata.hasOwnProperty("dob")&&(output+='<div class="dob">Birth Year: <span class="bold">'+response.profiledata.dob+"</span></div>"),output+="</div>",output+='<div id="comment-history">',output+="<h2>Most Recent Comments</h2>",output+=response.commentHistory,output+="</div>",void $("#profile-container").append(output)}console.log("AJAX to profile.js session failed. Error below:"),console.log(request.responseText),$("#displayname").html("No Profile Found")},request.onerror=function(){console.log("Couldn't connect to profile.js API");var error="<div>Profile information could not be retrieved. Please try again later.</div>";$("#profile-container").append(error)},request.send()}})},{"../../../events/events.js":22,"../../../helpers/helpers.js":25,backbone:56,underscore:57}],15:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone"));Backbone.$=$;require("../../../events/events.js");module.exports=Backbone.View.extend({})},{"../../../events/events.js":22,backbone:56,underscore:57}],16:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone"));Backbone.$=$;var events=require("../../events/events.js");module.exports=Backbone.Model.extend({defaults:{adTopHeight:0,originalTop:1e4,adsCreated:!1,stAdsInitialized:!1,ssoSet:!1,adsSet:!1,paywallConfigured:!1,paywallOn:!1,ssoAccountType:"unknown",hamburgerClicked:!1,adsSent:!1,continueReadingBelowComplete:!1,paymessageSize:0},initialize:function(){var self=this;document.documentElement.clientWidth>=1020&&window.addEventListener("message",function(){if(null!=window.SEATIMESCO.payMeter.hardWallEnabled&&0!=window.SEATIMESCO.payMeter.hardWallEnabled&&void 0!=window.SEATIMESCO.payMeter.hardWallEnabled){if(self.get("originalTop")==self.defaults.originalTop){var modal=null;modal=document.querySelector(".subscribe-prompt-overlay .subscribe-prompt"),null!=modal&&(originalTop=window.getComputedStyle(modal).top,originalTop=parseInt(originalTop.substr(0,originalTop.length-2)),self.set("originalTop",originalTop))}self.parsePostMessage(event,self)}},!1)},parsePostMessage:function(event,self){var postMessageRegex=/paywall\:.*/;if(void 0!=event.data&&""!=event.data[0]&&postMessageRegex.test(event.data[0]))switch(event.data[0]){case"paywall:adTopHeight":self.set("adTopHeight",event.data[1]-90),events.trigger("paymeter:changeHardWallLocation",this.attributes)}}})},{"../../events/events.js":22,backbone:56,underscore:57}],17:[function(require,module,exports){(function(){var Backbone,events,helpers,_;_=require("underscore"),Backbone=require("backbone"),events=require("../../events/events.js"),helpers=require("../../helpers/helpers.js"),Backbone.$=$,module.exports=Backbone.Model.extend({defaults:{desktop:{min:1200,max:1/0},tablet_landscape:{min:1020,max:1280},tablet_portrait:{min:768,max:1020},phone:{min:0,max:768}},initialize:function(){}})}).call(this)},{"../../events/events.js":22,"../../helpers/helpers.js":25,backbone:56,underscore:57}],18:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone"));Backbone.$=$;var events=require("../../events/events.js");module.exports=Backbone.View.extend({initialize:function(){this.listenTo(events,"initialLoadEvent",this.createAdTags),this.listenTo(events,"paymeter:paywallConfigured",this.paymeterSet),this.listenTo(events,"sso:accountTypeDetermined",this.ssoComplete),this.listenTo(events,"dfp-api:adSetupCompleted",this.adSetupComplete),this.listenTo(events,"body:hamburgerClicked",this.displayPromoAd),this.listenTo(events,"paymeter:messageSize",this.setPaymessageSize)},createAdTags:function(){if("undefined"!=typeof window.SEATIMESCO.device){var doc=document,mobileBreakpoint=479,adRightHtml="<div id='div-gpt-ad-right'      class='dfp-ad dfp-right'><div class='ad-wrapper'></div></div>",adPromoLeftHtml="<div id='div-gpt-ad-promo-left' class='dfp-ad dfp-promo-left'>",adTbdRight1Html="<div id='div-gpt-ad-right1'     class='dfp-ad dfp-right1'>",adPromoNavHtml="<div id='div-gpt-ad-promo-nav'  class='dfp-ad dfp-promo-nav'>";window.innerWidth>mobileBreakpoint?(this.insertHtmlIntoElementByID("hamburger-ad-desktop",adPromoNavHtml,doc),this.insertHtmlIntoElementByID("ad-right-top-full",adRightHtml,doc),window.SEATIMESCO.device.getPlatform()||this.insertHtmlIntoElementByID("promo-left-full",adPromoLeftHtml,doc),this.insertHtmlIntoElementByID("tbd-ad-position-1-full",adTbdRight1Html,doc)):(this.insertHtmlIntoElementByID("hamburger-ad-mobile",adPromoNavHtml,doc),this.insertHtmlIntoElementByID("ad-right-top-phone",adRightHtml,doc),window.SEATIMESCO.device.getPlatform()||this.insertHtmlIntoElementByID("promo-left-small-mobile",adPromoLeftHtml,doc),this.insertHtmlIntoElementByID("tbd-ad-position-1-small-mobile",adTbdRight1Html,doc),this.relocateInsets("mobileAndApp",doc)),this.model.set("adsCreated",!0),this.handleAds()}},ssoComplete:function(accountType){this.model.set("ssoSet",!0),this.model.set("ssoAccountType",accountType),"Subscriber"!==accountType&&"OtherSubscription_NoAccess"!==accountType&&this.model.get("continueReadingBelowComplete")!==!0&&(this.model.set("continueReadingBelowComplete",!0),this.appendAdHTMLToPromo()),this.handleAds()},appendAdHTMLToPromo:function(){var promoAd=null;promoAd=document.querySelector("#promo-left-small-mobile"),null!=promoAd&&(promoAd.insertAdjacentHTML("beforebegin",'<a class="ad-continue-link" href="#ad-skip-left-promo" alt="Continue Reading Below"><span class="triangle"></span></a>'),promoAd.insertAdjacentHTML("afterend",'<a class="ad-continue-stub" id="ad-skip-left-promo"></a>'))},adSetupComplete:function(){this.model.set("adsSet",!0),this.handleAds()},paymeterSet:function(payMeterHardWallEnabled){this.model.set("paywallConfigured",!0),this.model.set("paywallOn",payMeterHardWallEnabled),this.handleAds()},handleAds:function(){this.model.get("adsCreated")&&this.model.get("adsSet")&&this.model.get("ssoSet")&&this.model.get("paywallConfigured")&&(this.sendAds(),this.showAds(this.model.get("paywallOn")))},sendAds:function(){googletag.pubads().addEventListener("slotRenderEnded",this.slotRenderEnded),googletag.pubads().setTargeting("subsc",this.model.get("ssoAccountType")),googletag.pubads().enableSingleRequest(),googletag.pubads().enableAsyncRendering(),googletag.pubads().collapseEmptyDivs(),googletag.pubads().disableInitialLoad(),googletag.enableServices(),this.model.set("adsSent",!0),this.displayPromoAd()},showAds:function(payMeterHardWallEnabled,source){var self=this;"undefined"!=typeof googletag&&!1===this.model.get("stAdsInitialized")&&(googletag.cmd.push(function(){googletag.on("gpt-slot_rendered",function(e,level,message,service,slot,reference){var targeting=slot.getTargetingMap();"undefined"!=typeof targeting.pos&&"right"==targeting.pos[0]&&$("#div-gpt-ad-right").height()<=250&&"undefined"!=typeof dfp_ad_slots["promo-right"]&&(googletag.display("div-gpt-ad-promo-right"),googletag.pubads().refresh([dfp_ad_slots["promo-right"]]))})}),googletag.cmd.push(function(){if("object"==typeof dfp_ad_slots){for(var ad_slots=Object.keys(dfp_ad_slots),slotsOnPage=[],i=0;i<ad_slots.length;i++)payMeterHardWallEnabled||"promo-right"==ad_slots[i]||"promo-nav"==ad_slots[i]||(googletag.display("div-gpt-ad-"+ad_slots[i]),slotsOnPage.push(dfp_ad_slots[ad_slots[i]]));googletag.pubads().refresh(slotsOnPage),self.model.set("stAdsInitialized",!0)}}))},displayPromoAd:function(){$(".main-nav-body").hasClass("open")&&dfp_ad_slots["promo-nav"]&&!this.model.get("hamburgerClicked")&&this.model.get("adsSent")&&(this.model.set("hamburgerClicked",!0),googletag.display("div-gpt-ad-promo-nav"),googletag.pubads().refresh([dfp_ad_slots["promo-nav"]]),googletag.pubads().addEventListener("slotRenderEnded",this.insertDivider))},slotRenderEnded:function(e){e.isEmpty||e.slot!==dfp_ad_slots.inter||(events.trigger("modalFacebook:disable"),googletag.pubads().removeEventListener("slotRenderEnded",this.slotRenderEnded))},setPaymessageSize:function(size){this.model.set("paymessageSize",size)},insertDivider:function(e){var adSlot=document.getElementById("div-gpt-ad-promo-nav");e.isEmpty||e.slot!==dfp_ad_slots["promo-nav"]||("hamburger-ad-desktop"===adSlot.parentElement.id?adSlot.insertAdjacentHTML("afterend",'<div class="main-nav-separator-ad"></div>'):"hamburger-ad-mobile"===adSlot.parentElement.id&&adSlot.insertAdjacentHTML("beforebegin",'<div class="main-nav-separator"></div>'),googletag.pubads().removeEventListener("slotRenderEnded",this.insertDivider))},relocateInsets:function(viewportsAndDevices,doc){if(!viewportsAndDevices)return void console.log("Pass a paramater to relocateInsets");if(!doc)var doc=document;switch(viewportsAndDevices){case"mobileAndApp":var mostReadWidgetElementFull=doc.querySelector("article.post .most-read-container"),mostReadElementSmallMobile=doc.getElementById("most-read-small-mobile");null!==mostReadWidgetElementFull&&null!==mostReadElementSmallMobile&&(mostReadElementSmallMobile.innerHTML=mostReadWidgetElementFull.outerHTML)}},insertHtmlIntoElementByID:function(elementID,HtmlForInsertion,doc){if(!doc)var doc=document;var targetedElement=doc.getElementById(elementID);null!==targetedElement&&(targetedElement.innerHTML=HtmlForInsertion)}})},{"../../events/events.js":22,backbone:56,underscore:57}],19:[function(require,module,exports){var _=require("underscore"),Backbone=require("backbone");Backbone.$=$,window.Backbone=Backbone,window._=_,window.events=require("./events/events.js"),window.helpers=require("./helpers/helpers.js"),function($){window.SEATIMESCO=window.SEATIMESCO||{},window.s=window.s||{};var SSOModel=require("./singlesignon/models/sso.js"),SSOHeaderUtilsView=require("./singlesignon/views/sso-header-utils.js"),SSOHamburgerNavView=require("./singlesignon/views/sso-hamburger-nav.js"),BodyView=require("./navigation/views/body.js"),FixedNavigationModel=require("./navigation/models/fixed-navigation.js"),FixedNavigationView=require("./navigation/views/fixed-navigation.js"),ToggledContentView=require("./toggled-content/views/toggled-content.js"),TabbedContentModel=require("./toggled-content/models/tabbed-content.js"),TabbedContentView=require("./toggled-content/views/tabbed-content.js"),ModalsModel=require("./modals/models/modals.js"),ModalsView=require("./modals/views/modals.js"),PaymeterModel=require("./paymeter/models/paymeter.js"),PaymeterView=require("./paymeter/views/paymeter.js"),SearchModel=(require("./messaging/views/modal.js"),require("./search/models/search.js")),SearchView=require("./search/views/search.js"),SearchResults=(require("./search/models/search-result.js"),require("./search/collections/search-results.js")),SearchResultsView=require("./search/views/search-results.js"),SearchPaginationView=require("./search/views/search-pagination.js"),SearchModalView=require("./search/views/search-modal.js"),ImageLazyLoadModel=require("./image-lazyload/models/lazyload.js"),ImageLazyLoadView=require("./image-lazyload/views/lazyload.js"),ImageEmbedModel=require("./image-embed/models/image-embed.js"),ImageEmbedView=require("./image-embed/views/image-embed.js"),ImageGalleryModel=require("./image-gallery/models/image-gallery.js"),ImageGalleryView=require("./image-gallery/views/image-gallery.js"),SocialSharingView=require("./social-sharing/views/social-sharing.js"),FacebookModalView=require("./social-sharing/views/facebook-modal.js"),CommentsModel=require("./comments/models/comments.js"),CommentsView=require("./comments/views/comments.js"),GTMModel=require("./gtm/models/gtm-model.js"),GTMView=require("./gtm/views/gtm-view.js"),DFPBreakpointModel=require("./ads/models/dfp-breakpoint.js"),AdsModel=require("./ads/models/ads.js"),AdsView=require("./ads/views/ads.js"),currentURL=document.location.href,profilePageRegex=new RegExp("http://"+document.location.hostname+"/profile/([^/]*)","i");if(profilePageRegex.test(currentURL)){var match=profilePageRegex.exec(currentURL);if(match.length>0){var ProfilePageModel=require("./account-center/profile-page/models/profile-page.js"),ProfilePageView=require("./account-center/profile-page/views/profile-page.js"),profilePageModel=new ProfilePageModel(match[1]);new ProfilePageView({model:profilePageModel})}}var fixedNavigationModel=(new BodyView,new FixedNavigationModel),tabbedContentModel=(new FixedNavigationView({model:fixedNavigationModel}),new ToggledContentView,new TabbedContentModel),modalsModel=(new TabbedContentView({model:tabbedContentModel}),new ModalsModel),ssoModel=(new ModalsView({model:modalsModel}),new SSOModel),paymeterModel=(new SSOHeaderUtilsView({model:ssoModel}),new SSOHamburgerNavView({model:ssoModel}),new PaymeterModel),searchModel=(new PaymeterView({model:paymeterModel}),new SearchModel),searchResults=(new SearchView({model:searchModel}),new SearchResults),imageLazyLoadModel=(new SearchResultsView({collection:searchResults}),new SearchPaginationView({model:searchModel}),new SearchModalView,new ImageLazyLoadModel),imageEmbeds=(new ImageLazyLoadView({model:imageLazyLoadModel}),document.querySelectorAll(".image-single-wrapper .article-figure"));imageEmbeds.length>0&&helpers.forEach(imageEmbeds,function(imageEmbed){new ImageEmbedView({el:imageEmbed,model:new ImageEmbedModel})});var imageGalleries=document.querySelectorAll(".image-gallery-wrapper > .gallery");imageGalleries.length>0&&helpers.forEach(imageGalleries,function(imageGallery){new ImageGalleryView({el:imageGallery,model:new ImageGalleryModel})});var commentsModel=(new SocialSharingView,new FacebookModalView,new CommentsModel),gtmModel=(new CommentsView({model:commentsModel}),new GTMModel),adsModel=(new GTMView({model:gtmModel}),new DFPBreakpointModel,new AdsModel);new AdsView({model:adsModel});document.addEventListener("DOMContentLoaded",function(){events.trigger("initialLoadEvent"),helpers.hasClass(document.querySelector(".global-header"),"transparent")&&(window.innerWidth<=768&&window.helpers.removeClass(document.querySelector(".header-wordmark"),"white"),window.addEventListener("resize",function(){clearTimeout(this.id),this.id=setTimeout(function(){window.innerWidth<=768?window.helpers.removeClass(document.querySelector(".header-wordmark"),"white"):window.helpers.addClass(document.querySelector(".header-wordmark"),"white")},300)}))})}(jQuery,window,document,_,Backbone,helpers)},{"./account-center/profile-page/models/profile-page.js":14,"./account-center/profile-page/views/profile-page.js":15,"./ads/models/ads.js":16,"./ads/models/dfp-breakpoint.js":17,"./ads/views/ads.js":18,"./comments/models/comments.js":20,"./comments/views/comments.js":21,"./events/events.js":22,"./gtm/models/gtm-model.js":23,"./gtm/views/gtm-view.js":24,"./helpers/helpers.js":25,"./image-embed/models/image-embed.js":26,"./image-embed/views/image-embed.js":27,"./image-gallery/models/image-gallery.js":28,"./image-gallery/views/image-gallery.js":29,"./image-lazyload/models/lazyload.js":30,"./image-lazyload/views/lazyload.js":31,"./messaging/views/modal.js":32,"./modals/models/modals.js":33,"./modals/views/modals.js":34,"./navigation/models/fixed-navigation.js":35,"./navigation/views/body.js":36,"./navigation/views/fixed-navigation.js":37,"./paymeter/models/paymeter.js":38,"./paymeter/views/paymeter.js":39,"./search/collections/search-results.js":40,"./search/models/search-result.js":41,"./search/models/search.js":42,"./search/views/search-modal.js":43,"./search/views/search-pagination.js":44,"./search/views/search-results.js":46,"./search/views/search.js":47,"./singlesignon/models/sso.js":48,"./singlesignon/views/sso-hamburger-nav.js":49,"./singlesignon/views/sso-header-utils.js":50,"./social-sharing/views/facebook-modal.js":51,"./social-sharing/views/social-sharing.js":52,"./toggled-content/models/tabbed-content.js":53,"./toggled-content/views/tabbed-content.js":54,"./toggled-content/views/toggled-content.js":55,backbone:56,underscore:57}],20:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone")),helpers=require("../../helpers/helpers.js");events=require("../../events/events.js"),Backbone.$=$,module.exports=Backbone.Model.extend({defaults:{initialized:!1,commentHash:"#comments",enabled:"",containerID:"",stEnvironment:"",lfEnvironment:"",network:"",siteID:"",postID:"",postTitle:"",postIDBase64:"",checksum:"",collectionMeta:"",disableAvatars:"",initialNumVisible:10,commentCount:0,countString:"",maxTopComments:1,maxCaptionLength:140,postAsButton:"Post comment",postReplyAsButton:"Post comment",signIn:"You must be logged in to leave a comment. Log in or create an account.",listenerCountPlural:"People Viewing",listenerCount:"Person Viewing",moderator:"Seattle Times staff",signOut:"Log out",backToComments:"View all comments"},initialize:function(){"undefined"!=typeof window.SEATIMESCO.comments&&"undefined"!=typeof window.SEATIMESCO.comments.info&&"undefined"!=typeof window.SEATIMESCO.comments.info.enabled&&0!=window.SEATIMESCO.comments.info.enabled&&(this.set({
enabled:window.SEATIMESCO.comments.info.enabled,containerID:window.SEATIMESCO.comments.info.containerID,stEnvironment:window.SEATIMESCO.comments.info.stEnvironment,lfEnvironment:window.SEATIMESCO.comments.info.lfEnvironment,network:window.SEATIMESCO.comments.info.network,siteID:window.SEATIMESCO.comments.info.siteID,postID:window.SEATIMESCO.comments.info.postID,postTitle:window.SEATIMESCO.comments.info.postTitle,postIDBase64:window.SEATIMESCO.comments.info.postIDBase64,checksum:window.SEATIMESCO.comments.info.checksum,collectionMeta:window.SEATIMESCO.comments.info.collectionMeta,disableAvatars:window.SEATIMESCO.comments.info.disableAvatars}),1==this.get("enabled")&&(this.listenToOnce(events,"comments:initialize",this.initializeComments),this.listenToOnce(events,"initialLoadEvent",this.checkForTopComments),this.listenToOnce(events,"comments:topCommentResponseReady",this.prepareTopCommentForRender)))},initializeComments:function(){if("undefined"!=typeof window.fyre){this.setUpAuthDelegate();var networkConfig={network:this.get("network"),authDelegate:this.authDelegate,authPageReload:!0,initialNumVisible:this.get("initialNumVisible"),strings:{postAsButton:this.get("postAsButton"),postReplyAsButton:this.get("postReplyAsButton"),signIn:this.get("signIn"),listenerCountPlural:this.get("listenerCountPlural"),listenerCount:this.get("listenerCount"),moderator:this.get("moderator"),signOut:this.get("signOut"),backToComments:this.get("backToComments")}},convConfig=[{articleId:this.get("postID"),checksum:this.get("checksum"),collectionMeta:this.get("collectionMeta"),disableAvatars:this.get("disableAvatars"),siteId:this.get("siteID"),el:this.get("containerID")}],callback=function(widget){for(var cval=!1,decodedCookie=decodeURIComponent(document.cookie),cachedCookies=decodedCookie.split(";"),i=0;i<cachedCookies.length;i++){var splitCookie=cachedCookies[i].split("="),cookieName=splitCookie[0].replace(/^\s+|\s+jQuery/g,""),cookieData=splitCookie[1];"lftoken"==cookieName&&(cval=cookieData)}if(cval)try{fyre.conv.login(cval)}catch(e){window.console&&console.log("Error attempting to login with lftoken cookie value: ",cval," ",e)}widget.on("commentPosted",function(data){events.trigger("comments:commentPosted",data)}),widget.on("commentLiked",function(data){events.trigger("comments:commentLiked",data)})};fyre.conv.load(networkConfig,convConfig,callback),events.trigger("comments:commentsInitialized")}},checkForTopComments:function(){return document.querySelector(".top-comment")?void this.topCommentRequest():void this.updateCommentCount()},setUpAuthDelegate:function(){var stEnvironment=this.get("stEnvironment");this.authDelegate=new fyre.conv.RemoteAuthDelegate,this.authDelegate.login=function(delegate){helpers.writeCookie("st-return",document.URL,3600,"/",".seattletimes.com"),window.location.href="https://"+stEnvironment+"secure.seattletimes.com/accountcenter/"},this.authDelegate.logout=function(delegate){return helpers.deleteCookie("sessionToken"),helpers.deleteCookie("authToken"),helpers.deleteCookie("displayName"),helpers.deleteCookie("lftoken"),helpers.deleteCookie("st_subscriberdata"),helpers.deleteCookie("phpbb3_l17g1_u"),helpers.deleteCookie("phpbb3_l17g1_k"),helpers.deleteCookie("phpbb3_l17g1_sid"),document.location.reload(),!0},this.authDelegate.editProfile=function(delegate,author){window.location.href="https://"+stEnvironment+"secure.seattletimes.com/accountcenter/editprofile"},this.authDelegate.viewProfile=function(handlers,author){return!0}},topCommentRequest:function(){var request=new XMLHttpRequest,requestURL="http://bootstrap."+this.get("network")+"/api/v3.0/site/"+this.get("siteID")+"/article/"+this.get("postIDBase64")+"/top/likes/";request.open("GET",requestURL,!0),request.onload=function(){if(400==request.status)return void console.log("COMMENTS: Top comment request error. Most likely there aren't any top comments available yet. Stopping further top comment work");if(request.status>=200&&request.status<400){var response=JSON.parse(request.responseText);events.trigger("comments:topCommentResponseReady",response)}else console.log("COMMENTS: Top comment request error. Most likely need to wait a few minutes for LiveFyre to initialize the comment collection for this notice to go away. Outputting response below:"),console.log(request.responseText)},request.onerror=function(){console.log("COMMENTS: Top comment request failed. Livfyre's services appear to be unconnectable.")},request.send(),this.updateCommentCount()},updateCommentCount:function(){LF.CommentCount({replacer:function(element,count){x=count;var countString=count>0?1==count?"1 Comment":count+" Comments":"0 Comments";window.SEATIMESCO.comments.info.commentCount=count,window.SEATIMESCO.comments.info.countString=countString,[].forEach.call(document.querySelectorAll(".comment-count"),function(span){span.innerHTML=countString})}})},prepareTopCommentForRender:function(response){var self=this;if(response.data.hasOwnProperty("content"))if(response.data.content.length>0){var comments=(response.data,response.data.content),authors=response.data.authors,resultsArray=[],numberOfResults=response.data.content.length,maxTopComments=this.get("maxTopComments");for(i=0;i<numberOfResults&&i<maxTopComments;i++){var commentObject,comment,author;comment=comments[i].content.bodyHtml,comment=self.topCommentTrim(comment),commentObject.comment=comment,author=comments[i].content.authorId,authors.hasOwnProperty(author)?commentObject.author=authors[author].displayName:console.log("No author in results matches the author ID"),resultsArray.push(commentObject)}events.trigger("comments:topCommentReadyToRender",resultsArray)}else console.log("Not rendering Top Comment. None provided by Livefyre")},topCommentTrim:function(comment){var captionRegex=new RegExp("^(.{1,"+this.get("maxCaptionLength")+"}[^\\s]*).*"),trimmedComment="";return comment=comment.replace(/<\/?[p]>/g,""),trimmedComment=comment.replace(captionRegex,"$1"),trimmedComment==comment?comment:trimmedComment+"..."}})},{"../../events/events.js":22,"../../helpers/helpers.js":25,backbone:56,underscore:57}],21:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone")),topCommentTemplate=require("../../../client-side-templates/comments-top-comment.html"),events=require("../../events/events.js");Backbone.$=$,module.exports=Backbone.View.extend({el:"body",template:topCommentTemplate,events:{"click #showcomments":"commentsHandler","click .article-top-comment .links a":"commentsHandler","click .fyre-comment-username":"viewPublicProfile","click .fyre-user-profile-link":"viewPublicProfile"},initialize:function(){if("undefined"!=typeof LF||"true"===window.SEATIMESCO.comments.enabled){var self=this;this.listenToOnce(events,"initialLoadEvent",this.checkURL),this.listenToOnce(events,"comments:topCommentReadyToRender",this.renderTopComment),this.listenTo(events,"comments:showComments",this.commentsHandler),window.addEventListener("hashchange",function(){self.checkURL()})}else console.log("Livefyre disabled.")},checkURL:function(){var commentHash=this.model.get("commentHash");window.location.hash===commentHash&&(console.log("Initializing comments because of hash change"),this.commentsHandler())},commentsHandler:function(e){this.model.get("initialized")?this.toggleComments(e):(events.trigger("comments:initialize"),this.model.set({initialized:!0}),this.toggleComments(e))},toggleComments:function(e){var commentsOpen=helpers.hasClass(document.querySelector(".comments-container"),"active");e&&(helpers.hasClass(e.target,"article-comments-bar")||helpers.hasClass(e.target,"icon-chat")||helpers.hasClass(e.target,"comment-count")&&!helpers.hasClass(e.target,"comment-link")||helpers.hasClass(e.target,"livefyre-commentcount"))&&e.preventDefault(),commentsOpen?events.trigger("comments:interaction","closed"):commentsOpen||events.trigger("comments:interaction","opened"),helpers.toggleClass(document.querySelector(".comments-container"),"active"),helpers.toggleClass(document.querySelector(".article-comments-bar"),"active")},renderTopComment:function(resultsArray){var renderedTopComment=this.template,topComment=document.querySelector(".top-comment");return null==topComment?void console.log("No top comment container on page. Aborting."):void(topComment.innerHTML=renderedTopComment({results:resultsArray}))},viewPublicProfile:function(e){document.location.href="/profile/"+encodeURIComponent(e.target.innerHTML).replace(/'/g,"%27")}})},{"../../../client-side-templates/comments-top-comment.html":1,"../../events/events.js":22,backbone:56,underscore:57}],22:[function(require,module,exports){var _=require("underscore"),Backbone=require("backbone");Backbone.$=$,module.exports=_.extend({},Backbone.Events)},{backbone:56,underscore:57}],23:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone"));require("../../events/events.js");Backbone.$=$,module.exports=Backbone.Model.extend({defaults:{signUpReferral:"voluntary",productsHeroOffer:{name:"st.com",id:"stcom",price:"0.99",position:1},productsDigitalOffer:{name:"digital bundle",id:"digital",price:"0.99",position:2},productsSTcomOffer:{name:"st.com",id:"stcom",price:"0.99",position:3},productsComboOffer:{name:"digital+print",id:"combo",price:"0.99",position:4}},initialize:function(){},gtmevent:function(){}})},{"../../events/events.js":22,backbone:56,underscore:57}],24:[function(require,module,exports){var _=require("underscore"),Backbone=require("backbone"),events=require("../../events/events.js");Backbone.$=$;var helpers=require("../../helpers/helpers.js");module.exports=Backbone.View.extend({el:"body",gaTracked:[],percents:[33,75],completed:!1,events:{"click .next":"galleryNext","click .prev":"galleryPrev","click .expand":"galleryExpand","click .owl-item":"galleryOwl","paymeter:paywallMesageDisplayed":"msgdisplay","click .article-next a":"articleNextLink","click .article-prev a":"articlePrevLink","click .hamburger-login-nav .subscribe a":"hamburgerSubscribeLink","click .header-utils .subscribe a":"headerSubscribeLink","click .subscriber-info .login":"offerLogin","click .option .option-button":"signUpAltOption","click .signup-st":"signUpSt","click .signup-digital-bundle":"signUpDigitalBundle","click .signup-sunday":"signUpSundayOnly","click .signup-seven-day":"signUpSevenDay","click .mobile-subscribe-button":"mobilePaywalltoOffers","click .mobile-subscriber-info .login":"mobileOfferLogin","click .menu-button":"hamburgerClick","click .marketplace-promos a":"marketplaceClick","click .global-header-top a":"headermenuClick","click .section-nav a":"navmenuClick","click .footer-nav-primary a":"footermenuClick","click .footer-copyright a":"footercopyrightClick","click .river-group a":"riverClick","click .most-read-container a":"mostReadClick","click .featured-comment a":"featuredCommentClick","click .pnw-group a":"pnwClick","click .marketing-promo-block a":"marketingPromoBlockClick","click .mini-content a":"miniClick","click .per-week":"perWeekClick","click .six-months":"sixMonthsClick","click .one-year":"oneYearClick","click .home-delivery":"learnMoreClick"},initialize:function(){dataLayer||(dataLayer=[]),this.listenToOnce(events,"initialLoadEvent",this.setupGTM),this.listenTo(events,"paymeter:paywallMessageDisplayedGTM",this.msgdisplay),this.listenTo(events,"paymeter:userTypeDetermined",this.setUserType),this.listenTo(events,"paymeter:postMeterStart",this.meterPush),this.listenTo(events,"paymeter:modalActionTaken",this.modalAction),this.listenTo(events,"socialshare:email",this.emailshare),this.listenTo(events,"socialshare:twitter",this.twittershare),this.listenTo(events,"socialshare:twitterpullquote",this.twitterpullquoteshare),this.listenTo(events,"socialshare:facebook",this.facebookshare),this.listenTo(events,"comments:toggleComments",this.chatshare),this.listenTo(events,"comments:commentPosted",this.commentPosted),this.listenTo(events,"comments:commentLiked",this.commentLiked),this.listenTo(events,"survey:surveyComplete",this.surveyComplete),this.listenTo(events,"comments:interaction",this.commentEvent),this.listenToOnce(events,"modalFacebook:displayed",this.modalFBDisplayed),this.listenToOnce(events,"modalFacebook:dismissed",this.modalFBDismissed),this.listenToOnce(events,"modalFacebook:liked",this.modalFBDLiked)},modalFBDisplayed:function(){dataLayer.push({event:"analyticsEvent",eventCategory:"social",eventAction:"facebook_like",eventLabel:"bottomleft_v1: displayed"})},modalFBDismissed:function(){dataLayer.push({event:"analyticsEvent",eventCategory:"social",eventAction:"facebook_like",eventLabel:"bottomleft_v1: dismissed"})},modalFBDLiked:function(){dataLayer.push({event:"analyticsEvent",eventCategory:"social",eventAction:"facebook_like",eventLabel:"bottomleft_v1: liked"})},commentEvent:function(commentInteraction){var eventObject={event:"analyticsEvent",eventCategory:"commenting",eventAction:"comments "+commentInteraction};dataLayer.push(eventObject)},surveyComplete:function(id){var eventObject={event:"analyticsEvent",eventCategory:"survey",eventAction:"survey complete",eventLabel:id};dataLayer.push(eventObject)},setUserType:function(currentUserType){this.model.set("userType",currentUserType)},setupGTM:function(){var throttleScroll,userType,self=this,currentURL=document.location.href,subscribePage=new RegExp("https?://"+document.location.hostname+"/subscribe/offers(?:-alt)?/","i"),wallMobilePage=new RegExp("https?://"+document.location.hostname+"/wall-mobile/.*","i"),signUpPages=new RegExp("https?://"+document.location.hostname+"/subscribe/signup(?:.*)?/.*","i");if("undefined"==typeof dataLayer)return void console.log("No dataLayer, not running GTM scripts");if(_.bindAll(this,"detect_scroll"),throttleScroll=_.throttle(self.detect_scroll,300),window.addEventListener("scroll",throttleScroll),userType=this.convertUserTypeToStandard(),paywallStoryCountCookie=this.getPaywallStoryCountCookie(),paywallStoryCountCookie!==!1&&(subscribePage.test(currentURL)&&(this.model.set("signUpReferral","pwall"),document.getElementsByClassName("offer-alt1")[0]?events.trigger("signUpPage:referrer","alt1"):document.getElementsByClassName("offer-alt2")[0]&&events.trigger("signUpPage:referrer","alt2"),dataLayer.push({event:"meterEvent",eventCategory:"subscribe",eventAction:this.model.get("signUpReferral")+" landing page viewed",eventLabel:userType+" "+paywallStoryCountCookie})),wallMobilePage.test(currentURL)&&dataLayer.push({event:"meterEvent",eventCategory:"meter",eventAction:"wall message displayed - smartphone",eventLabel:userType+" "+paywallStoryCountCookie}),signUpPages.test(currentURL))){var queryParams=helpers.parseQueryString(),promoRegex=new RegExp("promo.*","i");document.getElementsByClassName("offer-alt1")[0]?events.trigger("signUpPage:referrer","alt1"):document.getElementsByClassName("offer-alt2")[0]?events.trigger("signUpPage:referrer","alt2"):queryParams.hasOwnProperty("icn")&&promoRegex.test(queryParams.icn)&&(events.trigger("signUpPage:referrer","promo"),this.model.set("signUpReferral","internal promo")),dataLayer.push({event:"meterEvent",eventCategory:"subscribe",eventAction:this.model.get("signUpReferral")+" landing page viewed"})}},render:function(){return this},commentPosted:function(data){this.analyticsEvent("commenting","comment posted",window.SEATIMESCO.comments.info.postID)},commentLiked:function(data){this.analyticsEvent("commenting","comment liked",window.SEATIMESCO.comments.info.postID)},featuredCommentClick:function(e){loc=this.riverTarget(e),e.view.dataLayer[0].contentType?type=e.view.dataLayer[0].contentType:type="unknown",this.analyticsEvent("featured-comment",type+"- click",loc,null,!1)},pnwClick:function(e){loc=this.riverTarget(e),e.view.dataLayer[0].contentType?type=e.view.dataLayer[0].contentType:type="unknown",this.analyticsEvent("PacificNW",type+"- click",loc,null,!1)},marketingPromoBlockClick:function(e){var type,destinationURL=this.riverTarget(e);type=e.view.dataLayer[0].contentType?e.view.dataLayer[0].contentType:"unknown",dataLayer.push({event:"analyticsEvent",eventCategory:"ST Marketing Promo Block",eventAction:type+"- click",eventLabel:destinationURL})},mostReadClick:function(e){loc=this.riverTarget(e),e.view.dataLayer[0].contentType?type=e.view.dataLayer[0].contentType:type="unknown",this.analyticsEvent("most-read",type+"- click",loc,null,!1)},riverClick:function(e){title=this.riverAttr("#"+e.currentTarget.id),loc=this.riverTarget(e),e.view.dataLayer[0].contentType?type=e.view.dataLayer[0].contentType:type="unknown",this.analyticsEvent(title,type+"- click",loc,null,!1)},miniClick:function(e){title=this.riverAttr("#"+e.currentTarget.id),loc=this.riverTarget(e),e.view.dataLayer[0].contentType?type=e.view.dataLayer[0].contentType:type="unknown",this.analyticsEvent(title,type+"- click",loc,null,!1)},riverTarget:function(e){return loc=e.target.innerHTML,e.target.href&&(loc=e.target.href),e.currentTarget.href&&(loc=e.currentTarget.href),loc},riverAttr:function(elem){return up=$(elem).closest("div[data-zone]"),up.attr("data-zone")},marketplaceClick:function(e){this.linkClick(e,"Marketplace block")},headermenuClick:function(e){this.linkClick(e,"Header Menu")},hamburgerClick:function(e){var type="unknown";e.view.dataLayer[0].contentType&&(type=e.view.dataLayer[0].contentType),this.analyticsEvent("Header Menu",type+"- click","Hamburger icon clicked",null,!1)},navmenuClick:function(e){this.linkClick(e,"Nav Menu")},footermenuClick:function(e){this.linkClick(e,"Footer Menu")},footercopyrightClick:function(e){this.linkClick(e,"Footer Copyright")},linkClick:function(e,widget){e.target.href?loc=e.target.href:e.target.innerHTML?loc=e.target.innerHTML:e.target.className?loc=e.target.className:loc="unknown",e.view.dataLayer[0].contentType?type=e.view.dataLayer[0].contentType:type="unknown",this.analyticsEvent(widget,type+"- click",loc,null,!1)},convertUserTypeToStandard:function(){if("undefined"==typeof window.SEATIMESCO.singleSignOn.info.accountType)return"anon";switch(window.SEATIMESCO.singleSignOn.info.accountType){case"noAcct":return"anon";case"digitalSubAcct":return"sub";case"nonDigitalSubAcct":return"other";case"commenterAcct":return"reg";default:return"anon"}},getPaywallStoryCountCookie:function(){var storyCount=parseInt(helpers.getCookie("st_story_count"));return window.SEATIMESCO.payMeter.storyCount=storyCount,storyCount},articleNextLink:function(e){var href="";href="A"==e.target.nodeName?e.target.href:e.target.parentElement.href,dataLayer.push({event:"analyticsEvent",eventCategory:"Previous-Next",eventAction:"story - click",eventLabel:href})},articlePrevLink:function(e){var href="";href="A"==e.target.nodeName?e.target.href:e.target.parentElement.href,dataLayer.push({event:"analyticsEvent",eventCategory:"Previous-Next",eventAction:"story - click",eventLabel:href})},hamburgerSubscribeLink:function(e){dataLayer.push({event:"analyticsEvent",eventCategory:"subscribe",eventAction:"Subscribe click - hamburger",eventLabel:document.location.href})},headerSubscribeLink:function(e){dataLayer.push({event:"analyticsEvent",eventCategory:"subscribe",eventAction:"Subscribe click - header",eventLabel:document.location.href})},mobilePaywalltoOffers:function(){var userType=this.convertUserTypeToStandard(),storyCount=this.getPaywallStoryCountCookie();storyCount=storyCount?storyCount:"noStoryCount",dataLayer.push({event:"meterEvent",eventCategory:"meter",eventAction:"wall subscribe clicked - smartphone",eventLabel:userType+" "+storyCount,meteredStoryCount:storyCount,userType:userType}),events.trigger("singleSignOn:handleReturnURL")},mobileOfferLogin:function(e){var userType=this.convertUserTypeToStandard(),storyCount=this.getPaywallStoryCountCookie();storyCount=storyCount?storyCount:"noStoryCount",helpers.hasClass(document.querySelector(".mobile-subscriber-info .login"),"activate-subscriber-account")?dataLayer.push({event:"meterEvent",eventCategory:"meter",eventAction:"wall activate clicked - smartphone",eventLabel:userType+" "+storyCount,meteredStoryCount:storyCount,userType:userType}):dataLayer.push({event:"meterEvent",eventCategory:"meter",eventAction:"wall login clicked - smartphone",eventLabel:userType+" "+storyCount,meteredStoryCount:storyCount,userType:userType}),events.trigger("singleSignOn:handleReturnURL")},offerLogin:function(e){var userType=this.convertUserTypeToStandard(),storyCount=this.getPaywallStoryCountCookie(),messageOverride=!1;storyCount=storyCount?storyCount:"noStoryCount",("/subscribe/signup/"==document.location.pathname||"/subscribe/signup-alt/"==document.location.pathname)&&(messageOverride=!0),helpers.hasClass(document.querySelector(".subscriber-info .login"),"activate-subscriber-account")?(messageOverride=messageOverride?this.model.get("signUpReferral")+" landing page activate subscriber account link click":"pwall activate subscriber account link click",dataLayer.push({event:"meterEvent",eventCategory:"subscribe",eventAction:messageOverride,eventLabel:userType+" "+storyCount,meteredStoryCount:storyCount,userType:userType})):(messageOverride=messageOverride?this.model.get("signUpReferral")+" landing page login link click":"pwall login link click",dataLayer.push({event:"meterEvent",eventCategory:"subscribe",eventAction:messageOverride,eventLabel:userType+" "+storyCount,meteredStoryCount:storyCount,userType:userType})),events.trigger("singleSignOn:handleReturnURL")},signUpAltOption:function(e){var option=helpers.attribute(e.target,"data-option");"print"==option?this.signUpOffer(this.model.get("signUpReferral")+" landing page- Home Delivery options click"):"digital"==option&&this.signUpOffer(this.model.get("signUpReferral")+" landing page- Digital access options click")},signUpSt:function(){this.signUpOffer(this.model.get("signUpReferral")+" landing page - St.com click")},signUpDigitalBundle:function(){this.signUpOffer(this.model.get("signUpReferral")+" landing page - Digital bundle click")},signUpSundayOnly:function(){this.signUpOffer(this.model.get("signUpReferral")+" landing page - Sunday only click")},signUpSevenDay:function(){this.signUpOffer(this.model.get("signUpReferral")+" landing page - 7 day click")},signUpOffer:function(action){var userType=this.convertUserTypeToStandard(),storyCount=this.getPaywallStoryCountCookie();storyCount=storyCount?storyCount:"noStoryCount",dataLayer.push({event:"meterEvent",eventCategory:"subscribe",eventAction:action,eventLabel:userType+" "+storyCount,meteredStoryCount:storyCount,userType:userType}),events.trigger("singleSignOn:handleReturnURL")},subscribeCheckoutEvent:function(action,label){this.checkoutEvent("subscribe",action,label)},subscribeProductImpressions:function(){dataLayer.push({ecommerce:{currencyCode:"US",impressions:[this.model.get("productsHeroOffer"),this.model.get("productsDigitalOffer"),this.model.get("productsSTcomOffer"),this.model.get("productsComboOffer")]}})},checkoutEvent:function(category,action,label){dataLayer.push({event:"checkoutEvent",eventCategory:category,eventAction:action,eventLabel:label})},modalAction:function(action){type=this.model.get("type"),"Meter Message Closed"==action?"hard"==type?this.meterEvent("wall message closed"):this.meterEvent("message closed"):"Meter Message Login Clicked"==action?"hard"==type?this.meterEvent("wall login clicked"):this.meterEvent("message login clicked"):"Meter Message Subscribe Clicked"==action?"hard"==type?this.promotionEvent("wall subscribe clicked"):this.promotionEvent("message subscribe clicked"):"Meter Message Activate Account Clicked"==action?"hard"==type?this.meterEvent("wall  activate clicked"):this.meterEvent("message activate clicked"):"hard"==type?this.meterEvent("wall click - unknown type"):this.meterEvent("message click - unknown type")},meterPush:function(count,days){msgs=parseInt(helpers.getCookie("pmCount")),msgs||(msgs=0),dataLayer.push({event:"meterEvent",eventCategory:"meter",eventAction:"load",eventLabel:"user",meteredStoryCount:count,daysSinceFirstCookie:days,lifetimeMessages:msgs})},galleryNext:function(e){this.analyticsEvent("interaction","gallery","nextClick")},galleryPrev:function(e){this.analyticsEvent("interaction","gallery","prevClick")},galleryExpand:function(e){this.analyticsEvent("interaction","gallery","expandClick")},galleryOwl:function(e){this.analyticsEvent("interaction","gallery","thumbnailClick")},chatshare:function(e){e?type="foot click":type="social click",this.analyticsEvent("interaction","commenting","widget toggle - "+type,window.SEATIMESCO.comments.info.postID,!1)},twittershare:function(){this.shareClick("twitter")},twitterpullquoteshare:function(){this.shareClick("twitter")},emailshare:function(){this.shareClick("email")},facebookshare:function(){this.shareClick("facebook")},msgdisplay:function(type,count,messages,msgType){msgs=parseInt(helpers.getCookie("pmCount"));var currentDomain=".seattletimes.com",expires=31536e6;msgs?helpers.writeCookie("pmCount",msgs+1,expires,"/",currentDomain):helpers.writeCookie("pmCount",1,expires,"/",currentDomain),this.model.set("type",type),this.model.set("messages",messages),this.model.set("count",count),this.model.set("userType",messages.currentUserType),this.model.set("messageType",msgType),this.impressionEvent(type,count,messages.currentUserType)},shareClick:function(network){"chat"!=network&&this.socialEvent(network,"share")},socialEvent:function(socialNetwork,socialAction,opt_socialTarget,opt_page){dataLayer.push({event:"social",socialNetwork:socialNetwork,socialAction:socialAction})},analyticsEvent:function(category,action,opt_label,opt_value,opt_noninteractive){dataLayer.push({event:"analyticsEvent",eventCategory:category,eventAction:action,eventLabel:opt_label,eventValue:opt_value,eventNonInt:opt_noninteractive})},meterEvent:function(action){dataLayer.push({event:"meterEvent",eventCategory:"meter",eventAction:action,eventLabel:this.model.get("userType")+" "+this.model.get("count")+" "+this.model.get("messageType"),meteredStoryCount:this.model.get("count"),userType:this.model.get("userType"),meterDisplayType:this.model.get("type")})},impressionEvent:function(type,count,usertype){id=type+"-"+usertype+"-"+count,action="meter message displayed","hard"==type&&(action="wall message displayed");var label=usertype+" "+count;this.model.get("messageType")&&(label+=" "+this.model.get("messageType")),dataLayer.push({ecommerce:{promoView:{promotions:[{id:id,name:id}]}}}),dataLayer.push({event:"meterEvent",eventCategory:"meter",eventAction:action,eventLabel:label,meteredStoryCount:count,userType:usertype,meterDisplayType:type})},promotionEvent:function(action){id=this.model.get("type")+"-"+this.model.get("userType")+"-"+this.model.get("count");var label=this.model.get("userType")+" "+this.model.get("count");this.model.get("messageType")&&(label+=" "+this.model.get("messageType")),dataLayer.push({event:"promotionClick",ecommerce:{promoClick:{promotions:[{id:id,name:id}]}}}),dataLayer.push({event:"meterEvent",eventCategory:"meter",eventAction:action,eventLabel:label,meteredStoryCount:this.model.get("count"),userType:this.model.get("userType"),meterDisplayType:this.model.get("type")})},detect_scroll:function(){this.sendScrollEvent()},scrollY:function(){var de=document.documentElement;return self.pageYOffset||de&&de.scrollTop||document.body.scrollTop},pageHeight:function(){return document.body.scrollHeight},windowHeight:function(){var de=document.documentElement;return self.innerHeight||de&&de.clientHeight||document.body.clientHeight},scrollPercentage:function(){for(var i=0,len=this.percents.length;len>i;i++){var yScroll=(this.scrollY()+this.windowHeight())/this.pageHeight()*100,percentLabel=this.percents[i]+"%";this.gaTracked.indexOf(percentLabel)<0&&yScroll>this.percents[i]&&(this.gaTracked.push(percentLabel),this.analyticsEvent("interaction","scroll",percentLabel))}},sendScrollEvent:function(){"story"==dataLayer[0].contentType?(this.gaTracked.length<1&&this.scrollPercentage(),this.completed||document.querySelector(".extended-byline")&&helpers.isVisible(document.querySelector(".extended-byline"))&&(this.analyticsEvent("interaction","scroll","finished"),this.completed=!0)):this.scrollPercentage()},subscribeOfferEvent:function(action){var id;return id=this.model.get("type")+"-"+this.model.get("userType")+"-"+this.model.get("count"),window.dataLayer.push({ecommerce:{promoView:{promotions:[{id:id,name:name}]}}}),window.dataLayer.push({event:"meterEvent",eventCategory:"subscribe",eventAction:action,eventLabel:document.location.href,meteredStoryCount:this.model.get("count"),userType:this.model.get("userType"),meterDisplayType:this.model.get("type")}),dataLayer}})},{"../../events/events.js":22,"../../helpers/helpers.js":25,backbone:56,underscore:57}],25:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone"));Backbone.$=$;require("../events/events.js");module.exports={help:function(){console.log("Help! I need somebody."),console.log("Help! Not just anybody."),console.log("Help! You know I need someone."),console.log("Help!")},makeCORSRequest:function(method,url){var xhr=new XMLHttpRequest;return"withCredentials"in xhr?xhr.open(method,url,!0):"undefined"!=typeof XDomainRequest?(xhr=new XDomainRequest,xhr.open(method,url)):xhr=null,xhr},getScrollOffset:function(axis){var x,y,element;switch("number"==typeof window.pageYOffset?(x=window.pageXOffset,y=window.pageYOffset):(element=document.compatMode&&"CSS1Compat"===document.compatMode?document.documentElement:document.body,x=element.scrollLeft,y=element.scrollTop),axis){case"x":return x;case"y":return y;default:return{x:x,y:y}}},getScrollPercent:function(){var currentScroll=this.getScrollOffset("y")+document.documentElement.clientHeight,documentHeight=void 0!==document.height?document.height:document.body.offsetHeight;return parseInt(currentScroll/documentHeight*100)},getElementOffset:function(element,axis){var elementOffset=element.getBoundingClientRect(),x=elementOffset.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),y=elementOffset.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0);switch(axis){case"x":return x;case"y":return y;default:return{x:x,y:y}}},getCookie:function(cookieRequest){for(var decodedCookie=decodeURIComponent(document.cookie),cachedCookies=decodedCookie.split(";"),i=0;i<cachedCookies.length;i++){var splitCookie=cachedCookies[i].split("="),cookieName=splitCookie[0].replace(/^\s+|\s+jQuery/g,""),cookieData=splitCookie[1];if(cookieName==cookieRequest)return cookieData}return!1},writeCookie:function(name,value,expires,path,domain){var cookie=name+"="+escape(value)+";";expires&&(expires=new Date((new Date).getTime()+1e3*parseInt(expires)),cookie+="expires="+expires.toGMTString()+";"),path&&(cookie+="path="+path+";"),domain&&(cookie+="domain="+domain+";"),document.cookie=cookie},deleteCookie:function(name){this.getCookie(name)&&(document.cookie=name+"=false;path=/;domain=seattletimes.com;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},attribute:function(element,attribute,value){return"undefined"==typeof value?element.getAttribute(attribute):element.setAttribute(attribute,value)},forEach:function(elements,callback){[].forEach.call(elements,function(element){callback(element)})},toggleClass:function(element,className){if(element.classList)element.classList.toggle(className);else{var classes=element.className.split(" "),existingIndex=classes.indexOf(className);existingIndex>=0?classes.splice(existingIndex,1):classes.push(className),element.className=classes.join(" ")}},addClass:function(element,className){element.classList?element.classList.add(className):element.className+=" "+className},removeClass:function(element,className){element.classList?element.classList.remove(className):element.className=el.className.replace(new RegExp("(^|\\b)"+className.split(" ").join("|")+"(\\b|$)","gi")," ")},hasClass:function(element,selector){var className=" "+selector+" ";return 1===element.nodeType&&(" "+element.className+" ").replace(/[\n\t\r]/g," ").indexOf(className)>=0?!0:!1},isVisible:function(element){
var viewPortTop=this.getScrollOffset("y"),viewPortBottom=viewPortTop+document.documentElement.clientHeight,elementTop=this.getElementOffset(element,"y"),elementBottom=elementTop+element.offsetHeight;return viewPortBottom>=elementBottom&&elementTop>=viewPortTop},getDevicePixelRatio:function(){var ratio=1;return void 0!==window.screen.systemXDPI&&void 0!==window.screen.logicalXDPI&&window.screen.systemXDPI>window.screen.logicalXDPI?ratio=window.screen.systemXDPI/window.screen.logicalXDPI:void 0!==window.devicePixelRatio&&(ratio=window.devicePixelRatio),ratio},parseQueryString:function(){var query=document.location.href,params={};query=query.substr(query.indexOf("?")+1,query.length-1),query=query.split("&");for(var i=0;i<query.length;i++)query[i]=query[i].split("="),params[query[i][0]]=query[i][1];return params}}},{"../events/events.js":22,backbone:56,underscore:57}],26:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone"));Backbone.$=$;require("../../events/events.js"),require("../../helpers/helpers.js");module.exports=Backbone.Model.extend({defaults:{inModal:!1,embedID:"",currentImage:"http://placehold.it/780x500",sideAligned:!1,imageXSmall:"http://placehold.it/300x200",imageSmall:"http://placehold.it/780x500",imageMedium:"http://placehold.it/1020x780",imageLarge:"http://placehold.it/1560x1020",imageXLarge:"http://placehold.it/2040x1560",caption:"",captionTruncated:"",captionToggleEnabled:!1,captionToggleLock:!0,captionState:"full",captionTruncateLength:0}})},{"../../events/events.js":22,"../../helpers/helpers.js":25,backbone:56,underscore:57}],27:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone"));Backbone.$=$;var events=require("../../events/events.js"),helpers=require("../../helpers/helpers.js");module.exports=Backbone.View.extend({template:require("../../../client-side-templates/image-single.html"),initialize:function(){helpers.hasClass(document.querySelector("html"),"no-support")||(this.events={"click span.expand":"startLightbox","click span.caption-toggle":"toggleCaption"},this.model.set({embedID:this.el.id,classList:this.el.className,sideAligned:helpers.hasClass(this.el,"align-right")||helpers.hasClass(this.el,"align-left"),imageXSmall:helpers.attribute(this.el.querySelector("img"),"data-src-x-small"),imageSmall:helpers.attribute(this.el.querySelector("img"),"data-src-small"),imageMedium:helpers.attribute(this.el.querySelector("img"),"data-src-medium"),imageLarge:helpers.attribute(this.el.querySelector("img"),"data-src-large"),imageXLarge:helpers.attribute(this.el.querySelector("img"),"data-src-x-large"),caption:this.el.querySelector("figcaption .caption").innerHTML,alt:this.el.querySelector("img").alt}),this.configureCaption(),this.getDeviceCase(),this.model.get("captionToggleEnabled")&&this.model.set({captionState:"truncated"}),this.el.innerHTML=this.template(this.model.attributes))},toggleCaption:function(){this.configureCaption(),"truncated"==this.model.get("captionState")?this.model.set("captionState","full"):this.model.set("captionState","truncated"),this.el.innerHTML=this.template(this.model.attributes)},startLightbox:function(){this.configureCaption(),this.listenToOnce(events,"modal:shown",this.sendToModal),this.listenToOnce(events,"modal:hiding",this.sendToArticle),this.configureAndTriggerFullView()},configureCaption:function(){var caption=null;if(caption=this.el.querySelector("figcaption .caption"),null!=caption){var captionHeight=caption.offsetHeight,captionLineHeight=parseInt(window.getComputedStyle(caption).getPropertyValue("line-height")),lines=captionHeight/captionLineHeight;lines>3?(this.model.set({captionToggleEnabled:!0,captionToggleLock:!0}),this.calculateLineLength(),this.truncateCaption()):this.model.get("captionToggleLock")||this.model.set({captionToggleEnabled:!1})}else this.model.set({captionToggleEnabled:!1})},configureAndTriggerFullView:function(){var config={customClasses:"image-embed",toggleIconClass:"icon-contract"};events.trigger("modal:toggle",config)},calculateLineLength:function(){var captionWidth=this.el.querySelector(".article-figure-caption").offsetWidth-40,text="Cow pork belly pork swine, alcatra boudin jerky. Tail beef shankle kevin alcatra meatball andouille pork belly filet mignon. Brisket ground round turkey porchetta biltong flank ribeye prosciutto filet mignon ball tip cow turducken pastrami leberkas. Turducken chicken short ribs hamburger strip steak ground round fatback ball tip sirloin boudin bacon brisket turkey. Pork chop brisket cow rump shank landjaeger ham kielbasa chuck meatball turducken jerky spare ribs. Boudin cupim bacon flank, porchetta frankfurter ribeye pork pig landjaeger cow shoulder brisket filet mignon. Biltong spare ribs pig, ham bacon ground round rump pork loin sirloin hamburger ham hock flank prosciutto tenderloin.",howManyFit=text.length,span=document.createElement("span");span.style.fontFamily='"ff-meta-serif-web-pro", Georgia, serif',span.style.fontSize="15px",span.style.opacity="0",span.style.height="1px",this.el.appendChild(span);for(var i=0;howManyFit>i;i++)if(span.innerHTML+=text[i],span.offsetWidth>captionWidth){howManyFit=i;break}this.el.removeChild(span),this.model.set({captionTruncateLength:3*howManyFit})},getDeviceCase:function(){var deviceCase={isRetina:helpers.getDevicePixelRatio()>=2?!0:!1,viewPortWidth:document.documentElement.clientWidth};if(deviceCase.viewPortWidth>=1020?deviceCase.viewPortCase="desktop":deviceCase.viewPortWidth>=768?deviceCase.viewPortCase="tablet":deviceCase.viewPortCase="mobile",this.model.get("inModal")&&deviceCase.isRetina)switch(deviceCase.viewPortCase){case"desktop":deviceCase.currentImage=this.model.get("imageXLarge");break;case"tablet":deviceCase.currentImage=this.model.get("imageLarge");break;case"mobile":deviceCase.currentImage=this.model.get("imageXSmall")}else if(!this.model.get("inModal")&&deviceCase.isRetina)switch(deviceCase.viewPortCase){case"desktop":deviceCase.currentImage=this.model.get("sideAligned")?this.model.get("imageSmall"):this.model.get("imageLarge");break;case"tablet":deviceCase.currentImage=this.model.get("sideAligned")?this.model.get("imageSmall"):this.model.get("imageLarge");break;case"mobile":deviceCase.currentImage=this.model.get("sideAligned")?this.model.get("imageSmall"):this.model.get("imageXSmall")}else if(this.model.get("inModal")&&!deviceCase.isRetina)switch(deviceCase.viewPortCase){case"desktop":deviceCase.currentImage=this.model.get("imageLarge");break;case"tablet":deviceCase.currentImage=this.model.get("imageMedium");break;case"mobile":deviceCase.currentImage=this.model.get("imageXSmall")}else if(this.model.get("inModal")||deviceCase.isRetina)deviceCase.sizeToDeliver=this.model.get("imageMedium");else switch(deviceCase.viewPortCase){case"desktop":deviceCase.currentImage=this.model.get("sideAligned")?this.model.get("imageXSmall"):this.model.get("imageMedium");break;case"tablet":deviceCase.currentImage=this.model.get("sideAligned")?this.model.get("imageXSmall"):this.model.get("imageSmall");break;case"mobile":deviceCase.currentImage=this.model.get("sideAligned")?this.model.get("imageXSmall"):this.model.get("imageXSmall")}this.model.set(deviceCase)},truncateCaption:function(){var captionCreditCount,captionTruncated,textLength,captionTruncated,caption=this.model.get("caption"),captionCreditRegex=/\(([^\(]+)\)$/,captionCredit=captionCreditRegex.exec(caption);captionCredit=null!=captionCredit&&captionCredit.length>0?captionCredit[0]:"",captionCreditCount=captionCredit.length+5,textLength=this.model.get("captionTruncateLength")-captionCreditCount,captionTruncated=caption.substr(0,textLength),captionTruncated=captionTruncated.substr(0,Math.min(captionTruncated.length,captionTruncated.lastIndexOf(" "))),captionTruncated+="... "+captionCredit,this.model.set("captionTruncated",captionTruncated)},sendToModal:function(){this.model.set({inModal:!0}),this.getDeviceCase(),this.el.className="article-figure full-view",this.el.innerHTML=this.template(this.model.attributes),document.querySelector(".global-modal .modal-content").appendChild(this.el)},sendToArticle:function(){this.model.set({inModal:!1}),this.getDeviceCase(),this.el.className=this.model.get("classList"),this.el.innerHTML=this.template(this.model.attributes),document.querySelector("."+this.el.id).appendChild(this.el)}})},{"../../../client-side-templates/image-single.html":3,"../../events/events.js":22,"../../helpers/helpers.js":25,backbone:56,underscore:57}],28:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone"));Backbone.$=$;require("../../events/events.js"),require("../../helpers/helpers.js");module.exports=Backbone.Model.extend({defaults:{currentSlide:0,currentSlideCaption:"",currentSlideCaptionTruncated:"",truncateLength:0,currentSlideCaptionToggleEnabled:!1,numberOfSlides:0,currentSlideCaptionState:"truncated",inModal:!1,isRetina:!1,sizeToDeliver:"data-src-medium",el:"",id:"",classList:""}})},{"../../events/events.js":22,"../../helpers/helpers.js":25,backbone:56,underscore:57}],29:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone"));Backbone.$=$;var events=require("../../events/events.js"),helpers=require("../../helpers/helpers.js"),imageMetaTemplate=require("../../../client-side-templates/image-gallery-meta.html");module.exports=Backbone.View.extend({initialize:function(){helpers.hasClass(document.querySelector("html"),"no-support")||(this.events={"click .navigation-main .next":"triggerMainNext","click .navigation-main .prev":"triggerMainPrev","click .navigation-thumb .next":"triggerThumbNext","click .navigation-thumb .prev":"triggerThumbPrev","click .slide-caption .caption-toggle":"toggleCaption","click .slides-thumb .owl-item":"goToSlide","click span.expand":"toggleModal"},this.model.set({id:this.el.id,el:this.el,classList:this.el.className}),this.listenToOnce(events,"initialLoadEvent",this.initializeOwlCarousel))},toggleModal:function(){this.listenToOnce(events,"modal:shown",this.sendToModal),this.listenToOnce(events,"modal:hiding",this.sendToArticle);var config={customClasses:"image-gallery",toggleIconClass:"icon-contract"};events.trigger("modal:toggle",config)},sendToModal:function(){var self=this;this.model.set({inModal:!0}),this.el.className="gallery full-view content-hidden",document.querySelector(".global-modal .modal-content").appendChild(this.el),window.setTimeout(function(){self.model.slideMain.updateVars(),self.updateSlideShow(),helpers.removeClass(self.el,"content-hidden")},500)},sendToArticle:function(){var self=this;this.model.set({inModal:!1}),document.querySelector("."+this.el.id).appendChild(this.el),this.el.className=this.model.get("classList")+" content-hidden",window.setTimeout(function(){self.model.slideMain.updateVars(),self.updateSlideShow(),helpers.removeClass(self.el,"content-hidden")},500)},triggerMainNext:function(){this.model.slideMain.next()},triggerMainPrev:function(){this.model.slideMain.prev()},triggerThumbNext:function(){this.model.slideThumb.next()},triggerThumbPrev:function(){this.model.slideThumb.prev()},toggleCaption:function(){this.configureCaption(),"truncated"==this.model.get("currentSlideCaptionState")?this.model.set("currentSlideCaptionState","full"):this.model.set("currentSlideCaptionState","truncated"),this.renderCaption()},goToSlide:function(e){e.preventDefault();var number=$(e.currentTarget).data("owlItem");$(this.slideMain).trigger("owl.goTo",number)},initializeOwlCarousel:function(){var self=this;this.el.querySelector(".navigation-main"),this.el.querySelector(".navigation-thumb"),this.el.querySelector(".slideshow-meta");this.slideMain=this.el.querySelector(".slides-main"),this.slideThumb=this.el.querySelector(".slides-thumb"),$(this.slideMain).owlCarousel({singleItem:!0,slideSpeed:400,pagination:!1,rewindSpeed:0,addClassActive:!0,responsiveRefreshRate:500,baseClass:"slideshow",theme:"",afterMove:function(){self.updateSlideShow()}}),$(this.slideThumb).owlCarousel({items:7,itemsDesktop:[1199,10],itemsDesktopSmall:[979,7],itemsTablet:[768,7],itemsMobile:[600,0],scrollPerPage:!0,pagination:!1,responsiveRefreshRate:100,baseClass:"slideshow",afterInit:function(el){helpers.addClass(el[0].querySelector(".owl-item"),"synced")}}),this.model.slideMain=$(this.slideMain).data("owlCarousel"),this.model.slideThumb=$(this.slideThumb).data("owlCarousel"),this.model.set({currentSlideCaption:this.slideMain.querySelector(".owl-wrapper .owl-item.active figcaption").innerHTML.toString(),numberOfSlides:this.model.slideMain.itemsAmount,currentSlide:this.model.slideMain.currentItem+1}),this.updateSlideShow()},updateSlideShow:function(){this.model.slideMain=$(this.slideMain).data("owlCarousel"),this.model.slideThumb=$(this.slideThumb).data("owlCarousel");var slides=this.el.querySelector(".slideshow-thumb .owl-wrapper").querySelectorAll(".owl-item"),currentItemIndex=this.model.slideMain.currentItem,i=0;helpers.forEach(slides,function(slide){i==currentItemIndex?helpers.addClass(slide,"synced"):helpers.removeClass(slide,"synced"),i++}),i=0,this.getDeviceCase(),this.centerSlideThumb(currentItemIndex),this.updateImage(),this.configureCaption(),this.renderCaption()},updateImage:function(){var currentSlideImage=this.el.querySelector(".slideshow-main .owl-item.active img"),needsToBeLoaded=void 0==currentSlideImage.src||currentSlideImage.src!=currentSlideImage.attributes[this.model.get("sizeToDeliver")].value;if(currentSlideImage.src="",currentSlideImage.style.transition="all .1s ease",helpers.addClass(currentSlideImage,"pending-lazy-load"),setTimeout(function(){currentSlideImage.style.transition=""},150),needsToBeLoaded){var displayImage=function(){setTimeout(function(){helpers.removeClass(currentSlideImage,"pending-lazy-load")},200),currentSlideImage.removeEventListener("load",displayImage,!1)};currentSlideImage.addEventListener("load",displayImage,!1)}else setTimeout(function(){helpers.removeClass(currentSlideImage,"pending-lazy-load")},200);helpers.attribute(currentSlideImage,"src",helpers.attribute(currentSlideImage,this.model.get("sizeToDeliver")))},getDeviceCase:function(){var deviceCase={isRetina:helpers.getDevicePixelRatio()>=2?!0:!1,viewPortWidth:document.documentElement.clientWidth};if(deviceCase.viewPortWidth>=1020?deviceCase.viewPortCase="desktop":deviceCase.viewPortWidth>=768?deviceCase.viewPortCase="tablet":deviceCase.viewPortCase="mobile",this.model.get("inModal")&&deviceCase.isRetina)switch(deviceCase.viewPortCase){case"desktop":deviceCase.sizeToDeliver="data-src-x-large";break;case"tablet":deviceCase.sizeToDeliver="data-src-large";break;case"mobile":deviceCase.sizeToDeliver="data-src-x-small"}else if(this.model.get("inModal")&&!deviceCase.isRetina)switch(deviceCase.viewPortCase){case"desktop":deviceCase.sizeToDeliver="data-src-large";break;case"tablet":deviceCase.sizeToDeliver="data-src-medium";break;case"mobile":deviceCase.sizeToDeliver="data-src-x-small"}else if(!this.model.get("inModal")&&deviceCase.isRetina)switch(deviceCase.viewPortCase){case"desktop":deviceCase.sizeToDeliver="data-src-large";break;case"tablet":deviceCase.sizeToDeliver="data-src-large";break;case"mobile":deviceCase.sizeToDeliver="data-src-x-small"}else if(this.model.get("inModal")||deviceCase.isRetina)deviceCase.sizeToDeliver="data-src-medium";else switch(deviceCase.viewPortCase){case"desktop":deviceCase.sizeToDeliver="data-src-small";break;case"tablet":deviceCase.sizeToDeliver="data-src-small";break;case"mobile":deviceCase.sizeToDeliver="data-src-x-small"}this.model.set(deviceCase)},configureCaption:function(){var caption=this.slideMain.querySelector(".owl-wrapper .owl-item.active figcaption").innerHTML.toString(),truncateLength=this.calculateTruncateLength(),truncatedCaption=this.truncateCaption(caption,truncateLength);caption.length>truncateLength?this.model.set({currentSlideCaptionToggleEnabled:!0,currentSlideCaptionTruncated:truncatedCaption}):this.model.set({currentSlideCaptionToggleEnabled:!1,currentSlideCaptionTruncated:""}),this.model.set({currentSlideCaption:caption,numberOfSlides:this.model.slideMain.itemsAmount,currentSlide:this.model.slideMain.currentItem+1,truncateLength:truncateLength})},calculateTruncateLength:function(){var caption="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam tincidunt lectus sed eleifend molestie. Integer iaculis cursus tortor, quis sagittis eros rutrum a. Fusce et ex posuere justo pharetra vestibulum. Donec vitae aliquam mi. Donec eros ipsum, tristique et laoreet eu, elementum vitae justo. Integer in faucibus purus, sit amet placerat sapien.";caption+=caption,caption+=caption;var span=document.createElement("span");return span.style.fontFamily='"ff-meta-serif-web-pro", Georgia, serif',span.style.fontSize="15px",span.style.lineHeight="inherit",span.style.clear="both",span.style.opacity="0",span.style.height="auto",span.innerHTML=caption,this.el.querySelector(".slide-caption").appendChild(span),truncateLength=3*Math.floor(span.offsetWidth/7.5),this.el.querySelector(".slide-caption").removeChild(span),truncateLength},truncateCaption:function(caption,truncateLength){var captionCreditCount,captionTruncated="",captionCreditRegex=/\(([^\(]+)\)$/,captionCredit=captionCreditRegex.exec(caption);captionCredit=null!=captionCredit&&captionCredit.length>0?captionCredit[0]:"",captionCreditCount=captionCredit.length+6;var captionTruncated=caption.substr(0,truncateLength-captionCreditCount);return captionTruncated=captionTruncated.substr(0,Math.min(captionTruncated.length,captionTruncated.lastIndexOf(" "))),captionTruncated+="... "+captionCredit},renderCaption:function(){this.el.querySelector(".slideshow-meta").innerHTML=imageMetaTemplate(this.model.attributes)},centerSlideThumb:function(currentItemIndex){var slideThumb=$(this.slideThumb),slideThumbvisible=this.model.slideThumb.owl.visibleItems,num=currentItemIndex,found=!1;for(var i in slideThumbvisible)if(num===slideThumbvisible[i])var found=!0;found===!1?num>slideThumbvisible[slideThumbvisible.length-1]?slideThumb.trigger("owl.goTo",num-slideThumbvisible.length+2):(num-1===-1&&(num=0),slideThumb.trigger("owl.goTo",num)):num===slideThumbvisible[slideThumbvisible.length-1]?slideThumb.trigger("owl.goTo",slideThumbvisible[1]):num===slideThumbvisible[0]&&slideThumb.trigger("owl.goTo",num-1)}})},{"../../../client-side-templates/image-gallery-meta.html":2,"../../events/events.js":22,"../../helpers/helpers.js":25,backbone:56,underscore:57}],30:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone"));Backbone.$=$;require("../../events/events.js"),require("../../helpers/helpers.js");module.exports=Backbone.Model.extend({defaults:{dataAttribute:"data-lazy-src",lazyLoadClass:"lazy-loading",images:[]}})},{"../../events/events.js":22,"../../helpers/helpers.js":25,backbone:56,underscore:57}],31:[function(require,module,exports){var _=require("underscore"),Backbone=require("backbone");Backbone.$=$;var events=require("../../events/events.js"),helpers=require("../../helpers/helpers.js");module.exports=Backbone.View.extend({initialize:function(){var self=this;this.model.set("images",document.querySelectorAll(":not(.gallery) img."+self.model.get("lazyLoadClass"))),this.listenTo(events,"initialLoadEvent",this.lazyLoadImages),_.bindAll(this,"lazyLoadImages"),this.lazyLoadImagesThrottled=_.throttle(self.lazyLoadImages,300),window.addEventListener("scroll",self.lazyLoadImagesThrottled)},lazyLoadImages:function(){var self=this,images=this.model.get("images"),displayImageAfterLoad=function(image){helpers.addClass(image,"loaded"),setTimeout(function(){helpers.removeClass(image,"lazy-loading"),setTimeout(function(){helpers.removeClass(image,"loaded")},400)},200),image.removeEventListener("load",displayImageAfterLoad,!1)};return 0===images.length?void window.removeEventListener("scroll",self.lazyLoadImagesThrottled):(_.each(images,function(image){helpers.isVisible(image)&&(image.src=image.getAttribute(self.model.get("dataAttribute")),image.addEventListener("load",displayImageAfterLoad(image),!1),images=_.without(images,image))}),void this.model.set("images",images))}})},{"../../events/events.js":22,"../../helpers/helpers.js":25,backbone:56,underscore:57}],32:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone")),modalCornerTemplate=require("../../../client-side-templates/modal-corner.html"),modalMiddleTemplate=require("../../../client-side-templates/modal-middle.html"),modalBarTemplate=require("../../../client-side-templates/modal-bar.html"),events=require("../../events/events.js");Backbone.$=$,module.exports=Backbone.View.extend({el:$("#message-container"),events:{},getDataJSON:function(){var dataForModal=this.model.toJSON();return dataForModal},removeArticleContent:function(){$("#article-content").html('Get the full story. <a href="http://seattletimes.com/subscribe/offers/?ici=subscribe&icn=behind-pwall">Subscribe now.</a>')},fadeArticleContent:function(){var mainContentArea=$("#content-well"),mainContentAreaHeight=(mainContentArea.append("<div id='overlay' class='background-overlay'></div>"),mainContentArea.height());$("#overlay").height(mainContentAreaHeight)},closeModal:function(){var self=this;$("#modal").addClass("inactive"),window.setTimeout(function(){self.removeMessages()},1500);events.trigger("paymeter:modalActionTaken","Meter Message Closed")},hardPaywallRedirect:function(e){e.preventDefault(),document.location=this.model.get("hardPaywallRedirectURL")},removeMessages:function(){this.$el.empty()},renderMiddleModal:function(){this.removeMessages(),events.trigger("modalFacebook:disable");var renderedContent=modalMiddleTemplate(this.getDataJSON());this.$el.append(renderedContent),window.setTimeout(function(){$("#modal").removeClass("inactive")},500);return this.fadeArticleContent(),this.removeArticleContent(),this.getDataJSON()},renderCornerModal:function(){this.removeMessages(),events.trigger("modalFacebook:disable");var renderedContent,data=this.getDataJSON();renderedContent=data.currentMessage.messagesize>0?modalBarTemplate(data):modalCornerTemplate(data);this.$el.append(renderedContent),window.setTimeout(function(){$("#modal").removeClass("inactive")},500);return events.trigger("paymeter:messageSize",data.currentMessage.messagesize),this.getDataJSON()},triggerLogin:function(){events.trigger("accessLoginForm",["st-return"]),events.trigger("paymeter:modalActionTaken","Meter Message Login Clicked")},triggerSubscribeLink:function(){events.trigger("paymeter:needToWriteSTReturnCookie"),events.trigger("paymeter:modalActionTaken","Meter Message Subscribe Clicked")},triggerActivateAccount:function(){events.trigger("paymeter:modalActionTaken","Meter Message Activate Account Clicked")},constructor:function(){this.fn={},Backbone.View.apply(this,arguments)}})},{"../../../client-side-templates/modal-bar.html":4,"../../../client-side-templates/modal-corner.html":5,"../../../client-side-templates/modal-middle.html":8,"../../events/events.js":22,backbone:56,underscore:57}],33:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone"));Backbone.$=$;require("../../events/events.js"),require("../../helpers/helpers.js");module.exports=Backbone.Model.extend({defaults:{customClasses:"",toggleIconClass:"icon-x",fixedDocument:!0,scrollY:0}})},{"../../events/events.js":22,"../../helpers/helpers.js":25,backbone:56,underscore:57}],34:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone"));Backbone.$=$;var events=require("../../events/events.js"),helpers=require("../../helpers/helpers.js");module.exports=Backbone.View.extend({el:document.querySelector(".global-modal"),template:require("../../../client-side-templates/modal-default.html"),events:{"click .modal-toggle":"toggleModal"},initialize:function(){this.listenTo(events,"modal:toggle",this.toggleModal),this.listenTo(events,"modal:clean",this.cleanModal)},toggleModal:function(config){void 0==config||config.hasOwnProperty("originalEvent")?config.preventDefault():this.model.set(config),helpers.hasClass(this.el,"active")?this.hideDefaultModal():this.showDefaultModal()},showDefaultModal:function(){var modalToggleIcon=this.el.querySelector(".modal-toggle i");this.model.set("scrollY",helpers.getScrollOffset("y")),events.trigger("modal:showing"),""!=this.model.get("customClasses")&&this.addCustomClasses(),modalToggleIcon.className="",helpers.addClass(modalToggleIcon,this.model.get("toggleIconClass")),helpers.addClass(this.el,"active"),this.model.get("fixedDocument")&&window.setTimeout(function(){helpers.addClass(document.querySelector("body"),"fixed")},400),events.trigger("modal:shown")},hideDefaultModal:function(){var modalToggleIcon=this.el.querySelector(".modal-toggle i"),self=this;events.trigger("modal:hiding"),modalToggleIcon.className="",this.model.get("fixedDocument")&&helpers.removeClass(document.querySelector("body"),"fixed"),window.setTimeout(function(){window.scrollTo(0,self.model.get("scrollY"))},10),window.setTimeout(function(){helpers.removeClass(self.el,"active"),self.el.style.opacity="",events.trigger("modal:hidden"),self.cleanModal()},250)},addCustomClasses:function(){var self=this,customClasses=this.model.get("customClasses");customClasses.indexOf(" ")>=0?customClasses.split(" ").forEach(function(customClass){helpers.addClass(self.el,customClass)}):helpers.addClass(self.el,customClasses)},cleanModal:function(){this.el.className="global-modal",this.el.innerHTML=this.template(),this.model.set(this.model.defaults)}})},{"../../../client-side-templates/modal-default.html":6,"../../events/events.js":22,"../../helpers/helpers.js":25,backbone:56,underscore:57}],35:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone"));Backbone.$=$,module.exports=Backbone.Model.extend({defaults:{headerSetToToggle:!1,isActive:!1,lastScrollDistance:0}})},{backbone:56,underscore:57}],36:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone")),events=require("../../events/events.js");Backbone.$=$,module.exports=Backbone.View.extend({el:"body",events:{click:"closeAllNavigation","click .menu-button":"toggleMainNavigation","click .section-nav-button":"toggleMobileSubMenu","click .section-nav-button.close":"closeMobileSubMenu","click .section-nav .menu-item-has-children > a":"toggleMoreSubnav","click .section-nav-button":"toggleSectionNavDropdown","click .footer-nav-primary > li.menu-item-has-children > a":"toggleFooterSubnav","click .show-more-button":"toggleTopStories","click .global-search-button":"toggleSearch","click .st-return":"triggerCookieWrite","click .logout":"triggerLogOut","click .header-utils .username":"triggerMainNavUserMenu","click .ad-continue-link":"handleContinueLink",keyup:"handleKeyUp"},closeAllNavigation:function(event){var clickedElement=$(event.target);if(0===clickedElement.parents(".main-nav").length&&0===clickedElement.parents(".section-nav-popup").length&&0===clickedElement.parents(".menu-item-has-children").length&&0===clickedElement.parents(".header-utils").length&&!clickedElement.is(".section-nav-button")&&!clickedElement.is(".username")){$(".main-nav-body").removeClass("open"),$(".section-nav-popup").removeClass("open"),$(".sub-menu").removeClass("open"),$(".sub-menu").parent(".menu-item-has-children").addBack().removeClass("open"),$(".header-utils .user-menu").removeClass("open")}},toggleSectionNavDropdown:function(event){var width=window.innerWidth>0?window.innerWidth:screen.width;if(event.preventDefault(),769>=width){$(".section-nav-popup").toggleClass("open")}},triggerMainNavUserMenu:function(){$(".header-utils .user-menu").toggleClass("open")},triggerLogOut:function(e){events.trigger("singleSignOn:logOut",e)},toggleMoreSubnav:function(event){event.preventDefault();var element=$(event.currentTarget);if(0===element.parents(".menu-item-has-children.open").length){$("ul.sub-menu, .menu-item-has-children").removeClass("open")}element.siblings(".sub-menu").parent(".menu-item-has-children").addBack().toggleClass("open")},toggleMainNavigation:function(event){event.preventDefault(),event.stopPropagation();$(".section-nav-popup").removeClass("open"),$(".main-nav-body").toggleClass("open");events.trigger("body:hamburgerClicked")},toggleMobileSubMenu:function(event){event.stopPropagation();$(".section-nav-popup").toggleClass("open")},closeMobileSubMenu:function(event){event.stopPropagation();$(".section-nav-popup").removeClass("open")},toggleFooterSubnav:function(event){var width=window.innerWidth>0?window.innerWidth:screen.width;if(event.preventDefault(),769>=width){var element=$(event.currentTarget);$(".main-nav-body").removeClass("open"),$(".section-nav-popup").removeClass("open"),element.siblings(".sub-menu").addBack().toggleClass("open")}},toggleTopStories:function(event){event.preventDefault();var element=$(event.currentTarget);element.parent().addBack().toggleClass("show")},toggleSearch:function(event){event.preventDefault(),events.trigger("search:searchModalToggle")},triggerCookieWrite:function(){events.trigger("singleSignOn:handleReturnURL")},handleContinueLink:function(e){e.preventDefault(),window.scrollTo(0,helpers.getElementOffset(document.querySelector(e.target.hash),"y"))},handleKeyUp:function(event){var code=event.keyCode||event.which,globalSearch=$(".global-search");$(".global-search-input");switch(code){case 27:globalSearch.length>0&&globalSearch.hasClass("active")===!0?events.trigger("search:searchModalToggle"):this.closeAllNavigation(event);break;case 192:0===globalSearch.length&&globalSearch.hasClass("active")===!1&&events.trigger("search:searchModalToggle")}},constructor:function(){this.fn={},Backbone.View.apply(this,arguments)}})},{"../../events/events.js":22,backbone:56,underscore:57}],37:[function(require,module,exports){var _=require("underscore"),Backbone=require("backbone");Backbone.$=$,module.exports=Backbone.View.extend({events:{},initialize:function(){var toggleNavigationState,self=this,globalHeader=null;document.documentElement.clientWidth<=767&&(globalHeader=document.querySelector(".global-header"),null!==globalHeader&&(this.el=globalHeader,_.bindAll(this,"toggleFixedNavigation"),toggleNavigationState=_.throttle(self.toggleFixedNavigation,300),window.addEventListener("scroll",toggleNavigationState)))},toggleFixedNavigation:function(){var scrollDistance=helpers.getScrollOffset("y"),direction=this.determineScrollDirection(scrollDistance),ad=document.getElementById("ad-flex-top"),adContainer=document.getElementById("div-gpt-ad-top");scrollDistance>=48||helpers.hasClass(document.querySelector(".main-nav-body"),"open")?(this.model.set("headerSetToToggle",!0),helpers.addClass(document.body,"nav-fixed")):(this.model.set("headerSetToToggle",!1),helpers.removeClass(document.body,"nav-fixed")),adContainer&&(800>=scrollDistance&&(this.model.get("headerSetToToggle")||scrollDistance>=48)?(helpers.addClass(adContainer,"top-ad-fixed"),helpers.addClass(this.el,"ad-fixed")):(helpers.removeClass(adContainer,"top-ad-fixed"),helpers.removeClass(this.el,"ad-fixed")),"up"===direction||helpers.hasClass(document.querySelector(".main-nav-body"),"open")?helpers.addClass(ad,"menu-active"):helpers.removeClass(ad,"menu-active")),"up"===direction||helpers.hasClass(document.querySelector(".main-nav-body"),"open")?(this.model.set("isActive",!0),helpers.addClass(this.el,"active")):(this.model.set("isActive",!1),helpers.removeClass(this.el,"active")),this.model.set("lastScrollDistance",scrollDistance)},toggleFixedAd:function(){helpers.getScrollOffset("y")},determineScrollDirection:function(scrollDistance){var lastScrollDistance=this.model.get("lastScrollDistance");return scrollDistance>lastScrollDistance?"down":"up"},configureNavigation:function(scrollDistance,direction){"up"===direction&&helpers.addClass(this.el,"nav-fixed")}})},{backbone:56,underscore:57}],38:[function(require,module,exports){var _=require("underscore"),Backbone=require("backbone");Backbone.$=$;var events=require("../../events/events.js");module.exports=Backbone.Model.extend({
defaults:{pm_cookieName:"pmStories",sso_cookieName:"st_subscriberdata",inst_cookieName:"iss01",daysSinceOldestCookie:0,hardPaywallRedirectURL:"http://"+document.location.hostname+"/"},initialize:function(){if("undefined"==typeof window.SEATIMESCO.payMeter||"undefined"==typeof window.SEATIMESCO.payMeter.paymeter_config_url||"undefined"==typeof window.SEATIMESCO.device)return void console.log("No SEATIMESCO.payMeter info or device helper functions. Not running paymeter scripts");"undefined"!=typeof window.DY_alternatePM&&window.DY_alternatePM&&"undefined"!=typeof window.SEATIMESCO.payMeter.paymeter_alt_config_url&&window.window.SEATIMESCO.payMeter.paymeter_alt_config_url?this.url=window.window.SEATIMESCO.payMeter.paymeter_alt_config_url:this.url=SEATIMESCO.payMeter.paymeter_config_url?SEATIMESCO.payMeter.paymeter_config_url:"/paymeterconfig/stdotcom";var self=this;this.set("currentUserType",this.getUserType());this.fetch({success:function(model,response){var institutionalUser=!1;self.get("institutionalOn")&&0!=self.get("institutionalOn")&&(institutionalUser=self.getInstData()),self.isMetered()&&!institutionalUser?(self.meterStart(),self.determineCurrentMessage(),events.trigger("paymeter:paymeterCookieCreated")):events.trigger("paymeter:paywallConfigured",!1)},error:function(model,response){events.trigger("paymeter:paywallConfigured",!1)}})},parse:function(response){this.set({excludedSections:response.EXC,institutionalOn:response.IDS,institutionalSubID:response.IDSC,mustIncludeSections:response.INC,paywallOn:response.LOn,meterActive:response.MA,messageHeaders:response.wall_header,messages:response.MSG,messageImages:response.wall_img_url,messageOffers:response.wall_offer,urlSubscribe:response.url_subscribe,urlRegister:response.url_register,urlLogin:response.url_login,showMessages:response.OA,rotationPeriod:response.RP,pm_storyCount:0,pm_storyCap:this.getHardwallPageCount(response.MSG),allowedContentCount:this.getHardwallPageCount(response.MSG)-1}),this.set({includeArticleInCount:SEATIMESCO.payMeter._mcidExclude,contentType:SEATIMESCO.payMeter._mcidType,currentArticleID:SEATIMESCO.payMeter._mcidType+"_"+SEATIMESCO.payMeter._mcid,currentPostCategories:SEATIMESCO.payMeter.categories})},isMetered:function(){var isApp=!1;return window.SEATIMESCO.device.getPlatform()&&(isApp=!0),isApp||this.pageExclude()||this.sectionExclude()||null===this.get("contentType")?!1:(events.trigger("paymeter:pageStatusDetermined","Page Metered"),!0)},getUserType:function(){var currentUserType,sso_tasteCookie=this.meterTaste(this.get("sso_cookieName"));if(void 0==sso_tasteCookie||0==sso_tasteCookie&&"0"!==sso_tasteCookie)currentUserType="anon";else{var sso_cookieValue=this.meterLvlDetect(sso_tasteCookie);switch(sso_cookieValue){case"-1":currentUserType="reg";break;case"0":currentUserType="other";break;default:currentUserType="sub",this.meterTrash(this.get("pm_cookieName"))}}return events.trigger("paymeter:userTypeDetermined",currentUserType),currentUserType},getInstData:function(){var instUserData=this.meterTaste(this.get("inst_cookieName")),allowedInsts=this.get("institutionalSubID");if(void 0==instUserData||0==instUserData){var instURL="https://secure.seattletimes.com/accountcenter/checkip.js",self=this;$.ajax({url:instURL,dataType:"jsonp",async:!1,callback:null,jsonp:"callback",jsonpCallback:this.instCBBust(),success:function(data){var instUserData=data;for(var key in allowedInsts)if(allowedInsts[key]==instUserData)return self.instVerified(instUserData),!0;return!1},error:function(xhr,ajaxOptions,thrownError){return!1}})}if(Array.isArray(allowedInsts)){for(var key in allowedInsts)if(allowedInsts[key]===instUserData)return this.instVerified(),!0}else if(allowedInsts===instUserData)return this.instVerified(),!0;return!1},instCBBust:function(){return"institutionalcallback"},instVerified:function(instUserData){events.trigger("institutionalUserVerified",instUserData)},pageExclude:function(){var includeArticleInCount=this.get("includeArticleInCount");return 0==includeArticleInCount&&1==this.get("meterActive")?!1:(events.trigger("paymeter:pageStatusDetermined","Page Excluded"),!0)},meterLvlDetect:function(ssoInfo){var arrayInfo=ssoInfo.split(",");return void 0!=arrayInfo[1]?arrayInfo[1]:arrayInfo[0]},sectionExclude:function(){var excludedSections=this.get("excludedSections"),mustIncludeSections=this.get("mustIncludeSections"),curentPostCategories=this.get("currentPostCategories");if(!curentPostCategories)return events.trigger("paymeter:pageHasNoTaxonomy",this.get("currentArticleID")),!1;curentPostCategories.split("|"),Array.isArray(excludedSections)||(excludedSections=[excludedSections]),Array.isArray(mustIncludeSections)||(mustIncludeSections=[mustIncludeSections]);var matchedExcludedCategories=_.intersection(excludedSections,curentPostCategories),matchedMustIncludeCategories=_.intersection(mustIncludeSections,curentPostCategories);return matchedExcludedCategories.length>0&&0==matchedMustIncludeCategories.length?!0:!1},getHardwallPageCount:function(messagesObject){var currentUserType=this.get("currentUserType");SEATIMESCO.device.isMobile()&&(currentUserType+="-mobile");var arrayOfMessages=_.keys(messagesObject[currentUserType]),hardwallPageCount=Math.max.apply(null,arrayOfMessages);return hardwallPageCount},determineCurrentMessage:function(){var currentUserType=this.get("currentUserType"),currentStoryCount=this.get("pm_storyCount"),currentStoryIsNew=this.get("currentStoryIsNew"),wallHeaders=this.get("messageHeaders"),messages=this.get("messages"),wallImages=this.get("messageImages"),wallOffers=this.get("messageOffers");if(SEATIMESCO.device.isMobile()&&(currentUserType+="-mobile"),currentStoryIsNew&&currentStoryCount in messages[currentUserType])this.set("currentMessageHeader",wallHeaders[currentUserType]),this.set("currentMessage",messages[currentUserType][currentStoryCount]),this.set("currentMessageImage",wallImages[currentUserType]),this.set("currentMessageOffer",wallOffers[currentUserType]);else{var hardwallPageCount=this.getHardwallPageCount(messages);currentStoryIsNew&&currentStoryCount>hardwallPageCount&&(this.set("currentMessageHeader",wallHeaders[currentUserType]),this.set("currentMessage",messages[currentUserType][hardwallPageCount]),this.set("currentMessageImage",wallImages[currentUserType]),this.set("currentMessageOffer",wallOffers[hardwallPageCount]))}},getDateOfOldestArticle:function(storyAccessDate){var currentDate=new Date,oldestStoryInCookie=this.get("daysSinceOldestCookie"),daysSinceAccessed=(Date.parse(currentDate)-storyAccessDate)/864e5;daysSinceAccessed>oldestStoryInCookie&&(daysSinceAccessed=Math.floor(daysSinceAccessed),this.set("daysSinceOldestCookie",daysSinceAccessed))},meterStart:function(){var pm_thatCookie=this.meterTaste(this.get("pm_cookieName")),pm_ingredients={},newStoryFlag=!0,currentStoryCount=this.get("pm_storyCount"),expirationCheck=new Date;if(expirationCheck.setTime(expirationCheck.getTime()-864e5*this.get("rotationPeriod")),pm_thatCookie){pm_ingredients=$.parseJSON(pm_thatCookie);for(var cookieBite in pm_ingredients){var crumbs=pm_ingredients[cookieBite],storyAccessDate=Date.parse(crumbs.timestamp);this.getDateOfOldestArticle(storyAccessDate),expirationCheck>=storyAccessDate?delete pm_ingredients[cookieBite]:(currentStoryCount++,cookieBite==this.get("currentArticleID")&&(newStoryFlag=!1))}this.set("pm_storyCount",currentStoryCount),this.set("currentStoryIsNew",newStoryFlag),events.trigger("paymeter:storyCountUpdated",currentStoryCount),events.trigger("paymeter:oldestStoryDetermined",this.get("daysSinceOldestCookie"))}if(newStoryFlag&&currentStoryCount<this.get("pm_storyCap")){if(currentStoryCount<this.get("allowedContentCount")){var today=new Date,pm_newStory={section:this.get("currentPostCategories"),timestamp:today.toUTCString()};pm_ingredients[this.get("currentArticleID")]=pm_newStory}currentStoryCount++,this.set("pm_storyCount",currentStoryCount),events.trigger("paymeter:storyCountUpdated",currentStoryCount)}"sub"===this.get("currentUserType")?this.meterTrash(this.get("pm_cookieName")):this.meterBake(this.get("pm_cookieName"),pm_ingredients),events.trigger("paymeter:postMeterStart",currentStoryCount,this.get("daysSinceOldestCookie"))},meterTaste:function(thisCookieName){for(var decodedCookie=decodeURIComponent(document.cookie),cachedCookies=decodedCookie.split(";"),i=0;i<cachedCookies.length;i++){var splitCookie=cachedCookies[i].split("="),cookieName=splitCookie[0].replace(/^\s+|\s+jQuery/g,""),cookieData=splitCookie[1];if(cookieName==thisCookieName)return cookieData}return!1},meterBake:function(thisCookieName,thisCookieIngredients){var thisCookieContents=JSON.stringify(thisCookieIngredients),expire=new Date;expire.setTime(expire.getTime()+864e5*this.get("rotationPeriod"));var domainpath=";domain=.seattletimes.com;path=/";document.cookie=thisCookieName+"="+encodeURIComponent(thisCookieContents)+";expires="+expire.toUTCString()+domainpath},meterTrash:function(thisCookieName){var trashed_ingredients={},domainpath=";domain=.seattletimes.com;path=/";document.cookie=thisCookieName+"="+encodeURIComponent(trashed_ingredients)+"; expires=Thu, 01 Jan 1970 00:00:01 GMT;"+domainpath}})},{"../../events/events.js":22,backbone:56,underscore:57}],39:[function(require,module,exports){var _=require("underscore"),Backbone=require("backbone");Backbone.$=$;var PaymeterModel=require("../../messaging/views/modal.js"),events=require("../../events/events.js");module.exports=PaymeterModel.extend({events:function(){return _.extend({},_.result(PaymeterModel.prototype,"events"),{"click .modal.subscribe-reminder .close":"closeModal","click .modal.subscribe-prompt-overlay .close":"hardPaywallRedirect","click .modal .login":"triggerLogin","click #activateAccountModalLink":"triggerActivateAccount","click .subscribe":"triggerSubscribeLink"})},updateModalLocation:function(adInfo){if(adInfo.adTopHeight>0){var modal=document.querySelector(".subscribe-prompt-overlay .subscribe-prompt");modal.style.top=adInfo.adTopHeight+adInfo.originalTop+"px"}else{var modal=document.querySelector(".subscribe-prompt-overlay .subscribe-prompt");modal.style.top=adInfo.originalTop+"px"}},initialize:function(){this.fn.payMeter={determineModal:function(){var currentStoryCount=this.model.get("pm_storyCount"),hardWallPageCount=this.model.get("pm_storyCap"),intermediateMessagesOn=this.model.get("showMessages"),finalMessageOn=this.model.get("paywallOn"),payMeterHardWallEnabled=!1;if(this.model.get("currentMessage"))if(hardWallPageCount>currentStoryCount&&1==intermediateMessagesOn){data=this.renderCornerModal();var msgType="corner";"1"===data.currentMessage.messagesize&&(msgType="bar"),events.trigger("paymeter:paywallMessageDisplayedGTM","soft",currentStoryCount,data,msgType)}else if(currentStoryCount>=hardWallPageCount&&1==finalMessageOn){if(helpers.writeCookie("st_story_count",currentStoryCount,600,"/",".seattletimes.com"),document.documentElement.clientWidth<=600){var userType="undefined"==typeof window.SEATIMESCO.singleSignOn.info.accountType?"noAcct":window.SEATIMESCO.singleSignOn.info.accountType,storyCount="undefined"==typeof window.SEATIMESCO.payMeter.storyCount?null:window.SEATIMESCO.payMeter.storyCount;switch(window.SEATIMESCO.singleSignOn.info.accountType){case"noAcct":userType="anon";break;case"digitalSubAcct":userType="sub";break;case"nonDigitalSubAcct":userType="other";break;case"commenterAcct":userType="reg";break;default:userType="anon"}var eventInfo={event:"meterEvent",eventCategory:"meter",eventAction:"hardwall displayed - redirecting to mobile",eventLabel:userType+" "+storyCount,meteredStoryCount:storyCount,userType:userType};return dataLayer.push(eventInfo),void(window.location.href="http://"+document.location.hostname+"/wall-mobile/")}window.SEATIMESCO.payMeter.hardWallEnabled=!0,data=this.renderMiddleModal(),events.trigger("paymeter:paywallMessageDisplayed",["hardwall displayed",currentStoryCount]),events.trigger("paymeter:paywallMessageDisplayedGTM","hard",currentStoryCount,data),payMeterHardWallEnabled=!0}events.trigger("paymeter:paywallConfigured",payMeterHardWallEnabled)}},this.listenTo(events,"paymeter:changeHardWallLocation",this.updateModalLocation),this.listenTo(events,"paymeter:institutionalUserVerified",this.removeMessages),this.listenTo(events,"paymeter:paymeterCookieCreated",this.fn.payMeter.determineModal)}})},{"../../events/events.js":22,"../../messaging/views/modal.js":32,backbone:56,underscore:57}],40:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone")),SearchResultModel=require("../../search/models/search-result.js"),events=require("../../events/events.js");Backbone.$=$,module.exports=Backbone.Collection.extend({model:SearchResultModel,initialize:function(){this.listenTo(events,"search:resultsReadyForCollection",this.setUsUpTheModels)},setUsUpTheModels:function(results){this.models.length>0&&this.reset(),this.add(results),events.trigger("search:resultsReadyToRender")}})},{"../../events/events.js":22,"../../search/models/search-result.js":41,backbone:56,underscore:57}],41:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone"));require("../../events/events.js");Backbone.$=$,module.exports=Backbone.Model.extend({defaults:{id:0,title:"",publishDate:"",summary:"",url:"",teaserImageURL:""}})},{"../../events/events.js":22,backbone:56,underscore:57}],42:[function(require,module,exports){var _=require("underscore"),Backbone=require("backbone"),events=require("../../events/events.js");Backbone.$=$,module.exports=Backbone.Model.extend({defaults:{query:"",sortBy:"mostrecent",pageIndex:1,resultsPerPage:20,resultsEnabled:!1,resultsTotal:0,resultsStartAt:0,resultsEndAt:0,resultsInfo:"Enter a search term above to find related content."},initialize:function(){this.listenTo(events,"initialLoadEvent",this.configureSearch)},configureSearch:function(){return window.SEATIMESCO.search=window.SEATIMESCO.search||{},window.SEATIMESCO.search.info=window.SEATIMESCO.search.info||{},document.getElementById("search-results")?(window.SEATIMESCO.search.info.resultsEnabled=!0,this.set({resultsEnabled:!0}),this.prepareQueryParameters({enabled:!1}),void 0):(window.SEATIMESCO.search.info.resultsEnabled=!1,void this.set({resultsEnabled:!1}))},prepareQueryParameters:function(requestData){var self=this;self.set({query:self.getParameterByName("q")}),self.set({sortBy:self.getParameterByName("sb")}),self.set({pageIndex:parseInt(self.getParameterByName("sp"))});var parameters={query:self.get("query"),sortBy:self.get("sortBy"),pageIndex:self.get("pageIndex"),resultsPerPage:self.get("resultsPerPage")};_.extend(window.SEATIMESCO.search.info,parameters),events.trigger("search:parametersUpdated",parameters),this.makeRequest(parameters)},prepareResultsMeta:function(data){var resultStart=(this.get("pageIndex")-1)*this.get("resultsPerPage")+1,resultEnd=resultStart+(data.hits.hits.length-1),searchResultsInfo="No results found.",resultsMeta={resultsTotal:data.hits.total,resultsStartAt:resultStart,resultsEndAt:resultEnd};if(this.set(resultsMeta),_.extend(window.SEATIMESCO.search.info,resultsMeta),this.get("resultsTotal")>0)switch(searchResultsInfo="Showing "+this.get("resultsStartAt")+"-"+this.get("resultsEndAt")+" of "+this.get("resultsTotal")+" results.",this.get("sortBy")){case"relevance":searchResultsInfo+="<br />Ordered by relevance.";break;case"mostrecent":searchResultsInfo+="<br />Ordered by most recent."}""==!this.get("query")&&(this.set({resultsInfo:searchResultsInfo}),window.SEATIMESCO.search.info.resultsInfo=searchResultsInfo),events.trigger("search:resultsMetaReadyToRender")},makeRequest:function(parameters){this.fetch({url:"http://"+document.location.hostname+"/search-api",cache:!1,data:{query:parameters.query,page:parameters.pageIndex,perpage:parameters.resultsPerPage,sortby:parameters.sortBy},type:"GET",error:function(jqXHR,textStatus,errorThrown){}})},parse:function(response,data){var queryData=data.data;this.prepareResultsMeta(response);var results=this.prepareResults(response.hits.hits,queryData);events.trigger("search:resultsReadyForCollection",results),this.preparePagination()},preparePagination:function(){if(0!=this.get("resultsTotal")){var paginationInfo={};paginationInfo.current=this.get("pageIndex"),paginationInfo.first=1,paginationInfo.last=Math.ceil(this.get("resultsTotal")/this.get("resultsPerPage")),paginationInfo.sortBy=this.get("sortBy"),paginationInfo.query=this.get("query"),paginationInfo.pages=[];for(var i=paginationInfo.current;i>=paginationInfo.current-3&&i>0;i--)paginationInfo.pages.push(i);for(var i=paginationInfo.current+1;i<=paginationInfo.current+3&&i<=paginationInfo.last;i++)paginationInfo.pages.push(i);paginationInfo.pages.sort(function(a,b){return a-b}),events.trigger("search:paginationReadyToRender",paginationInfo)}},prepareResults:function(results,queryData){var self=this,query=queryData.query,resultsArray=results.map(function(result){var resultObject={};resultObject.id=result._id?parseInt(result._id):null,result=result.fields;for(var field in result)switch(field){case"publish_date":resultObject.publishDate=self.convertDateToString(result[field]);break;case"title":resultObject.title=self.highlightString(result[field],query);break;case"summary":resultObject.summary=self.highlightString(result[field],query);break;case"url":resultObject.url=result[field];break;case"teaser_image_url":resultObject.teaserImageURL=result[field]}return resultObject});return resultsArray},convertDateToString:function(date){var months=["January","February","March","April","May","June","July","August","September","October","November","December"],days=["1st","2nd","3rd","4th","5th","6th","7th","8th","9th","10th","11th","12th","13th","14th","15th","16th","17th","18th","19th","20th","21st","22nd","23rd","24th","25th","26th","27th","28th","29th","30th","31st"];return date=new Date(Date.parse(date)),date=months[date.getMonth()]+" "+days[date.getDate()-1]+", "+date.getFullYear()},highlightString:function(str,query){return query=query.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),str=str.replace(new RegExp("("+query+")","gi"),'<span class="highlight">$1</span>')},getParameterByName:function(name){var match=RegExp("[?&]"+name+"=([^&]*)").exec(window.location.search);if(null!=match)return match&&decodeURIComponent(match[1].replace(/\+/g," "));switch(name){case"q":return this.get("query");case"sb":return this.get("sortBy");case"sp":return this.get("pageIndex");default:return}}})},{"../../events/events.js":22,backbone:56,underscore:57}],43:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone")),events=(require("../../helpers/helpers.js"),require("../../events/events.js"));Backbone.$=$,module.exports=Backbone.View.extend({el:document.querySelector("body"),template:require("../../../client-side-templates/search-modal.html"),initialize:function(){this.listenTo(events,"search:searchModalToggle",this.toggleModal)},toggleModal:function(){this.listenToOnce(events,"modal:shown",this.renderSearchModal);var config={customClasses:"global-search"};events.trigger("modal:toggle",config)},renderSearchModal:function(){document.querySelector(".global-modal .modal-content").innerHTML=this.template(),document.querySelector(".global-modal .modal-content .global-search-input").focus()}})},{"../../../client-side-templates/search-modal.html":9,"../../events/events.js":22,"../../helpers/helpers.js":25,backbone:56,underscore:57}],44:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone")),searchPaginationTemplate=require("../../../client-side-templates/search-pagination.html"),events=require("../../events/events.js");Backbone.$=$,module.exports=Backbone.View.extend({el:$("#search-results .pagination"),template:searchPaginationTemplate,initialize:function(){this.listenTo(events,"search:paginationReadyToRender",this.renderPagination)},renderPagination:function(paginationInfo){return this.$el.html(this.template(paginationInfo)),this}})},{"../../../client-side-templates/search-pagination.html":10,"../../events/events.js":22,backbone:56,underscore:57}],45:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone")),searchResultTemplate=require("../../../client-side-templates/search-result.html");require("../../events/events.js");Backbone.$=$,module.exports=Backbone.View.extend({template:searchResultTemplate,initialize:function(){this.listenTo(this.model.collection,"reset",this.remove)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}})},{"../../../client-side-templates/search-result.html":11,"../../events/events.js":22,backbone:56,underscore:57}],46:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone")),SearchResult=require("../../search/views/search-result.js"),events=require("../../events/events.js");Backbone.$=$,module.exports=Backbone.View.extend({el:$("#search-results-river"),initialize:function(){this.listenTo(events,"search:resultsReadyToRender",this.render)},render:function(){this.collection.each(function(result){var resultView=new SearchResult({model:result});this.$el.append(resultView.render().el)},this)}})},{"../../events/events.js":22,"../../search/views/search-result.js":45,backbone:56,underscore:57}],47:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone")),events=require("../../events/events.js");Backbone.$=$,module.exports=Backbone.View.extend({el:$(".search-results-header"),events:{},initialize:function(){var searchField=this.$el.find(".search-results-header-field input");searchField.select(),this.listenTo(events,"search:resultsMetaReadyToRender",this.updateMeta),this.listenTo(events,"search:parametersUpdated",this.prepareSortLinks)},prepareSortLinks:function(parameters){this.$el.find(".search-results-sort .relevance").attr("href","?sp="+parameters.pageIndex+"&sb=relevance&q="+encodeURIComponent(parameters.query)),this.$el.find(".search-results-sort .mostrecent").attr("href","?sp="+parameters.pageIndex+"&sb=mostrecent&q="+encodeURIComponent(parameters.query))},updateMeta:function(){this.$el.find(".search-results-info").html(this.model.get("resultsInfo"))}})},{"../../events/events.js":22,backbone:56,underscore:57}],48:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone"));Backbone.$=$;var events=require("../../events/events.js"),helpers=require("../../helpers/helpers.js");module.exports=Backbone.Model.extend({defaults:{subscriberNumber:"",UUID:"",stEnvironment:"",commentsURL:"",subscriberSessionURL:"",commenterSessionURL:"",analyticsURL:"",currentURL:document.URL,cookieExpiresInXDays:2,forceRefreshOveride:!0,displayName:"",subscriberData:"hello",STReturnCookieName:"st-return",STReturnCookieValue:document.URL,STReturnCookieExpirationInDays:172800},initialize:function(){return"undefined"==typeof window.SEATIMESCO.singleSignOn||"undefined"==typeof window.SEATIMESCO.singleSignOn.info||"undefined"==typeof window.SEATIMESCO.singleSignOn.info.stEnvironment||"undefined"==typeof window.SEATIMESCO.singleSignOn.info.commentsURL||"undefined"==typeof window.SEATIMESCO.singleSignOn.info.subscriberSessionURL||"undefined"==typeof window.SEATIMESCO.singleSignOn.info.commenterSessionURL||"undefined"==typeof window.SEATIMESCO.singleSignOn.info.analyticsURL?void console.log("No SEATIMESCO.singleSignOn info. Not running single sign on scripts"):(this.set({stEnvironment:window.SEATIMESCO.singleSignOn.info.stEnvironment,commentsURL:window.SEATIMESCO.singleSignOn.info.commentsURL,subscriberSessionURL:window.SEATIMESCO.singleSignOn.info.subscriberSessionURL,commenterSessionURL:window.SEATIMESCO.singleSignOn.info.commenterSessionURL,analyticsURL:window.SEATIMESCO.singleSignOn.info.analyticsURL}),this.listenTo(events,"accessLoginForm",this.buildSSOCookie),this.listenTo(events,"singleSignOn:handleReturnURL",this.handleReturnURL),this.listenTo(events,"singleSignOn:logOut",this.logOut),this.getSubscriberNumber(),this.getSessionToken(),this.listenTo(events,"initialLoadEvent",this.getSSOInfo),window.SEATIMESCO.singleSignOn.info.forceRefreshOveride=this.get("forceRefreshOveride"),void(window.SEATIMESCO.singleSignOn.info.cookieExpiresInXDays=this.get("cookieExpiresInXDays")))},buildSSOCookie:function(name,value,days){var currentDomain=".seattletimes.com",expires=24*this.get("cookieExpiresInXDays")*60*60*1e3;helpers.writeCookie(name,this.get("currentURL"),expires,"/",currentDomain)},getSessionToken:function(){var sessionToken=helpers.getCookie("sessionToken");if(sessionToken){var sessionTokenObject=JSON.parse(atob(sessionToken));this.set("UUID",sessionTokenObject.UUID),events.trigger("user:UUIDProcessed",sessionTokenObject.UUID)}},getSubscriberNumber:function(){var subscriberData=helpers.getCookie("st_subscriberdata");if(subscriberData){var subscriberArray=JSON.parse(subscriberData);this.set("subscriberNumber",subscriberArray[0]),events.trigger("user:subscriberNumberProcessed",subscriberArray[0])}},logOut:function(e){e.preventDefault(),document.location.href.indexOf("profile")>-1&&-1==document.location.href.indexOf("editprofile")?document.location.reload(!0):document.location.href.indexOf("accountcenter")>-1?(stReturnCookie=helpers.getCookie("st-return"),stReturnCookie?location.href=stReturnCookie:location.href=this.get("STReturnCookieValue")):document.location.reload(!0),helpers.deleteCookie("st-return"),helpers.deleteCookie("sessionToken"),helpers.deleteCookie("authToken"),helpers.deleteCookie("displayName"),helpers.deleteCookie("lftoken"),helpers.deleteCookie("st_subscriberdata"),helpers.deleteCookie("phpbb3_l17g1_u"),helpers.deleteCookie("phpbb3_l17g1_k"),helpers.deleteCookie("phpbb3_l17g1_sid")},getSSOInfo:function(){var sessionToken=helpers.getCookie("sessionToken"),displayName=helpers.getCookie("displayName"),subscriberData=helpers.getCookie("st_subscriberdata");this.setAccountType(subscriberData),sessionToken?(displayName?(this.set({displayName:displayName,loggedIn:!0}),window.SEATIMESCO.singleSignOn.info.displayName=this.get("displayName"),window.SEATIMESCO.singleSignOn.info.loggedIn=this.get("loggedIn")):this.set({displayName:"No Account",loggedIn:!1}),helpers.getCookie("st_subscriberdata")||this.getAndWriteSubscriptionCookie(sessionToken),helpers.getCookie("lftoken")||this.getAndWriteLiveFyreCookie(sessionToken),this.configureGTMInfo(sessionToken),events.trigger("singleSignOn:loginReady")):(this.set({loggedIn:!1}),window.SEATIMESCO.singleSignOn.info.loggedIn=this.get("loggedIn"),events.trigger("singleSignOn:loginReady"))},setAccountType:function(subscriberData){var accountType=null,isArray="[object Array]"==Object.prototype.toString.call(subscriberData),subscriberRegex=/^\[.+\]$/,dfpSubValue="unknown";subscriberRegex.test(subscriberData.toString())||isArray?(accountType="digitalSubAcct",dfpSubValue="Subscriber"):"-1"===subscriberData.toString()?(accountType="commenterAcct",dfpSubValue="RegisteredUser"):"0"===subscriberData.toString()?(accountType="nonDigitalSubAcct",dfpSubValue="OtherSubscription_NoAccess"):(accountType="noAcct",dfpSubValue="NoAcct-NotLoggedIn"),events.trigger("sso:accountTypeDetermined",dfpSubValue),this.set({accountType:accountType,subscriberData:subscriberData}),window.SEATIMESCO.singleSignOn.info.accountType=this.get("accountType"),window.SEATIMESCO.singleSignOn.info.subscriberData=this.get("subscriberData")},getAndWriteSubscriptionCookie:function(sessionToken){var self=this,url="https://"+self.get("stEnvironment")+self.get("subscriberSessionURL")+sessionToken;console.log(url);var request=helpers.makeCORSRequest("GET",url),subscriberData=null;request.onload=function(){if(200==request.status){var response=JSON.parse(request.responseText);return console.log('COOKIES: "st_subscriberdata" cookie not present. Writing new cookie.'),self.set({subscriberData:response.st_subscriberdata}),self.setAccountType(response.st_subscriberdata),accountType=self.get("accountType"),"digitalSubAcct"==accountType&&self.prepareDigiSubData(response.st_subscriberdata),subscriberData=self.get("subscriberData"),void(null!=subscriberData?helpers.writeCookie("st_subscriberdata",subscriberData,14400,"/",".seattletimes.com"):console.log("COOKIES: cookie writing failed. Something upstream broke"))}console.log("COOKIES: AJAX to getsubscribersession.js session failed. Error below:"),console.log(request.responseText)},request.onerror=function(){console.log("COOKIES: Couldn't connect to getsubscribersession.js API")},request.send()},prepareDigiSubData:function(subscriberData){if(7===subscriberData.length){for(i=0;i<2;i++)subscriberData[i]='"'+subscriberData[i]+'"';subscriberData="["+subscriberData.join()+"]",this.set("subscriberData",subscriberData),window.SEATIMESCO.singleSignOn.info.subscriberData=this.get("subscriberData")}},getAndWriteLiveFyreCookie:function(sessionToken){var self=this,url="http://"+this.get("stEnvironment")+this.get("commenterSessionURL")+sessionToken+"&displayname="+this.get("displayName"),request=helpers.makeCORSRequest("GET",url);request.onload=function(){if(200==request.status){var response=JSON.parse(request.responseText);return console.log('COOKIES: "lftoken" cookie not present. Writing new cookie.'),helpers.writeCookie("lftoken",response.token,response.diff,"/",".seattletimes.com"),void(null!=response.token&&void 0!=response.token&&0!=response.token&&1==self.get("forceRefreshOveride")&&events.trigger("singleSignOn:loginReady"))}console.log("COOKIES: AJAX to lftoken.js failed. Error below:"),console.log(request.responseText)},request.onerror=function(){console.log("COOKIES: Couldn't connect to lftoken.js API")},request.send()},configureGTMInfo:function(sessionToken){var self=this,url="https://"+self.get("stEnvironment")+self.get("analyticsURL")+sessionToken,request=helpers.makeCORSRequest("GET",url);request.onload=function(){if(200==request.status){var response=JSON.parse(request.responseText);return void(window.dataLayer?window.dataLayer.push(response):(console.log("No global dataLayer variable to send GTM Info. Creating one and populating."),window.dataLayer=[response]))}console.log("AJAX to soa.js session failed. Error below:"),console.log(request.responseText)},request.onerror=function(){console.log("Couldn't connect to soa.js API")},request.send()},handleReturnURL:function(){var referrerURL,currentURL=document.location.href,mobilePaywallRegex=new RegExp("http://"+document.location.hostname+"/wall-mobile/","i"),subscribeRegex=new RegExp("http:\\/\\/"+document.location.hostname+"/subscribe/offers(-alternate)?.+","i");return subscribeRegex.test(currentURL)?void helpers.writeCookie(this.get("STReturnCookieName"),"http://www.seattletimes.com",this.get("STReturnCookieExpirationInDays"),"/",".seattletimes.com"):mobilePaywallRegex.test(currentURL)?(referrerURL=""!=document.referrer?document.referrer:"http://www.seattletimes.com",void helpers.writeCookie(this.get("STReturnCookieName"),referrerURL,this.get("STReturnCookieExpirationInDays"),"/",".seattletimes.com")):void helpers.writeCookie(this.get("STReturnCookieName"),this.get("STReturnCookieValue"),this.get("STReturnCookieExpirationInDays"),"/",".seattletimes.com")}})},{"../../events/events.js":22,"../../helpers/helpers.js":25,backbone:56,underscore:57}],49:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone"));Backbone.$=$;var events=require("../../events/events.js"),hamburgerNavLogin=require("../../../client-side-templates/singlesignon-hamburger-nav.html");module.exports=Backbone.View.extend({initialize:function(){this.listenTo(events,"singleSignOn:loginReady",this.renderMenu)},renderMenu:function(){var model=this.model.attributes,template=hamburgerNavLogin,hamburgerLoginMenu=null,hamburgerLoginMenu=document.querySelector(".hamburger-login-nav");null!==hamburgerLoginMenu&&(hamburgerLoginMenu.innerHTML=template(model))}})},{"../../../client-side-templates/singlesignon-hamburger-nav.html":12,"../../events/events.js":22,backbone:56,underscore:57}],50:[function(require,module,exports){
var Backbone=(require("underscore"),require("backbone"));Backbone.$=$;var events=require("../../events/events.js"),mainNavLogin=require("../../../client-side-templates/singlesignon-header-utils.html");module.exports=Backbone.View.extend({initialize:function(){this.listenTo(events,"singleSignOn:loginReady",this.renderMenu)},renderMenu:function(){var model=this.model.attributes,template=mainNavLogin;views=document.querySelectorAll(".header-utils"),views.length>0&&[].forEach.call(views,function(view){view.innerHTML=template(model)})}})},{"../../../client-side-templates/singlesignon-header-utils.html":13,"../../events/events.js":22,backbone:56,underscore:57}],51:[function(require,module,exports){var _=require("underscore"),Backbone=require("backbone"),events=require("../../events/events.js");Backbone.$=$,module.exports=Backbone.View.extend({rendered:!1,displayed:!1,enabled:!0,template:require("../../../client-side-templates/modal-facebook.html"),events:{},initialize:function(){var self=this;this.listenToOnce(events,"modalFacebook:disable",this.disableModal),!helpers.getCookie("st_fb_like_seen")&&helpers.hasClass(document.querySelector("body"),"single")&&(_.bindAll(self,"scrollCheck"),self.throttleScroll=_.throttle(self.scrollCheck,300),window.addEventListener("scroll",self.throttleScroll),window.fbAsyncInit=function(){var likeCallback=function(){FB.Event.subscribe("edge.create",function(response){events.trigger("modalFacebook:liked"),helpers.writeCookie("st_fb_like_seen",!0,31536e3,"/",".seattletimes.com")})};likeCallback(),FB.Event.subscribe("auth.login",likeCallback)})},disableModal:function(){this.enabled=!1},scrollCheck:function(){var self=this;if(this.enabled===!1)return void window.removeEventListener("scroll",self.throttleScroll);var scrollPercent=helpers.getScrollPercent();scrollPercent>=50&this.rendered===!1&&(this.renderSearchModal(),this.rendered=!0,helpers.writeCookie("st_fb_like_seen",!0,2592e3,"/",".seattletimes.com")),scrollPercent>=50&this.displayed===!1&this.rendered===!0&&this.showFacebookModal()},renderSearchModal:function(){var div=document.createElement("div"),self=this;div.className="facebook-modal",div.innerHTML=this.template(),document.querySelector(".modals").appendChild(div),this.el=document.querySelector(".facebook-modal"),this.el.querySelector(".facebook-close").addEventListener("click",function(){self.dismissed=!0,helpers.removeClass(self.el,"active"),events.trigger("modalFacebook:dismissed")}),this.renderFacebookLikeButtons()},renderFacebookLikeButtons:function(){var js,fjs=document.getElementsByTagName("script")[0];document.getElementById("facebook-jssdk")||(js=document.createElement("script"),js.id="facebook-jssdk",js.src="//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.3&appId=1522735777957334",js.async=!0,fjs.parentNode.insertBefore(js,fjs))},showFacebookModal:function(){var self=this;setTimeout(function(){helpers.addClass(self.el,"active"),events.trigger("modalFacebook:displayed")},200),this.displayed=!0}})},{"../../../client-side-templates/modal-facebook.html":7,"../../events/events.js":22,backbone:56,underscore:57}],52:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone")),events=require("../../events/events.js");Backbone.$=$,module.exports=Backbone.View.extend({el:$(".article-share"),events:{"click .social-share":"determineShareChoice"},state:{shareChoice:"",utmLocation:"",utmMedium:""},initialize:function(){},determineShareChoice:function(e){var shareText,iconClicked=e.currentTarget.firstChild.classList[0],prefix=/^icon-/,parentElement=$(e.currentTarget).parent();if(e.preventDefault(),this.state={shareChoice:"",utmLocation:"",utmMedium:""},iconClicked=iconClicked.replace(prefix,""),parentElement.hasClass("article-pull")){iconClicked="twitterPullQuote";var textWithQuotationMark=parentElement.text();shareText=textWithQuotationMark.substr(0,textWithQuotationMark.length-2)}else parentElement.hasClass("factoid-body")&&(iconClicked="twitterFactoid",shareText=parentElement.text());this.state.shareChoice="mail"==iconClicked?"email":iconClicked,this.state.utmLocation=helpers.attribute(e.currentTarget.parentElement,"data-utm"),this.state.utmMedium="email"===this.state.shareChoice?"email":"social",this.renderPopup(shareText,e)},constructURLEncodedUTMCode:function(){var utmCode="%3Futm_source="+this.state.shareChoice+"%26utm_medium="+this.state.utmMedium+"%26utm_campaign="+this.state.utmLocation;return utmCode},renderPopup:function(shareText,e){var url=encodeURIComponent("http://"+document.location.hostname+document.location.pathname),title=document.querySelector(".article-title").innerHTML,utmCode=this.constructURLEncodedUTMCode();switch(title=title.trim(),title=title.replace("&amp;","&"),title=encodeURIComponent(title),this.state.shareChoice){case"pinterest":var description,imageSRC=null,galleryImage=null,singleImage=null;galleryImage=document.querySelector(".featured-media .slides-main .owl-item.active img"),singleImage=document.querySelector(".featured-media img"),null!==galleryImage?(imageSRC=encodeURIComponent(helpers.attribute(galleryImage,"data-src-small")),description=encodeURIComponent(galleryImage.alt)):null!==singleImage?(imageSRC=encodeURIComponent(singleImage.src),description=encodeURIComponent(singleImage.alt)):(imageSRC=encodeURIComponent("http://"+document.location.hostname+"/wp-content/themes/st_refresh/img/st-meta.png"),description=encodeURIComponent(document.querySelector('meta[name="description"]').content)),window.open("https://www.pinterest.com/pin/create/button/?url="+url+utmCode+"&media="+imageSRC+"&description="+description,"pinterest","top=80,left=20,toolbar=0,status=0,width=740,height=580");break;case"email":var emailSubject=encodeURIComponent("Here's a Seattle Times article you might like"),emailBody="";emailBody="Hello,%20%0D%0A%0D%0A%20I%20just%20read%20the%20Seattle%20Times%20article,%20%22"+title+"%22,%20and%20I%20think%20you%20might%20enjoy%20it,%20too.%20You%20can%20read%20the%20full%20article%20here:%0D%0A%0D%0A"+url+utmCode,events.trigger("socialshare:email"),url="mailto:?subject="+emailSubject+"&body="+emailBody,document.location.href=url;break;case"facebook":events.trigger("socialshare:facebook"),window.open("http://www.facebook.com/sharer.php?u="+url+utmCode,"sharer","top=80,left=20,toolbar=0,status=0,width=600,height=500");break;case"twitter":var truncationLength=99;if(title.length>=truncationLength){var titleTruncated=title.substr(0,truncationLength);titleTruncated=titleTruncated.substr(0,Math.min(titleTruncated.length,titleTruncated.lastIndexOf(" "))),titleTruncated.length>truncationLength-3&&(titleTruncated=titleTruncated.substr(0,titleTruncated.length-3),titleTruncated=titleTruncated.substr(0,Math.min(titleTruncated.length,titleTruncated.lastIndexOf(" "))),titleTruncated+="..."),title=titleTruncated}events.trigger("socialshare:twitter"),window.open("http://www.twitter.com/intent/tweet?url="+url+utmCode+"&via=seattletimes&text="+title,"twitter","top=80,left=20,toolbar=0,status=0,width=550,height=420");break;case"twitterFactoid":case"twitterPullQuote":events.trigger("socialshare:twitterpullquote"),window.open("http://www.twitter.com/intent/tweet?text="+shareText+"&url="+url+"&via=seattletimes","twitter","top=80,left=20,toolbar=0,status=0,width=550,height=420")}}})},{"../../events/events.js":22,backbone:56,underscore:57}],53:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone"));Backbone.$=$;require("../../events/events.js"),require("../../helpers/helpers.js");module.exports=Backbone.Model.extend({defaults:{selectedTab:document.getElementsByClassName("active")[0],selectedOption:0,setHashLocation:!0}})},{"../../events/events.js":22,"../../helpers/helpers.js":25,backbone:56,underscore:57}],54:[function(require,module,exports){var Backbone=(require("underscore"),require("backbone")),events=require("../../events/events.js"),helpers=require("../../helpers/helpers.js");Backbone.$=$,module.exports=Backbone.View.extend({el:".filter-list:not(.disabled)",events:{"click .filter-list-tab":"setActiveContent","change .fallback-tabs":"setActiveContentMobile"},initialize:function(){void 0!=this.el&&this.listenToOnce(events,"initialLoadEvent",this.setInitialContent)},setActiveContent:function(event){var clickedElement=event.target;this.model.set("selectedTab",clickedElement),this.model.get("setHashLocation")&&(document.location.hash="#"+event.target.dataset.tab),this.revealContent()},setActiveContentMobile:function(event){var selectedContent=event.currentTarget;this.model.set("selectedOption",selectedContent.selectedIndex),this.model.get("setHashLocation")&&(document.location.hash="#"+selectedContent.value),this.revealMobileContent()},revealContent:function(){var allTabs=this.el.querySelectorAll(".filter-list-tab"),allContentAreas=this.el.querySelectorAll(".filter-list-content"),activeElement=this.model.get("selectedTab");helpers.addClass(activeElement,"active");for(var i=0;i<allTabs.length;i++)activeElement==allTabs[i]?helpers.removeClass(allContentAreas[i],"inactive"):(helpers.addClass(allContentAreas[i],"inactive"),helpers.removeClass(allTabs[i],"active"));events.trigger("tabbedContent:contentChanged")},revealMobileContent:function(){for(var selectedOptionIndex=this.model.get("selectedOption"),allContentAreas=this.el.querySelectorAll(".filter-list-content"),i=0;i<allContentAreas.length;i++)i!==selectedOptionIndex?helpers.addClass(allContentAreas[i],"inactive"):helpers.removeClass(allContentAreas[i],"inactive");events.trigger("tabbedContent:contentChanged")},setInitialContent:function(){var selected=document.location.hash;if("#"===selected[0]){selected=selected.slice(1,selected.length);for(var tabs=this.el.querySelectorAll(".filter-list-tab"),i=0;i<tabs.length;i++)tabs[i].dataset.tab===selected&&this.model.set("selectedTab",tabs[i]);for(var options=this.el.getElementsByClassName("fallback-tabs")[0],i=0;i<options.length;i++)options[i].value===selected&&(options[i].selected=!0,this.model.set("selectedOption",i));this.revealContent()}},constructor:function(){this.fn={},Backbone.View.apply(this,arguments)}})},{"../../events/events.js":22,"../../helpers/helpers.js":25,backbone:56,underscore:57}],55:[function(require,module,exports){var Backbone,events,helpers,_;_=require("underscore"),Backbone=require("backbone"),events=require("../../events/events.js"),helpers=require("../../helpers/helpers.js"),Backbone.$=$,module.exports=Backbone.View.extend({el:".toggled-content:not(.disabled)",events:{"click .toggle-button":"revealContent"},revealContent:function(event){var _activeForm,_button,_buttons,_classes,_forms,_selector,_target;return _forms=$(".toggled-content-area"),_buttons=$(".toggle-button"),_button=$(event.target),_button.toggleClass("transparent"),_classes=event.target.className.split(" "),_selector=_classes.join("."),_buttons.not(_selector).removeClass("transparent"),_target=_button.attr("data-target"),null!=_target&&(_activeForm=$("#"+_target),_activeForm.length>0)?(_activeForm.toggleClass("inactive"),_forms.not("#"+_target).addClass("inactive")):void 0},constructor:function(){this.fn={},Backbone.View.apply(this,arguments)}})},{"../../events/events.js":22,"../../helpers/helpers.js":25,backbone:56,underscore:57}],56:[function(require,module,exports){!function(root,factory){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(_,$,exports){root.Backbone=factory(root,exports,_,$)});else if("undefined"!=typeof exports){var _=require("underscore");factory(root,exports,_)}else root.Backbone=factory(root,{},root._,root.jQuery||root.Zepto||root.ender||root.$)}(this,function(root,Backbone,_,$){var previousBackbone=root.Backbone,array=[],slice=(array.push,array.slice);array.splice;Backbone.VERSION="1.1.2",Backbone.$=$,Backbone.noConflict=function(){return root.Backbone=previousBackbone,this},Backbone.emulateHTTP=!1,Backbone.emulateJSON=!1;var Events=Backbone.Events={on:function(name,callback,context){if(!eventsApi(this,"on",name,[callback,context])||!callback)return this;this._events||(this._events={});var events=this._events[name]||(this._events[name]=[]);return events.push({callback:callback,context:context,ctx:context||this}),this},once:function(name,callback,context){if(!eventsApi(this,"once",name,[callback,context])||!callback)return this;var self=this,once=_.once(function(){self.off(name,once),callback.apply(this,arguments)});return once._callback=callback,this.on(name,once,context)},off:function(name,callback,context){var retain,ev,events,names,i,l,j,k;if(!this._events||!eventsApi(this,"off",name,[callback,context]))return this;if(!name&&!callback&&!context)return this._events=void 0,this;for(names=name?[name]:_.keys(this._events),i=0,l=names.length;l>i;i++)if(name=names[i],events=this._events[name]){if(this._events[name]=retain=[],callback||context)for(j=0,k=events.length;k>j;j++)ev=events[j],(callback&&callback!==ev.callback&&callback!==ev.callback._callback||context&&context!==ev.context)&&retain.push(ev);retain.length||delete this._events[name]}return this},trigger:function(name){if(!this._events)return this;var args=slice.call(arguments,1);if(!eventsApi(this,"trigger",name,args))return this;var events=this._events[name],allEvents=this._events.all;return events&&triggerEvents(events,args),allEvents&&triggerEvents(allEvents,arguments),this},stopListening:function(obj,name,callback){var listeningTo=this._listeningTo;if(!listeningTo)return this;var remove=!name&&!callback;callback||"object"!=typeof name||(callback=this),obj&&((listeningTo={})[obj._listenId]=obj);for(var id in listeningTo)obj=listeningTo[id],obj.off(name,callback,this),(remove||_.isEmpty(obj._events))&&delete this._listeningTo[id];return this}},eventSplitter=/\s+/,eventsApi=function(obj,action,name,rest){if(!name)return!0;if("object"==typeof name){for(var key in name)obj[action].apply(obj,[key,name[key]].concat(rest));return!1}if(eventSplitter.test(name)){for(var names=name.split(eventSplitter),i=0,l=names.length;l>i;i++)obj[action].apply(obj,[names[i]].concat(rest));return!1}return!0},triggerEvents=function(events,args){var ev,i=-1,l=events.length,a1=args[0],a2=args[1],a3=args[2];switch(args.length){case 0:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx);return;case 1:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1);return;case 2:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1,a2);return;case 3:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1,a2,a3);return;default:for(;++i<l;)(ev=events[i]).callback.apply(ev.ctx,args);return}},listenMethods={listenTo:"on",listenToOnce:"once"};_.each(listenMethods,function(implementation,method){Events[method]=function(obj,name,callback){var listeningTo=this._listeningTo||(this._listeningTo={}),id=obj._listenId||(obj._listenId=_.uniqueId("l"));return listeningTo[id]=obj,callback||"object"!=typeof name||(callback=this),obj[implementation](name,callback,this),this}}),Events.bind=Events.on,Events.unbind=Events.off,_.extend(Backbone,Events);var Model=Backbone.Model=function(attributes,options){var attrs=attributes||{};options||(options={}),this.cid=_.uniqueId("c"),this.attributes={},options.collection&&(this.collection=options.collection),options.parse&&(attrs=this.parse(attrs,options)||{}),attrs=_.defaults({},attrs,_.result(this,"defaults")),this.set(attrs,options),this.changed={},this.initialize.apply(this,arguments)};_.extend(Model.prototype,Events,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(options){return _.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(attr){return this.attributes[attr]},escape:function(attr){return _.escape(this.get(attr))},has:function(attr){return null!=this.get(attr)},set:function(key,val,options){var attr,attrs,unset,changes,silent,changing,prev,current;if(null==key)return this;if("object"==typeof key?(attrs=key,options=val):(attrs={})[key]=val,options||(options={}),!this._validate(attrs,options))return!1;unset=options.unset,silent=options.silent,changes=[],changing=this._changing,this._changing=!0,changing||(this._previousAttributes=_.clone(this.attributes),this.changed={}),current=this.attributes,prev=this._previousAttributes,this.idAttribute in attrs&&(this.id=attrs[this.idAttribute]);for(attr in attrs)val=attrs[attr],_.isEqual(current[attr],val)||changes.push(attr),_.isEqual(prev[attr],val)?delete this.changed[attr]:this.changed[attr]=val,unset?delete current[attr]:current[attr]=val;if(!silent){changes.length&&(this._pending=options);for(var i=0,l=changes.length;l>i;i++)this.trigger("change:"+changes[i],this,current[changes[i]],options)}if(changing)return this;if(!silent)for(;this._pending;)options=this._pending,this._pending=!1,this.trigger("change",this,options);return this._pending=!1,this._changing=!1,this},unset:function(attr,options){return this.set(attr,void 0,_.extend({},options,{unset:!0}))},clear:function(options){var attrs={};for(var key in this.attributes)attrs[key]=void 0;return this.set(attrs,_.extend({},options,{unset:!0}))},hasChanged:function(attr){return null==attr?!_.isEmpty(this.changed):_.has(this.changed,attr)},changedAttributes:function(diff){if(!diff)return this.hasChanged()?_.clone(this.changed):!1;var val,changed=!1,old=this._changing?this._previousAttributes:this.attributes;for(var attr in diff)_.isEqual(old[attr],val=diff[attr])||((changed||(changed={}))[attr]=val);return changed},previous:function(attr){return null!=attr&&this._previousAttributes?this._previousAttributes[attr]:null},previousAttributes:function(){return _.clone(this._previousAttributes)},fetch:function(options){options=options?_.clone(options):{},void 0===options.parse&&(options.parse=!0);var model=this,success=options.success;return options.success=function(resp){return model.set(model.parse(resp,options),options)?(success&&success(model,resp,options),void model.trigger("sync",model,resp,options)):!1},wrapError(this,options),this.sync("read",this,options)},save:function(key,val,options){var attrs,method,xhr,attributes=this.attributes;if(null==key||"object"==typeof key?(attrs=key,options=val):(attrs={})[key]=val,options=_.extend({validate:!0},options),attrs&&!options.wait){if(!this.set(attrs,options))return!1}else if(!this._validate(attrs,options))return!1;attrs&&options.wait&&(this.attributes=_.extend({},attributes,attrs)),void 0===options.parse&&(options.parse=!0);var model=this,success=options.success;return options.success=function(resp){model.attributes=attributes;var serverAttrs=model.parse(resp,options);return options.wait&&(serverAttrs=_.extend(attrs||{},serverAttrs)),_.isObject(serverAttrs)&&!model.set(serverAttrs,options)?!1:(success&&success(model,resp,options),void model.trigger("sync",model,resp,options))},wrapError(this,options),method=this.isNew()?"create":options.patch?"patch":"update","patch"===method&&(options.attrs=attrs),xhr=this.sync(method,this,options),attrs&&options.wait&&(this.attributes=attributes),xhr},destroy:function(options){options=options?_.clone(options):{};var model=this,success=options.success,destroy=function(){model.trigger("destroy",model,model.collection,options)};if(options.success=function(resp){(options.wait||model.isNew())&&destroy(),success&&success(model,resp,options),model.isNew()||model.trigger("sync",model,resp,options)},this.isNew())return options.success(),!1;wrapError(this,options);var xhr=this.sync("delete",this,options);return options.wait||destroy(),xhr},url:function(){var base=_.result(this,"urlRoot")||_.result(this.collection,"url")||urlError();return this.isNew()?base:base.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(options){return this._validate({},_.extend(options||{},{validate:!0}))},_validate:function(attrs,options){if(!options.validate||!this.validate)return!0;attrs=_.extend({},this.attributes,attrs);var error=this.validationError=this.validate(attrs,options)||null;return error?(this.trigger("invalid",this,error,_.extend(options,{validationError:error})),!1):!0}});var modelMethods=["keys","values","pairs","invert","pick","omit"];_.each(modelMethods,function(method){Model.prototype[method]=function(){var args=slice.call(arguments);return args.unshift(this.attributes),_[method].apply(_,args)}});var Collection=Backbone.Collection=function(models,options){options||(options={}),options.model&&(this.model=options.model),void 0!==options.comparator&&(this.comparator=options.comparator),this._reset(),this.initialize.apply(this,arguments),models&&this.reset(models,_.extend({silent:!0},options))},setOptions={add:!0,remove:!0,merge:!0},addOptions={add:!0,remove:!1};_.extend(Collection.prototype,Events,{model:Model,initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(models,options){return this.set(models,_.extend({merge:!1},options,addOptions))},remove:function(models,options){var singular=!_.isArray(models);models=singular?[models]:_.clone(models),options||(options={});var i,l,index,model;for(i=0,l=models.length;l>i;i++)model=models[i]=this.get(models[i]),model&&(delete this._byId[model.id],delete this._byId[model.cid],index=this.indexOf(model),this.models.splice(index,1),this.length--,options.silent||(options.index=index,model.trigger("remove",model,this,options)),this._removeReference(model,options));return singular?models[0]:models},set:function(models,options){options=_.defaults({},options,setOptions),options.parse&&(models=this.parse(models,options));var singular=!_.isArray(models);models=singular?models?[models]:[]:_.clone(models);var i,l,id,model,attrs,existing,sort,at=options.at,targetModel=this.model,sortable=this.comparator&&null==at&&options.sort!==!1,sortAttr=_.isString(this.comparator)?this.comparator:null,toAdd=[],toRemove=[],modelMap={},add=options.add,merge=options.merge,remove=options.remove,order=!sortable&&add&&remove?[]:!1;for(i=0,l=models.length;l>i;i++){if(attrs=models[i]||{},id=attrs instanceof Model?model=attrs:attrs[targetModel.prototype.idAttribute||"id"],existing=this.get(id))remove&&(modelMap[existing.cid]=!0),merge&&(attrs=attrs===model?model.attributes:attrs,options.parse&&(attrs=existing.parse(attrs,options)),existing.set(attrs,options),sortable&&!sort&&existing.hasChanged(sortAttr)&&(sort=!0)),models[i]=existing;else if(add){if(model=models[i]=this._prepareModel(attrs,options),!model)continue;toAdd.push(model),this._addReference(model,options)}model=existing||model,!order||!model.isNew()&&modelMap[model.id]||order.push(model),modelMap[model.id]=!0}if(remove){for(i=0,l=this.length;l>i;++i)modelMap[(model=this.models[i]).cid]||toRemove.push(model);toRemove.length&&this.remove(toRemove,options)}if(toAdd.length||order&&order.length)if(sortable&&(sort=!0),this.length+=toAdd.length,null!=at)for(i=0,l=toAdd.length;l>i;i++)this.models.splice(at+i,0,toAdd[i]);else{order&&(this.models.length=0);var orderedModels=order||toAdd;for(i=0,l=orderedModels.length;l>i;i++)this.models.push(orderedModels[i])}if(sort&&this.sort({silent:!0}),!options.silent){for(i=0,l=toAdd.length;l>i;i++)(model=toAdd[i]).trigger("add",model,this,options);(sort||order&&order.length)&&this.trigger("sort",this,options)}return singular?models[0]:models},reset:function(models,options){options||(options={});for(var i=0,l=this.models.length;l>i;i++)this._removeReference(this.models[i],options);return options.previousModels=this.models,this._reset(),models=this.add(models,_.extend({silent:!0},options)),options.silent||this.trigger("reset",this,options),models},push:function(model,options){return this.add(model,_.extend({at:this.length},options))},pop:function(options){var model=this.at(this.length-1);return this.remove(model,options),model},unshift:function(model,options){return this.add(model,_.extend({at:0},options))},shift:function(options){var model=this.at(0);return this.remove(model,options),model},slice:function(){return slice.apply(this.models,arguments)},get:function(obj){return null==obj?void 0:this._byId[obj]||this._byId[obj.id]||this._byId[obj.cid]},at:function(index){return this.models[index]},where:function(attrs,first){return _.isEmpty(attrs)?first?void 0:[]:this[first?"find":"filter"](function(model){for(var key in attrs)if(attrs[key]!==model.get(key))return!1;return!0})},findWhere:function(attrs){return this.where(attrs,!0)},sort:function(options){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return options||(options={}),_.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(_.bind(this.comparator,this)),options.silent||this.trigger("sort",this,options),this},pluck:function(attr){return _.invoke(this.models,"get",attr)},fetch:function(options){options=options?_.clone(options):{},void 0===options.parse&&(options.parse=!0);var success=options.success,collection=this;return options.success=function(resp){var method=options.reset?"reset":"set";collection[method](resp,options),success&&success(collection,resp,options),collection.trigger("sync",collection,resp,options)},wrapError(this,options),this.sync("read",this,options)},create:function(model,options){if(options=options?_.clone(options):{},!(model=this._prepareModel(model,options)))return!1;options.wait||this.add(model,options);var collection=this,success=options.success;return options.success=function(model,resp){options.wait&&collection.add(model,options),success&&success(model,resp,options)},model.save(null,options),model},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(attrs,options){if(attrs instanceof Model)return attrs;options=options?_.clone(options):{},options.collection=this;var model=new this.model(attrs,options);return model.validationError?(this.trigger("invalid",this,model.validationError,options),!1):model},_addReference:function(model,options){this._byId[model.cid]=model,null!=model.id&&(this._byId[model.id]=model),model.collection||(model.collection=this),model.on("all",this._onModelEvent,this)},_removeReference:function(model,options){this===model.collection&&delete model.collection,model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,options){("add"!==event&&"remove"!==event||collection===this)&&("destroy"===event&&this.remove(model,options),model&&event==="change:"+model.idAttribute&&(delete this._byId[model.previous(model.idAttribute)],null!=model.id&&(this._byId[model.id]=model)),this.trigger.apply(this,arguments))}});var methods=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];_.each(methods,function(method){Collection.prototype[method]=function(){var args=slice.call(arguments);return args.unshift(this.models),_[method].apply(_,args)}});var attributeMethods=["groupBy","countBy","sortBy","indexBy"];_.each(attributeMethods,function(method){Collection.prototype[method]=function(value,context){var iterator=_.isFunction(value)?value:function(model){return model.get(value)};return _[method](this.models,iterator,context)}});var View=Backbone.View=function(options){this.cid=_.uniqueId("view"),options||(options={}),_.extend(this,_.pick(options,viewOptions)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},delegateEventSplitter=/^(\S+)\s*(.*)$/,viewOptions=["model","collection","el","id","attributes","className","tagName","events"];_.extend(View.prototype,Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(element,delegate){return this.$el&&this.undelegateEvents(),this.$el=element instanceof Backbone.$?element:Backbone.$(element),this.el=this.$el[0],delegate!==!1&&this.delegateEvents(),this},delegateEvents:function(events){if(!events&&!(events=_.result(this,"events")))return this;this.undelegateEvents();for(var key in events){var method=events[key];if(_.isFunction(method)||(method=this[events[key]]),method){var match=key.match(delegateEventSplitter),eventName=match[1],selector=match[2];method=_.bind(method,this),eventName+=".delegateEvents"+this.cid,""===selector?this.$el.on(eventName,method):this.$el.on(eventName,selector,method)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(_.result(this,"el"),!1);else{var attrs=_.extend({},_.result(this,"attributes"));this.id&&(attrs.id=_.result(this,"id")),this.className&&(attrs["class"]=_.result(this,"className"));var $el=Backbone.$("<"+_.result(this,"tagName")+">").attr(attrs);this.setElement($el,!1)}}}),Backbone.sync=function(method,model,options){var type=methodMap[method];_.defaults(options||(options={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var params={type:type,dataType:"json"};if(options.url||(params.url=_.result(model,"url")||urlError()),null!=options.data||!model||"create"!==method&&"update"!==method&&"patch"!==method||(params.contentType="application/json",params.data=JSON.stringify(options.attrs||model.toJSON(options))),options.emulateJSON&&(params.contentType="application/x-www-form-urlencoded",params.data=params.data?{model:params.data}:{}),options.emulateHTTP&&("PUT"===type||"DELETE"===type||"PATCH"===type)){params.type="POST",options.emulateJSON&&(params.data._method=type);var beforeSend=options.beforeSend;options.beforeSend=function(xhr){return xhr.setRequestHeader("X-HTTP-Method-Override",type),beforeSend?beforeSend.apply(this,arguments):void 0}}"GET"===params.type||options.emulateJSON||(params.processData=!1),"PATCH"===params.type&&noXhrPatch&&(params.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var xhr=options.xhr=Backbone.ajax(_.extend(params,options));return model.trigger("request",model,xhr,options),xhr};var noXhrPatch=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),methodMap={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)};var Router=Backbone.Router=function(options){options||(options={}),options.routes&&(this.routes=options.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},optionalParam=/\((.*?)\)/g,namedParam=/(\(\?)?:\w+/g,splatParam=/\*\w+/g,escapeRegExp=/[\-{}\[\]+?.,\\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){_.isRegExp(route)||(route=this._routeToRegExp(route)),_.isFunction(name)&&(callback=name,name=""),callback||(callback=this[name]);var router=this;return Backbone.history.route(route,function(fragment){var args=router._extractParameters(route,fragment);router.execute(callback,args),router.trigger.apply(router,["route:"+name].concat(args)),router.trigger("route",name,args),Backbone.history.trigger("route",router,name,args)}),this},execute:function(callback,args){callback&&callback.apply(this,args)},navigate:function(fragment,options){return Backbone.history.navigate(fragment,options),this},_bindRoutes:function(){if(this.routes){this.routes=_.result(this,"routes");for(var route,routes=_.keys(this.routes);null!=(route=routes.pop());)this.route(route,this.routes[route])}},_routeToRegExp:function(route){return route=route.replace(escapeRegExp,"\\$&").replace(optionalParam,"(?:$1)?").replace(namedParam,function(match,optional){
return optional?match:"([^/?]+)"}).replace(splatParam,"([^?]*?)"),new RegExp("^"+route+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(route,fragment){var params=route.exec(fragment).slice(1);return _.map(params,function(param,i){return i===params.length-1?param||null:param?decodeURIComponent(param):null})}});var History=Backbone.History=function(){this.handlers=[],_.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},routeStripper=/^[#\/]|\s+$/g,rootStripper=/^\/+|\/+$/g,isExplorer=/msie [\w.]+/,trailingSlash=/\/$/,pathStripper=/#.*$/;History.started=!1,_.extend(History.prototype,Events,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(window){var match=(window||this).location.href.match(/#(.*)$/);return match?match[1]:""},getFragment:function(fragment,forcePushState){if(null==fragment)if(this._hasPushState||!this._wantsHashChange||forcePushState){fragment=decodeURI(this.location.pathname+this.location.search);var root=this.root.replace(trailingSlash,"");fragment.indexOf(root)||(fragment=fragment.slice(root.length))}else fragment=this.getHash();return fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");History.started=!0,this.options=_.extend({root:"/"},this.options,options),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var fragment=this.getFragment(),docMode=document.documentMode,oldIE=isExplorer.exec(navigator.userAgent.toLowerCase())&&(!docMode||7>=docMode);if(this.root=("/"+this.root+"/").replace(rootStripper,"/"),oldIE&&this._wantsHashChange){var frame=Backbone.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=frame.hide().appendTo("body")[0].contentWindow,this.navigate(fragment)}this._hasPushState?Backbone.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!oldIE?Backbone.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=fragment;var loc=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&loc.hash&&(this.fragment=this.getHash().replace(routeStripper,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){Backbone.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),History.started=!1},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(e){var current=this.getFragment();return current===this.fragment&&this.iframe&&(current=this.getFragment(this.getHash(this.iframe))),current===this.fragment?!1:(this.iframe&&this.navigate(current),void this.loadUrl())},loadUrl:function(fragment){return fragment=this.fragment=this.getFragment(fragment),_.any(this.handlers,function(handler){return handler.route.test(fragment)?(handler.callback(fragment),!0):void 0})},navigate:function(fragment,options){if(!History.started)return!1;options&&options!==!0||(options={trigger:!!options});var url=this.root+(fragment=this.getFragment(fragment||""));if(fragment=fragment.replace(pathStripper,""),this.fragment!==fragment){if(this.fragment=fragment,""===fragment&&"/"!==url&&(url=url.slice(0,-1)),this._hasPushState)this.history[options.replace?"replaceState":"pushState"]({},document.title,url);else{if(!this._wantsHashChange)return this.location.assign(url);this._updateHash(this.location,fragment,options.replace),this.iframe&&fragment!==this.getFragment(this.getHash(this.iframe))&&(options.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,fragment,options.replace))}return options.trigger?this.loadUrl(fragment):void 0}},_updateHash:function(location,fragment,replace){if(replace){var href=location.href.replace(/(javascript:|#).*$/,"");location.replace(href+"#"+fragment)}else location.hash="#"+fragment}}),Backbone.history=new History;var extend=function(protoProps,staticProps){var child,parent=this;child=protoProps&&_.has(protoProps,"constructor")?protoProps.constructor:function(){return parent.apply(this,arguments)},_.extend(child,parent,staticProps);var Surrogate=function(){this.constructor=child};return Surrogate.prototype=parent.prototype,child.prototype=new Surrogate,protoProps&&_.extend(child.prototype,protoProps),child.__super__=parent.prototype,child};Model.extend=Collection.extend=Router.extend=View.extend=History.extend=extend;var urlError=function(){throw new Error('A "url" property or function must be specified')},wrapError=function(model,options){var error=options.error;options.error=function(resp){error&&error(model,resp,options),model.trigger("error",model,resp,options)}};return Backbone})},{underscore:57}],57:[function(require,module,exports){(function(){var root=this,previousUnderscore=root._,breaker={},ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,_=function(obj){return obj instanceof _?obj:this instanceof _?void(this._wrapped=obj):new _(obj)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):root._=_,_.VERSION="1.6.0";var each=_.each=_.forEach=function(obj,iterator,context){if(null==obj)return obj;if(nativeForEach&&obj.forEach===nativeForEach)obj.forEach(iterator,context);else if(obj.length===+obj.length){for(var i=0,length=obj.length;length>i;i++)if(iterator.call(context,obj[i],i,obj)===breaker)return}else for(var keys=_.keys(obj),i=0,length=keys.length;length>i;i++)if(iterator.call(context,obj[keys[i]],keys[i],obj)===breaker)return;return obj};_.map=_.collect=function(obj,iterator,context){var results=[];return null==obj?results:nativeMap&&obj.map===nativeMap?obj.map(iterator,context):(each(obj,function(value,index,list){results.push(iterator.call(context,value,index,list))}),results)};var reduceError="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj&&(obj=[]),nativeReduce&&obj.reduce===nativeReduce)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduce(iterator,memo):obj.reduce(iterator);if(each(obj,function(value,index,list){initial?memo=iterator.call(context,memo,value,index,list):(memo=value,initial=!0)}),!initial)throw new TypeError(reduceError);return memo},_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj&&(obj=[]),nativeReduceRight&&obj.reduceRight===nativeReduceRight)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator);var length=obj.length;if(length!==+length){var keys=_.keys(obj);length=keys.length}if(each(obj,function(value,index,list){index=keys?keys[--length]:--length,initial?memo=iterator.call(context,memo,obj[index],index,list):(memo=obj[index],initial=!0)}),!initial)throw new TypeError(reduceError);return memo},_.find=_.detect=function(obj,predicate,context){var result;return any(obj,function(value,index,list){return predicate.call(context,value,index,list)?(result=value,!0):void 0}),result},_.filter=_.select=function(obj,predicate,context){var results=[];return null==obj?results:nativeFilter&&obj.filter===nativeFilter?obj.filter(predicate,context):(each(obj,function(value,index,list){predicate.call(context,value,index,list)&&results.push(value)}),results)},_.reject=function(obj,predicate,context){return _.filter(obj,function(value,index,list){return!predicate.call(context,value,index,list)},context)},_.every=_.all=function(obj,predicate,context){predicate||(predicate=_.identity);var result=!0;return null==obj?result:nativeEvery&&obj.every===nativeEvery?obj.every(predicate,context):(each(obj,function(value,index,list){return(result=result&&predicate.call(context,value,index,list))?void 0:breaker}),!!result)};var any=_.some=_.any=function(obj,predicate,context){predicate||(predicate=_.identity);var result=!1;return null==obj?result:nativeSome&&obj.some===nativeSome?obj.some(predicate,context):(each(obj,function(value,index,list){return result||(result=predicate.call(context,value,index,list))?breaker:void 0}),!!result)};_.contains=_.include=function(obj,target){return null==obj?!1:nativeIndexOf&&obj.indexOf===nativeIndexOf?-1!=obj.indexOf(target):any(obj,function(value){return value===target})},_.invoke=function(obj,method){var args=slice.call(arguments,2),isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args)})},_.pluck=function(obj,key){return _.map(obj,_.property(key))},_.where=function(obj,attrs){return _.filter(obj,_.matches(attrs))},_.findWhere=function(obj,attrs){return _.find(obj,_.matches(attrs))},_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535)return Math.max.apply(Math,obj);var result=-(1/0),lastComputed=-(1/0);return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>lastComputed&&(result=value,lastComputed=computed)}),result},_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535)return Math.min.apply(Math,obj);var result=1/0,lastComputed=1/0;return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;lastComputed>computed&&(result=value,lastComputed=computed)}),result},_.shuffle=function(obj){var rand,index=0,shuffled=[];return each(obj,function(value){rand=_.random(index++),shuffled[index-1]=shuffled[rand],shuffled[rand]=value}),shuffled},_.sample=function(obj,n,guard){return null==n||guard?(obj.length!==+obj.length&&(obj=_.values(obj)),obj[_.random(obj.length-1)]):_.shuffle(obj).slice(0,Math.max(0,n))};var lookupIterator=function(value){return null==value?_.identity:_.isFunction(value)?value:_.property(value)};_.sortBy=function(obj,iterator,context){return iterator=lookupIterator(iterator),_.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;if(a!==b){if(a>b||void 0===a)return 1;if(b>a||void 0===b)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,iterator,context){var result={};return iterator=lookupIterator(iterator),each(obj,function(value,index){var key=iterator.call(context,value,index,obj);behavior(result,key,value)}),result}};_.groupBy=group(function(result,key,value){_.has(result,key)?result[key].push(value):result[key]=[value]}),_.indexBy=group(function(result,key,value){result[key]=value}),_.countBy=group(function(result,key){_.has(result,key)?result[key]++:result[key]=1}),_.sortedIndex=function(array,obj,iterator,context){iterator=lookupIterator(iterator);for(var value=iterator.call(context,obj),low=0,high=array.length;high>low;){var mid=low+high>>>1;iterator.call(context,array[mid])<value?low=mid+1:high=mid}return low},_.toArray=function(obj){return obj?_.isArray(obj)?slice.call(obj):obj.length===+obj.length?_.map(obj,_.identity):_.values(obj):[]},_.size=function(obj){return null==obj?0:obj.length===+obj.length?obj.length:_.keys(obj).length},_.first=_.head=_.take=function(array,n,guard){return null==array?void 0:null==n||guard?array[0]:0>n?[]:slice.call(array,0,n)},_.initial=function(array,n,guard){return slice.call(array,0,array.length-(null==n||guard?1:n))},_.last=function(array,n,guard){return null==array?void 0:null==n||guard?array[array.length-1]:slice.call(array,Math.max(array.length-n,0))},_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,null==n||guard?1:n)},_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,output){return shallow&&_.every(input,_.isArray)?concat.apply(output,input):(each(input,function(value){_.isArray(value)||_.isArguments(value)?shallow?push.apply(output,value):flatten(value,shallow,output):output.push(value)}),output)};_.flatten=function(array,shallow){return flatten(array,shallow,[])},_.without=function(array){return _.difference(array,slice.call(arguments,1))},_.partition=function(array,predicate){var pass=[],fail=[];return each(array,function(elem){(predicate(elem)?pass:fail).push(elem)}),[pass,fail]},_.uniq=_.unique=function(array,isSorted,iterator,context){_.isFunction(isSorted)&&(context=iterator,iterator=isSorted,isSorted=!1);var initial=iterator?_.map(array,iterator,context):array,results=[],seen=[];return each(initial,function(value,index){(isSorted?index&&seen[seen.length-1]===value:_.contains(seen,value))||(seen.push(value),results.push(array[index]))}),results},_.union=function(){return _.uniq(_.flatten(arguments,!0))},_.intersection=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.contains(other,item)})})},_.difference=function(array){var rest=concat.apply(ArrayProto,slice.call(arguments,1));return _.filter(array,function(value){return!_.contains(rest,value)})},_.zip=function(){for(var length=_.max(_.pluck(arguments,"length").concat(0)),results=new Array(length),i=0;length>i;i++)results[i]=_.pluck(arguments,""+i);return results},_.object=function(list,values){if(null==list)return{};for(var result={},i=0,length=list.length;length>i;i++)values?result[list[i]]=values[i]:result[list[i][0]]=list[i][1];return result},_.indexOf=function(array,item,isSorted){if(null==array)return-1;var i=0,length=array.length;if(isSorted){if("number"!=typeof isSorted)return i=_.sortedIndex(array,item),array[i]===item?i:-1;i=0>isSorted?Math.max(0,length+isSorted):isSorted}if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item,isSorted);for(;length>i;i++)if(array[i]===item)return i;return-1},_.lastIndexOf=function(array,item,from){if(null==array)return-1;var hasIndex=null!=from;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf)return hasIndex?array.lastIndexOf(item,from):array.lastIndexOf(item);for(var i=hasIndex?from:array.length;i--;)if(array[i]===item)return i;return-1},_.range=function(start,stop,step){arguments.length<=1&&(stop=start||0,start=0),step=arguments[2]||1;for(var length=Math.max(Math.ceil((stop-start)/step),0),idx=0,range=new Array(length);length>idx;)range[idx++]=start,start+=step;return range};var ctor=function(){};_.bind=function(func,context){var args,bound;if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;return args=slice.call(arguments,2),bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor;ctor.prototype=null;var result=func.apply(self,args.concat(slice.call(arguments)));return Object(result)===result?result:self}},_.partial=function(func){var boundArgs=slice.call(arguments,1);return function(){for(var position=0,args=boundArgs.slice(),i=0,length=args.length;length>i;i++)args[i]===_&&(args[i]=arguments[position++]);for(;position<arguments.length;)args.push(arguments[position++]);return func.apply(this,args)}},_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(0===funcs.length)throw new Error("bindAll must be passed function names");return each(funcs,function(f){obj[f]=_.bind(obj[f],obj)}),obj},_.memoize=function(func,hasher){var memo={};return hasher||(hasher=_.identity),function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}},_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)},_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))},_.throttle=function(func,wait,options){var context,args,result,timeout=null,previous=0;options||(options={});var later=function(){previous=options.leading===!1?0:_.now(),timeout=null,result=func.apply(context,args),context=args=null};return function(){var now=_.now();previous||options.leading!==!1||(previous=now);var remaining=wait-(now-previous);return context=this,args=arguments,0>=remaining?(clearTimeout(timeout),timeout=null,previous=now,result=func.apply(context,args),context=args=null):timeout||options.trailing===!1||(timeout=setTimeout(later,remaining)),result}},_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result,later=function(){var last=_.now()-timestamp;wait>last?timeout=setTimeout(later,wait-last):(timeout=null,immediate||(result=func.apply(context,args),context=args=null))};return function(){context=this,args=arguments,timestamp=_.now();var callNow=immediate&&!timeout;return timeout||(timeout=setTimeout(later,wait)),callNow&&(result=func.apply(context,args),context=args=null),result}},_.once=function(func){var memo,ran=!1;return function(){return ran?memo:(ran=!0,memo=func.apply(this,arguments),func=null,memo)}},_.wrap=function(func,wrapper){return _.partial(wrapper,func)},_.compose=function(){var funcs=arguments;return function(){for(var args=arguments,i=funcs.length-1;i>=0;i--)args=[funcs[i].apply(this,args)];return args[0]}},_.after=function(times,func){return function(){return--times<1?func.apply(this,arguments):void 0}},_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)_.has(obj,key)&&keys.push(key);return keys},_.values=function(obj){for(var keys=_.keys(obj),length=keys.length,values=new Array(length),i=0;length>i;i++)values[i]=obj[keys[i]];return values},_.pairs=function(obj){for(var keys=_.keys(obj),length=keys.length,pairs=new Array(length),i=0;length>i;i++)pairs[i]=[keys[i],obj[keys[i]]];return pairs},_.invert=function(obj){for(var result={},keys=_.keys(obj),i=0,length=keys.length;length>i;i++)result[obj[keys[i]]]=keys[i];return result},_.functions=_.methods=function(obj){var names=[];for(var key in obj)_.isFunction(obj[key])&&names.push(key);return names.sort()},_.extend=function(obj){return each(slice.call(arguments,1),function(source){if(source)for(var prop in source)obj[prop]=source[prop]}),obj},_.pick=function(obj){var copy={},keys=concat.apply(ArrayProto,slice.call(arguments,1));return each(keys,function(key){key in obj&&(copy[key]=obj[key])}),copy},_.omit=function(obj){var copy={},keys=concat.apply(ArrayProto,slice.call(arguments,1));for(var key in obj)_.contains(keys,key)||(copy[key]=obj[key]);return copy},_.defaults=function(obj){return each(slice.call(arguments,1),function(source){if(source)for(var prop in source)void 0===obj[prop]&&(obj[prop]=source[prop])}),obj},_.clone=function(obj){return _.isObject(obj)?_.isArray(obj)?obj.slice():_.extend({},obj):obj},_.tap=function(obj,interceptor){return interceptor(obj),obj};var eq=function(a,b,aStack,bStack){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof _&&(a=a._wrapped),b instanceof _&&(b=b._wrapped);var className=toString.call(a);if(className!=toString.call(b))return!1;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var length=aStack.length;length--;)if(aStack[length]==a)return bStack[length]==b;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)&&"constructor"in a&&"constructor"in b)return!1;aStack.push(a),bStack.push(b);var size=0,result=!0;if("[object Array]"==className){if(size=a.length,result=size==b.length)for(;size--&&(result=eq(a[size],b[size],aStack,bStack)););}else{for(var key in a)if(_.has(a,key)&&(size++,!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack))))break;if(result){for(key in b)if(_.has(b,key)&&!size--)break;result=!size}}return aStack.pop(),bStack.pop(),result};_.isEqual=function(a,b){return eq(a,b,[],[])},_.isEmpty=function(obj){if(null==obj)return!0;if(_.isArray(obj)||_.isString(obj))return 0===obj.length;for(var key in obj)if(_.has(obj,key))return!1;return!0},_.isElement=function(obj){return!(!obj||1!==obj.nodeType)},_.isArray=nativeIsArray||function(obj){return"[object Array]"==toString.call(obj)},_.isObject=function(obj){return obj===Object(obj)},each(["Arguments","Function","String","Number","Date","RegExp"],function(name){_["is"+name]=function(obj){return toString.call(obj)=="[object "+name+"]"}}),_.isArguments(arguments)||(_.isArguments=function(obj){return!(!obj||!_.has(obj,"callee"))}),"function"!=typeof/./&&(_.isFunction=function(obj){return"function"==typeof obj}),_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))},_.isNaN=function(obj){return _.isNumber(obj)&&obj!=+obj},_.isBoolean=function(obj){return obj===!0||obj===!1||"[object Boolean]"==toString.call(obj)},_.isNull=function(obj){return null===obj},_.isUndefined=function(obj){return void 0===obj},_.has=function(obj,key){return hasOwnProperty.call(obj,key)},_.noConflict=function(){return root._=previousUnderscore,this},_.identity=function(value){return value},_.constant=function(value){return function(){return value}},_.property=function(key){return function(obj){return obj[key]}},_.matches=function(attrs){return function(obj){if(obj===attrs)return!0;for(var key in attrs)if(attrs[key]!==obj[key])return!1;return!0}},_.times=function(n,iterator,context){for(var accum=Array(Math.max(0,n)),i=0;n>i;i++)accum[i]=iterator.call(context,i);return accum},_.random=function(min,max){return null==max&&(max=min,min=0),min+Math.floor(Math.random()*(max-min+1))},_.now=Date.now||function(){return(new Date).getTime()};var entityMap={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};entityMap.unescape=_.invert(entityMap.escape);var entityRegexes={escape:new RegExp("["+_.keys(entityMap.escape).join("")+"]","g"),unescape:new RegExp("("+_.keys(entityMap.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(method){_[method]=function(string){return null==string?"":(""+string).replace(entityRegexes[method],function(match){return entityMap[method][match]})}}),_.result=function(object,property){if(null==object)return void 0;var value=object[property];return _.isFunction(value)?value.call(object):value},_.mixin=function(obj){each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];return push.apply(args,arguments),result.call(this,func.apply(_,args))}})};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(text,data,settings){var render;settings=_.defaults({},settings,_.templateSettings);var matcher=new RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g"),index=0,source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){return source+=text.slice(index,offset).replace(escaper,function(match){return"\\"+escapes[match]}),escape&&(source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"),interpolate&&(source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"),evaluate&&(source+="';\n"+evaluate+"\n__p+='"),index=offset+match.length,match}),source+="';\n",settings.variable||(source="with(obj||{}){\n"+source+"}\n"),source="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{render=new Function(settings.variable||"obj","_",source)}catch(e){throw e.source=source,e}if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};return template.source="function("+(settings.variable||"obj")+"){\n"+source+"}",template},_.chain=function(obj){return _(obj).chain()};var result=function(obj){return this._chain?_(obj).chain():obj};_.mixin(_),each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;return method.apply(obj,arguments),"shift"!=name&&"splice"!=name||0!==obj.length||delete obj[0],result.call(this,obj)}}),each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments))}}),_.extend(_.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return _})}).call(this)},{}]},{},[19]);