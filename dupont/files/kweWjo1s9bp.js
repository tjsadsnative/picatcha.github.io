/*!CK:2505877456!*//*1440722970,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["pAN93"]); }

__d('LinkshimAsyncLink',['$','AsyncSignal','DOM','UserAgent_DEPRECATED','LinkshimHandlerConfig'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m={swap:function(n,o){var p=k.ie()<=8;if(p){var q=j.create('wbr',{},null);j.appendContent(n,q);}n.href=o;if(p)j.remove(q);},referrer_log:function(n,o,p){var q=h('meta_referrer');q.content='origin';m.swap(n,o);setTimeout(function(){q.content=l.default_meta_referrer_policy;new i(p,{}).send();},100);}};f.exports=m;},null);
__d('legacy:dom-asynclinkshim',['LinkshimAsyncLink'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();b.LinkshimAsyncLink=c('LinkshimAsyncLink');},3);
__d('randomInt',['invariant'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j,k){var l=arguments.length;!(l>0&&l<=2)?h(0):undefined;if(l===1){k=j;j=0;}!(k>j)?h(0):undefined;var m=this.random||Math.random;return Math.floor(j+m()*(k-j));}f.exports=i;},null);
__d('ClientIDs',['randomInt'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={},j={getNewClientID:function(){var k=Date.now(),l=k+':'+(h(0,4294967295)+1);i[l]=true;return l;},isExistingClientID:function(k){return !!i[k];}};f.exports=j;},null);
__d('ServerTime',['InitialServerTime'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();l(h.serverTime);var i;function j(){return Date.now()-i;}function k(){return i;}function l(m){i=Date.now()-m;}f.exports={getMillis:j,getOffsetMillis:k,update:l,get:j,getSkew:k};},null);
__d('AttachmentRelatedShareConstants',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={ARTICLE_CLICK:'article_click',VIDEO_CLICK:'video_click',FBVIDEO_CLICK:'fbvideo_click',GAME_CLICK:'game_click',EVENT_DELAY:1000,HIDE_DELAY:100,PHOTO_CLICK:'photo_click',EVENT_JOIN:'event_join'};f.exports=h;},null);
__d('tidyEvent',['Run'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=[];function j(){while(i.length){var m=i.shift();m&&m.remove?m.remove():m.unsubscribe();}}function k(m){var n;function o(){if(!n)return;n.apply(m,arguments);n=null;m=null;}if(m.remove){n=m.remove;m.remove=o;}else{n=m.unsubscribe;m.unsubscribe=o;}return m;}function l(m){if(!i.length)h.onLeave(j);if(Array.isArray(m)){for(var n=0;n<m.length;n++)i.push(k(m[n]));}else i.push(k(m));return m;}f.exports=l;},null);
__d("XPubcontentInlinePhotoPivotsEventsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/inline_photo_pivots_chaining\/events\/",{});},null,{});
__d('EntstreamAttachmentRelatedShare',['Arbiter','AsyncRequest','AttachmentRelatedShareConstants','csx','cx','CSS','DOM','Event','ge','tidyEvent','XPubcontentInlinePhotoPivotsEventsController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s=2,t=3,u={loadRelatedAttachment:function(v,w,x){var y=null;if(typeof v==="string"){y=p(v);}else y=v;if(!y)return;var z=o.listen(y,'click',function(){z.remove();h.inform(j.ARTICLE_CLICK,{attachment:y,global_share_id:w,is_right_click:false,share_id:x});}),aa=o.listen(y,'mousedown',function(event){if(event.which===t||event.button===s){aa.remove();h.inform(j.ARTICLE_CLICK,{attachment:y,global_share_id:w,is_right_click:true});}});},loadInlineStoryPivotAttachment:function(v,w){var x=p(v);if(!x)return;var y=o.listen(x,'click',function(){y.remove();h.inform(j.PHOTO_CLICK,{attachment:x,storyid:w});});},loadRelatedGameAttachment:function(v,w){var x=null;if(typeof v==="string"){x=p(v);}else x=v;if(!x)return;q(o.listen(x,'click',function(){h.inform(j.GAME_CLICK,{attachment:x,global_share_id:w});}));q(o.listen(x,'mousedown',function(event){if(event.which===t||event.button===s)h.inform(j.GAME_CLICK,{attachment:x,global_share_id:w});}));},loadRelatedLSCVideoAttachment:function(v,w){var x=null;if(typeof v==='string'){x=p(v);}else x=v;if(!x)return;var y="^div._4-u2",z=n.scry(x,y),aa=o.listen(x,'click',function(){aa.remove();h.inform(j.VIDEO_CLICK,{attachment:x,global_share_id:w});});},loadRelatedLSCInlineVideoAttachment:function(v,w){var x=null;if(typeof v==='string'){x=p(v);}else x=v;if(!x)return;o.listen(x,'click',function(){var y="^div._4-u2",z="_1d8v",aa=n.scry(x,y),ba=aa.length===1?aa[0]:null,ca=ba.parentNode,da=ca.previousSibling;while(!da){ca=ca.parentNode;da=ca.previousSibling;}if(!m.hasClass(da,z)){var ea=n.create('div',{className:z}),fa=n.insertBefore(ba.parentNode,ea),ga=fa.length>=1?fa[0]:null;}else ga=da;var ha=n.getID(ga);new i().setURI('/ajax/flash/expand_inline.php').setData({share_id:w,target_div:ha,max_width:470,max_height:264,replace_target_div:true}).setMethod('GET').setReadOnly(true).setRelativeTo(x.parentNode).send();});},loadRelatedEventsPivotAttachment:function(v,w){var x=null;if(typeof v==="string"){x=p(v);}else x=v;if(!x)return;q(o.listen(x,'click',function(){h.inform(j.EVENT_JOIN,{attachment:x,event_id:w});}));},closeButton:function(v,w){o.listen(v,'click',function(){n.remove(w);});},closeButtonPhotoPivots:function(v,w,x,y){o.listen(v,'click',function(){var z=r.getURIBuilder(),aa={story_id:x,search_query_type:y,event:'hide'};new i().setMethod('POST').setURI(z.getURI()).setData(aa).send();n.remove(w);});},seeAllLinkPhotoPivots:function(v,w,x){o.listen(v,'click',function(){var y=r.getURIBuilder(),z={story_id:w,search_query_type:x,event:'see_all'};new i().setMethod('POST').setURI(y.getURI()).setData(z).send();});},removeOldSuggestions:function(v){var w=p(v);if(!w)return;var x=n.scry(w.parentNode,"._5d73");for(var y=1;y<x.length;y++)n.remove(x[y]);setTimeout(function(){m.show(x[0]);},1000);},showHiddenSuggestions:function(v){var w=o.listen(v,'click',function(){w.remove();var x="^._1ui8",y=n.scry(v,x);if(!y)return;m.hide(y[0]);var z=y[0].previousSibling;while(z){m.show(z);z=z.previousSibling;}});}};f.exports=u;},null);
__d('FeedTrackingAsync',['Arbiter','collectDataAttributes'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(){h.subscribe('AsyncRequest/send',function(k,l){var m=l.request,n=m.getRelativeTo();if(n){var o=m.getData(),p=i(n,['ft']);if(Object.keys(p.ft).length)Object.assign(o,p);}});}f.exports={init:j};},null);
__d('LiveTimer',['CSS','DOM','ServerTime','fbt'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=1000,m=60,n=3600,o=43200,p=86400,q=60,r=20000,s={restart:function(t){j.update(t*1000);this.updateTimeStamps();},getApproximateServerTime:function(){return j.get();},getServerTimeOffset:function(){return -1*j.getSkew();},updateTimeStamps:function(){this.timestamps=i.scry(document.body,'abbr.livetimestamp');this.startLoop(r);},addTimeStamps:function(t){if(!t)return;this.timestamps=this.timestamps||[];if(i.isNodeOfType(t,'abbr')&&h.hasClass(t,'livetimestamp')){this.timestamps.push(t);}else{var u=i.scry(t,'abbr.livetimestamp');for(var v=0;v<u.length;++v)this.timestamps.push(u[v]);}this.startLoop(0);},startLoop:function(t){this.stop();this.timeout=setTimeout((function(){this.loop();}).bind(this),t);},stop:function(){clearTimeout(this.timeout);},loop:function(t){if(t)this.updateTimeStamps();var u=Math.floor(j.get()/l),v=-1;this.timestamps&&this.timestamps.forEach((function(x){var y=x.getAttribute('data-utime'),z=x.getAttribute('data-shorten'),aa=x.getAttribute('data-minimize'),ba=this.renderRelativeTime(u,y,z,aa);if(ba.text)i.setContent(x,ba.text);if(ba.next!=-1&&(ba.next<v||v==-1))v=ba.next;}).bind(this));if(v!=-1){var w=Math.max(r,v*l);this.timeout=setTimeout((function(){this.loop();}).bind(this),w);}},renderRelativeTime:function(t,u,v,w){var x={text:"",next:-1};if(t-u>p)return x;var y=t-u,z=Math.floor(y/m),aa=Math.floor(z/q);if(z<1){if(w){x.text=k._("1m");x.next=20-y%20;}else if(v){x.text=k._("Just now");x.next=20-y%20;}else{x.text=k._("a few seconds ago");x.next=m-y%m;}return x;}if(aa<1){if(w){x.text=k._({"*":"{number}m"},[k.param('number',z,[0])]);}else if(v&&z==1){x.text=k._("1 min");}else if(v){x.text=k._({"*":"{number} mins"},[k.param('number',z,[0])]);}else x.text=z==1?k._("about a minute ago"):k._({"*":"{number} minutes ago"},[k.param('number',z,[0])]);x.next=m-y%m;return x;}if(aa<11)x.next=n-y%n;if(w){x.text=k._({"*":"{number}h"},[k.param('number',aa,[0])]);}else if(v&&aa==1){x.text=k._("1 hr");}else if(v){x.text=k._({"*":"{number} hrs"},[k.param('number',aa,[0])]);}else x.text=aa==1?k._("about an hour ago"):k._({"*":"{number} hours ago"},[k.param('number',aa,[0])]);return x;},renderRelativeTimeToServer:function(t,u,v){return this.renderRelativeTime(Math.floor(j.get()/l),t,u,v);}};f.exports=s;f.exports.CONSTS={MS_IN_SEC:l,SEC_IN_MIN:m,SEC_IN_HOUR:n,SEC_IN_12_HOUR:o,SEC_IN_24_HOUR:p,MIN_IN_HOUR:q,HEARTBEAT:r};},null);
__d('AsyncFormRequestUtils',['Arbiter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={subscribe:function(j,k,l){h.subscribe('AsyncRequest/'+k,function(m,n){var o=n.request.relativeTo;if(o&&o===j)l(n);});}};f.exports=i;},null);
__d('EmbedLikeButton',['Arbiter','AsyncFormRequestUtils','ClientIDs','CSS','DOM','DOMQuery','Event','Form'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();window.resetConfirmStoryLike=function(q){k.show(m.find(document,'#likeStory_'+q));l.remove(m.find(document,'#confirmStory_'+q));};var p={addClientId:function(q){q.setAttribute('value',j.getNewClientID());},init:function(q,r,s,t){var u=function(v){return o.bootstrap(t);};n.listen(q,'click',u);n.listen(r,'click',u);i.subscribe(t,'send',function(v){var w=s.getAttribute('value')==='1';if(w){k.hide(q);k.show(r);}else{k.hide(r);k.show(q);}h.inform('embeddedUfiToggle');s.setAttribute('value',w?'':'1');});}};f.exports=p;},null);