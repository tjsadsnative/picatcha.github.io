Array.prototype.contains=function(b){for(var d=this.length;d--;)if(this[d]==b)return true;return false};Array.prototype.pushUnique=function(b){this.contains(b)||this.push(b)};Array.prototype.pushUniqueMax=function(b,d){this.contains(b)||(this.length>=d&&this.pop(),this.unshift(b))};String.prototype.endsWith=function(b){var d=this.length-b.length;return d>=0&&this.lastIndexOf(b)===d};String.prototype.startsWith=function(b){return this.indexOf(b)===0};
String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};
var dateFormat=function(){var b=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,d=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r=/[^-+\dA-Z]/g,e=function(a,b){a=String(a);for(b=b||2;a.length<b;)a="0"+a;return a};return function(a,f,j){var h=dateFormat;arguments.length==1&&Object.prototype.toString.call(a)=="[object String]"&&!/\d/.test(a)&&(f=a,a=void 0);a=a?new Date(a):new Date;if(isNaN(a))throw SyntaxError("invalid date");
f=String(h.masks[f]||f||h.masks["default"]);f.slice(0,4)=="UTC:"&&(f=f.slice(4),j=true);var c=j?"getUTC":"get",i=a[c+"Date"](),m=a[c+"Day"](),k=a[c+"Month"](),n=a[c+"FullYear"](),g=a[c+"Hours"](),o=a[c+"Minutes"](),p=a[c+"Seconds"](),c=a[c+"Milliseconds"](),l=j?0:a.getTimezoneOffset(),q={d:i,dd:e(i),ddd:h.i18n.dayNames[m],dddd:h.i18n.dayNames[m+7],m:k+1,mm:e(k+1),mmm:h.i18n.monthNames[k],mmmm:h.i18n.monthNames[k+12],yy:String(n).slice(2),yyyy:n,h:g%12||12,hh:e(g%12||12),H:g,HH:e(g),M:o,MM:e(o),s:p,
ss:e(p),l:e(c,3),L:e(c>99?Math.round(c/10):c),t:g<12?"a":"p",tt:g<12?"am":"pm",T:g<12?"A":"P",TT:g<12?"AM":"PM",Z:j?"UTC":(String(a).match(d)||[""]).pop().replace(r,""),o:(l>0?"-":"+")+e(Math.floor(Math.abs(l)/60)*100+Math.abs(l)%60,4),S:["th","st","nd","rd"][i%10>3?0:(i%100-i%10!=10)*i%10]};return f.replace(b,function(a){return a in q?q[a]:a.slice(1,a.length-1)})}}();
dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",longTimeTwo:"h:MMtt Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:"Sun,Mon,Tue,Wed,Thu,Fri,Sat,Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),monthNames:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec,January,February,March,April,May,June,July,August,September,October,November,December".split(",")};
Date.prototype.format=function(b,d){return dateFormat(this,b,d)};