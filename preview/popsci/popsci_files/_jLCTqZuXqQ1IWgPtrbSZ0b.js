/* Popular Science */
/* Kargo Ad Tag v3.7.14 [20150224] */
if(typeof (window.Kargo||{}).loaded==="undefined"){(function(){var __KARGO_TESTING__=!1,Ad,AdController,AdPublic,AdServer,AdTagPublic,AdType,CLASS_SS_ACTIVE,CLASS_SS_CONTAINER,CLASS_SS_LAYER1,CLASS_SS_LAYER2,CLASS_SS_OVERLAY,Helper,PAGE_LOGO,Plugin,SS_LOC,SS_LOC_ABOVE,SS_LOC_BELOW,ThirdParty,krg_debug,_GRAPESHOT_DEFAULT_CHANNEL,_IS_IN_IFRAME,_SOURCE_IFRAME,_WINDOW_TOP,_base;if(window.Kargo=window.Kargo||{},!window.Kargo.loaded){AdServer={},AdType={},Plugin={},ThirdParty={},__KARGO_TESTING__&&(setTimeout(function(){return AdController.debug=AdController.E_ALL,window.Kargo.AdController=AdController},0),window.kargo_console_log=function(){var a,b,c;a=[].slice.call(arguments),c=new Date,a.unshift("ADTAG_DEBUG","["+Helper.strPad(c.getHours(),"0",2)+":"+Helper.strPad(c.getMinutes(),"0",2)+":"+Helper.strPad(c.getSeconds(),"0",2)+"."+(c.getTime()+"").slice(-4)+"] ==>"),b=function(){return console.log.apply(console,arguments)},b.apply(void 0,a)}),_IS_IN_IFRAME=!0,_WINDOW_TOP=null;try{_WINDOW_TOP=window.top.location.href}catch(_error){}null!==_WINDOW_TOP&&(_WINDOW_TOP=window.top),_IS_IN_IFRAME=window.self!==_WINDOW_TOP,_SOURCE_IFRAME=null,function(){var a,b,c,d,e,f,g;if(_IS_IN_IFRAME&&_WINDOW_TOP&&window.location.hostname.toLowerCase()===_WINDOW_TOP.location.hostname.toLowerCase()){for(d=_WINDOW_TOP,e=window;e.parent!==d;)e=e.parent;for(c=d.document.getElementsByTagName("iframe"),a=f=0,g=c.length;g>f;a=f+=1)if(b=c[a],b.contentWindow===e){_SOURCE_IFRAME=b;break}if(_SOURCE_IFRAME&&/krg-nobust/.test(_SOURCE_IFRAME.className||""))return _IS_IN_IFRAME=!1,_SOURCE_IFRAME=null}}(),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),function(){var a="undefined"!=typeof window?window:exports,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=function(){try{document.createElement("$")}catch(a){return a}}();a.btoa||(a.btoa=function(a){for(var d,e,f=0,g=b,h="";a.charAt(0|f)||(g="=",f%1);h+=g.charAt(63&d>>8-f%1*8)){if(e=a.charCodeAt(f+=.75),e>255)throw c;d=d<<8|e}return h}),a.atob||(a.atob=function(a){if(a=a.replace(/=+$/,""),a.length%4==1)throw c;for(var d,e,f=0,g=0,h="";e=a.charAt(g++);~e&&(d=f%4?64*d+e:e,f++%4)?h+=String.fromCharCode(255&d>>(-2*f&6)):0)e=b.indexOf(e);return h})}(),Helper={page_id:0,event_callbacks:{},event_namespace_callbacks:{},bindNsEventCallback:function(a,b,c,d,e){return null==d&&(d=!1),null==e&&(e=!1),this.bindEventCallback(a,c,d,e,b)},executeNsEventCallbacks:function(a,b,c){return null==c&&(c=null),this.executeEventCallbacks(a,c,b)},removeNsEventCallbacks:function(a,b){var c;if(c=this.event_callbacks[a],c&&0!==c.length)for(var d=0;d<c.length;d++){var e=c[d];null!=e[1]&&e[1]==b&&(c.splice(d,1),d--)}},bindEventCallback:function(a,b,c,d,e){null==c&&(c=!1),null==d&&(d=!1),null==e&&(e=null),this.event_callbacks[a]||(this.event_callbacks[a]=[]),d?this.event_callbacks[a].unshift([b,e,c]):this.event_callbacks[a].push([b,e,c])},executeEventCallbacks:function(a,b,c){var d;if(null==b&&(b=null),null==c&&(c=null),d=this.event_callbacks[a],d&&0!==d.length)for(var e=0;e<d.length;e++){var f=d[e];(null==c||f[1]==c)&&(f[0].apply(void 0,b),f[2]&&(d.splice(e,1),e--))}},resetEventCallbacks:function(a){this.event_callbacks[a]=[]},all_event_listeners:[],addEventListener:function(a,b,c,d){null==d&&(d=!1),this.all_event_listeners.push({target:a,type:b,listener:c,use_capture:d}),a.addEventListener(b,c,d)},removeEventListener:function(a,b,c,d){var e;null==c&&(c=null),null==d&&(d=!1),e=this.all_event_listeners;for(var f=0;f<e.length;f++){var g=e[f];g.target!=a||g.type!=b||null!=c&&g.listener!=c||(g.target.removeEventListener(g.type,g.listener,g.use_capture),e.splice(f,1),f--)}},removeAllEventListeners:function(a,b){var c;null==a&&(a=null),null==b&&(b=null),c=this.all_event_listeners;for(var d=0;d<c.length;d++){var e=c[d];(null==a||e.target==a&&(null==b||e.type==b))&&(e.target.removeEventListener(e.type,e.listener,e.use_capture),c.splice(d,1),d--)}},getWindowSize:function(){var a,b,c;return b=window,a="inner","innerWidth"in window||(a="client",b=document.documentElement||document.body),c={x:b[a+"Width"]||document.body.offsetWidth,y:b[a+"Height"],total_y:document.documentElement.scrollHeight},c.orientation=c.x<c.y?"portrait":"landscape",c},mergeRecursive:function(){var a,b,c,d,e,f;if(c=arguments[arguments.length-1]!==!1,e=function(a){return function(b,d){var f,g;if("object"!=typeof d||null===d)return b;if("object"!=typeof d||void 0===(d||{}).nodeType)for(f in d)g=d[f],d.hasOwnProperty(f)&&void 0!==g&&(c||!b[f])&&("object"!=typeof g||null===g?b[f]=g:"object"!=typeof b[f]||null===b[f]?b[f]=e(g.constructor===Array?[]:{},g):a.isArray(b[f])&&a.isArray(g)?b[f]=b[f].concat(g):e(b[f],g));return b}}(this),b=arguments[0]||{},"object"!=typeof b||null===b)return b;for(a=d=1,f=arguments.length;f>d;a=d+=1)e(b,arguments[a]);return b},user_agent:null,getUserAgent:function(){var a,b;return null!==this.user_agent?this.user_agent:(a=navigator.userAgent,this.user_agent={is_mobile:a.indexOf("Mobile")>=0&&!/iPad|Xoom|SCH-I800|Kindle/.test(a),is_tablet:/iPad|Xoom|SCH-I800|Kindle/.test(a)||a.indexOf("Android")>=0&&a.indexOf("Mobile")<0,os:a.indexOf("Android")>=0?"android":/iP(hone|od|ad)/.test(a)?"ios":"other",browser:a.indexOf("Chrome/")>=0?"chrome":a.indexOf("Safari/")>=0?"safari":a.indexOf("Firefox/")>=0?"firefox":a.indexOf("Opera")>=0?"opera":a.indexOf("MSIE")>=0?"ie":a.indexOf("FBAN/FBForIPhone")>=0||a.indexOf("FBAN/FBIOS")>=0||a.indexOf("facebookexternalhit/")>=0?"facebook":a.indexOf("Twitter for iPhone")>=0?"twitter":a.indexOf("Pinterest")>=0?"pinterest":"other"},"ios"===this.user_agent.os&&(b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)||[0,7],this.user_agent.os_version=parseInt(b[1],10)),this.user_agent.nielsen={os:"android"===this.user_agent.os?"ANDROID":"ios"===this.user_agent.os?"IOS":"",device:this.user_agent.is_mobile?"PHN":this.user_agent.is_tablet?"TAB":a.indexOf("iPod")>=0?"PMP":"UNWN",platform:this.user_agent.is_mobile||this.user_agent.is_tablet?"MBL":""},this.user_agent)},utf8Encode:function(a){var b,c,d,e,f;for(a=(a+"").replace(/\\r\\n/g,"\\n"),d="",c=e=0,f=a.length;f>=0?f>e:e>f;c=f>=0?++e:--e)b=a.charCodeAt(c),128>b?d+=String.fromCharCode(b):b>127&&2048>b?(d+=String.fromCharCode(b>>6|192),d+=String.fromCharCode(63&b|128)):(d+=String.fromCharCode(b>>12|224),d+=String.fromCharCode(b>>6&63|128),d+=String.fromCharCode(63&b|128));return d},hasClass:function(a,b){return new RegExp("(\\s|^)"+b+"(\\s|$)").test(a.className)},addClass:function(a,b){this.hasClass(a,b)||(a.className+=(a.className?" ":"")+b)},removeClass:function(a,b){this.hasClass(a,b)&&(a.className=a.className.replace(new RegExp("(\\s|^)"+b+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""))},addUrlParams:function(a,b,c){var d,e;null==c&&(c=!1);for(d in b)e=b[d],a=this.addUrlParam(a,d,e,c);return a},addUrlParam:function(a,b,c,d){return null==b&&(b=null),null==c&&(c=null),null==d&&(d=!1),b?d||!c?a+(/\?/.test(a)?"&":"?")+(c?b+"="+encodeURIComponent(c):b):this.replaceUrlParam(a,b,c):a+""},removeUrlParam:function(a,b){var c,d,e;return/\?/.test(a)&&(a=a.replace("?","&"),(c=a.indexOf("&"+b+"="))>=0&&(e=a.substr(0,c),d=a.substr(c+1),d=(c=d.indexOf("&"))>=0?d.substr(c):"",a=e+d),a=a.replace("&","?")),a},removeAllUrlParams:function(a){var b;return(b=a.indexOf("?"))>=0&&(a=a.substr(0,b)),a},replaceUrlParam:function(a,b,c,d,e){var f,g,h,i;return null==c&&(c=""),null==d&&(d=!0),null==e&&(e=!1),e&&""===c?this.removeUrlParam(a,b):(f=!1,/\?/.test(a)&&(a=a.replace("?","&"),(g=a.indexOf("&"+b+"="))>=0&&(f=!0,i=a.substr(0,g),h=a.substr(g+1),h=(g=h.indexOf("&"))>=0?h.substr(g):"",a=i+"&"+b+"="+encodeURIComponent(c)+h),a=a.replace("&","?")),!f&&d&&(a=this.addUrlParam(a,b+"="+encodeURIComponent(c),null,!0)),a)},dep_locks:{},dep_callbacks:{},setDepLock:function(a){this.dep_locks[a]=!0},clearDepLock:function(a){var b,c,d,e;if(this.dep_locks[a]=!1,"undefined"!=typeof this.dep_callbacks[a]&&this.dep_callbacks[a].length>0)for(e=this.dep_callbacks[a],c=0,d=e.length;d>c;c++)(b=e[c])()},isDepLock:function(a){return this.dep_locks[a]===!0},queueDepCallback:function(a,b){this.isDepLock(a)?("undefined"==typeof this.dep_callbacks[a]&&(this.dep_callbacks[a]=[]),this.dep_callbacks[a].push(b)):b()},getUrlParam:function(a){return decodeURIComponent((RegExp(a+"=(.+?)(&|$)","i").exec(location.search)||["",""])[1])},startsWith:function(a,b){return 0===(a+"").indexOf(b)},endsWith:function(a,b){var c;return a+="",c=a.length-b.length,c>=0&&a.lastIndexOf(b)===c},replaceAll:function(a,b,c){return(a+"").replace(new RegExp(b.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),c)},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isString:function(a){return"string"==typeof a||a instanceof String},isArray:function(a){return a&&"[object Array]"===Object.prototype.toString.call(a)},isNonEmptyArray:function(a){return this.isArray(a)&&a.length>0},isFunction:function(a){return a&&"[object Function]"===Object.prototype.toString.call(a)},isObject:function(a){return a&&a===Object(a)&&!this.isArray(a)},isNode:function(a){return a?"object"==typeof a&&a.window&&"object"==typeof a.window&&a.window.window===a.window?!0:"object"==typeof Node?a instanceof Node:a&&"object"==typeof a&&"number"==typeof a.nodeType&&"string"==typeof a.nodeName:!1},getObjectSize:function(a){var b,c;c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c},arraySearch:function(a,b){"use strict";var c,d,e,f,g;if(null===b)throw new TypeError;if(f=Object(b),d=f.length>>>0,0===d)return-1;if(e=0,arguments.length>1&&(e=Number(arguments[1]),e!==e?e=0:0!==e&&1/0!==e&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e)))),e>=d)return-1;for(c=e>=0?e:Math.max(d-Math.abs(e),0),c=g=c;d>=c?d>g:g>d;c=d>=c?++g:--g)if(c in f&&f[c]===a)return c;return-1},randomString:function(a){var b,c,d,e,f;for(null==a&&(a=16),b="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",c=b.length,e="",d=f=0;a>=0?a>f:f>a;d=a>=0?++f:--f)e+=b[Math.round(Math.random()*(c-1))];return e},uniqId:function(a){return null==a&&(a=""),a+(new Date).getTime().toString(36)+""+Math.random().toString(36).substr(2,16)},loadAjaxPost:function(a,b,c,d,e,f,g,h){return null==d&&(d=null),null==e&&(e=!1),null==f&&(f=!1),null==g&&(g=!0),null==h&&(h=!1),this.loadAjax(a,c,d,e,f,b,g,h)},loadAjax:function(a,b,c,d,e,f,g,h){var i,j,k,l;return null==c&&(c=null),null==d&&(d=!1),null==e&&(e=!1),null==f&&(f=null),null==g&&(g=!0),null==h&&(h=!1),a?(g&&(a=this.addUrlParam(a,"_cb="+(new Date).getTime())),i=this.page_id,this.isFunction(b)&&(b={success:b}),l=null,k=!1,null!==c&&(l=setTimeout(function(a){return function(){i===a.page_id&&(k=!0,"function"==typeof b.fail&&b.fail(),"function"==typeof b.complete&&b.complete())}}(this),c)),j=new XMLHttpRequest,j.is_done=!1,this.addEventListener(j,"readystatechange",function(a){return function(){var c;if(j.readyState===j.DONE&&!j.is_done){if(clearTimeout(l),j.is_done=!0,i!==a.page_id)return;c=(j.responseText||"").trim(),200===j.status&&c.length>0?(!k||d)&&"function"==typeof b.success&&b.success(c):"function"==typeof b.fail&&b.fail(j.statusText),(!k||e)&&"function"==typeof b.complete&&b.complete()}}}(this)),f?(j.open("POST",a,!0),j.withCredentials=!0,j.setRequestHeader("Content-Type","text/plain; charset=UTF-8"),j.send(f.data)):(h&&(j.withCredentials=!0),j.open("GET",a,!0),j.send()),!0):!1},loadScript:function(){var a;return a=[].slice.call(arguments),a.unshift("script"),this.loadResource.apply(this,a)},loadCss:function(){var a;return a=[].slice.call(arguments),a.unshift("css"),this.loadResource.apply(this,a)},loadResource:function(a,b,c,d,e,f,g,h,i){var j,k,l,m,n,o;return null==a&&(a="script"),null==d&&(d=null),null==e&&(e=!1),null==f&&(f=!1),null==g&&(g=!0),null==h&&(h=!1),null==i&&(i=!1),b?(k=null,this.isArray(b)&&(k=b[1],b=b[0]),g&&(b=this.addUrlParam(b,"_cb="+(new Date).getTime())),m=this.page_id,this.isFunction(c)&&(c={success:c}),o=null,n=!1,null!==d&&(o=setTimeout(function(a){return function(){m===a.page_id&&(n=!0,"function"==typeof c.fail&&c.fail(),"function"==typeof c.complete&&c.complete())}}(this),d)),j=document.createElement("css"===a?"link":a),l=document.body,"css"===a?(j.setAttribute("href",b),j.setAttribute("rel","stylesheet"),j.setAttribute("type","text/css"),l=document.head):j.src=b,k&&(j.id=k),j.onload=function(a){return function(){clearTimeout(o),m===a.page_id&&((!n||e)&&"function"==typeof c.success&&c.success(),(!n||f)&&"function"==typeof c.complete&&c.complete()),h&&j&&l.removeChild(j)}}(this),i&&this.bindEventCallback("AdTagPublic.reset()",function(){return function(){j&&l.removeChild(j)}}(this),!0),l.appendChild(j),!0):!1},setCookie:function(a,b,c,d){var e,f;if(null==c&&(c=null),null==d&&(d=!1),f=null,null===c||"number"!=typeof c&&!c.toUTCString)c="";else{if("number"==typeof c?(e=new Date,e.setTime(e.getTime()+c)):e=c,f=e.getTime(),e.getTime()<=(new Date).getTime())return void this.deleteCookie(a);c=d?"":"; expires="+e.toUTCString()}b={v:b},d&&(b.exp=f),document.cookie=a+"="+encodeURIComponent(JSON.stringify(b))+c+"; path=/"},getCookie:function(a){var b,c,d,e,f,g,h,i;if(f=null,document.cookie&&""!==document.cookie)for(c=document.cookie.split(";"),e=h=0,i=c.length;i>h;e=h+=1)if(b=c[e].replace(/^\s+|\s+$/g,""),b.substring(0,a.length+1)===a+"="){g=decodeURIComponent(b.substring(a.length+1));try{if(f=JSON.parse(g),f.exp&&f.exp-(new Date).getTime()<=0)return this.deleteCookie(a),null;f=f.v||"!!!"+JSON.stringify(f)}catch(j){d=j,f=g}break}return f},deleteCookie:function(a){document.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/"},isVisible:function(a){return a.offsetWidth>0&&a.offsetHeight>0},insertContent:function(a,b,c){var d,e,f,g,h,i,j;if(null==c&&(c="append"),/append|prepend/.test(c)?(e=b,d="append"===c?null:b.firstChild):(e=b.parentNode,d="before"===c?b:b.nextSibling),this.isString(a))for(f=document.createElement("div"),f.innerHTML=a,h=f.childNodes,i=0,j=h.length;j>i;i++)g=h[i],g&&e.insertBefore(g,d);else this.isNode(a)&&e.insertBefore(a,d);return b},insertBefore:function(a,b){return this.insertContent(a,b,"before")},insertAfter:function(a,b){return this.insertContent(a,b,"after")},appendTo:function(a,b){return this.insertContent(a,b,"append")},prependTo:function(a,b){return this.insertContent(a,b,"prepend")},removeElement:function(a){a&&a.parentNode&&a.parentNode.removeChild(a)},removeElements:function(a){var b,c,d;for(this.isArray(a)||(a=[a]),c=0,d=a.length;d>c;c++)b=a[c],this.removeElement(b)},strPad:function(a,b,c){var d;for(d=a+"";d.length<c;)d=b+d;return d},addCss:function(a){var b;return b=document.createElement("style"),b.type="text/css",b.innerHTML=a,document.body.appendChild(b),b},fireTracker:function(a,b){var c,d,e;return null==b&&(b=!1),e=document.createElement("img"),e.style.position="absolute",e.style.visibility="hidden",e.style.left="-9999px",e.style.top=0,b&&(a=this.addUrlParam(a,"_cb="+(new Date).getTime())),c=function(){return function(){e.parentNode.removeChild(e)}}(this),this.addEventListener(e,"load",function(){return function(){clearTimeout(d),c()}}(this),!1),d=setTimeout(function(){return function(){c()}}(this),8e3),e.src=a,document.body.appendChild(e),e},isHomepage:function(){return/^[^\/]*\/\/[^\/]*($|(\/|\?.*|\#.*)*$|\/index\.(.*)$)/i.test(location.href)},doc_is_ready:!1,isDocReady:function(){return this.doc_is_ready||/interactive|complete/.test(document.readyState)},bindOnDocReady:function(a){this.isDocReady()?a():this.addEventListener(window,"DOMContentLoaded",function(){a()},!1)},executeCallbackArray:function(a,b){var c,d,e,f;if(null==b&&(b=[]),b=this.isArray(b)?b:[b],this.isArray(a)&&a.length>0)for(c=d=0,e=a.length;e>d;c=d+=1)this.isString(a[c])&&(a[c]=this.convertStringToFunction(a[c],"ad")),null!=(f=a[c])&&f.apply(void 0,b)},convertStringToFunction:function(fn,param_str){return null==param_str&&(param_str=""),eval("(function("+param_str+") {"+fn+"})")},JSON:{stringify:function(a,b){return null==b&&(b=!1),JSON.stringify(a,function(a,c){var d;return!b&&(c instanceof Function||"function"==typeof c)?c.toString():b&&(Helper.isFunction(c)||Helper.isObject(c))&&Helper.isFunction(c.toString)?(d=c.toString(),"[object Object]"===d?c:d):c})},parse:function(str,date2obj){var iso8061;return iso8061=date2obj?/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/:!1,JSON.parse(str,function(key,value){var prefix;return"string"!=typeof value?value:value.length<8?value:(prefix=value.substring(0,8),iso8061&&value.match(iso8061)?new Date(value):"function"===prefix?eval("("+value+")"):value)})},clone:function(a,b){return exports.parse(exports.stringify(a),b)}},objFunctionScopeFix:function(a){var b,c;if(this.isFunction(a))return this.JSON.parse(this.JSON.stringify(a));if("object"!=typeof a||this.isNode(a))return a;for(b in a)c=a[b],a[b]=this.objFunctionScopeFix(a[b]);return a},nextSibling:function(a){var b;for(b=a.nextSibling;b&&1!==b.nodeType;)b=b.nextSibling;return b},previousSibling:function(a){var b;for(b=a.previousSibling;b&&1!==b.nodeType;)b=b.previousSibling;return b},createHiddenIframe:function(){var a,b;return a=document.createElement("iframe"),a.style.visibility="hidden",a.style.position="absolute",document.body.appendChild(a),b=a.contentWindow.document||a.contentDocument,b.write(""),b.close(),a},getComputedStylePropertyValue:function(a,b){var c;return window.getComputedStyle?window.getComputedStyle(a).getPropertyValue(b):document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle.getPropertyValue(b):(c=b.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()}),a.currentStyle?a.currentStyle(c):a.style[c])},setIntervalWithCap:function(a,b,c){var d,e;return d=0,e=setInterval(function(){a(),d++,d>=c&&clearInterval(e)},b)},getScrollTop:function(){return document.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop},getPositionTop:function(a){var b,c,d;return a.offsetWidth>0&&a.offsetHeight>0?d=a.getBoundingClientRect().top:(b=a.parentNode,c=document.createElement("div"),b.insertBefore(c,a),d=c.getBoundingClientRect().top,b.removeChild(c)),d+this.getScrollTop()},isElementInView:function(a){var b;return a?(b=a.getBoundingClientRect(),b.top+a.offsetHeight>0&&b.bottom-window.innerHeight-a.offsetHeight<0):!1},regexEscape:function(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},parseJsonComment:function(a,b){var c,d,e,f,g,h,i,j;if(g=null,(f=a.indexOf(b))>0&&(e=(h=a.replace(/\n/g,"\\n")).match(new RegExp("<!--.*?-->","g"))))for(i=0,j=e.length;j>i;i++)c=e[i],(d=c.match(new RegExp("^<!--.*?[\"']"+this.regexEscape(b)+"[\"']:(.*?)-->$")))&&(h=(d[1]||"").replace(/\\n/g,"\n").trim(),""!==h&&(h=JSON.parse(h))&&(g=null===g||"string"==typeof h?h:this.mergeRecursive(g,h)));return g},mutationObserver:window.MutationObserver||window.WebKitMutationObserver},Ad=function(){function a(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;if(this.options=a,this.id=Helper.uniqId(),this.page_id=Helper.page_id,_IS_IN_IFRAME)return void this.escapeIframe();try{this.importStoredOptions(),this.fixOptions(),this.checkInitialWrappers(),this.processSource()}catch(r){return c=r,void AdController.logMessage(c,this,"AD_CONSTRUCT_ERROR")}if(!AdController.defaults_set)return AdTagPublic.ads.push(this.options),void(__KARGO_TESTING__&&kargo_console_log("Ad.constructor() -- !defaults_set, pushing into AdTagPublic.ads"));for(this.options.dttags!==!1&&AdController.setupTrackingTags(),this.options.dloc!==!1&&(d=AdController.getLoc())&&(this.options.target_params=Helper.mergeRecursive(this.options.target_params,d,!1)),this.custom_ad_call=null!=(k=this.options.custom_ad_call)?k:null,this.global_overrides=null!=(l=this.options.global_overrides)?l:null,this.override_url=null!=(m=this.options.override_url)?m:null,this.override_html=null!=(n=this.options.override_html)?n:null,this.override_json=null!=(o=this.options.override_json)?o:null,AdPublic.updateById(a.public_id,this,this.options),this["public"]=AdPublic.getObjectById(a.public_id),h=Helper.getUserAgent(),this.target_params=null!=(p=this.options.target_params)?p:{},Helper.isHomepage()&&(this.target_params.IS_HOMEPAGE=!0,this.target_params.SECTION="homepage"),this.target_params.PAGE_URL=location.pathname,this.target_params.BROWSER=h.browser,this.target_params.NIELSEN_OS=h.nielsen.os,this.target_params.NIELSEN_DEVICE=h.nielsen.device,this.target_params.NIELSEN_PLATFORM=h.nielsen.platform,this.target_params.SUPPORTS=navigator.cookieEnabled?"COOKIES":"",navigator.cookieEnabled&&(e=Plugin.AdSequential.getTargetingStatus())&&(this.target_params.SEQUENTIAL=e),this.pre_request_callback=[],this.preload_callback=[],this.success_callback=[],this.fail_callback=[],this.complete_callback=[],this.destroy_callback=[],this.options.pre_request_callback&&this.pre_request_callback.push(this.options.pre_request_callback),this.options.preload_callback&&this.preload_callback.push(this.options.preload_callback),this.options.success_callback&&this.success_callback.push(this.options.success_callback),this.options.fail_callback&&this.fail_callback.push(this.options.fail_callback),this.options.complete_callback&&this.complete_callback.push(this.options.complete_callback),this.options.destroy_callback&&this.destroy_callback.push(this.options.destroy_callback),this.valid_config=!0,this.min_ad_type=null,this.min_load_order=AdController.order.length+1,this.max_ad_type=null,this.max_load_order=-1,q=this.options.ad_configs,i=0,j=q.length;j>i;i++)b=q[i],g=b.type,f=Helper.arraySearch(g,AdController.order),f=-1===f?AdController.order.length:f,f<this.min_load_order&&(this.min_load_order=f,this.min_ad_type=g),f>this.max_load_order&&(this.max_ad_type=g,this.max_load_order=f)}return a.prototype.displayed=!1,a.prototype.ad_unit=null,a.prototype.override_url=null,a.prototype.override_html=null,a.prototype.escapeIframe=function(){var a,b,c,d,e,f;if(_WINDOW_TOP&&window.location.hostname.toLowerCase()===_WINDOW_TOP.location.hostname.toLowerCase())_SOURCE_IFRAME&&(_SOURCE_IFRAME.style.display="none",this.options.source_iframe=_SOURCE_IFRAME),b=function(a){return function(){_WINDOW_TOP.Kargo.getAd(_WINDOW_TOP.Kargo.Helper.objFunctionScopeFix(a.options))}}(this),_WINDOW_TOP.Kargo?b():(c=0===(_WINDOW_TOP.krg_adjs_load_callbacks||[]).length,_WINDOW_TOP.krg_adjs_load_callbacks=_WINDOW_TOP.krg_adjs_load_callbacks||[],_WINDOW_TOP.krg_adjs_load_callbacks.push(function(){return function(){b()}}(this)),c&&(e=_WINDOW_TOP.document.createElement("script"),e.src=AdTagPublic.self_url,e.onload=function(){return function(){var a,b,c;for(a=b=0,c=_WINDOW_TOP.krg_adjs_load_callbacks.length;c>b;a=b+=1)_WINDOW_TOP.krg_adjs_load_callbacks[a]();delete _WINDOW_TOP.krg_adjs_load_callbacks}}(this),_WINDOW_TOP.document.head.appendChild(e)));else{if(d=(document.referrer||document.location.href).match(new RegExp(/^https?:\/\/([a-z0-9]+)([\.a-z0-9-]+)\.[a-z]+/)),d=(d||[""])[0],this.options.iframe_helper_url)f=this.options.iframe_helper_url,f=0===f.indexOf("http")?f:d+("/"===f.charAt(0)?"":"/")+f;else{if(!d)return void AdController.logMessage(["Bad iframe config - no referring domain",AdController.E_ERROR],this,"IFRAME_SETUP_ERROR");f=d+"/krg_iframebuster.html"}AdTagPublic.self_url&&(this.options.iframe_self_url=AdTagPublic.self_url),a=document.createElement("iframe"),a.style.visibility="hidden",a.style.position="absolute",a.style.width=a.style.height="1px",a.style.top=a.style.left=0,a.src=Helper.addUrlParam(f,"_cb="+(new Date).getTime()+"&krg_getAdParams="+encodeURIComponent(Helper.JSON.stringify(this.options))),document.body.appendChild(a)}},a.prototype.importStoredOptions=function(){if(this.options.kargo_id){if(!AdController._mapped_ad_configs[this.options.kargo_id])throw["Invalid kargo_id "+this.options.kargo_id,AdController.E_ERROR];this.options=Helper.mergeRecursive(this.options,AdController._mapped_ad_configs[this.options.kargo_id]||{},!1)}},a.prototype.fixOptions=function(){var a,b,c,d,e,f,g;for(b=function(a){a.wrapper_id&&(a.wrapper=a.wrapper_id,delete a.wrapper_id),a.wrapper_fn&&(a.wrapper=a.wrapper_fn,delete a.wrapper_fn)},b(this.options),c=this.options.ad_configs||this.options.settings||{},Helper.isArray(c)||(c=[c]),d=[],e=0,f=c.length;f>e;e++)a=c[e],a.type=(null!=(g=a.type)?g:"Banner").replace(/\W/g,""),AdType[a.type]&&(b(a),this.options.wrapper&&!a.wrapper&&(a.wrapper=this.options.wrapper),d.push(a));if(0===d.length)throw["No valid ad type",AdController.E_ERROR];this.options.ad_configs=d,this.options.wrapper&&delete this.options.wrapper},a.prototype.checkInitialWrappers=function(){var a,b,c,d,e,f,g;for(g=this.options.ad_configs,e=0,f=g.length;f>e;e++)if(a=g[e],AdType[a.type].require_wrapper&&!a.wrapper)if(d="krg-wrapper-"+this.id,Helper.isDocReady()){if(!this.options.source_iframe)throw["No wrapper set for "+a.type,AdController.E_ERROR];b=document.createElement("div"),b.id=d,b.style.display="none",Helper.insertAfter(b,this.options.source_iframe),a.wrapper=d}else{if(document.write("<div id='"+d+"' style='display: none;'></div>"),b=document.getElementById(d),!b)throw __KARGO_TESTING__&&kargo_console_log("AdTagPublic.getAd() -- failed to document.write"),["Failed to document.write",AdController.E_ERROR];if(c=Helper.previousSibling(b),"SCRIPT"===c.tagName.toUpperCase()&&c.src)throw b.parentNode.removeChild(b),["No wrapper set for "+a.type,AdController.E_ERROR];a.wrapper=d}this.options.source_iframe&&(this.options.source_iframe.style.display="none",delete this.options.source_iframe)},a.prototype.calculateWrapperElement=function(a){return a?(Helper.isString(a)&&a.trim().indexOf(" ")>0&&(a=Helper.convertStringToFunction(a,"ad")),Helper.isFunction(a)&&(a=a(this)),Helper.isString(a)&&(a=document.getElementById(a)),Helper.isNode(a)||(a=null),a):null},a.prototype.processSource=function(){var a,b,c,d;if(this.source=this.options.source,!this.source&&this.options.partner_id&&(this.source={ad_server:"AdMarvel",partner_id:this.options.partner_id+"",placement_id:this.options.placement_id+""}),null!=(d=this.source)?d.ad_server:void 0){a=!1;for(b in AdServer)if(c=AdServer[b],b.toLowerCase()===this.source.ad_server.toLowerCase()){this.source.ad_server=b,a=!0;break}if(!a)throw["Invalid ad server: "+this.source.ad_server,AdController.E_ERROR]}else this.source||(this.source={})},a.prototype.getAdUrl=function(a){return this.source.ad_server?AdServer[this.source.ad_server].getAdUrl(this,a):null},a.prototype.parseJsonComment=function(a,b){var c,d;d=null;try{d=Helper.parseJsonComment(a,b)}catch(e){c=e,AdController.logMessage([["Error parsing json in "+b,c],AdController.E_WARNING],this,"JSON_PARSE_FAIL")}return d},a.prototype.processResponseOverrides=function(a){var b,c,d,e,f,g,h;for(e=["global_overrides","settings_overrides","ad_config_overrides"],f={},g=0,h=e.length;h>g;g++)d=e[g],f[d]=null,f[d]=this.is_json?a[d]||null:this.parseJsonComment(a,d);null!==(c=f.global_overrides)&&(this.has_response_global_overrides=!0,this.global_overrides=Helper.mergeRecursive(this.global_overrides,c)),null!==(b=f.ad_config_overrides||f.settings_overrides)&&(this.has_response_ad_config_overrides=!0,this.ad_config=Helper.mergeRecursive(this.ad_config,b),"function"==typeof b.preload_callback&&b.preload_callback(this),b.destroy_callback&&this.destroy_callback.push(b.destroy_callback))},a.prototype.processIframeResponse=function(a){var b,c;return Helper.isString(a)?(c=a.trim().toLowerCase(),(Helper.startsWith(c,"<html")||Helper.startsWith(c,"<!doctype"))&&(b=Helper.uniqId("krg-i-"),a="<iframe id='"+b+"' style='border:0;margin:0;display:inline-block;'></iframe><script>(function() {var iframe = document.getElementById('"+b+'\'),iframe_style = window.getComputedStyle(iframe.parentNode, ""),iframe_zoom = iframe_style.getPropertyValue("zoom");iframe.contentWindow.document.write('+JSON.stringify(a).replace(/<\/script>/gi,'</" + "script>')+');iframe.width = "0";iframe.height = "0";iframe.width = iframe.contentWindow.document.body.scrollWidth + "px";iframe.height = iframe.contentWindow.document.body.scrollHeight + "px";if (iframe_zoom && iframe_zoom != 1) { iframe.contentWindow.document.body.style.zoom = iframe_zoom; }})()</script>'),a):a},a.prototype.getAdContent=function(a,b){var c,d,e,f,g,h,i,j;null==b&&(b={}),c=this,h=b.target_params,i=b.url||this.override_url,g=b.response||this.override_html||this.override_json,Helper.isFunction(a)&&(a={success:a}),j=h||this.target_params,Helper.executeCallbackArray(c.pre_request_callback,c),this.is_json=null,f=a.success,a.success=function(a){return function(b){var d,e,g,h,i,j,k,l,m,n,o;if(!a["public"].isDestroyed()&&a.page_id===Helper.page_id){if(Helper.isString(b)){b=b.replace(/\r/g,""),a.is_json=!0;try{b=JSON.parse(b)}catch(p){a.is_json=!1}}else b&&(a.is_json=!0);if((!b||a.is_json&&!Helper.isObject(b))&&(a.is_json=!1),h=null,e=null,g=null,a.is_json?(h=b.krg_ad_type,e=b.krg_ad_info):(h=a.parseJsonComment(b,"krg_ad_type"),e=a.parseJsonComment(b,"krg_ad_info")),(e||{}).type&&(h=e.type),(e||{}).sid&&(c.sid=e.sid),i=a.max_ad_type,h)for(n=a.options.ad_configs,j=0,l=n.length;l>j;j++)if(d=n[j],h===d.type){i=h;break}for(o=a.options.ad_configs,k=0,m=o.length;m>k;k++)if(d=o[k],i===d.type){a.ad_config=d;break}a.ad_config.preload_callback&&a.preload_callback.push(a.ad_config.preload_callback),a.ad_config.success_callback&&a.success_callback.push(a.ad_config.success_callback),a.ad_config.fail_callback&&a.fail_callback.push(a.ad_config.fail_callback),a.ad_config.complete_callback&&a.complete_callback.push(a.ad_config.complete_callback),a.ad_config.destroy_callback&&a.destroy_callback.push(a.ad_config.destroy_callback),a.processResponseOverrides(b),(a.ad_config.targeting||{}).sequential&&navigator.cookieEnabled&&Plugin.AdSequential.processAdResponse(a.ad_config.targeting.sequential),b=a.processIframeResponse(b),a.ad_content=b,Helper.executeCallbackArray(a.preload_callback,c),AdController.registerAd(c),null!=f&&f.apply(void 0,arguments)}}}(this),a.fail&&(e=a.fail,a.fail=function(a){return function(){a["public"].isDestroyed()||a.page_id!==Helper.page_id||null!=e&&e.apply(void 0,arguments)}}(this)),a.complete&&(d=a.complete,a.complete=function(a){return function(){a["public"].isDestroyed()||a.page_id!==Helper.page_id||null!=d&&d.apply(void 0,arguments)}}(this)),g?("function"==typeof a.success&&a.success(g),"function"==typeof a.complete&&a.complete()):Helper.loadAjax(i||this.getAdUrl(j),a)||("function"==typeof a.fail&&a.fail(),"function"==typeof a.complete&&a.complete(),AdController.destroyAd(this,!1))},a.prototype.handleTrackingPixels=function(a,b){var c,d,e,f;e=null,c=function(){return function(){var c,d,e,f,g,h;if(a&&Helper.isVisible(a)){for(f=a.getElementsByTagName("IMG"),c=!1,d=g=0,h=f.length;h>g;d=g+=1)e=f[d],"absolute"!==e.style.position&&1===e.offsetWidth&&1===e.offsetHeight&&(c=!0,e.style.position="absolute",e.style.left="-9999px");c&&"function"==typeof b.update&&b.update()}}}(this),d=null,b.fix_images_check=function(){return function(){var b;c(),b=2,clearTimeout(d),d=setInterval(function(){(++b>6||!a)&&clearInterval(d),c()},250)}}(this),Helper.mutationObserver&&(f=new Helper.mutationObserver(function(){return function(){clearTimeout(e),e=setTimeout(function(){b.fix_images_check()},10)}}(this)),f.observe(a,{subtree:!0,childList:!0}))},a.prototype.loadContentInto=function(a,b,c){var d,e;if(null==c&&(c=null),d=this,c=Helper.isFunction(c)?{success:c}:c||{},!a||!Helper.isString(b))return!1;for(;e=null!=a?a.childNodes[0]:void 0;)a.removeChild(e);this.handleTrackingPixels(a,c),b=b.replace(/[\s]+src[\s]*=[\s]*['|"]mraid.js['|"]/gi," src='http://storage.cloud.kargo.com/ad/network/thirdparty/mraid.js'"),window.postscribe(a,b,{done:function(){return function(){"function"==typeof c.success&&c.success(),Helper.mutationObserver||c.fix_images_check()}}(this),error:function(){return function(a){AdController.logMessage([["Postscribe error",a],AdController.E_ERROR],d,"POSTSCRIBE_FAIL")}}(this)})},a.prototype.queue=function(){var a,b;a=this,b=this.custom_ad_call?function(b){return function(){b.custom_ad_call(),AdController.registerAdDisplay(a)}}(this):function(b){return function(){var c;b.ad_unit="function"==typeof AdType[c=b.ad_config.type]?new AdType[c](a):void 0,b.ad_unit?b.ad_unit.display():AdController.destroyAd(a)}}(this),AdController.queueAd(a,b)
},a}(),AdController={debug:(krg_debug=Helper.getUrlParam("krg_debug"),krg_debug?Helper.isNumeric(krg_debug)?parseInt(krg_debug):{error:1,warning:2,notice:3,all:4}[krg_debug.toLowerCase()]||1:1),krg_tracking_setup:!1,ad_override_source:null,global_config:null,show_lock:!1,show_lock_count:0,defaults_set:!1,stop_ad_processing:!1,global_overrides:{},_mapped_ad_configs:{},display_start_timer:null,_DISPLAY_START_TIMEOUT:300,E_ERROR:1,E_WARNING:2,E_NOTICE:3,E_ALL:4,limit_active:{SiteSkin:1,Interstitial:1,Hover:1},order:["SiteSkin","InstantNative","Interstitial","Hover","Banner"],show_start:!1,setDefaultSettings:function(){var conditional_check,url;this.pos=0,this.min_order=-1,this.ad_init_callbacks=[],this.num_loading=0,this.plo_block_status={is_blocked:!1,pos:0,loading_count:0,slot_load_order:-1},this.defaults_set=!0,this._ads={},this.ad_display_count=0,this.show_lock=!1,this.show_lock_count=0,this.adjs_load_timestamp=(new Date).getTime(),AdTagPublic.setTargetParams(),Plugin.VisibilityMonitoring.init(),this.stop_ad_processing=!1,null!==this.global_config&&(this.global_config.conditional_check&&(conditional_check="var temp = function() {"+this.global_config.conditional_check+"}",eval(conditional_check),this.stop_ad_processing=temp()===!1,__KARGO_TESTING__&&kargo_console_log("AdController.setDefaultSettings() >> @stop_ad_processing =",this.stop_ad_processing)),this.stop_ad_processing||(this.global_config.pre_css&&Helper.bindOnDocReady(function(a){return function(){Helper.addCss(a.global_config.pre_css)}}(this)),this.global_config.pre_js&&Helper.bindOnDocReady(function(_this){return function(){eval(_this.global_config.pre_js)}}(this)))),(url=Helper.getUrlParam("krg_ad_override_source"))?(this.ad_override_source=url,Helper.loadAjax(url,{success:function(_this){return function(text){-1!==(text+"").indexOf("Kargo.getAd(")&&(text="var temp = function() {"+Helper.replaceAll(text,"Kargo.getAd(","temp.getAd(")+"}",eval(text),temp.getAd=_this.getAdOverride,temp())}}(this)})):this.ad_override_source=null,Helper.executeEventCallbacks("AdController.setDefaultSettings()"),AdTagPublic.loadAds()},isShowLocked:function(){return this.show_lock===!0},setShowLock:function(){this.show_lock_count++,this.show_lock=!0},clearShowLock:function(a){null==a&&(a=!0),this.isShowLocked()&&(this.show_lock_count--,0===this.show_lock_count&&(this.show_lock=!1,a&&this.showNext()))},getAdOverride:function(a){return a.is_override=!0,a.dttags=!1,a.dloc=!1,AdTagPublic.getAd(a)},registerAd:function(a){this._ads[a.id]=a},registerAdDisplay:function(a,b){var c;null==b&&(b=!0),this.ad_display_count++,a.display_timestamp=(new Date).getTime(),__KARGO_TESTING__&&kargo_console_log("AdController.registerAdDisplay()",this.ad_display_count,a,this.global_overrides,a.ad_config.global_overrides,a.global_overrides),a.ad_config.global_overrides&&(this.global_overrides=Helper.mergeRecursive(this.global_overrides,a.ad_config.global_overrides),delete a.ad_config.global_overrides),a.global_overrides&&(this.global_overrides=Helper.mergeRecursive(this.global_overrides,a.global_overrides),delete a.global_overrides),a.displayed||(a.displayed=!0,"function"==typeof(c=a.ad_config).ad_displayed_cb&&c.ad_displayed_cb(),a.is_loading&&(a.is_loading=!1,this.num_loading--,__KARGO_TESTING__&&kargo_console_log("!*!*!*!*!","3num_loading--",this.num_loading,a.options.ad_configs[0].type,a.options.kargo_id))),b?setTimeout(function(a){return function(){a.showNext()}}(this),0):this.setShowLock()},destroyAd:function(a,b,c){var d;null==b&&(b=!0),null==c&&(c=!0),a.is_destroyed||(__KARGO_TESTING__&&kargo_console_log("AdController.destroyAd() called for ad",a.options.ad_configs[0].type,a),a.is_destroyed=!0,c&&Helper.executeCallbackArray(a.destroy_callback,a),a.is_loading&&(a.is_loading=!1,this.num_loading--,__KARGO_TESTING__&&kargo_console_log("!*!*!*!*!","4num_loading--",this.num_loading,a.options.ad_configs[0].type,a.options.kargo_id)),delete this._ads[a.id],null!=(d=a["public"])&&d.destroy(!0),this.clearShowLock())},getLoc:function(){var a,b,c,d;if(d=Helper.getCookie("_KDSL")){d=JSON.parse(d),a={};for(b in d)c=d[b],a[atob(b).toUpperCase()]=atob(c);return a.LAT&&a.LNG&&(a.GEOLOCATION=""+a.LAT+", "+a.LNG),a}return navigator.cookieEnabled&&this.loc_check_pending!==!0&&(this.loc_check_pending=!0,Helper.loadAjax("http://tk.kargo.com/l",{success:function(a){return function(b){a.loc_check_pending=!1,b&&Helper.setCookie("_KDSL",b,216e5,!0)}}(this)})),null},setupTrackingTags:function(){var a;__KARGO_TESTING__||this.krg_tracking_setup||(this.krg_tracking_setup=!0,a=document.createElement("script"),a.src="http://tk.cdn.kargo.com/tags/get?h="+encodeURIComponent(window.location.hostname),document.head.appendChild(a))},sortAdInitCallbacks:function(){this.ad_init_callbacks.sort(function(){return function(a,b){var c,d,e,f;return c=a.slot_load_order,e=b.slot_load_order,d=a.type_load_order,f=b.type_load_order,e>c?-1:c>e?1:f>d?-1:d>f?1:0}}(this))},showNext:function(){var a,b,c,d,e,f,g,h,i;if(__KARGO_TESTING__&&kargo_console_log("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\nAdController.showNext() start",!this.isShowLocked(),this.num_loading,!this.show_lock,this.ad_init_callbacks),!this.isShowLocked()&&0===this.num_loading&&!this.show_lock&&this.ad_init_callbacks.length>0){for(this.show_start=!0,this.pos=this.min_order,c=0,d=-1,this.sortAdInitCallbacks();c<this.ad_init_callbacks.length;)if(a=this.ad_init_callbacks[c],__KARGO_TESTING__&&kargo_console_log("AdController.showNext() loop["+c+"], considering ad",a.ad),a.type_load_order<=this.pos){if(this.plo_block_status.is_blocked&&(a.type_load_order>this.plo_block_status.pos||a.type_load_order===this.plo_block_status.pos&&a.slot_load_order>this.plo_block_status.slot_load_order))return void(__KARGO_TESTING__&&kargo_console_log("AdController.showNext() loop["+c+"], blocking plo and not matching",a.ad));if(null!==a.cb&&a.ad.is_destroyed!==!0&&Helper.isNonEmptyArray(a.conditional_checks))for(h=a.conditional_checks,f=0,g=h.length;g>f;f++)if(b=h[f],Helper.isString(b)&&(b=Helper.convertStringToFunction(b,"ad")),Helper.isFunction(b)&&b()===!1){a.cb=null;break}null!==a.cb&&a.ad.is_destroyed!==!0?(__KARGO_TESTING__&&kargo_console_log("AdController.showNext() pass, calling ad",a.ad),this.plo_block_status.is_blocked||-1===a.slot_load_order||(this.plo_block_status.is_blocked=!0,this.plo_block_status.pos=a.type_load_order,this.plo_block_status.loading_count=0,this.plo_block_status.slot_load_order=a.slot_load_order),this.plo_block_status.is_blocked&&this.plo_block_status.pos===a.type_load_order&&this.plo_block_status.slot_load_order===a.slot_load_order&&(this.plo_block_status.loading_count++,a.ad.complete_callback.push(function(a){return function(){a.plo_block_status.loading_count--,0===a.plo_block_status.loading_count&&(a.plo_block_status.is_blocked=!1)}}(this))),a.ad.is_loading=!0,this.num_loading++,__KARGO_TESTING__&&kargo_console_log("!*!*!*!*!","1num_loading++",this.num_loading,a.ad.options.ad_configs[0].type,a.ad.options.kargo_id),(e=null!=(i=this.global_overrides)?i.target_params:void 0)&&(a.ad.target_params=Helper.mergeRecursive(e,a.ad.target_params||{})),a.cb()!==!0&&a.ad.is_loading&&(a.ad.is_loading=!1,this.num_loading--,__KARGO_TESTING__&&kargo_console_log("!*!*!*!*!","2num_loading--",this.num_loading,a.ad.options.ad_configs[0].type,a.ad.options.kargo_id))):(__KARGO_TESTING__&&kargo_console_log("AdController.showNext() reject, skipping ad",a.ad),Helper.executeCallbackArray(a.ad.fail_callback,a.ad),Helper.executeCallbackArray(a.ad.complete_callback,a.ad)),this.ad_init_callbacks.splice(c,1)}else(a.type_load_order<d||-1===d)&&(d=a.type_load_order),__KARGO_TESTING__&&kargo_console_log("AdController.showNext() loop["+c+"], pos out of bounds",a.ad,a.type_load_order,"<",d),c+=1;__KARGO_TESTING__&&kargo_console_log("AdController.showNext() done loop"),0===this.num_loading&&this.ad_init_callbacks.length>0&&-1!==d&&(__KARGO_TESTING__&&kargo_console_log("AdController.showNext() none called, keep going"),this.min_order=d,this.showNext())}},queueAd:function(a,b){var c,d,e;(-1===this.min_order||a.min_load_order<this.min_order)&&(this.min_order=a.min_load_order),d=b,b=function(b){return function(){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;try{for(s=a.options.ad_configs,h=o=0,q=s.length;q>o;h=++o){if(c=s[h],m=c.type,"undefined"!=typeof(j=b.limit_active[m])&&AdTagPublic.getAdsOfType(m).length>=j)throw["Duplicate ad detected for "+m,b.E_WARNING];if(i=!1,(k=null!=(t=b.global_overrides)?t.cancel_num:void 0)&&((l="all")&&(f=k[l])||(l=m)&&(f=k[l]))&&(Helper.isNumeric(f)?(f=parseInt(f)-1,f>=0&&(i=!0),0>=f?delete b.global_overrides.cancel_num[l]:b.global_overrides.cancel_num[l]=f):i=!0),(b.global_overrides.cancel_ids||[]).length>0)for(u=b.global_overrides.cancel_ids,p=0,r=u.length;r>p;p++)if(e=u[p],a.source&&(!e.type||e.type===m)&&e.kargo_id&&e.kargo_id===a.options.kargo_id){i=!0;break}if(i)throw["Ad type/id canceled "+m+"/"+a.options.kargo_id,b.E_NOTICE];if(AdType[m].require_wrapper&&(c.wrapper=a.calculateWrapperElement(c.wrapper),!c.wrapper))throw["No wrapper found for "+m,b.E_ERROR];if(AdType[m].getDefaultOptions&&(c=a.options.ad_configs[h]=Helper.mergeRecursive(AdType[m].getDefaultOptions(),c)),c.wrapper_override===!0&&(c.wrapper=a.options.ad_configs[h].wrapper=a.calculateWrapperElement(c.wrapper),!c.wrapper))throw["No wrapper found for "+m+" wrapper override",b.E_ERROR];"function"==typeof(n=AdType[m]).preDrawConditionCheck&&n.preDrawConditionCheck(c)}}catch(v){return g=v,b.logMessage(g,a,"AD_PRE_CHECK_FAIL"),b.destroyAd(a),!0}return Helper.executeEventCallbacks("AdController.queueAd().cb.pre",[a]),a.getAdContent({success:function(){d()},fail:function(){__KARGO_TESTING__&&kargo_console_log("Type-in-ad-response fail for ad",a),b.destroyAd(a),Helper.executeCallbackArray(a.fail_callback,a),Helper.executeCallbackArray(a.complete_callback,a)}}),!0}}(this),__KARGO_TESTING__&&kargo_console_log("AdController.queueAd()",a),e="undefined"!=typeof a.options.load_order&&Helper.isNumeric(a.options.load_order)?parseInt(a.options.load_order):-1,c=[],Helper.isNonEmptyArray(a.options.cancel_if_loaded)&&c.push(function(){return 0===AdTagPublic.getAdsOfType(a.options.cancel_if_loaded).length}),a.options.conditional_check&&c.push(a.options.conditional_check),this.ad_init_callbacks.push({type_load_order:a.min_load_order,slot_load_order:e,conditional_checks:c,ad:a,cb:b}),clearTimeout(this.display_start_timer),0===a.min_load_order?this.showNext():this.display_start_timer=setTimeout(function(a){return function(){a.showNext()}}(this),this._DISPLAY_START_TIMEOUT)},logMessage:function(a,b,c){var d,e,f,g,h,i,j,k;null==b&&(b=null),null==c&&(c=""),this.debug&&(Helper.isArray(a)?(g=a[0],f=a[1]):(g=a,f=this.E_NOTICE),f<=this.debug&&(d=new Date,e={},e[this.E_ERROR]="ERROR",e[this.E_WARNING]="WARNING",e[this.E_NOTICE]="NOTICE",console.log("KRG_ERR_"+(e[f]||f[this.E_NOTICE]),"["+Helper.strPad(d.getHours(),"0",2)+":"+Helper.strPad(d.getMinutes(),"0",2)+":"+Helper.strPad(d.getSeconds(),"0",2)+"."+(d.getTime()+"").slice(-4)+"] ==>",g),__KARGO_TESTING__||(h=Helper.JSON.stringify(g,!0),i={url:location.href,msg:h,err_lvl:f,err_code:c},b&&(b.sid&&(i.sid=b.sid),(null!=(k=b.ad_config)?k.type:void 0)&&(i.ad_type=b.ad_config.type),b.options.kargo_id&&(i.kargo_id=b.options.kargo_id)),j="http://log.kargo.com/adtag.error",j=Helper.addUrlParams(j,i),Helper.fireTracker(j))))}},AdPublic=function(){function a(b){this.id=b.public_id,a.ad_list[this.id]={"public":this},a.updateById(this.id,null,b)}return a.ad_list={},a.prototype.id=null,a.updateByObject=function(b){return a.updateById(b.id)},a.updateById=function(b,c,d){var e;return(e=a.ad_list[b])?(e.ad=c,e.options=Helper.mergeRecursive({},d),void(e.is_destroyed=!1)):null},a.getObjectById=function(b){var c;return null!=(c=a.ad_list[b])?c["public"]:void 0},a.prototype.isVisible=function(){var b;return!this.isDestroyed()&&(null!=(b=a.ad_list[this.id].ad)?b.displayed:void 0)},a.prototype.isDestroyed=function(){return!a.ad_list[this.id]||a.ad_list[this.id].is_destroyed},a.prototype.refresh=function(){var b,c;c=a.ad_list[this.id].options,this.destroy(),__KARGO_TESTING__&&kargo_console_log("AdPublic.refresh()",c),b=AdTagPublic.getAd(c),a.ad_list[this.id].is_destroyed=!1,this.id=b.id},a.prototype.destroy=function(b){null==b&&(b=!1),this.isDestroyed()||(b?(delete a.ad_list[this.id].ad,a.ad_list[this.id].is_destroyed=!0):a.ad_list[this.id].ad.ad_unit?a.ad_list[this.id].ad.ad_unit.destroy():AdController.destroyAd(a.ad_list[this.id].ad))},a}(),AdTagPublic={loaded:!0,self_url:__KARGO_TESTING__?"/js/ad-dev.js":"http://storage.cloud.kargo.com/ad/network/tag/Kargo-Ad-v3.js",ads:window.Kargo.ads||[],Helper:Helper,setAdConfig:function(a){(a||{}).kargo_id&&(AdController._mapped_ad_configs[a.kargo_id]=a)},setTargetParams:function(){AdController.global_overrides=AdController.global_overrides||{},window.Kargo.target_params&&(AdController.global_overrides.target_params=window.Kargo.target_params,delete window.Kargo.target_params)},getAd:function(a){var b,c;return __KARGO_TESTING__&&kargo_console_log("AdTagPublic.getAd()",a),a.public_id||(a.public_id=Helper.uniqId()),c=AdPublic.getObjectById(a.public_id)||new AdPublic(a),AdController.ad_override_source&&a.is_override!==!0?(__KARGO_TESTING__&&kargo_console_log("AdTagPublic.getAd() -- ad_override_source and not override ad"),c):!AdController.ad_override_source&&AdController.stop_ad_processing?(__KARGO_TESTING__&&kargo_console_log("AdTagPublic.getAd() -- stop_ad_processing is flagged"),c):(b=new Ad(a),b.valid_config&&b.queue(),c)},loadAds:function(){var a;for(a=window.Kargo.ads,__KARGO_TESTING__&&kargo_console_log("AdTagPublic.loadAds()",a);a.length;)window.Kargo.getAd(a.shift())},reset:function(){var a,b,c;__KARGO_TESTING__&&kargo_console_log("AdTagPublic.reset()"),AdController.global_overrides={},Helper.page_id++,AdController.defaults_set=!1,AdController.setShowLock(),AdController.krg_tracking_setup=!1;for(b in AdController._ads)a=AdController._ads[b],null!=(c=a.ad_unit)&&c.destroy();Helper.executeEventCallbacks("AdTagPublic.reset()"),Helper.executeEventCallbacks("global_ad_pre_setup"),_IS_IN_IFRAME||Helper.executeEventCallbacks("global_ad_pre_setup_top_window")},getAdsOfType:function(a){var b,c,d;Helper.isArray(a)&&(a=a.join("|")),d=[];for(c in AdController._ads)b=AdController._ads[c],new RegExp("^("+a+")$","i").test(b.ad_config.type)&&d.push({kargo_id:b.options.kargo_id,ad_unit:{destroy:function(){return b.ad_unit.destroy.apply(b.ad_unit,arguments)}}});return d},refreshAd:function(a){var b,c,d;if(a.kargo_id||a.partner_id&&a.placement_id){d=AdPublic.ad_list;for(c in d)if(b=d[c],a.kargo_id&&a.kargo_id===b.options.kargo_id||!a.kargo_id&&b.options.partner_id===a.partner_id&&b.options.placement_id===a.placement_id)return void b["public"].refresh()}}},AdServer.AdMarvel={encode:function(a){return escape(Helper.utf8Encode(a))},getAdUrl:function(a,b){var c,d,e,f,g,h,i;d=a.source.partner_id,e=a.source.site_id||a.source.placement_id,b.SET_ACCESS_CONTROL_HEADER=1,((g=Helper.getUrlParam("ad_id"))||(g=Helper.getUrlParam("AD_ID")))&&(b.ad_id=b.AD_ID=g),f="";for(c in b)i=b[c],""!==f&&(f+="||"),f+=this.encode(c+"=>"+this.encode(i));return h="http://ads.admarvel.com/fam/phoneGetAd.php?partner_id="+d+"&site_id="+e+(f.length>0?"&target_params="+f:"")+"&phone_headers=HTTP_USER_AGENT=%3E"+encodeURIComponent(navigator.userAgent)+"&version=1.5&language=javascript&format=wap&cb="+Math.floor(99999999999*Math.random())}},AdServer.DFP={getPpid:function(){var a,b;return a="krg_dfp_ppid",(b=Helper.getCookie(a))||(b=(new Date).getTime().toString(36),b+=Helper.randomString(32-b.length),Helper.setCookie(a,b,(new Date).getTime()+31536e7)),b},getAdUrl:function(a,b){var c,d,e,f,g,h,i,j,k,l,m;d=a.source.ad_unit_id||a.source.iu||"",f=a.source.sz||"",a.source.position&&(b.Position=a.source.position),((h=Helper.getUrlParam("ad_id"))||(h=Helper.getUrlParam("AD_ID")))&&(b.ad_id=b.AD_ID=h),g="";for(e in b)k=b[e],g+=(""===g?"":"&")+encodeURIComponent(e)+"="+encodeURIComponent(k);if(c=Helper.getUrlParam("dfpKeyval"))for(c=c.split(";"),l=0,m=c.length;m>l;l++)i=c[l],i=i.split(":"),e=i[0],k=i[1],g+=(""===g?"":"&")+encodeURIComponent(e)+"="+encodeURIComponent(k);return j="http://pubads.g.doubleclick.net/gampad/adx?iu="+encodeURIComponent(d)+"&sz="+encodeURIComponent(f)+(g.length>0?"&t="+encodeURIComponent(g):"")+"&mob=js"+(navigator.cookieEnabled?"&ppid="+this.getPpid():"")+"&c="+Math.floor(99999999999*Math.random())}},AdType.Banner=function(){function a(a,b){this.ad=a,this.update_cb=b,this.ad_wrapper=this.ad.ad_config.wrapper}return a.require_wrapper=!0,a.preDrawConditionCheck=function(a){var b,c,d,e,f,g;if(e=750,Helper.getPositionTop(a.wrapper,!0)<e&&!Helper.getUserAgent().is_tablet&&(c=AdTagPublic.getAdsOfType(["SiteSkin","Hover"])).length>0){for(d=!0,f=0,g=c.length;g>f;f++)if(b=c[f],b.has_response_global_overrides){d=!1;break}if(d)throw["Banner preDrawCondition fail",AdController.E_WARNING]}},a.prototype.display=function(a,b,c,d,e,f){var g,h;if(null==a&&(a=null),null==b&&(b=null),null==c&&(c=!0),null==d&&(d=null),null==e&&(e=null),null==f&&(f=!1),!this.ad_wrapper)throw null!=(h=this.ad.ad_unit)&&h.destroy(),["Wrapper no longer exists",AdController.E_ERROR];g="none"===this.ad_wrapper.style.display?"":this.ad_wrapper.style.display,this.ad_wrapper.style.display="none",this.ad.loadContentInto(this.ad_wrapper,this.ad.ad_content,{success:function(a){return function(){a.ad_wrapper.style.display=g,Plugin.VisibilityMonitoring.addMonitoredElement(a.ad.id,a.ad_wrapper),AdController.registerAdDisplay(a.ad,c),Helper.executeCallbackArray(a.ad.success_callback,a.ad),Helper.executeCallbackArray(a.ad.complete_callback,a.ad)}}(this),fail:function(a){return function(){a.destroy(),Helper.executeCallbackArray(a.ad.complete_callback,a.ad)}}(this)})},a.prototype.destroy=function(){var a,b,c;for(AdController.destroyAd(this.ad);a=null!=(b=this.ad_wrapper)?b.childNodes[0]:void 0;)this.ad_wrapper.removeChild(a);null!=(c=this.ad_wrapper)&&(c.style.display="none"),Plugin.VisibilityMonitoring.removeMonitoredElement(this.ad.id)},a}(),AdType.Hover=function(){function a(a){this.ad=a,this.ad_wrapper=null,this.ad_wrapper_outer=null,this.ad_content=null,this.ads_by=null,this.ad_close_link=null,this.css=null,this.win=null,this.banner=null,this.is_loaded=!1,this.touch_timer=null,this.scroll_timer=null,this.ad_visible=!1,this.is_touching=!1,this.is_scrolling=!1,this.user_agent=Helper.getUserAgent(),this.show_timer=null,this.hide_timer=null,this.stage_change_timer=null,this.transition_timer=null,this.transition_pos=null,this.event_functions=[],this.touch_on_ad=!1,this.loading_check_timer=null,this.check_loaded_speed=100,this.max_check_loaded_time=8e3,this.hide_lock=!1,this.is_fully_hidden=!1,this.is_ipad=this.user_agent.is_tablet&&"ios"===this.user_agent.os}return a.getDefaultOptions=function(){var a;return{pos_fixed:!0,hug_side:"bottom",scroll_transitions:!0,show_delay_ms:100,min_show_time:250,min_hide_time:150,transition_effect:"fade",transition_speed:10,transition_delta:4,show_kargo_logo_tag:!0,prevent_close:!1,always_show:!1,wrapper_fill:!1,wrapper_override:!1,horizontal_align:"center",close_button:(a=Helper.getUserAgent().is_mobile?28:33,{url:"http://storage.cloud.kargo.com/ad/network/tag/assets/hover/close_button.png",width:a,height:a}),ignore_tablet_overrides:!1}},a.prototype.display=function(){var a,b,c;if(this.options=this.ad.ad_config,this.options.wrapper_override===!0){if(this.ad_wrapper=this.options.wrapper,!this.ad_wrapper)throw null!=(c=this.ad.ad_unit)&&c.destroy(),["Wrapper no longer exists",AdController.E_ERROR];return b="none"===this.ad_wrapper.style.display?"":this.ad_wrapper.style.display,this.ad_wrapper.innerHTML=a,this.ad_wrapper.style.display="none",void this.ad.loadContentInto(this.ad_wrapper,this.ad.ad_content,{success:function(a){return function(){a.ad_wrapper.style.display=b,AdController.registerAdDisplay(a.ad),Helper.executeCallbackArray(a.ad.success_callback,a.ad),Helper.executeCallbackArray(a.ad.complete_callback,a.ad)}}(this),fail:function(a){return function(){a.destroy(),Helper.executeCallbackArray(a.ad.complete_callback,a.ad)}}(this)})}this.ad_uid="krg-wrapper-"+this.ad.id,a="<div id='"+this.ad_uid+"-outer' style='position: relative;'><div id=\""+this.ad_uid+'-content"></div></div>',this.ad_wrapper=document.createElement("div"),this.ad_wrapper.id=this.ad_uid,this.ad_wrapper.className="krg-hov-wrapper",this.ad_wrapper.style.visibility="hidden",this.ad_wrapper.style.position="absolute",this.ad_wrapper.style.left="-9999px",this.ad_wrapper.style.margin=0,document.body.appendChild(this.ad_wrapper),this.ad_wrapper.innerHTML=a,this.ad_content=document.getElementById(this.ad_uid+"-content"),this.ad_content.style.position="relative",this.ad_content.style.zIndex=10001,this.ad.loadContentInto(this.ad_content,this.ad.ad_content,{success:function(a){return function(){a.setupAdConfigOptions(),a.setupAdWrapperElements(),a.bindEvent(window,"load",function(){return setTimeout(function(){return a.adCheckIfAdContentsLoaded()},100)}),a.loading_check_timer=setInterval(function(){return a.adCheckIfAdContentsLoaded(!0)},100),AdController.registerAdDisplay(a.ad),Helper.executeCallbackArray(a.ad.success_callback,a.ad),Helper.executeCallbackArray(a.ad.complete_callback,a.ad)}}(this),fail:function(a){return function(){a.destroy()}}(this),update:function(a){return function(){a.winResize()}}(this)})},a.prototype.setupAdConfigOptions=function(){var a;"undefined"==typeof this.ad.ad_config.prevent_close&&this.ad.ad_config.persistent===!0&&(this.ad.ad_config.prevent_close=!0),this.options.prevent_close||this.options.close_button||(this.options.close_button=AdType.Hover.getDefaultOptions().close_button),this.options.prevent_close||(this.options.close_button.width=parseInt(this.options.close_button.width),this.options.close_button.height=parseInt(this.options.close_button.height),this.options.close_button.horiz_side_pos=Math.round(this.options.close_button.width*(1/8))-2,a=Helper.getUserAgent().is_mobile?28:33,this.options.close_button.vert_side_pos=-1*(a-7)),this.user_agent.is_mobile&&"firefox"===this.user_agent.browser&&(this.options.scroll_transitions=!1),"ios"===this.user_agent.os&&(this.options.pos_fixed=!0),/left|right/.test(this.options.horizontal_align||"")&&this.user_agent.is_tablet&&(this.options.ignore_tablet_overrides=!0)},a.prototype.setupAdWrapperElements=function(){var a,b,c,d,e;c="",this.options.show_kargo_logo_tag&&(b=87,a=13,e=41,d=9,Helper.insertBefore("<a href='http://www.kargo.com/privacy' target='_blank' id='"+this.ad_uid+"-kargo-link'></a>",this.ad_content),this.ads_by=document.getElementById(this.ad_uid+"-kargo-link"),c+="#"+this.ad_uid+"-kargo-link {display: block;z-index: 10002;padding: 2px;position: absolute;"+("top"===this.options.hug_side?"bottom":"top")+": -"+a+'px;background: url("http://storage.cloud.kargo.com/ad/network/tag/assets/hover/kargo_logo_tag'+("top"===this.options.hug_side?"_flip":"")+'.png") 2px 0 no-repeat;background-size: '+b+"px auto;width: "+b+"px;height: "+a+"px;left: -2px;}#"+this.ad_uid+".krg-hov-side #"+this.ad_uid+'-kargo-link {background: url("http://storage.cloud.kargo.com/ad/network/tag/assets/hover/ads_by_k.png") 2px 0 no-repeat;background-size: '+e+"px auto;width: "+e+"px;height: "+d+"px;top: auto;left: auto;right: auto;bottom: -2px;}#"+this.ad_uid+".krg-hov-side-left #"+this.ad_uid+"-kargo-link {}#"+this.ad_uid+".krg-hov-side-right #"+this.ad_uid+"-kargo-link {margin-right: -2px;}"),this.options.prevent_close||(Helper.insertBefore("<a href='#close' id='"+this.ad_uid+"-close-link' style='display: block; z-index: 10002; padding: 2px;position: absolute; "+("top"===this.options.hug_side?"bottom":"top")+": "+this.options.close_button.vert_side_pos+"px; right: "+this.options.close_button.horiz_side_pos+"px;'><img src='"+this.options.close_button.url+"' style='display: block; width: "+this.options.close_button.width+"px; height: "+this.options.close_button.height+"px;' alt='Close' /></a>",this.ad_content),this.ad_close_link=document.getElementById(this.ad_uid+"-close-link")),c+="#"+this.ad_uid+"-close-link {background: transparent !important;}#"+this.ad_uid+" a:focus, #"+this.ad_uid+" a:active {outline: none;}#"+this.ad_uid+" a {-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}#"+this.ad_uid+" img {vertical-align: bottom;max-width: none;}",this.ad_wrapper.style.zIndex=1e4,this.ad_wrapper_outer=document.getElementById(this.ad_uid+"-outer"),(this.user_agent.is_tablet&&!this.options.ignore_tablet_overrides||this.options.wrapper_fill)&&(this.ad_wrapper.style.width="100%",this.ad_wrapper_outer.style.background="rgba(0, 0, 0, 0.85)",this.ad_wrapper_outer.style.textAlign="center",this.ad_wrapper_outer.style.padding=(this.user_agent.is_tablet?"8":"5")+"px 0",this.options.prevent_close||(this.ad_close_link.style["top"===this.options.hug_side?"bottom":"top"]=-1*parseInt((this.options.close_button.height+4)/2)+"px"),c+="#"+this.ad_uid+"-content img {display: inline-block;}"),this.css=Helper.addCss(c),this.options.prevent_close||this.bindEvent(this.ad_close_link,"click",function(a){return function(b){return b.preventDefault(),a.destroy()}}(this))},a.prototype.adCheckIfAdContentsLoaded=function(a){return null==a&&(a=!1),this.is_loaded?(this.winResize(),void clearInterval(this.loading_check_timer)):(this.ad_wrapper.style.position=this.options.pos_fixed?"fixed":"absolute",this.options.pos_fixed&&("top"===this.options.hug_side?this.ad_wrapper.style.top=0:this.ad_wrapper.style.bottom="chrome"===this.user_agent.browser?"-1px":0),this.banner={x:this.ad_wrapper.offsetWidth,y:this.ad_wrapper.offsetHeight},this.banner.x<25||this.banner.y<25+(this.user_agent.is_tablet?31:0)?(this.ad_wrapper.style.visibility="hidden",void(a&&(this.max_check_loaded_time-=this.check_loaded_speed,this.max_check_loaded_time<=0&&(clearInterval(this.loading_check_timer),this.destroy(!0))))):(clearInterval(this.loading_check_timer),void this.adLoadValidated()))},a.prototype.adLoadValidated=function(){var a,b,c,d,e,f,g,h;for(this.is_loaded=!0,this.ad_wrapper.style.visibility="",this.ad_wrapper.style.left="",d=this.ad_wrapper.getElementsByTagName("IFRAME"),c=g=0,h=d.length;h>g;c=g+=1)a=d[c],"true"!==a.getAttribute("loaded")&&(b=!1,f=a.contentDocument||a.contentWindow.document,e=function(c){return function(){return b||c.readyState&&"loaded"!==c.readyState&&"complete"!==c.readyState?void 0:(a.setAttribute("loaded","true"),b=!0,a.removeEventListener("load",e),a.removeEventListener("readystatechange",e))}}(this),f.readyState?e():(a.addEventListener("load",e),a.addEventListener("readystatechange",e)));"top"===this.options.hug_side?document.body.style.marginTop=parseInt(Helper.getComputedStylePropertyValue(document.body,"margin-top"))+this.banner.y+"px":document.body.style.marginBottom=parseInt(Helper.getComputedStylePropertyValue(document.body,"margin-bottom"))+this.banner.y+"px",this.win=Helper.getWindowSize(),this.makeVisible(!0),this.user_agent.is_tablet||(Plugin.VisibilityMonitoring.visible_count>0&&(this.hide_lock=!0,this.makeHidden(!0)),Helper.bindEventCallback("Helper.checkVisibility().some_shown",function(a){return function(){return a.hide_lock=!0,a.makeHidden(!0)}}(this)),Helper.bindEventCallback("Helper.checkVisibility().none_shown",function(a){return function(){return a.hide_lock=!1,a.makeVisible()}}(this))),this.bindEvent(window,"scroll",function(a){return function(){return a.is_scrolling=!0,a.stateChanged(!0)}}(this)),this.bindEvent(this.ad_wrapper,"touchstart",function(a){return function(){return a.touch_on_ad=!0}}(this)),this.bindEvent(this.ad_wrapper.getElementsByTagName("A")[0],"touchstart",function(a){return function(){return a.touch_on_ad=!0}}(this)),this.bindEvent(document,"touchstart",function(a){return function(){return a.touch_on_ad||(clearTimeout(a.stage_change_timer),clearTimeout(a.show_timer),clearTimeout(a.hide_timer),a.show_timer=null,a.hide_timer=null,a.is_touching=!0,a.stateChanged()),a.touch_on_ad=!1}}(this)),this.bindEvent(document,"touchmove",function(a){return function(){return clearTimeout(a.stage_change_timer),a.is_scrolling=!0,a.is_touching=!0,a.stateChanged(!0,!0)}}(this)),this.bindEvent(document,"touchend",function(a){return function(){return a.is_touching=!1,a.stateChanged()}}(this)),this.bindEvent(window,"resize",function(a){return function(){return a.winResize()}}(this)),this.winResize()},a.prototype.winResize=function(){this.banner={x:this.ad_wrapper.offsetWidth,y:this.ad_wrapper.offsetHeight},this.win=Helper.getWindowSize(),this.updatePosX(),this.options.pos_fixed||this.updatePosY()},a.prototype.updatePosX=function(){(!this.user_agent.is_tablet||this.options.ignore_tablet_overrides)&&(/left|right/.test(this.options.horizontal_align||"")?(this.ad_wrapper.style[this.options.horizontal_align]=0,Helper.addClass(this.ad_wrapper,"krg-hov-side"),Helper.addClass(this.ad_wrapper,"krg-hov-side-"+this.options.horizontal_align),this.ads_by&&(this.ads_by.style[this.options.horizontal_align]=this.ad_content.offsetWidth+"px")):this.ad_wrapper.style.left=this.options.wrapper_fill?0:Math.round((this.win.x-this.banner.x)/2)+"px")},a.prototype.updatePosY=function(){var a;a=document.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,this.ad_wrapper.style.top=a+("top"===this.options.hug_side?0:this.win.y-this.banner.y)+"px"},a.prototype.stateChanged=function(a,b){null==a&&(a=!1),null==b&&(b=!0),a&&this.is_scrolling&&(clearTimeout(this.scroll_timer),this.scroll_timer=setTimeout(function(a){return function(){return a.is_scrolling=!1,a.options.scroll_transitions&&!a.is_touching?a.makeVisible():void 0}}(this),this.options.show_delay_ms)),b&&this.is_touching&&(clearTimeout(this.touch_timer),this.touch_timer=setTimeout(function(a){return function(){return a.is_touching=!1,a.options.scroll_transitions&&!a.is_scrolling?a.makeVisible():void 0}}(this),this.options.show_delay_ms)),this.options.scroll_transitions?(this.is_touching||this.is_scrolling)&&this.ad_visible?this.makeHidden():this.is_touching||this.is_scrolling||this.ad_visible||this.makeVisible():this.options.pos_fixed||this.updatePosY()},a.prototype.makeVisible=function(a){null==a&&(a=!1),this.hide_lock||(null===this.hide_timer?(this.ad_visible=!0,clearTimeout(this.transition_timer),this.transition("show"),a||(clearTimeout(this.scroll_timer),clearTimeout(this.touch_timer),clearTimeout(this.show_timer),this.show_timer=setTimeout(function(a){return function(){return clearTimeout(a.show_timer),a.show_timer=null}}(this),this.options.min_show_time),this.winResize())):(clearTimeout(this.stage_change_timer),this.stage_change_timer=setTimeout(function(a){return function(){return a.stateChanged()}}(this),this.options.min_show_time)))},a.prototype.makeHidden=function(a){null==a&&(a=!1),this.options.always_show||(null===this.show_timer||a?(clearTimeout(this.hide_timer),this.hide_timer=setTimeout(function(a){return function(){return clearTimeout(a.hide_timer),a.hide_timer=null}}(this),this.options.min_hide_time),this.ad_visible=!1,clearTimeout(this.transition_timer),this.transition("hide",a||"ios"===this.user_agent.os?"none":null)):(clearTimeout(this.stage_change_timer),this.stage_change_timer=setTimeout(function(a){return function(){return a.stateChanged()}}(this),this.options.min_hide_time)))},a.prototype.bringToView=function(){this.is_fully_hidden&&(this.is_fully_hidden=!1,this.ad_wrapper.style.marginLeft="")},a.prototype.removeFromView=function(){this.is_fully_hidden||(this.is_fully_hidden=!0,this.ad_wrapper.style.marginLeft="-9999px")},a.prototype.transition=function(a,b){var c,d,e,f,g,h,i,j,k;switch(null==a&&(a="hide"),null==b&&(b=null),e=null===b?this.options.transition_effect:b,g="show"===a,f=!1,k=this.options.transition_speed,g&&this.is_fully_hidden&&this.bringToView(),e){case"fade":c=(g?1:-1)*this.options.transition_delta,this.transition_pos=(null===this.transition_pos?g?0:100:this.transition_pos)+c,g&&this.transition_pos>=100?(this.transition_pos=100,f=!0):!g&&this.transition_pos<=0&&(this.transition_pos=0,this.removeFromView(),f=!0),this.ad_wrapper.style.filter="alpha(opacity="+this.transition_pos+")",this.ad_wrapper.style.opacity=this.transition_pos/100;
break;case"slide":this.ad_wrapper.style.filter="alpha(opacity=100)",this.ad_wrapper.style.opacity=1,d="top"===this.options.hug_side?-1:1,c=(g?1:-1)*this.options.transition_delta*d,j=this.banner.y+(!this.options.prevent_close&&this.options.close_button.vert_side_pos<0?-1*this.options.close_button.vert_side_pos:0),this.transition_pos=null===this.transition_pos?g?d*j:0:this.transition_pos,this.is_ipad&&(i=document.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,("top"===this.options.hug_side&&i+this.transition_pos<0||"bottom"===this.options.hug_side&&i+this.win.y+this.transition_pos>this.win.total_y)&&(c*=2.5,k/=3)),this.transition_pos-=c,g&&(c>0&&this.transition_pos<=0||0>c&&this.transition_pos>=0)?(this.transition_pos=0,f=!0):!g&&(0>c&&this.transition_pos>=j||c>0&&this.transition_pos<=-1*j)&&(this.transition_pos=d*j,f=!0),this.ad_wrapper_outer.style.top=this.transition_pos+"px";break;default:f=!0,clearTimeout(this.transition_timer),this.transition_pos=null,h=g?1:0,this.ad_wrapper.style.filter="alpha(opacity="+h+")",this.ad_wrapper.style.opacity=h,g||this.removeFromView()}f||(this.transition_timer=setTimeout(function(b){return function(){return b.transition(a,e)}}(this),k))},a.prototype.bindEvent=function(a,b,c){var d,e,f;if(a){d=b.split(" ");for(f in d)e=d[f],this.event_functions.push({element:a,event_type:e,event_function:c}),a.addEventListener(e,c)}},a.prototype.destroy=function(a){var b,c,d,e,f,g;for(null==a&&(a=!1),e=this.event_functions,c=0,d=e.length;d>c;c++)b=e[c],b.element.removeEventListener(b.event_type,b.event_function);this.event_functions.length=0,null!==this.banner&&("top"===this.options.hug_side?document.body.style.marginTop=parseInt(Helper.getComputedStylePropertyValue(document.body,"margin-top"))-this.banner.y+"px":document.body.style.marginBottom=parseInt(Helper.getComputedStylePropertyValue(document.body,"margin-bottom"))-this.banner.y+"px"),a?(this.ad_wrapper.setAttribute("style","display: none;"),this.ads_by&&this.ads_by.parentNode.removeChild(this.ads_by),this.ad_close_link&&this.ad_close_link.parentNode.removeChild(this.ad_close_link),AdController.logMessage(["Hover busted out",AdController.E_NOTICE],this.ad,"HOVER_BUST_OUT")):this.ad_wrapper?this.ad_wrapper.parentNode.removeChild(this.ad_wrapper):this.ad_content&&null!=(f=this.ad_content.parentNode)&&f.removeChild(this.ad_content),this.css&&null!=(g=this.css.parentNode)&&g.removeChild(this.css),AdController.destroyAd(this.ad)},a}(),AdType.InstantNative=function(){function a(a){this.ad=a,this.logo=null,this.ad_wrapper=null,this.ad_inner=null,this.ss_style=null,this.is_loaded=!1,this.config=null,this.logo_spacing=5,this.css="",this.animating=!1,this.load_timeout=2e3,this.article_list=[],this.sponsor=null,this.article=[],this.type="",this.count="",this.impressions=[],this.mySwiper,this.category="",this.adImpressions=[],this.css=""}return a.require_wrapper=!0,a.prototype.display=function(){this.options=this.ad.ad_config,this.config=this.ad.ad_content,this.adLoaded()},a.prototype.setParams=function(){var a,b,c,d,e,f,g,h,i,j;for(this.type=this.config.content_list[0].action.type,i=this.config.tracking.impression,d=e=0,g=i.length;g>e;d=e+=1)c=i[d],this.adImpressions[d]=c;for(j=this.config.content_list,f=0,h=j.length;h>f;f+=1)b=j[f],a={id:b.id||"",title:b.content.title||"",summary:b.content.summary||"",image_link:b.content.image.url||"",height:b.content.image.height||"",width:b.content.image.width||"",template:b.action.url||"",associated_impressions:b.tracking.impression},"kargo_drop"===this.type?a.template=b.action.body||"":"article_advertising"===this.type?a.template=b.action.url||"":(this.type="external")&&(a.template=b.action.url||""),this.article_list.push(a);this.sponsor={name:this.config.sponsor.name||"",icon:this.config.sponsor.icon||"",height:this.config.sponsor.height||"",width:this.config.sponsor.width||""},this.category=this.config.category.name||"",this.count=this.config.content_count,this.impressions.slice(1)},a.prototype.adLoaded=function(){var a,b,c,d;this.setParams(),d=this.parsePageEntry(),c=0,b=0,a=function(a){return function(){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;if(a.count>1){if(2>b)return;if(2>c)return void a.destroy()}for(n=document.createElement("div"),n.classList.add("swiper-container"),p=document.createElement("div"),p.classList.add("swiper-wrapper"),n.appendChild(p),t=a.article_list,j=r=0,s=t.length;s>r;j=++r)i=t[j],o=document.createElement("div"),o.classList.add("swiper-slide"),o.classList.add("swiperElement"+j),o.innerHTML=d,p.appendChild(o),h=o.getElementsByClassName("krg-ntv-container")[0],h.style.position="relative",k=document.createElement("a"),k.style.width="100%",k.style.height="100%","external"===a.type?(k.href=a.article_list[j].template,k.style.zIndex="2000000000",k.style.position="absolute",o.firstChild.insertBefore(k,o.firstChild.firstChild)):"article_advertising"===a.type?(k.href="http://localhost/base.html?id="+i.id,k.style.zIndex="2000000000",k.style.position="absolute",o.firstChild.insertBefore(k,o.firstChild.firstChild)):"kargo_drop"===a.type&&(q=document.createElement("div"),q.style.backgroundColor="white",q.style.height="100%",q.style.width="100%",q.style.position="absolute",q.style.opacity="0",q.style.top="0px",q.classList.add("krg-ntv-overlay"),g=document.createElement("div"),g.classList.add("close_push"),g.style.position="absolute",g.style.right="0px",g.style.zIndex="100000",f=document.createElement("img"),f.src="http://i.imgur.com/R4jTzOB.png",f.style.height="28px",f.style.width="28px",g.appendChild(f),l=document.createElement("div"),l.style.position="relative",l.style.height="100%",l.style.width="100%",e=document.createElement("div"),e.id="adContents",l.classList.add("krg-ntv-overlay-container"),l.appendChild(e),q.appendChild(g),q.appendChild(l),h.appendChild(q));m=document.createElement("div"),m.classList.add("swiper-pagination"),n.appendChild(m),a.adReadyToDraw(n)}}(this),this.count>1?(Helper.loadScript("http://storage.cloud.kargo.com/ad/network/thirdparty/idangerous.swiper.min.js",{success:function(){return function(){c++}}(this),complete:function(){return function(){b++,a()}}(this)},this.load_timeout,!0,!0,!0,!1,!0),Helper.loadCss("http://storage.cloud.kargo.com/ad/network/thirdparty/idangerous.swiper.css",{success:function(){return function(){c++}}(this),complete:function(){return function(){b++,a()}}(this)},this.load_timeout,!0,!0,!0,!1,!0)):a()},a.prototype.adReadyToDraw=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M;if(!(o=this.ad.ad_config.wrapper))return void this.destroy();for(o.appendChild(a),e=document.getElementsByClassName("krg-ntv-container")[0],f=document.getElementsByClassName("krg-delete"),y=f.length-1;y>=0;y+=-1)n=f[y],n.parentNode.removeChild(n);for(u=document.getElementsByClassName("krg-ntv-title"),l=z=0,C=u.length;C>z;l=++z)g=u[l],g.innerHTML=this.article_list[l].title;for(s=document.getElementsByClassName("krg-ntv-image"),l=A=0,D=s.length;D>A;l=++A)g=s[l],g.src=this.article_list[l].image_link;for(t=document.getElementsByClassName("krg-ntv-summary"),l=B=0,E=t.length;E>B;l=++B)g=t[l],g.innerHTML=this.article_list[l].summary;if(""!==this.category)for(r=document.getElementsByClassName("krg-ntv-category"),l=I=0,F=r.length;F>I;l=++I)g=r[l],g.innerHTML=this.category;for(p=document.createElement("img"),p.src=this.sponsor.icon,p.style.height=this.sponsor.height+"px",p.style.width=this.sponsor.width+"px",p.style.position="absolute",p.style.marginLeft="4px",p.style.top="-6px",x=document.createElement("span"),x.innerHTML="SPONSORED BY "+this.sponsor.name.toUpperCase(),x.style.position="absolute",x.style.bottom="15px",x.style.right="50px",x.style.fontFamily="Colfax",x.style.fontSize="8px",x.style.color="#bfbfbf",x.appendChild(p),L=this.adImpressions,J=0,G=L.length;G>J;J++)m=L[J],e.appendChild(Helper.fireTracker(m));for(M=this.article_list[0].associated_impressions,K=0,H=M.length;H>K;K++)m=M[K],document.getElementsByClassName("swiper-slide")[0].appendChild(Helper.fireTracker(m)),document.getElementsByClassName("swiper-slide")[0].classList.add("firedOff");return this.count>1?(a.appendChild(x),a.style.height=parseInt(window.getComputedStyle(e).getPropertyValue("height"))+5+"px",window.mySwiper=new Swiper(".swiper-container",{mode:"horizontal",loop:!0,pagination:".swiper-pagination",paginationClickable:!0,onSlideChangeEnd:h=function(a){return function(){var b,c,d,e,f;if(c=mySwiper.activeIndex%a.article_list.length,void 0===document.getElementsByClassName("firedOff")[c]){for(b=mySwiper.activeSlide(),f=a.article_list[c].associated_impressions,e=0,d=f.length;d>e;e++)m=f[e],b.appendChild(Helper.fireTracker(m));b.classList.add("firedOff")}}}(this),onSlideClick:b=function(){return function(){e=document.getElementsByClassName("swiper-container")[0]}}(this)})):(e.appendChild(x),window.containerHeight=parseInt(window.getComputedStyle(e).getPropertyValue("height"))+"px"),j=function(){return function(a,b){var c,d,e,f;return c=b,f=document.getElementsByClassName(a)[0],e=c/100,f.style.opacity=e,c-=1,0===c?(f.style.opacity=0,f.style.display="none",clearTimeout(d),!0):void(d=setTimeout(function(){return j(a,c)},5))}}(this),i=function(){return function(a,b){var c,d,e,f;return c=b,f=document.getElementsByClassName(a)[0],e=c/100,f.style.opacity=e,f.style.display="",c+=1,10===c?(f.style.opacity=1,f.style.display="",clearTimeout(d),!1):void(d=setTimeout(function(){return i(a,c)},5))}}(this),v=function(a){return function(b,c){var d,e,f,g;return g=document.getElementsByClassName(b)[0],e=parseInt(c),g.style.height=e+"px",e+=6,300>=e&&e>=295?(g.style.height="300px",d=document.getElementById("adContents"),null===d.firstChild&&(d.innerHTML=a.article_list[0].template.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")),clearTimeout(f),a.animating=!1,!1):void(f=setTimeout(function(){return v(b,e)},1))}}(this),w=function(){return function(a,b){var c,d,e;return e=document.getElementsByClassName(a)[0],c=parseInt(b),e.style.height=c+"px",c-=5,c<=parseInt(window.containerHeight)&&c>=parseInt(window.containerHeight)-5?(e.style.height=parseInt(window.containerHeight)+"px",clearTimeout(d),document.getElementsClassName("krg-ntv-overlay").style.display="none",!1):void(d=setTimeout(function(){return w(a,c)},1))}}(this),k=function(){return function(){parseInt(window.getComputedStyle(e).getPropertyValue("height"))<200&&(e=document.getElementsByClassName("krg-ntv-container")[0],window.containerHeight=parseInt(window.getComputedStyle(e).getPropertyValue("height"))+"px",e.style.height=window.containerHeight)}}(this),q=function(a){return function(){var b,c,d,f,g;if(!a.animating&&(a.animating=!0,e.classList.contains("krg-ntv-collapsed")))for(e.classList.add("krg-ntv-expanded"),e.classList.remove("krg-ntv-collapsed"),g=e.children,f=0,d=g.length;d>f;f+=1)c=g[f],c.classList.contains("krg-ntv-overlay")?(i("krg-ntv-overlay",0),b=window.getComputedStyle(document.getElementsByClassName("krg-ntv-container")[0]).getPropertyValue("height"),v("krg-ntv-container",b)):c.style.display=""}}(this),c=function(){return function(a){var b,c,d,f;if(a.stopPropagation(),e.classList.contains("krg-ntv-expanded"))for(e.classList.add("krg-ntv-collapsed"),e.classList.remove("krg-ntv-expanded"),f=e.children,d=0,c=f.length;c>d;d+=1)b=f[d],b.classList.contains("krg-ntv-overlay")?(j("krg-ntv-overlay",10),w("krg-ntv-container",300)):b.style.display=""}}(this),"undefined"!=typeof e.addEventListener&&"kargo_drop"===this.type?(d=document.getElementsByClassName("close_push")[0],d.addEventListener("click",c),e.addEventListener("click",k),e.addEventListener("click",q)):void 0},a.prototype.parsePageEntry=function(){var a,b;return b=this.options.template_html||"",a=b.replace(/(\r\n|\n|\r)/gm," "),a=a.replace(/(href=")+.[^"|']*/gm,'href="javascript:void(0)"')},a.prototype.destroy=function(){},a}(),AdType.Interstitial=function(){function a(a){this.ad=a,this.ad_wrapper=null,this.ad_table=null,this.ad_inner=null,this.ad_content=null,this.ad_inner_col2=null,this.ad_inner_col2_area=null,this.close_wrapper=null,this.close_link=null,this.ads_by=null,this.class_prefix="krg-int-",this.css=null,this.win=null,this.resize_timer=null,this.user_agent=Helper.getUserAgent(),this.event_functions=[],this.loading_check={timer:null,interval_speed:100,max_time:5e3,max_time_external_resources:2e3,started_external_resources:!1},this.prev_orientation="portrait",this.prev_overflow=null,this.load_success_callbacks=[],this.mask_extra_height=60,this.countdown_class=this.class_prefix+"countdown",this.is_iphone=this.user_agent.is_mobile&&"ios"===this.user_agent.os}return a.getDefaultOptions=function(){return{show_on_home:!1,load_success_callback:null,continue_callback:null,countdown_time:null,cookie_check:{enabled:!0,cookie_name:"krg_is_ck",expire_time:36e5,page_view_frequency:3,page_view_initial_offset:0,max_show_count:3},transparent:!1,force_show:!1,transition:"none",hide_close_link:!1,show_kargo_logo_tag:!0,theme:"dark",continue_text:"Continue",wrapper_override:!1}},a.preDrawConditionCheck=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;if(a.cookie_check){n=["expire_time","page_view_frequency","page_view_initial_offset","max_show_count"];for(i in n)h=n[i],a.cookie_check[h]=a.cookie_check[h]?parseInt(a.cookie_check[h]):AdType.Interstitial.getDefaultOptions().cookie_check[h]}if(g=!1,!a.show_on_home&&Helper.isHomepage()&&(g=1),Helper.mutationObserver||(g=2),g||(b=a.cookie_check,b.enabled&&!a.force_show&&(navigator.cookieEnabled&&(c=Helper.getCookie(b.cookie_name),e=c?c.split("|"):null,f=parseInt(e&&e.length>=2?e[1]:0),d=parseInt(e&&e.length>=2?e[0]:0),l=(new Date).getTime(),b.expire_time<18e4&&(b.expire_time=1e3*b.expire_time),l-d>=b.expire_time&&(d=0,f=0),f-=b.page_view_initial_offset,f<(b.max_show_count-1)*b.page_view_frequency+1&&(m=0===d?0:l-d,k=b.expire_time-m,j=(d||l)+"|"+(f+b.page_view_initial_offset+1),Helper.setCookie(b.cookie_name,j,k))),(!navigator.cookieEnabled||0>f||f>=b.max_show_count*b.page_view_frequency||f%b.page_view_frequency!==0)&&(g=3))),g)throw["Interstitial preDrawCondition fail ("+g+")",AdController.E_NOTICE]},a.prototype.display=function(){var a,b,c,d;if(this.options=this.ad.ad_config,this.options.wrapper_override===!0){if(this.ad_wrapper=this.options.wrapper,!this.ad_wrapper)throw null!=(d=this.ad.ad_unit)&&d.destroy(),["Wrapper no longer exists",AdController.E_ERROR];return c="none"===this.ad_wrapper.style.display?"":this.ad_wrapper.style.display,this.ad_wrapper.innerHTML=b,this.ad_wrapper.style.display="none",void this.ad.loadContentInto(this.ad_wrapper,this.ad.ad_content,{success:function(a){return function(){a.ad_wrapper.style.display=c,AdController.registerAdDisplay(a.ad),Helper.executeCallbackArray(a.ad.success_callback,a.ad),Helper.executeCallbackArray(a.ad.complete_callback,a.ad)}}(this),fail:function(a){return function(){a.destroy(),Helper.executeCallbackArray(a.ad.complete_callback,a.ad)}}(this)})}this.options.load_success_callback&&this.load_success_callbacks.push(this.options.load_success_callback),this.ad_uid="krg-wrapper-"+this.ad.id,b='<table cellspacing="0" id="'+this.ad_uid+'-table"><tr><td id="'+this.ad_uid+'-inner"><div id="'+this.ad_uid+'-content"></div></td><td id="'+this.ad_uid+'-inner-col2" style="display:none;"><div id="'+this.ad_uid+'-inner-col2-area"></div></td></tr></table>',this.ad_wrapper=document.createElement("div"),this.ad_wrapper.id=this.ad_uid,this.ad_wrapper.className="krg-int-wrapper",this.ad_wrapper.style.visibility="hidden",this.winResize(),this.ad_wrapper.style.left=.5*this.win.x+"px",this.ad_wrapper.style.opacity=1e-4,document.body.appendChild(this.ad_wrapper),this.ad_wrapper.innerHTML=b,this.ad_content=document.getElementById(this.ad_uid+"-content"),a=function(a){return function(){var b,c,d;a.prev_overflow=document.body.style.overflow,a.options.hide_close_link||(a.close_wrapper=document.createElement("div"),a.close_wrapper.id=a.ad_uid+"-close-wrapper",a.close_wrapper.innerHTML='<a href="#continue">'+(a.options.continue_text||"Continue")+"</a>",a.ad_content.parentNode.insertBefore(a.close_wrapper,a.ad_content),a.close_link=a.close_wrapper.getElementsByTagName("A")[0]),a.options.show_kargo_logo_tag&&(a.ads_by=document.createElement("div"),a.ads_by.id=a.ad_uid+"-ads-by",a.ads_by.innerHTML='<a href="http://www.kargo.com/privacy" target="_blank"><img src="http://storage.cloud.kargo.com/ad/network/tag/assets/interstitial/'+("dark"===a.options.theme?"ads_by_kargo_dark.png":"ads_by_kargo_light.png")+'" border="0" alt="Ads By Kargo" /></a>',a.ad_content.parentNode.insertBefore(a.ads_by,a.ad_content.nextSibling)),b="dark"===a.options.theme?"0,0,0":"255,255,255",a.options.continue_button||(a.options.continue_button="dark"===a.options.theme?{url:"http://storage.cloud.kargo.com/ad/network/tag/assets/interstitial/continue_arrow_dark.png",width:24,height:24}:{url:"http://storage.cloud.kargo.com/ad/network/tag/assets/interstitial/continue_arrow_light.png",width:6,height:11}),a.options.continue_button.width=parseInt(a.options.continue_button.width),a.options.continue_button.height=parseInt(a.options.continue_button.height),c="",d=.8,/slide/.test(a.options.transition)&&(c+=", left 0.8s",d=1.2),/fade/.test(a.options.transition)&&(c+=", opacity "+d+"s"),""!==c&&(c=c.substr(2)+" cubic-bezier(.72,.38,.17,.95)"),a.css=Helper.addCss("#"+a.ad_uid+" {position:fixed;top:0;z-index:2000000000;left:0;margin:0;padding-bottom:1px;background:rgb("+b+");background:rgba("+b+", "+(a.options.transparent?".85":"1.0")+");"+(""!==c?"-webkit-transition: "+c+";-moz-transition: "+c+";transition: "+c+";":"")+"}#"+a.ad_uid+"-inner {vertical-align:middle;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;overflow:hidden;}#"+a.ad_uid+"-close-wrapper {text-align:right;font-size:0;letter-spacing:0;word-spacing:0;line-height:0;margin:-10px 0 0 0;}#"+a.ad_uid+"-close-wrapper a {display:inline-block;"+("dark"===a.options.theme?'background:url("'+a.options.continue_button.url+'") no-repeat right center;background-size:'+a.options.continue_button.width+"px "+a.options.continue_button.height+"px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:300px;line-height:38px;font-family:Arial;font-weight:bold;font-size:11px;letter-spacing:0.1em;text-transform:uppercase;color:#FFF;height:38px;padding:0 "+(10+a.options.continue_button.width)+"px 0 5px;margin-bottom:4px;":'border:1px solid #CCC;background:#FFF url("'+a.options.continue_button.url+'") no-repeat right 15px center;background-size:'+a.options.continue_button.width+"px "+a.options.continue_button.height+"px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:300px;line-height:38px;font-family:Arial;font-weight:bold;font-size:10px;letter-spacing:0.1em;text-transform:uppercase;color:#000;height:38px;padding:0 "+(20+a.options.continue_button.width)+"px 0 15px;margin-bottom:10px;")+"box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;}#"+a.ad_uid+"-close-wrapper a."+a.countdown_class+" {position:relative;}#"+a.ad_uid+"-close-wrapper a."+a.countdown_class+" div {position:absolute;top:9px;width:19px;line-height:20px;font-size:15px;font-family:arial;font-weight:bold;text-align:center;"+("dark"===a.options.theme?"right:2px;background:#EE4E11;border-radius:14px;color:#FFF;":"right:4px;background:#FFF;")+"}#"+a.ad_uid+"-content img {display:inline-block;vertical-align:bottom;}#"+a.ad_uid+"-ads-by {text-align:right;}#"+a.ad_uid+"-ads-by a {display:inline-block;margin:0;line-height:0;float:right;padding:6px 0 10px 10px;}#"+a.ad_uid+"-ads-by img {display:inline-block;width:75px;margin:0;vertical-align:bottom;}#"+a.ad_uid+"-table {margin:0 auto;padding:0;width:auto;}#"+a.ad_uid+"-table td {padding:0;}#"+a.ad_uid+"-inner-col2 {vertical-align:top;}#"+a.ad_uid+"-inner-col2-area {position:relative;min-width:115px;}#"+a.ad_uid+"-inner #"+a.ad_uid+"-ads-by a {padding-bottom:19px;}#"+a.ad_uid+"-inner-col2 #"+a.ad_uid+"-close-wrapper {position:absolute;right:0;margin-top:-31px;top:50%;}#"+a.ad_uid+"-inner-col2 #"+a.ad_uid+"-close-wrapper a {padding-bottom:20px;}#"+a.ad_uid+"-inner-col2 #"+a.ad_uid+"-ads-by {position:absolute;right:0;bottom:0;}."+a.class_prefix+"oob-y #"+a.ad_uid+"-inner {vertical-align:top;}."+a.class_prefix+"oob-y #"+a.ad_uid+"-inner #"+a.ad_uid+"-ads-by {position:absolute;top:0;}."+a.class_prefix+"oob-y #"+a.ad_uid+"-inner #"+a.ad_uid+"-ads-by a {padding:17px 10px 10px 0;}."+a.class_prefix+"oob-x #"+a.ad_uid+"-table {float:right;}"),a.ad_table=document.getElementById(a.ad_uid+"-table"),a.ad_inner=document.getElementById(a.ad_uid+"-inner"),a.ad_inner_col2=document.getElementById(a.ad_uid+"-inner-col2"),a.ad_inner_col2_area=document.getElementById(a.ad_uid+"-inner-col2-area"),a.close_wrapper&&a.bindEvent(a.close_wrapper.getElementsByTagName("A")[0],"click",function(b){var c,d;b.preventDefault(),Helper.hasClass(a.close_link,a.countdown_class)||(c=(new Date).getTime()-a.ad.display_timestamp,250>c||(a.destroy(),"function"==typeof(d=a.options).continue_callback&&d.continue_callback()))}),a.load_listener_check_time=a.loading_check.max_time,a.loading_check.timer=setInterval(function(){a.loadListener(),(a.load_listener_check_time-=a.loading_check.interval_speed)<=0&&(clearInterval(a.loading_check.timer),a.destroy(!0))},a.loading_check.interval_speed)}}(this),this.winResize(),this.setupMonitoring(),this.ad.loadContentInto(this.ad_content,this.ad.ad_content,{success:function(b){return function(){a(),AdController.registerAdDisplay(b.ad,!1),Helper.executeCallbackArray(b.ad.success_callback,b.ad),Helper.executeCallbackArray(b.ad.complete_callback,b.ad)}}(this),fail:function(a){return function(){a.destroy()}}(this),update:function(a){return function(){a.winResize()}}(this)})},a.prototype.loadListener=function(){var a,b,c,d;for(a=this.ad_content.childNodes,b=c=0,d=a.length;d>c;b=c+=1)if(1===a[b].nodeType&&"SCRIPT"!==a[b].tagName.toUpperCase()){this.ad_content.offsetWidth>30&&this.ad_content.offsetHeight>30?(this.adLoaded(),clearInterval(this.loading_check.timer)):this.loading_check.started_external_resources||(this.loading_check.started_external_resources=!0,this.load_listener_check_time=Math.max(this.loading_check.max_time_external_resources,this.load_listener_check_time));break}},a.prototype.preventScroll=function(a){a.preventDefault()},a.prototype.adLoaded=function(){var a,b,c,d;if(this.bindEvent(document.body,"touchmove",function(a){return function(b){a.preventScroll(b)}}(this)),document.body.style.overflow="hidden",this.options.countdown_time>0&&this.close_link&&(b=Math.min(parseInt(this.options.countdown_time),10),a=document.createElement("div"),Helper.addClass(this.close_link,this.countdown_class),a.innerHTML=b,this.close_link.appendChild(a),this.countdown_timer=setInterval(function(c){return function(){b-=1,a.innerHTML=b,0>=b&&(clearInterval(c.countdown_timer),a.parentNode.removeChild(a),Helper.removeClass(c.close_link,c.countdown_class))}}(this),1e3)),setTimeout(function(a){return function(){a.ad_wrapper.style.zIndex=2000000099}}(this),0),/interactive|complete/.test(document.readyState)?setTimeout(function(a){return function(){a.ad_wrapper.style.zIndex=2147483647}}(this),100):this.bindEvent(window,"load",function(a){return function(){a.winResize(),setTimeout(function(){a.ad_wrapper.style.zIndex=2147483647},0)}}(this)),d="onorientationchange"in window?"orientationchange":"resize",this.bindEvent(window,d,function(a){return function(){a.winResize(),Helper.setIntervalWithCap(function(){a.winResize()},200,4)}}(this)),setTimeout(function(a){return function(){a.winResize()}}(this),0),this.ad_wrapper.style.visibility="",setTimeout(function(a){return function(){return a.ad_wrapper.style.left="",a.ad_wrapper.style.opacity=1}}(this),100),this.load_success_callbacks.length>0)for(c in this.load_success_callbacks)this.load_success_callbacks[c]()},a.prototype.setupMonitoring=function(){var a,b,c,d,e,f,g,h,i,j,k;Helper.mutationObserver&&(j=0,a=null,f=[],g=[],i=function(){return function(a){j++,a.setAttribute("data-krg-is-passed-node","true")}}(this),h=function(){return function(a){j--,a.removeAttribute("data-krg-is-passed-node")}}(this),c=function(a){return function(b){var c,d,e,f,g,h,i,j,k;return b.offsetWidth>0&&b.offsetHeight>0&&"none"!==b.style.display&&"hidden"!==b.style.visibility&&(j=b.getBoundingClientRect(),g=Math.max(0,-1*j.left),h=j.right-a.win.x,h=Math.max(0,h),i=Math.max(0,-1*j.top),f=j.bottom-a.win.y,f=Math.max(0,f),k=j.width-(g+h),c=j.height-(i+f),e=200,d=200,k>=e&&c>=d&&b.style.zIndex>2e9)?!0:!1}}(this),k=function(){return function(a){a.removeAttribute("data-krg-is-monitoring","true")}}(this),e=function(){return function(b){var e,k;b&&"true"!==b.getAttribute("data-krg-is-monitoring")&&(g.push(b),b.setAttribute("data-krg-is-monitoring","true"),k=10,e=0,f.push(setInterval(function(){c(b)?"true"!==b.getAttribute("data-krg-is-passed-node")&&(e++,e>2&&(i(b),clearTimeout(a),a=setTimeout(function(){d()},250))):(e=0,"true"===b.getAttribute("data-krg-is-passed-node")&&(h(b),0>=j&&(j=0,clearTimeout(a))))},100)))}}(this),b=new Helper.mutationObserver(function(){return function(a){var b,c,d,f,g,h,i;for(d=0,g=a.length;g>d;d++)for(c=a[d],i=c.addedNodes,f=0,h=i.length;h>f;f++)b=i[f],e(b)}}(this)),b.observe(document.body,{childList:!0}),d=function(a){return function(){var c,d,e,h,i,j;for(e=0,i=f.length;i>e;e++)d=f[e],clearInterval(d);for(h=0,j=g.length;j>h;h++)c=g[h],c.removeAttribute("data-krg-is-monitoring"),c.removeAttribute("data-krg-is-passed-node");b.disconnect(),a.ad_wrapper.style.display="none",a.destroy(!0)}}(this))},a.prototype.winResize=function(){var a;return this.win=Helper.getWindowSize(),this.win.orientation!==this.prev_orientation?void setTimeout(function(a){return function(){a.ad_inner_col2&&("portrait"===a.prev_orientation?(a.ad_inner_col2.style.width="100%",a.close_wrapper&&a.ad_inner_col2_area.appendChild(a.close_wrapper),a.options.show_kargo_logo_tag&&a.ad_inner_col2_area.appendChild(a.ads_by),a.ad_inner_col2.style.display=""):(a.ad_content.style.paddingLeft=a.ad_inner_col2.style.paddingRight=0,a.close_wrapper&&a.ad_content.parentNode.insertBefore(a.close_wrapper,a.ad_content),a.options.show_kargo_logo_tag&&a.ad_content.parentNode.insertBefore(a.ads_by,a.ad_content.nextSibling),a.ad_inner_col2_area.style.height="",a.ad_inner_col2.style.display="none"),a.prev_orientation=a.win.orientation,a.winResize())}}(this),0):(a=function(a){return function(){var b,c;a.ad_inner&&(a.ad_wrapper.style.width="100%",a.ad_wrapper.style.height="100%",a.ad_inner.style.height=a.win.y+"px",clearTimeout(a.resize_timer),a.resize_timer=setTimeout(function(){a.win.y<a.ad_inner.offsetHeight?Helper.addClass(a.ad_wrapper,a.class_prefix+"oob-y"):(Helper.removeClass(a.ad_wrapper,a.class_prefix+"oob-y"),a.win.y<a.ad_inner.offsetHeight&&Helper.addClass(a.ad_wrapper,a.class_prefix+"oob-y")),a.win.x<a.ad_table.offsetWidth?Helper.addClass(a.ad_wrapper,a.class_prefix+"oob-x"):Helper.removeClass(a.ad_wrapper,a.class_prefix+"oob-x")},100),"landscape"===a.win.orientation&&(a.ad_inner_col2_area.style.height=a.win.y+"px",b=10,a.ad_content.offsetWidth+((null!=(c=a.close_wrapper)?c.offsetWidth:void 0)||0)<=a.win.x-2*b?(a.ad_content.style.paddingLeft=b+"px",a.ad_inner_col2.style.paddingRight=b+"px"):a.ad_content.style.paddingLeft=a.ad_inner_col2.style.paddingRight=0))}}(this),void(this.is_iphone?setTimeout(function(b){return function(){var c,d,e;a(),c=0,"landscape"===b.win.orientation&&(b.is_iphone&&b.user_agent.os_version<7||"other"===b.user_agent.browser)&&(c=60),null!=(d=b.ad_inner)&&(d.style.height=b.win.y-c+"px"),null!=(e=b.ad_inner)&&(e.style.paddingTop=c+"px")}}(this),0):a()))},a.prototype.bindEvent=function(a,b,c){var d,e,f;if(a){d=b.split(" ");for(f in d)e=d[f],this.event_functions.push({element:a,event_type:e,event_function:c}),a.addEventListener(e,c)}},a.prototype.destroy=function(a){var b,c,d,e;for(null==a&&(a=!1),e=this.event_functions,c=0,d=e.length;d>c;c++)b=e[c],b.element.removeEventListener(b.event_type,b.event_function);this.event_functions.length=0,null!==this.prev_overflow&&(document.body.style.overflow=this.prev_overflow),a?(Helper.removeElements([this.ad_inner_col2,this.close_wrapper,this.ads_by]),AdController.logMessage(["Interstitial busted out",AdController.E_NOTICE],this.ad,"INTERSTITIAL_BUST_OUT")):this.ad_wrapper&&this.options.wrapper_override===!0?this.ad_wrapper.parentNode.removeChild(this.ad_wrapper):Helper.removeElements([this.ad_wrapper,this.ad_content,this.css]),AdController.destroyAd(this.ad,!0,!(a&&window.mraid))},a}(),PAGE_LOGO="krg-ss-logo",SS_LOC="krg-ss-loc",SS_LOC_ABOVE="krg-ss-loc-pabove",SS_LOC_BELOW="krg-ss-loc-pbelow",CLASS_SS_ACTIVE="krg-ss-active",CLASS_SS_CONTAINER="krg-ss-container",CLASS_SS_LAYER1="krg-ss-container-layer1",CLASS_SS_LAYER2="krg-ss-container-layer2",CLASS_SS_OVERLAY="krg-ss-overlay",AdType.SiteSkin=function(){function a(a){this.ad=a,this.logo=null,this.ad_wrapper=null,this.ad_inner=null,this.ss_style=null,this.is_loaded=!1,this.config=null,this.logo_spacing=5,this.css=""}return a.getDefaultOptions=function(){return{insert_position:null,ignore_logo:!1,show_kargo_logo_tag:!0}},a.prototype.display=function(){this.options=this.ad.ad_config,this.config=this.ad.ad_content,this.adLoaded()},a.prototype.adLoaded=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n;if(null===this.config)return void this.destroy();if(d={cancel_num:{SiteSkin:"all",Hover:"all"}},this.ad.global_overrides=Helper.mergeRecursive(this.ad.global_overrides||{},d),AdController.registerAdDisplay(this.ad),f=!!this.config.ad.images,f&&(this.config.css=this.config.css||"",b="",(null!=(l=this.config.ad.images.background)?l.url:void 0)?(k=new Image,k.onload=function(a){return function(){a.config.ad.height/k.height*k.width<1&&setTimeout(function(){var a,b;null!=(b=(a=document.getElementsByClassName(CLASS_SS_LAYER1)).length>0)||(a[0].style.backgroundSize={"1px 100%":null})},0),k=null}}(this),k.src=this.config.ad.images.background.url,b="."+CLASS_SS_LAYER1+" {background:"+(this.config.ad.images.background.color?" "+this.config.ad.images.background.color:"")+' url("'+this.config.ad.images.background.url+'")'+(this.config.ad.images.background.repeat&&"none"!==this.config.ad.images.background.repeat?" "+this.config.ad.images.background.repeat:" no-repeat")+(this.config.ad.images.background.position?" "+this.config.ad.images.background.position:" center")+" center;background-size: auto 100%;}"):(null!=(m=this.config.ad.images.background)?m.color:void 0)&&(b="."+CLASS_SS_LAYER1+" {background: "+this.config.ad.images.background.color+"}"),(null!=(n=this.config.ad.images.main)?n.url:void 0)&&(b+="."+CLASS_SS_LAYER2+' {background: url("'+this.config.ad.images.main.url+'") no-repeat'+(this.config.ad.images.main.position?" "+this.config.ad.images.main.position:" center")+" center;background-size: auto 100%;}"),this.config.css=this.config.css+b),!this.options.ignore_logo){if((h=document.getElementById(PAGE_LOGO))&&Helper.addClass(h,PAGE_LOGO),0===(h=document.getElementsByClassName(PAGE_LOGO)).length)return void this.destroy();h.length>0&&(h=h[0]),"A"!==h.tagName.toUpperCase()&&(i=h.getElementsByTagName("A"),i.length>0&&(h=i[0])),this.logo=h}(g=document.getElementsByClassName(SS_LOC_ABOVE)).length>0?this.options.insert_position="above":(g=document.getElementsByClassName(SS_LOC_BELOW)).length>0?this.options.insert_position="below":(g=document.getElementsByClassName(SS_LOC)).length>0||(g=null),null!==g&&g.length>0&&(g=g[0]),a=this.createAdWrapper(),null===g?document.body.insertBefore(a,document.body.firstChild):"below"===this.options.insert_position?g.parentNode.insertBefore(a,g.nextSibling):g.parentNode.insertBefore(a,g),j=document.createElement("style"),j.innerHTML=this.css+(this.config.css?this.config.css:""),document.body.appendChild(j),this.ad_wrapper=a,this.config.html&&(c=document.createElement("div"),c.className="moatSiteSkin",c.style.zIndex=97,c.style.margin="0 auto",this.config.ad.width&&(c.style.width=this.config.ad.width+"px"),this.ad_inner.appendChild(c),e=this.config.html.replace(/&lt;/g,"<").replace(/&gt;/g,">"),this.ad.loadContentInto(c,e,{success:function(){return function(){}
}(this),fail:function(a){return function(){a.destroy()}}(this)})),this.ss_style=j,this.options.ignore_logo||(this.logo.style.display="none"),document.body.className=(document.body.className?document.body.className+" ":"")+CLASS_SS_ACTIVE,Helper.executeCallbackArray(this.ad.success_callback,this.ad),Helper.executeCallbackArray(this.ad.complete_callback,this.ad),Plugin.VisibilityMonitoring.addMonitoredElement(this.ad.id,this.ad_wrapper)},a.prototype.createAdWrapper=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(d=this.config.ad,e=this.config.logo,a=document.createElement("div"),b=a,c=document.createElement("div"),f=document.createElement("a"),a.appendChild(c),c.appendChild(f),a.className=CLASS_SS_CONTAINER+" "+CLASS_SS_LAYER1,a.style.width="100%",a.style.height=d.height+"px",a.style.margin="0",a.style.position="relative",this.css+="."+CLASS_SS_CONTAINER+" a { background-color: transparent !important; }",this.ad_inner=c,c.className=CLASS_SS_LAYER2,c.style.width=f.style.width="100%",c.style.height=f.style.height=d.height+"px",c.style.position="absolute",c.style.top=c.style.left=0,d.impression_url||d.impression_urls)for(j=d.impression_url||d.impression_urls,Helper.isArray(j)||(j=[j]),m=0,o=j.length;o>m;m++)i=j[m],l=document.createElement("img"),c.appendChild(l),l.src=i,l.style.display="block",l.style.position="absolute",l.style.width=l.style.height="1px",l.style.top=l.style.left=0,l.style.visibility="hidden";if(f.className=CLASS_SS_OVERLAY,f.style.display=d.click_url?"block":"none",f.style.position="absolute",f.style.top=f.style.left=0,d.click_url&&(f.href=d.click_url),f.target="_blank",f.style.zIndex=98,this.css+="."+CLASS_SS_OVERLAY+" { background: transparent !important; }",!this.options.ignore_logo)for(g=this.logo.cloneNode(!0),a.appendChild(g),g.id="",g.style.display="block",g.style.position="absolute",g.style.maxWidth=e.max_width+"px",g.style.maxHeight=e.max_height+"px",g.style.margin=0,k=e.position.replace("_"," ").trim().split(" "),("center"===k[0]||"middle"===k[0])&&(k=k.slice(1),k[1]="center"),g.style.zIndex=99,g.style.top=g.style.bottom=g.style.left=g.style.right="auto",h=n=0,p=Math.max(k.length,2);p>n;h=n+=1)switch(k[h]){case"top":g.style.top=this.logo_spacing+"px";break;case"bottom":g.style.bottom=this.logo_spacing+"px";break;case"left":g.style.left=this.logo_spacing+"px";break;case"right":g.style.right=this.logo_spacing+"px";break;case"middle":case"center":"auto"===g.style.left&&"auto"===g.style.right?(g.style.left="auto",g.style.left="50%",setTimeout(function(){return function(){g.style.marginLeft="-"+Math.min(g.offsetWidth,e.max_width)/2+"px"}}(this),0)):setTimeout(function(){return function(){g.style.top=(d.height-Math.min(g.offsetHeight,e.max_height))/2+"px"}}(this),0)}return a},a.prototype.destroy=function(){var a;a=!!this.ad_wrapper,a&&(this.ad_wrapper.parentNode.removeChild(this.ad_wrapper),this.ss_style.parentNode.removeChild(this.ss_style),this.options.ignore_logo||(this.logo.style.display=""),document.body.className=(" "+document.body.className+" ").replace(" "+CLASS_SS_ACTIVE+" ","").trim()),AdController.destroyAd(this.ad),Plugin.VisibilityMonitoring.removeMonitoredElement(this.ad.id),a||(Helper.executeCallbackArray(this.ad.fail_callback,this.ad),Helper.executeCallbackArray(this.ad.complete_callback,this.ad))},a}(),Plugin.AdSequential={cookie_name:"krg_trgtng_sqntl",getTargetingStatus:function(){var a,b,c,d,e,f,g,h,i,j;if(a=Helper.getCookie(this.cookie_name),h="",a){for(f=(new Date).getTime(),g="@REMOVE@",b=!1,e=0,a=a.split(","),d=i=0,j=a.length;j>i;d=++i)c=a[d],c=c.split(":"),parseInt(c[3])>f?(h=(h?",":"")+c[0]+":"+c[1],parseInt(c[3])>e&&(e=parseInt(c[3]))):(b=!0,a[d]=g);if(b){for(d=0;d<a.length;d++)a[d]==g&&(a.splice(d,1),d--);Helper.setCookie(this.cookie_name,a.join(","),e-(new Date).getTime())}}return h},getGroupStatus:function(a,b){var c,d,e,f;if(null==b&&(b=null),c=Helper.getCookie(this.cookie_name))for(c=c.split(","),e=0,f=c.length;f>e;e++)if(d=c[e],d=d.split(":"),d[0]===a&&(null===b||parseInt(d[1])===b))return{group_id:d[0],sequence:parseInt(d[1]),times_shown:parseInt(d[2]),expire_timestamp:parseInt(d[3])};return null},updateGroupStatus:function(a,b){var c,d,e,f,g,h,i,j;for(c=Helper.getCookie(this.cookie_name),c=c?c.split(","):[],d=!1,h=a+":"+b.sequence+":"+b.times_shown+":"+b.expire_timestamp,g=0,f=i=0,j=c.length;j>i;f=++i)e=c[f],e=e.split(":"),e[0]===a?(d=!0,c[f]=h):parseInt(e[3])>g&&(g=parseInt(e[3]));d||c.push(h),b.expire_timestamp>g&&(g=b.expire_timestamp),Helper.setCookie(this.cookie_name,c.join(","),g-(new Date).getTime()),__KARGO_TESTING__&&kargo_console_log("Plugin.AdSequential.updateGroupStatus()",c.join(","),g-(new Date).getTime())},processAdResponse:function(a){var b,c;__KARGO_TESTING__&&kargo_console_log("Plugin.AdSequential.processAdResponse()",a),null!=a.group_id&&null!=a.sequence&&(a.sequence=parseInt(a.sequence),a.frequency=a.frequency?parseInt(a.frequency):1,a.expire=a.expire?parseInt(a.expire):1051200,c=0,null!==(b=this.getGroupStatus(a.group_id,a.sequence))&&(c=b.times_shown),b={sequence:a.sequence,times_shown:c+1,expire_timestamp:(new Date).getTime()+60*a.expire*1e3},b.times_shown>=a.frequency&&(b.sequence++,b.times_shown=0),this.updateGroupStatus(a.group_id,b))}},Plugin.VisibilityMonitoring={setup_flag:!1,monitored_elements:{},visible_count:0,hidden_count:0,interval_timer:null,init:function(){var a;this.setup_flag||(this.setup_flag=!0,Helper.bindEventCallback("AdTagPublic.reset()",function(a){return function(){a.monitored_elements={},a.visible_count=0,a.hidden_count=0}}(this)),a="onorientationchange"in window?"orientationchange":"resize",Helper.addEventListener(window,a,function(a){return function(){return a.checkVisibility()}}(this)),Helper.addEventListener(window,"scroll",function(a){return function(){return a.checkVisibility()}}(this)),this.interval_timer=setInterval(function(a){return function(){a.checkVisibility()}}(this),500))},addMonitoredElement:function(a,b,c){null==c&&(c=null),this.monitored_elements[a]={wrapper:b,is_visible:Helper.isElementInView(b),change_callback:c},this.checkVisibility()},removeMonitoredElement:function(a){this.monitored_elements[a]&&(delete this.monitored_elements[a],this.checkVisibility())},check_visibility_lock:!1,checkVisibility:function(){var a,b,c,d,e,f;if(0!==Helper.getObjectSize(this.monitored_elements)&&!this.check_visibility_lock){this.check_visibility_lock=!0,e=a=0,f=this.monitored_elements;for(c in f)d=f[c],b=Helper.isElementInView(d.wrapper),b?e++:a++,b!==d.is_visible&&"function"==typeof d.change_callback&&d.change_callback(b);0===this.visible_count&&e>0?(__KARGO_TESTING__&&kargo_console_log("Plugin.VisibilityMonitoring.checkVisibility() >> some_shown",e,a),Helper.executeEventCallbacks("Helper.checkVisibility().some_shown",[this.monitored_elements])):this.visible_count>0&&0===e&&(__KARGO_TESTING__&&kargo_console_log("Plugin.VisibilityMonitoring.checkVisibility() >> none_shown",e,a),Helper.executeEventCallbacks("Helper.checkVisibility().none_shown",[this.monitored_elements])),this.visible_count=e,this.hidden_count=a,this.check_visibility_lock=!1}}},_GRAPESHOT_DEFAULT_CHANNEL="DEFAULT",ThirdParty.Grapeshot={status:null,is_disabled:!1,gs_channel:_GRAPESHOT_DEFAULT_CHANNEL,gs_channels_all:_GRAPESHOT_DEFAULT_CHANNEL,gs_channels_all_safe:"",load_timeout:2e3,STATUS_INIT:2,STATUS_DONE:3,init_num:0,reset:function(){this.status=null,this.gs_channel=_GRAPESHOT_DEFAULT_CHANNEL,this.gs_channels_all=_GRAPESHOT_DEFAULT_CHANNEL,this.gs_channels_all_safe=""},init:function(){var a,b,c,d,e,f;this.status||AdController.stop_ad_processing||this.is_disabled||(this.status=this.STATUS_INIT,this.init_num++,f=this.init_num,AdController.setShowLock(),b=Helper.createHiddenIframe(),c=b.contentWindow.document||b.contentDocument,d=document.createElement("script"),d.src="http://kargo.gscontxt.net/main/channels.cgi?url="+encodeURIComponent(window.location.href.split("?")[0]),a=function(a){return function(){a.status=a.STATUS_DONE,AdController.clearShowLock()}}(this),e=setTimeout(function(b){return function(){__KARGO_TESTING__&&kargo_console_log("ThirdParty.Grapeshot.init() >> timeout"),f===b.init_num&&b.status!==b.STATUS_DONE&&a()}}(this),this.load_timeout),d.onload=function(c){return function(){var d,g,h,i,j,k,l,m,n;if(clearTimeout(e),f===c.init_num){if(__KARGO_TESTING__&&kargo_console_log("ThirdParty.Grapeshot.init() >> script onload"),c.gs_channels_all=b.contentWindow.gs_channels.replace(/\+/g," ")||_GRAPESHOT_DEFAULT_CHANNEL,c.gs_channels_all_safe="",c.gs_channel=null,g=c.gs_channels_all.split(" "),1===g.length)c.gs_channel=c.gs_channels_all;else{for(i=[],h=[],j=k=0,m=g.length;m>k;j=++k){if(d=g[j],Helper.startsWith(d,"gv_")){c.gs_channel=d;break}Helper.startsWith(d,"kg_")?i.push(d):h.push(d)}c.gs_channel||(h.push(_GRAPESHOT_DEFAULT_CHANNEL),c.gs_channel=i.length>0?i[0]:h[0])}for(j=l=0,n=g.length;n>l;j=++l)d=g[j],Helper.startsWith(d,"gv_")||d===_GRAPESHOT_DEFAULT_CHANNEL||(c.gs_channels_all_safe+=(""===c.gs_channels_all_safe?"":" ")+d);__KARGO_TESTING__&&kargo_console_log("ThirdParty.Grapeshot.init() >> @gs_channel =",c.gs_channel),__KARGO_TESTING__&&kargo_console_log("ThirdParty.Grapeshot.init() >> @gs_channels_all =",c.gs_channels_all),__KARGO_TESTING__&&kargo_console_log("ThirdParty.Grapeshot.init() >> @gs_channels_all_safe =",c.gs_channels_all_safe),c.status!==c.STATUS_DONE&&a()}document.body.removeChild(b)}}(this),c.body.appendChild(d))}},_IS_IN_IFRAME||(Helper.bindEventCallback("AdController.setDefaultSettings()",function(){((AdController.global_config||{}).settings||{}).enable_grapeshot===!1?ThirdParty.Grapeshot.is_disabled=!0:(ThirdParty.Grapeshot.reset(),AdController.ad_override_source||ThirdParty.Grapeshot.init())}),Helper.bindEventCallback("AdController.queueAd().cb.pre",function(a){ThirdParty.Grapeshot.is_disabled||(a.target_params.GS_CHANNEL=ThirdParty.Grapeshot.gs_channel,a.target_params.GS_UNSAFE=0===(ThirdParty.Grapeshot.gs_channel||"").indexOf("gv_")?"true":ThirdParty.Grapeshot.gs_channel===_GRAPESHOT_DEFAULT_CHANNEL?"maybe":"false",a.target_params.GS_CHANNELS_ALL=ThirdParty.Grapeshot.gs_channels_all)})),ThirdParty.Lotame={status:null,is_disabled:!1,audiences_all:{},is_third_party_tpid:!1,tpid:null,load_timeout:2e3,STATUS_INIT:2,STATUS_DONE:3,post_sent:!1,lotame_id:"4255",reset:function(){this.status=null,this.audiences_all={},this.is_third_party_tpid=!1,this.tpid=null,this.post_sent=!1},getUserInfo:function(){var a,b,c;return b=Helper.getCookie("_KDSI"),c=Helper.getCookie("_KDSIR"),b&&c===b?void Helper.executeEventCallbacks("ThirdParty.Lotame.getUserInfo().complete"):(a={},b&&(a.id=b),void Helper.loadAjax("http://ud.kargo.com/s?pl="+btoa(JSON.stringify(a)),{success:function(){return function(c){try{a=JSON.parse(atob(c)),b!==a.id&&(b=a.id,Helper.setCookie("_KDSI",b)),Helper.setCookie("_KDSIR",b,36e5,!0)}catch(d){}}}(this),complete:function(){return function(){Helper.executeEventCallbacks("ThirdParty.Lotame.getUserInfo().complete")}}(this)},2e3,!0,!0,null,!0,!0))},sendPost:function(a){__KARGO_TESTING__&&kargo_console_log("ThirdParty.Lotame.sendPost()"),Helper.loadScript(["http://tags.crwdcntrl.net/c/"+this.lotame_id+"/cc.js?ns=_cc"+this.lotame_id,"LOTCC_"+this.lotame_id],{success:function(b){return function(){var c,d,e,f,g;if(e=window["_cc"+b.lotame_id]){__KARGO_TESTING__&&kargo_console_log("ThirdParty.Lotame.sendPost() >> script onload",e),g=a.target_params;for(c in g)f=g[c],/^(AGE|GENDER|DMA|ETHNICITY|SEEKING|INCOME|MARITAL|EDUCATION)$/.test(c.toUpperCase())&&e.add("genp",f);ThirdParty.Grapeshot.gs_channels_all_safe&&e.add("seg",ThirdParty.Grapeshot.gs_channels_all_safe),"ios"===Helper.getUserAgent().os&&navigator.cookieEnabled&&(d=Helper.getCookie("_KDSI"))&&(e.add("tp","KRGO"),e.add("tpid",d)),e.bcp(),Helper.bindEventCallback("AdTagPublic.reset()",function(){delete window["_cc"+b.lotame_id]},!0)}}}(this),complete:function(a){return function(){a.status!==a.STATUS_DONE&&(a.status=a.STATUS_DONE,AdController.clearShowLock())}}(this)},this.load_timeout,!0,!0,!0,!1,!0)},loadInitScript:function(a){Helper.loadScript(a,{success:function(a){return function(){var b,c,d,e,f,g,h;__KARGO_TESTING__&&kargo_console_log("ThirdParty.Lotame.init() >> script onload"),d=(window["ccauds_"+a.lotame_id]||{}).Profile||{},a.is_third_party_tpid||(a.tpid=d.tpid||null),a.audiences_all={},h=d.Audiences||{};for(c in h)for(e=h[c],f=0,g=e.length;g>f;f++)b=e[f],b.id&&(b.name||b.abbr)&&(a.audiences_all[b.id]=b.name||b.abbr);delete window["ccauds_"+a.lotame_id],__KARGO_TESTING__&&kargo_console_log("ThirdParty.Lotame.init() >> response =",d),__KARGO_TESTING__&&kargo_console_log("ThirdParty.Lotame.init() >> @tpid =",a.tpid),__KARGO_TESTING__&&kargo_console_log("ThirdParty.Lotame.init() >> @audiences_all =",a.audiences_all)}}(this),complete:function(a){return function(){a.status!==a.STATUS_DONE&&(a.status=a.STATUS_DONE,AdController.clearShowLock())}}(this)},this.load_timeout,!0,!0,!0,!0)},init:function(){var a;this.status||AdController.stop_ad_processing||this.is_disabled||(this.status=this.STATUS_INIT,AdController.setShowLock(),a="http://ad.crwdcntrl.net/5/c="+this.lotame_id+"/pe=y/var=ccauds_"+this.lotame_id,"ios"===Helper.getUserAgent().os&&navigator.cookieEnabled?(Helper.bindEventCallback("ThirdParty.Lotame.getUserInfo().complete",function(b){return function(){var c;return c=Helper.getCookie("_KDSI"),"optout"===c?void AdController.clearShowLock():(c&&(b.is_third_party_tpid=!0,b.tpid=c,a+="/tp=KRGO/tpid="+c),void b.loadInitScript(a))}}(this),!0),this.getUserInfo()):this.loadInitScript(a))}},_IS_IN_IFRAME||(Helper.bindEventCallback("AdController.setDefaultSettings()",function(){var a;a=/ad-tag.|adtag.|intouchweekly.com|lifeandstylemag.com|fitpregnancy.com|mensfitness.com|nationalenquirer.com|okmagazine.com|radaronline.com|shape.com|food52.com|x17online.com|billboard.com|hollywoodreporter.com/.test(window.location.hostname.toLowerCase()),((AdController.global_config||{}).settings||{}).enable_lotame===!0||a?(ThirdParty.Lotame.reset(),AdController.ad_override_source||ThirdParty.Lotame.init()):ThirdParty.Lotame.is_disabled=!0}),Helper.bindEventCallback("AdController.queueAd().cb.pre",function(a){var b,c,d,e,f;if(!ThirdParty.Lotame.is_disabled){c="",d="",f=ThirdParty.Lotame.audiences_all;for(b in f)e=f[b],c+=(""===c?"":" ")+b,d+=(""===d?"":" ")+e+"-"+b;""!==c&&(a.target_params.kaud=c),""!==d&&(a.target_params.kaudv=d),ThirdParty.Lotame.post_sent||(ThirdParty.Lotame.post_sent=!0,ThirdParty.Lotame.sendPost(a))}})),AdTagPublic.setTargetParams(),Helper.bindEventCallback("global_ad_pre_setup",function(){return AdController.setDefaultSettings()}),Helper.bindEventCallback("page_ready",function(){Helper.executeEventCallbacks("global_ad_pre_setup"),_IS_IN_IFRAME||Helper.executeEventCallbacks("global_ad_pre_setup_top_window"),AdController.show_start||AdController.showNext()},!0),Helper.isDocReady()&&!AdController.show_start?setTimeout(function(){return function(){Helper.executeEventCallbacks("page_ready")}}(this),0):Helper.addEventListener(window,"DOMContentLoaded",function(){Helper.doc_is_ready=!0,Helper.executeEventCallbacks("page_ready")},!1),"function"==typeof(_base=window.Kargo).js_loaded_callback&&_base.js_loaded_callback(AdTagPublic),window.Kargo=AdTagPublic}}).call(this),function(){function a(a,h){a=a||"",h=h||{};for(var i in b)b.hasOwnProperty(i)&&(h.autoFix&&(h["fix_"+i]=!0),h.fix=h.fix||h["fix_"+i]);var j=[],k=function(a){return"string"==typeof a?a.replace(/(&#\d{1,4};)/gm,function(a){var b=a.substring(2,a.length-1);return String.fromCharCode(b)}):a},l=function(b){a+=b},m=function(b){a=b+a},n={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},o={comment:function(){var b=a.indexOf("-->");return b>=0?{content:a.substr(4,b),length:b+3}:void 0},endTag:function(){var b=a.match(d);return b?{tagName:b[1],length:b[0].length}:void 0},atomicTag:function(){var b=o.startTag();if(b){var c=a.slice(b.length);if(c.match(new RegExp("</\\s*"+b.tagName+"\\s*>","i"))){var d=c.match(new RegExp("([\\s\\S]*?)</\\s*"+b.tagName+"\\s*>","i"));if(d)return{tagName:b.tagName,attrs:b.attrs,content:d[1],length:d[0].length+b.length}}}},startTag:function(){var b=a.match(c);if(b){var d={};return b[2].replace(e,function(a,b){var c=arguments[2]||arguments[3]||arguments[4]||f.test(b)&&b||null;d[b]=k(c)}),{tagName:b[1],attrs:d,unary:!!b[3],length:b[0].length}}},chars:function(){var b=a.indexOf("<");return{length:b>=0?b:a.length}}},p=function(){for(var b in n)if(n[b].test(a)){g&&console.log("suspected "+b);var c=o[b]();return c?(g&&console.log("parsed "+b,c),c.type=c.type||b,c.text=a.substr(0,c.length),a=a.slice(c.length),c):null}},q=function(a){for(var b;b=p();)if(a[b.type]&&a[b.type](b)===!1)return},r=function(){var b=a;return a="",b},s=function(){return a};return h.fix&&!function(){var b=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,c=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,d=[];d.last=function(){return this[this.length-1]},d.lastTagNameEq=function(a){var b=this.last();return b&&b.tagName&&b.tagName.toUpperCase()===a.toUpperCase()},d.containsTagName=function(a){for(var b,c=0;b=this[c];c++)if(b.tagName===a)return!0;return!1};var e=function(a){return a&&"startTag"===a.type&&(a.unary=b.test(a.tagName)||a.unary),a},f=p,g=function(){var b=a,c=e(f());return a=b,c},i=function(){var a=d.pop();m("</"+a.tagName+">")},j={startTag:function(a){var b=a.tagName;"TR"===b.toUpperCase()&&d.lastTagNameEq("TABLE")?(m("<TBODY>"),l()):h.fix_selfClose&&c.test(b)&&d.containsTagName(b)?d.lastTagNameEq(b)?i():(m("</"+a.tagName+">"),l()):a.unary||d.push(a)},endTag:function(a){var b=d.last();b?h.fix_tagSoup&&!d.lastTagNameEq(a.tagName)?i():d.pop():h.fix_tagSoup&&k()}},k=function(){f(),l()},l=function(){var a=g();a&&j[a.type]&&j[a.type](a)};p=function(){return l(),e(f())}}(),{append:l,readToken:p,readTokens:q,clear:r,rest:s,stack:j}}var b=function(){var a,b={},c=this.document.createElement("div");return a="<P><I></P></I>",c.innerHTML=a,b.tagSoup=c.innerHTML!==a,c.innerHTML="<P><i><P></P></i></P>",b.selfClose=2===c.childNodes.length,b}(),c=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,d=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,e=/([\-A-Za-z0-9_]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,f=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i,g=!1;a.supports=b,a.tokenToString=function(a){var b={comment:function(a){return"<--"+a.content+"-->"},endTag:function(a){return"</"+a.tagName+">"},atomicTag:function(a){return console.log(a),b.startTag(a)+a.content+b.endTag(a)},startTag:function(a){var b="<"+a.tagName;for(var c in a.attrs){var d=a.attrs[c];b+=" "+c+'="'+(d?d.replace(/(^|[^\\])"/g,'$1\\"'):"")+'"'}return b+(a.unary?"/>":">")},chars:function(a){return a.text}};return b[a.type](a)},a.escapeAttributes=function(a){var b={};for(var c in a){var d=a[c];b[c]=d&&d.replace(/(^|[^\\])"/g,'$1\\"')}return b};for(var h in b)a.browserHasFlaw=a.browserHasFlaw||!b[h]&&h;this.htmlParser=a}(),function(){function a(){}function b(a){return a!==m&&null!==a}function c(a){return"function"==typeof a}function d(a,b,c){var d,e=a&&a.length||0;for(d=0;e>d;d++)b.call(c,a[d],d)}function e(a,b,c){var d;for(d in a)a.hasOwnProperty(d)&&b.call(c,d,a[d])}function f(a,b){return e(b,function(b,c){a[b]=c}),a}function g(a,c){return a=a||{},e(c,function(c,d){b(a[c])||(a[c]=d)}),a}function h(a){try{return o.call(a)}catch(b){var c=[];return d(a,function(a){c.push(a)}),c}}function i(a){return a&&"tagName"in a?!!~a.tagName.toLowerCase().indexOf("script"):!1}function j(a){return a&&"tagName"in a?!!~a.tagName.toLowerCase().indexOf("style"):!1}var k={afterAsync:a,afterDequeue:a,afterStreamStart:a,afterWrite:a,beforeEnqueue:a,beforeWrite:function(a){return a},done:a,error:function(a){throw a},releaseAsync:!1},l=this,m=void 0;if(!l.postscribe){var n=!1,o=Array.prototype.slice,p=function(a){return a[a.length-1]},q=function(){function a(a,c,d){var e=k+c;if(2===arguments.length){var f=a.getAttribute(e);return b(f)?String(f):f}b(d)&&""!==d?a.setAttribute(e,d):a.removeAttribute(e)}function g(b,c){var d=b.ownerDocument;f(this,{root:b,options:c,win:d.defaultView||d.parentWindow,doc:d,parser:htmlParser("",{autoFix:!0}),actuals:[b],proxyHistory:"",proxyRoot:d.createElement(b.nodeName),scriptStack:[],writeQueue:[]}),a(this.proxyRoot,"proxyof",0)}var k="data-ps-";return g.prototype.write=function(){[].push.apply(this.writeQueue,arguments);for(var a;!this.deferredRemote&&this.writeQueue.length;)a=this.writeQueue.shift(),c(a)?this.callFunction(a):this.writeImpl(a)},g.prototype.callFunction=function(a){var b={type:"function",value:a.name||a.toString()};this.onScriptStart(b),a.call(this.win,this.doc),this.onScriptDone(b)},g.prototype.writeImpl=function(a){this.parser.append(a);for(var b,c,d,e=[];(b=this.parser.readToken())&&!(c=i(b))&&!(d=j(b));)e.push(b);this.writeStaticTokens(e),c&&this.handleScriptToken(b),d&&this.handleStyleToken(b)},g.prototype.writeStaticTokens=function(a){var b=this.buildChunk(a);if(b.actual)return b.html=this.proxyHistory+b.actual,this.proxyHistory+=b.proxy,this.proxyRoot.innerHTML=b.html,n&&(b.proxyInnerHTML=this.proxyRoot.innerHTML),this.walkChunk(),n&&(b.actualInnerHTML=this.root.innerHTML),b},g.prototype.buildChunk=function(a){var b=this.actuals.length,c=[],e=[],f=[];return d(a,function(a){if(c.push(a.text),a.attrs){if(!/^noscript$/i.test(a.tagName)){var d=b++;e.push(a.text.replace(/(\/?>)/," "+k+"id="+d+" $1")),"ps-script"!==a.attrs.id&&"ps-style"!==a.attrs.id&&f.push("atomicTag"===a.type?"":"<"+a.tagName+" "+k+"proxyof="+d+(a.unary?" />":">"))}}else e.push(a.text),f.push("endTag"===a.type?a.text:"")}),{tokens:a,raw:c.join(""),actual:e.join(""),proxy:f.join("")}},g.prototype.walkChunk=function(){for(var c,d=[this.proxyRoot];b(c=d.shift());){var e=1===c.nodeType,f=e&&a(c,"proxyof");if(!f){e&&(this.actuals[a(c,"id")]=c,a(c,"id",null));var g=c.parentNode&&a(c.parentNode,"proxyof");g&&this.actuals[g].appendChild(c)}d.unshift.apply(d,h(c.childNodes))}},g.prototype.handleScriptToken=function(a){var b=this.parser.clear();b&&this.writeQueue.unshift(b),a.src=a.attrs.src||a.attrs.SRC,a.src&&this.scriptStack.length?this.deferredRemote=a:this.onScriptStart(a);var c=this;this.writeScriptToken(a,function(){c.onScriptDone(a)})},g.prototype.handleStyleToken=function(a){var b=this.parser.clear();b&&this.writeQueue.unshift(b),a.type=a.attrs.type||a.attrs.TYPE||"text/css",this.writeStyleToken(a),b&&this.write()},g.prototype.writeStyleToken=function(a){var b=this.buildStyle(a);this.insertStyle(b),a.content&&(b.styleSheet&&!b.sheet?b.styleSheet.cssText=a.content:b.appendChild(this.doc.createTextNode(a.content)))},g.prototype.buildStyle=function(a){var b=this.doc.createElement(a.tagName);return b.setAttribute("type",a.type),e(a.attrs,function(a,c){b.setAttribute(a,c)}),b},g.prototype.insertStyle=function(a){this.writeImpl('<span id="ps-style"/>');var b=this.doc.getElementById("ps-style");b.parentNode.replaceChild(a,b)},g.prototype.onScriptStart=function(a){a.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(a)},g.prototype.onScriptDone=function(a){return a!==this.scriptStack[0]?void this.options.error({message:"Bad script nesting or script finished twice"}):(this.scriptStack.shift(),this.write.apply(this,a.outerWrites),void(!this.scriptStack.length&&this.deferredRemote&&(this.onScriptStart(this.deferredRemote),this.deferredRemote=null)))},g.prototype.writeScriptToken=function(a,b){var c=this.buildScript(a),d=this.shouldRelease(c),e=this.options.afterAsync;a.src&&(c.src=a.src,this.scriptLoadHandler(c,d?e:function(){b(),e()}));try{this.insertScript(c),(!a.src||d)&&b()}catch(f){this.options.error(f),b()}},g.prototype.buildScript=function(a){var b=this.doc.createElement(a.tagName);return e(a.attrs,function(a,c){b.setAttribute(a,c)}),a.content&&(b.text=a.content),b},g.prototype.insertScript=function(a){this.writeImpl('<span id="ps-script"/>');var b=this.doc.getElementById("ps-script");b.parentNode.replaceChild(a,b)},g.prototype.scriptLoadHandler=function(a,b){function c(){a=a.onload=a.onreadystatechange=a.onerror=null}function d(){c(),b()}function e(a){c(),g(a),b()}var g=this.options.error;f(a,{onload:function(){d()},onreadystatechange:function(){/^(loaded|complete)$/.test(a.readyState)&&d()},onerror:function(){e({message:"remote script failed "+a.src})}})},g.prototype.shouldRelease=function(a){var b=/^script$/i.test(a.nodeName);return!b||!!(this.options.releaseAsync&&a.src&&a.hasAttribute("async"))},g}();l.postscribe=function(){function b(){var a,b=j.shift();b&&(a=p(b),a.afterDequeue(),b.stream=d.apply(null,b),a.afterStreamStart())}function d(c,d,g){function j(a){a=g.beforeWrite(a),m.write(a),g.afterWrite(a)}m=new q(c,g),m.id=i++,m.name=g.name||m.id,e.streams[m.name]=m;var k=c.ownerDocument,l={close:k.close,open:k.open,write:k.write,writeln:k.writeln};f(k,{close:a,open:a,write:function(){return j(h(arguments).join(""))},writeln:function(){return j(h(arguments).join("")+"\n")}});var n=m.win.onerror||a;return m.win.onerror=function(a,b,c){g.error({msg:a+" - "+b+":"+c}),n.apply(m.win,arguments)},m.write(d,function(){f(k,l),m.win.onerror=n,g.done(),m=null,b()}),m}function e(d,e,f){c(f)&&(f={done:f}),f=g(f,k),d=/^#/.test(d)?l.document.getElementById(d.substr(1)):d.jquery?d[0]:d;var h=[d,e,f];return d.postscribe={cancel:function(){h.stream?h.stream.abort():h[1]=a}},f.beforeEnqueue(h),j.push(h),m||b(),d.postscribe}var i=0,j=[],m=null;return f(e,{streams:{},queue:j,WriteStream:q})}()}}(),function(){var a=document,b=a.createElement("script");a=a.getElementsByTagName("script")[0],b.type="text/javascript",b.async=!0,b.src="http://s.moatads.com/kargo825DmHc88/moatcontent.js",a.parentNode.insertBefore(b,a)}();}Kargo.self_url="http://storage.cloud.kargo.com/ad/network/tag/v3/_jLCTqZuXqQ1IWgPtrbSZ0b.js";Kargo.setAdConfig({"kargo_id":"_jK-5qZuVwrw","source":{"ad_server":"DFP","ad_unit_id":"\/98790044\/Bonnier\/Pop_Sci\/Pop_Sci_Mobile_Web","sz":"300x50|320x50|1x1|4x5","position":"top"},"pre_request_callback":"Kargo.Helper.fireTracker('http:\/\/tk.cloud.kargo.com\/t\/cp.e6i.1KEOKqGZb40?rand=%%CACHEBUSTER%%');","fail_callback":"Kargo.Helper.fireTracker('http:\/\/tk.cloud.kargo.com\/t\/cp.e6j.1KEOKqU3lm0?rand=%%CACHEBUSTER%%');","settings":{"type":"Hover","hug_side":"bottom","wrapper_fill":true,"show_kargo_logo_tag":false,"prevent_close":false,"always_show":false,"success_callback":"Kargo.Helper.fireTracker('http:\/\/tk.cloud.kargo.com\/t\/cp.e6h.1KEOKqkKk90?rand=%%CACHEBUSTER%%');"}});Kargo.setAdConfig({"kargo_id":"_jK-jqqWWsrw","source":{"ad_server":"DFP","ad_unit_id":"\/98790044\/Bonnier\/Pop_Sci\/Pop_Sci_Mobile_Web","sz":"300x250|1x1|3x2","position":"int"},"pre_request_callback":"Kargo.Helper.fireTracker('http:\/\/tk.cloud.kargo.com\/t\/cp.bJp.1KhlIya5hP0?rand=%%CACHEBUSTER%%');","fail_callback":"Kargo.Helper.fireTracker('http:\/\/tk.cloud.kargo.com\/t\/cp.bJq.1KhlIyqMrb0?rand=%%CACHEBUSTER%%');","settings":{"type":"Interstitial","show_on_home":true,"countdown_time":"","transparent":true,"theme":"dark","continue_text":"continue to popularscience.com","show_kargo_logo_tag":true,"force_show":true,"cookie_check":{"expire_time":"","page_view_frequency":"","page_view_initial_offset":"","max_show_count":""},"hide_close_link":false,"custom_cookie_settings":false,"success_callback":"Kargo.Helper.fireTracker('http:\/\/tk.cloud.kargo.com\/t\/cp.bJo.1KhlIxSEDn0?rand=%%CACHEBUSTER%%');"}});Kargo.setAdConfig({"kargo_id":"_jK-5bpCV2Ko","source":{"ad_server":"DFP","ad_unit_id":"\/98790044\/Bonnier\/Pop_Sci\/Pop_Sci_Tablet_Web","sz":"300x50|320x50|300x250|146x200|1x1|5x7","position":"mid"},"pre_request_callback":"Kargo.Helper.fireTracker('http:\/\/tk.cloud.kargo.com\/t\/cp.fck.1KPAgG6kn20?rand=%%CACHEBUSTER%%');","fail_callback":"Kargo.Helper.fireTracker('http:\/\/tk.cloud.kargo.com\/t\/cp.fcl.1KPAgGjO6J0?rand=%%CACHEBUSTER%%');","settings":{"type":"Banner","wrapper_type":"id","wrapper_id":"ad-manager-ad-right1-0","wrapper_fn":"","success_callback":"Kargo.Helper.fireTracker('http:\/\/tk.cloud.kargo.com\/t\/cp.fcj.1KPAgFT35E0?rand=%%CACHEBUSTER%%');"}});Kargo.setAdConfig({"kargo_id":"_jK-5bpCVwrI","source":{"ad_server":"DFP","ad_unit_id":"\/98790044\/Bonnier\/Pop_Sci\/Pop_Sci_Tablet_Web","sz":"1x1|300x50|320x50|4x4|4x5|4x6","position":"top"},"pre_request_callback":"Kargo.Helper.fireTracker('http:\/\/tk.cloud.kargo.com\/t\/cp.fcf.1KPAfOQfH20?rand=%%CACHEBUSTER%%');","fail_callback":"Kargo.Helper.fireTracker('http:\/\/tk.cloud.kargo.com\/t\/cp.fcg.1KPAfP4DC50?rand=%%CACHEBUSTER%%');","settings":[{"type":"SiteSkin","ignore_logo":false,"success_callback":"Kargo.Helper.fireTracker('http:\/\/tk.cloud.kargo.com\/t\/cp.fci.1KPAgczdoH0?rand=%%CACHEBUSTER%%');"},{"type":"Hover","show_kargo_logo_tag":true,"prevent_close":false,"always_show":false,"wrapper_fill":true,"success_callback":"Kargo.Helper.fireTracker('http:\/\/tk.cloud.kargo.com\/t\/cp.fch.1KPAfWWr190?rand=%%CACHEBUSTER%%');"},{"type":"Banner","wrapper_type":"id","wrapper_id":"ad-manager-ad-top-0","wrapper_fn":"","success_callback":"Kargo.Helper.fireTracker('http:\/\/tk.cloud.kargo.com\/t\/cp.fce.1KPAfOCAIX0?rand=%%CACHEBUSTER%%');"}]});Kargo.setAdConfig({"kargo_id":"_jK-5bpCVwsg","source":{"ad_server":"DFP","ad_unit_id":"\/98790044\/Bonnier\/Pop_Sci\/Pop_Sci_Tablet_Web","sz":"300x250|1x1|3x2","position":"int"},"pre_request_callback":"Kargo.Helper.fireTracker('http:\/\/tk.cloud.kargo.com\/t\/cp.fca.1KPAf0eUYI0?rand=%%CACHEBUSTER%%');","fail_callback":"Kargo.Helper.fireTracker('http:\/\/tk.cloud.kargo.com\/t\/cp.fcb.1KPAf0rP5p0?rand=%%CACHEBUSTER%%');","settings":{"type":"Interstitial","show_on_home":true,"countdown_time":"","transparent":true,"transition":"","theme":"dark","continue_text":"continue to popularscience.com","show_kargo_logo_tag":true,"force_show":true,"cookie_check":{"expire_time":"","page_view_frequency":"","page_view_initial_offset":"","max_show_count":""},"hide_close_link":false,"custom_cookie_settings":false,"success_callback":"Kargo.Helper.fireTracker('http:\/\/tk.cloud.kargo.com\/t\/cp.fc9.1KPAeZYmpg0?rand=%%CACHEBUSTER%%');"}});Kargo.setAdConfig({"kargo_id":"_jK65pqaVwsg","source":{"ad_server":"DFP","ad_unit_id":"\/98790044\/Bonnier\/Pop_Sci\/Pop_Sci_Mobile_Web","sz":"300x50|320x50|1x1|4x6","position":"top"},"fail_callback":"Kargo.Helper.fireTracker('http:\/\/tk.cloud.kargo.com\/t\/srv.cp.a9N.1JXzuH70SV0?rand={timestamp}');var ad_script = \"<scr\" + \"ipt src='http:\/\/www.googletagservices.com\/tag\/js\/gpt.js'><\/scr\" + \"ipt>\";\r\nvar values = \"<scr\" + \"ipt>googletag.pubads().definePassback('\/6747\/remnant.kargo.passback\/popsci, [320, 50]').setTargeting('pos', 'top').display();<\/scr\" + \"ipt>\";\r\nvar iframe = document.createElement(\"iframe\");\r\njQuery('.header-ads').append(iframe);\r\nvar iframe_doc = iframe.contentWindow.document || iframe.contentDocument;\r\niframe.style.height=\"50px\";\r\niframe.style.width=\"320px\";\r\niframe.style.margin=\"0px\";\r\niframe_doc.write(\"\");\r\niframe_doc.close();\r\n\r\n\r\nwindow.postscribe(iframe_doc.body, \"<html><head><\/head><body>\" + ad_script + values);","pre_request_callback":"Kargo.Helper.fireTracker('http:\/\/tk.cloud.kargo.com\/t\/srv.cp.a9L.1JXzuH0B5n0?rand={timestamp}');","settings":{"type":"Banner","wrapper_type":"fn","wrapper_id":"","wrapper_fn":"element = document.getElementsByClassName('header-ads');\r\nelement = element[0];\r\nreturn element;","success_callback":"Kargo.Helper.fireTracker('http:\/\/tk.cloud.kargo.com\/t\/srv.cp.a9J.1JXzuGMfWM0?rand={timestamp}');"}});