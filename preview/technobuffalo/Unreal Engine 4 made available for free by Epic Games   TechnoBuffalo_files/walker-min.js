var zd=zd||{};var zd_walker_skip_nodes=zd_walker_skip_nodes||["ABBR","META","NOSCRIPT","NAV","IMG","HEADER","FOOTER","SCRIPT","LINK","STYLE","FORM","INPUT","SELECT","BUTTON"];zd.walker={lzma_src:"//cdn.static.zdbb.net/js/lzma-min.js",skipNodes:zd_walker_skip_nodes,skipAttributes:["outbrain","header","disqus","sponsor","sponsors","branding","advertise","navigation","masthead","ad","nav","footer","header","navigation","advertising","advertisement","menu","copyright"],harmlessNodes:["A","I","B","STRONG","EM","FONT","P","SPAN"],interestingMeta:["keywords","description","zdid","canonical","live_date","type_of","tags","zd_ptax"],snippets:{}};zd.poster={lzma_src:"//cdn.static.zdbb.net/js/lzma-worker-min.js",post_url:"//walker.zdbb.net/receive_uint8",url:document.location.toString(),href:document.location.href.toString(),check_url:"//walker.zdbb.net/check?href="};zd.walker.array_contains=function(a,c){var b=a.length;while(b--){if(a[b]==c){return true}}return false};zd.walker.validNode=function(a){if(!a||typeof a=="undefined"||(typeof a.tagName!="undefined"&&zd.walker.array_contains(zd.walker.skipNodes,a.tagName))){return false}else{var o=[];if(typeof a.style!="undefined"&&a.style.display=="none"){return false}if(typeof a.children=="undefined"){return false}var p=true;if(typeof a.attributes!="undefined"){for(var m,d=0,n=a.attributes,b=n.length;d<b;d++){m=n.item(d);if(m){var g=a.className;if(typeof g=="undefined"){g=""}var q=a.id;if(typeof q=="undefined"){q=""}g=g+" "+q;var h=m.value;if(typeof h=="undefined"){continue}h+=" "+g;h=h.toLowerCase().replace(","," ").replace(/\./gi," ").replace(/-/gi," ").replace(/_/gi," ");h=h.split(" ");for(var c in h){try{var f=h[c].replace(/^[ ]+/gi,"").replace(/[ ]$/gi,"");if(zd.walker.array_contains(zd.walker.skipAttributes,f)){p=false;break}else{if(f.indexOf("disqus")>-1||f.indexOf("twitter")>-1||f.indexOf("pintrest")>-1||f.indexOf("fb-")>-1||f.indexOf("facebook")>-1){p=false;break}else{if(f.indexOf("main")>-1){break}}}}catch(j){console.log("zd.walker error:"+j)}}}}}}return p};zd.walker.cleanse=function(a){a=a.replace(/[\r\n]/gi," ").replace(/\t/gi," ").replace(/[ ]+/gi," ").replace(/^[ ]+/gi,"").replace(/[ ]+$/gi,"");a=a.replace(/[\r\n]/gi," ").replace(/[ ]+/," ").replace(/^[\t\s ]+/gi,"");a=a.replace(/<[^>]*>/gi,"");a=a.replace(/\"/gi,"'");return a};zd.walker.getSentences=function(b){var a=b.match(/([A-Za-z][^.!?]+[A-Za-z]{2,}[.!?])/gi);if(a==null){a=b.match(/([A-Z][a-z]+[ ]){2,}/gi)}return a};zd.walker.harmlessKids=function(c){if(!zd.walker.validNode(c)){return false}if(typeof c.children=="undefined"){return false}if(c.children.length==0){return true}var d=true;for(var a=0;a<c.children.length;a++){if(c.children[a].nodeType!=3){d=false}}if(d){return true}for(var a=0;a<c.children.length;a++){var b=c.children[a];if(typeof b.tagName=="undefined"||!zd.walker.array_contains(zd.walker.harmlessNodes,b.tagName)){return false}}return true};zd.walker.getText=function(e,b){if(!e){return false}for(var d=e.firstChild;d;d=d.nextSibling){if(zd.walker.validNode(d)){zd.walker.getText(d,b)}}if(zd.walker.validNode(e)&&typeof e.children!="undefined"&&(e.children.length==0||zd.walker.harmlessKids(e))){var c=e.innerText;if(typeof c=="undefined"){c=e.textContent}if(typeof c=="undefined"){return false}if(c.toLowerCase().indexOf("ads by google")>-1){return false}if(typeof e.id!="undefined"){if(e.id.toLowerCase().indexOf("google_ads")>-1){return false}}if(typeof c!="undefined"){var c=zd.walker.cleanse(c);var a=zd.walker.getSentences(c);if(c&&a!=null&&c!=""&&(!this.snippets[c]||typeof this.snippets[c]=="undefined")){this.snippets[c]=1;b.push(c);return true}else{if(a!=null){this.snippets[c]+=1;return true}else{return false}}}}else{return false}};zd.walker.getMetas=function(){var c=document.getElementsByTagName("meta");var h={};for(var e=0;e<c.length;e++){var b=c[e].getAttribute("name");var a=c[e].getAttribute("content");if(zd.walker.array_contains(zd.walker.interestingMeta,b)){h[b]=a}}var f=new RegExp("^http[s]{0,1}://[^/]*ign..*");if(f.test(document.location.toString())&&typeof SugarAds!=="undefined"&&SugarAds.adsData){var g=SugarAds.adsData;var d=[];if(g.tags){d=d.concat(g.tags)}if(g.tags){d=d.concat(g.object1_id)}d=d.join(",");if(d!=""){h.zd_ptax=d}}return h};zd.poster.init=function(){var a=new XMLHttpRequest();var b=this.check_url+encodeURIComponent(this.href);a.onreadystatechange=function(){if(a.readyState==4){if(a.responseText=="TRUE"){zd.poster.check_response()}}};a.open("GET",b,true);a.send(null)};zd.poster.domready=(function(){var b=[],d=document,e="DOMContentLoaded",a=/^loaded|^i|^c/.test(d.readyState),c=function(){d.removeEventListener(e,c);a=1;while(c){c=b.shift();if(typeof(c)!=="undefined"){c()}}};if(!a){d.addEventListener(e,c)}return function(f){if(a){f()}else{b.push(f)}}})();zd.poster.check_response=function(){var b=document.createElement("script");b.setAttribute("src",zd.walker.lzma_src);var a=new RegExp("^http[s]{0,1}://[^/]*pcmag..*");if(a.test(document.location.toString())){zd.walker.interestingMeta=zd.walker.interestingMeta.concat(["primary-section-id","section-id"])}document.body.appendChild(b)};zd.poster.send_page=function(){var b=5;var a=new LZMA(this.lzma_src);zd.poster.domready(function(){var f=[];var q=[];var h=document.body;zd.walker.getText(h,f);f=f.reverse();var m=f[0];var p=[m];for(var l=1;l<f.length;l++){try{if(m.indexOf(f[l])==-1){var r=f[l]+"";p[p.length]=r;m=r+"\n"+m}}catch(n){console.log("zd.walker error:"+n)}}p=p.reverse();var k=p.join(" -$BREAK$- ");var o=zd.walker.getMetas();var s=document.title;var c=document.location.toString();var j=c.replace(/\?.*/gi,"");var d=JSON.stringify({url:c,canonical_url:j,metas:o,title:s,page_text:k});a.compress(d,b,function g(e){var t=k.length;var u=e.length;var i=new Uint8Array(e);var v=new XMLHttpRequest();v.open("POST",zd.poster.post_url,true);v.setRequestHeader("Cache-Control","no-cache");v.setRequestHeader("Content-Type","application/octet-stream");v.send(i)})})};zd.poster.init();