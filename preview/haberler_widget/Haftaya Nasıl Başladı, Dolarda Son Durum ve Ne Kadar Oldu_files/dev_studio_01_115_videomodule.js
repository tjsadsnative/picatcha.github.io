self.studioLoader.context.evalInContext("var Hm=function(a){return(a=a.exec(sb))?a[1]:\"\"};(function(){if(Eh)return Hm(/Firefox\\/([0-9.]+)/);if(D||Zb||Yb)return hc;if(Ih)return Hm(/Chrome\\/([0-9.]+)/);if(Jh&&!(Xb()||B(\"iPad\")||B(\"iPod\")))return Hm(/Version\\/([0-9.]+)/);if(Fh||Gh){var a=/Version\\/(\\S+).*Mobile\\/(\\S+)/.exec(sb);if(a)return a[1]+\".\"+a[2]}else if(Hh)return(a=Hm(/Android\\s+([0-9.]+)/))?a:Hm(/Version\\/([0-9.]+)/);return\"\"})();var Im={},Jm=/OS (\\S+) like/,Km=/Android (\\S+);/,Lm=function(a,b){if(null==Im[b]){var c=a.exec(sb);c?(c=c[1].replace(/_/g,\".\"),Im[b]=0<=Ka(c,b)):Im[b]=!1}return Im[b]};var Mm=function(){K.call(this);this.c=!1;this.L=E(\"ima.legacy.common.MouseAndTouchEventTracker\");this.f=this.h=!1;this.b=0;this.i=[];this.m=!1};x(Mm,K);var Nm=function(a,b){null==b||a.c||(a.a=b,a.v=!Fh&&!Gh,a.s=Fh||Gh,a.v?a.a.addEventListener(\"click\",v(a.j,a),!1):a.s?(a.a.addEventListener(\"touchstart\",v(a.I,a),!1),a.a.addEventListener(\"touchmove\",v(a.K,a),!1),a.a.addEventListener(\"touchend\",v(a.B,a),!1)):Hc(a.L,\"Neither click nor touch is supported in this platform.\"),a.c=!0)},Om=function(a){null!=a.a&&a.c&&(a.c=!1,a.v?a.a.removeEventListener(\"click\",v(a.j,a),!1):a.s&&(a.a.removeEventListener(\"touchstart\",v(a.I,a),!1),a.a.removeEventListener(\"touchmove\",v(a.K,a),!1),a.a.removeEventListener(\"touchend\",v(a.B,a),!1)))};Mm.prototype.I=function(a){this.h=!0;this.b=a.touches.length;this.m=Pm(this,a.touches)||1!=a.touches.length;Qm(this,a.touches)};Mm.prototype.K=function(a){this.f=!0;this.b=a.touches.length};Mm.prototype.B=function(a){this.h&&1==this.b&&!this.f&&!this.m&&Pm(this,a.changedTouches)&&this.dispatchEvent(new ge(\"click\"));this.b=a.touches.length;0==this.b&&(this.f=this.h=!1)};Mm.prototype.j=function(){this.dispatchEvent(new ge(\"click\"))};var Qm=function(a,b){a.i=[];A(b,function(a){var b=this.i;a=a.identifier;0<=Ua(b,a)||b.push(a)},a)},Pm=function(a,b){return Wa(b,function(a){return 0<=Ua(this.i,a.identifier)},a)};var Rm=function(a){ge.call(this,a)};x(Rm,ge);var Sm=function(){K.call(this)};x(Sm,K);var Tm=function(){K.call(this);this.i=E(\"ima.legacy.vast.VideoDisplayEventTracker\");this.f=new C;this.j=new Mm;this.m=\"none\"};x(Tm,K);var Wm=function(a){this.width=Um(a).width;this.height=Um(a).height;this.c=!1;this.b=a.a.muted;this.a=Vm(a);this.volume=a.a.volume};Wm.prototype.muted=function(a,b){return!this.b&&a||0<this.volume&&0==b};Tm.prototype.l=function(){Xm(this);Tm.o.l.call(this)};var Xm=function(a){null!=a.b&&a.b.dispose();null!=a.h&&a.h.dispose();null!=a.a&&Ym(a.a);a.f.clear();Om(a.j)},Y=function(a,b,c){c&&null!=a.f.get(b)||(a.f.set(b,!0),G(a.i,\"dispatching event \"+b),a.dispatchEvent(new Rm(b)))},Zm=function(a,b){null!=a.f.get(b)&&(G(a.i,\"removing event \"+b),Sb(a.f,b))};g=Tm.prototype;g.Jd=function(){var a;a:{var b=this.a;if(b.a.seeking&&!b.h)b.h=!0,b.i=$m(b);else{if(!b.a.seeking&&b.h){b.h=!1;a=0!=b.a.currentTime&&b.a.currentTime<b.i;b.i=-1;break a}if(!b.a.seeking&&0!=b.a.currentTime&&$m(b)>b.a.currentTime){a=.5<$m(b)-b.a.currentTime;break a}}a=!1}b=an(this.a);if(a&&(Y(this,\"rewind\",!1),-1!=b)){bn(this.a,.75*b)||Zm(this,\"thirdquartile\");bn(this.a,.5*b)||Zm(this,\"midpoint\");bn(this.a,.25*b)||Zm(this,\"firstquartile\");a:{a=this.a;for(var c=a.c.J(),d=c.length-1;0<=d;d--)if(.5>c[d]){c=a.c;c=0==c.T()?null:c.get(c.T()-1);a.c.clear();.5<=c&&a.c.add(c);a=!0;break a}a=!1}a&&Y(this,\"replay\",!1)}-1!=b&&(bn(this.a,.25*b)&&Y(this,\"firstquartile\",!0),bn(this.a,.5*b)&&Y(this,\"midpoint\",!0),bn(this.a,.75*b)&&Y(this,\"thirdquartile\",!0))};g.Id=function(){Y(this,\"creativeview\",!0);null!=this.v?(this.b.u(this.j,\"click\",this.Ed,!1),Nm(this.j,this.v)):this.b.u(this.a,\"click\",this.je);Y(this,\"start\",!0);(this.a.a.muted||0==this.a.a.volume)&&Y(this,\"mute\",!1)};g.Kd=function(){var a=this.a.a.muted,b=this.a.a.volume,c=this.c;c.b&&!a||!a&&0==c.volume&&0<b?Y(this,\"unmute\",!1):this.c.muted(a,b)&&Y(this,\"mute\",!1);this.c.b=a;this.c.volume=b};g.Hd=function(){if(this.a.a.ended)Y(this,\"complete\",!0);else{var a;if(a=\"pausedAtBeginning\"==this.m)a=this.a,a=!isNaN(a.a.duration)&&0<a.a.duration&&0==a.a.currentTime;a?Y(this,\"stop\",!0):cn(this.a)&&!this.a.a.seeking&&(this.c.c=!0,Y(this,\"pause\",!1))}};g.ie=function(){this.c.c&&(this.c.c=!1,Y(this,\"resume\",!1))};g.Fd=function(){var a;a=this.a;if(!Hh||Hh&&Lm(Km,2.3))a=!0;else{var b=a.a.duration-$m(a);a=0==a.a.currentTime&&1.5>=b}a?\"pausedAtEnd\"==this.m&&cn(this.a)?Y(this,\"stop\",!0):Y(this,\"complete\",!0):(G(this.i,\"Pausing video..\"),this.a.a.pause())};g.Ed=function(){Y(this,\"click\",!1)};g.Gd=function(){Y(this,\"error\",!1)};g.je=function(){Y(this,\"click\",!1)};g.gc=function(){this.c.a=!0;Y(this,\"fullscreen\",!1)};g.fc=function(){this.c.a=!1};g.he=function(){var a=Um(this.a),b=Vm(this.a),c=this.c;if(a.width!=c.width||a.height!=c.height)!this.c.a&&b?this.gc():this.c.a&&!b&&this.fc(),this.c.width=a.width,this.c.height=a.height};var dn=function(a){this.b=0;this.c=a||100;this.a=[]};g=dn.prototype;g.add=function(a){var b=this.a[this.b];this.a[this.b]=a;this.b=(this.b+1)%this.c;return b};g.get=function(a){a=en(this,a);return this.a[a]};g.set=function(a,b){a=en(this,a);this.a[a]=b};g.T=function(){return this.a.length};g.qa=function(){return 0==this.a.length};g.clear=function(){this.b=this.a.length=0};g.J=function(){for(var a=this.T(),b=this.T(),c=[],a=this.T()-a;a<b;a++)c.push(this.get(a));return c};g.R=function(){for(var a=[],b=this.T(),c=0;c<b;c++)a[c]=c;return a};g.M=function(a){return a<this.T()};g.Ca=function(a){for(var b=this.T(),c=0;c<b;c++)if(this.get(c)==a)return!0;return!1};var en=function(a,b){if(b>=a.a.length)throw Error(\"Out of bounds exception\");return a.a.length<a.c?b:(a.b+Number(b))%a.c};var Z=function(a){this.message=a};new Z(\"Unable to request ads from server. Cause: {0}.\");new Z(\"Cannot parse the {0} value for the adslist response: {1}.\");new Z(\"The ad slot is not fully visible on the page.\");new Z(\"Invalid usage of the API. Cause: {0}\");new Z(\"Companion ad failed to load.\");new Z(\"There was a problem requesting ads from the server.\");new Z(\"The provide ad type: {0} is not supported.\");new Z(\"The provided {0} information: {1} is invalid.\");new Z(\"The companion ad content was invalid.\");new Z(\"The overlay ad content was invalid.\");new Z(\"The response does not contain any valid ads.\");new Z(\"The overlay ad content could not be rendered.\");new Z(\"The overlay ad content could not be repositioned.\");new Z(\"Required fields in ads request object: {0} not found.\");new Z(\"The publisher doesn't have permission to access the method:{0}\");new Z(\"Ad response could not be understood.\");new Z(\"The ad playlist response was malformed or empty.\");new Z(\"There was an error continuing the content from where it was paused. Restarting content instead.\");new Z(\"The ad response was not understood and cannot be parsed: {0}\");new Z(\"An unexpected error occurred and the cause is not known. Refer to the inner error for more info.\");new Z(\"Found unknown fields in ads request object: {0}\");new Z(\"The ad response contains unexpected element. Cause {0}.\");new Z(\"Listener for at least one of the required vast events was not added:{0}\");new Z(\"Linear assets were found in the VAST ad response, but none of them matched the video player's capabilities.\");new Z(\"Nonlinear assets were found in the VAST ad response, but none of them matched the video player's capabilities.\");new Z(\"No assets were found in the VAST ad response.\");new Z(\"VAST response was malformed and could not be parsed.\");new Z(\"Unable to parse VAST duration: {0}\");new Z(\"The maximum number of VAST wrappers ({0}) have been reached.\");new Z('Expected {0} but got \"{1}\"');new Z(\"Unknown node in <{0}>: {1}\");new Z(\"Invalid VAST resource type: {0}\");new Z(\"A video element must be provided to the VideoAdsManager.\");new Z(\"Another VideoAdsManager is still using the <video>. It must be unloaded before another ad can play on the same element.\");new Z(\"There was an error playing the video ad.\");E(\"ima.legacy.common.ErrorUtils\");var fn=function(a){K.call(this);this.a=a;this.c=new dn(4);this.i=-1;this.j=this.h=!1};x(fn,Sm);var an=function(a){return isNaN(a.a.duration)?-1:a.a.duration},cn=function(a){return a.a.paused?Fh||Gh||Ih?a.a.currentTime<a.a.duration:!0:!1},Vm=function(a){return Fh?a.a.webkitSupportsFullscreen&&a.a.webkitDisplayingFullscreen:a.a.offsetWidth>=document.body.offsetWidth&&a.a.offsetHeight>=document.body.offsetHeight},bn=function(a,b){return $m(a)>=b},$m=function(a){for(a=a.c.J();a.length;){var b=a.pop();if(0<b)return b}return-1},Um=function(a){return new Jc(a.a.offsetWidth,a.a.offsetHeight)};fn.prototype.l=function(){fn.o.l.call(this);Ym(this)};var Ym=function(a){null!=a.f&&(Om(a.f),a.f=null);null!=a.b&&(a.b.dispose(),a.b=null);a.i=-1;a.j=!1;a.h=!1;a.c.clear()},gn=function(a){a.j||(a.j=!0,a.dispatchEvent(\"start\"),!Hh&&(!Fh||(Fh||Gh)&&Lm(Jm,4))||a.hc())};g=fn.prototype;g.ge=function(){Jh&&(this.a.currentTime=.001)};g.nc=function(){this.dispatchEvent(\"play\");Fh||Gh||gn(this)};g.Qd=function(){this.j||((Fh||Gh)&&0<this.a.currentTime&&gn(this),ac&&this.nc());this.c.add(this.a.currentTime);this.dispatchEvent(\"timeUpdate\")};g.Rd=function(){this.dispatchEvent(\"volumeChange\")};g.Pd=function(){this.dispatchEvent(\"pause\")};g.Md=function(){this.dispatchEvent(\"end\")};g.hc=function(){this.dispatchEvent(\"beginFullscreen\")};g.Od=function(){this.dispatchEvent(\"endFullscreen\")};g.Nd=function(){this.dispatchEvent(\"error\")};g.Ld=function(){this.dispatchEvent(\"click\")};var hn={},jn=function(a){this.j=a;this.f=this.g=!0;this.c=new Tm;this.c.m=\"pausedAtBeginning\";this.i=this.a=this.b=null;Ki(v(this.aa,this))},kn=new C;jn.prototype.v=!1;jn.prototype.m=!1;jn.prototype.h=!0;var ln=function(a){var b=kn.get(a);null==b&&(b=new jn(a),kn.set(a,b));return b};jn.prototype.aa=function(a){this.a=a;mn(this)};var mn=function(a){nn(a,!1);nn(a,!0);if(null!=a.a&&null!=a.i){var b=a.c,c=a.b;Xm(b);b.a=c;c=b.a;Ym(c);c.b=new Df(c);c.b.u(c.a,\"canplay\",c.ge);c.b.u(c.a,\"ended\",c.Md);c.b.u(c.a,\"webkitbeginfullscreen\",c.hc);c.b.u(c.a,\"webkitendfullscreen\",c.Od);c.b.u(c.a,\"pause\",c.Pd);c.b.u(c.a,\"playing\",c.nc);c.b.u(c.a,\"timeupdate\",c.Qd);c.b.u(c.a,\"volumechange\",c.Rd);c.b.u(c.a,\"error\",c.Nd);c.f=new Mm;c.b.u(c.f,\"click\",c.Ld,!1);Nm(c.f,c.a);b.c=new Wm(b.a);b.v=null;b.b=new Df(b);b.b.u(b.a,\"timeUpdate\",b.Jd,!1);b.b.u(b.a,\"volumeChange\",b.Kd,!1);b.b.u(b.a,\"pause\",b.Hd,!1);b.b.u(b.a,\"play\",b.ie,!1);b.b.u(b.a,\"end\",b.Fd,!1);b.b.u(b.a,\"beginFullscreen\",b.gc,!1);b.b.u(b.a,\"endFullscreen\",b.fc,!1);b.b.u(b.a,\"start\",b.Id,!1);b.b.u(b.a,\"error\",b.Gd,!1);b.h=new Re(1E3);Ff(b.b,b.h,\"tick\",b.he,!1,b);b.h.start();a.b.u(\"timeUpdate\",a.Hc,!1,a);a.i.paused?a.c.u(\"start\",a.Sa,!1,a):a.Sa()}},nn=function(a,b){on(a,b,\"resume\",a.Sa);on(a,b,\"replay\",a.oe);on(a,b,\"pause\",a.le);on(a,b,\"stop\",a.Ce);on(a,b,\"mute\",a.fe);on(a,b,\"unmute\",a.Ke);on(a,b,\"firstquartile\",a.ed);on(a,b,\"midpoint\",a.de);on(a,b,\"thirdquartile\",a.Ie);on(a,b,\"complete\",a.Tc)},on=function(a,b,c,d){(b?a.c.u:a.c.ba).call(a.c,c,d,!1,a)};g=jn.prototype;g.Sa=function(){this.c.ba(\"start\",this.Sa,!1,this);pn(this,\"play\",!this.h);qn(this,\"Start\");this.h=!1;null!=this.a&&this.f&&!this.v&&(this.a.m(),this.v=!0)};g.oe=function(){pn(this,\"replay\",!0);qn(this,\"Stop\");this.g=!1};g.le=function(){pn(this,\"pause\",!0);qn(this,\"Stop\")};g.Ce=function(){pn(this,\"stop\",!0);qn(this,\"Stop\");this.g=!1};g.fe=function(){pn(this,\"mute\",!this.h)};g.Ke=function(){pn(this,\"unmute\",!this.h)};g.ed=function(){pn(this,\"firstquartile\")};g.de=function(){pn(this,\"midpoint\")};g.Ie=function(){pn(this,\"thirdquartile\")};g.Tc=function(){pn(this,\"complete\");qn(this,\"Stop\");this.g=!1;null!=this.a&&this.f&&!this.m&&(this.a.m(),this.m=!0)};g.Hc=function(a){var b=this.j;a=\"EVENT_VIDEO_\"+a.type.toUpperCase();this.a.A.C(\"updateVideoProgress\",[a,an(this.b),this.b.a.currentTime]);G(M,Nh(b,a))};var pn=function(a,b,c){null!=a.a&&a.f&&(c&&(c=a.j,dh(a.a.b,\"Count\",c,\"EVENT_VIDEO_INTERACTION\"),G(M,Nh(c,\"EVENT_VIDEO_INTERACTION\"))),c=a.j,b=\"EVENT_VIDEO_\"+b.toUpperCase(),dh(a.a.b,\"Count\",c,b),G(M,Nh(c,b)))},qn=function(a,b){if(null!=a.a&&a.f&&a.g){var c=a.j;dh(a.a.b,b,c,\"EVENT_VIDEO_VIEW_TIMER\");G(M,Nh(c,\"EVENT_VIDEO_VIEW_TIMER\"))}};var rn=function(a){J.call(this);this.c=a;this.a={};this.b=null;Ki(v(this.g,this))};x(rn,J);m(\"studio.video.Reporter\",rn,void 0);var sn=new C,tn=function(a,b,c){var d=ln(a);\"boolean\"==typeof c&&(d.h=c);Xm(d.c);d.g=!0;d.f=!0;d.i=b;d.b=new fn(d.i);mn(d);sn.M(a)||sn.set(a,new rn(b))};rn.attach=tn;rn.prototype.g=function(a){this.b=a;this.b.Kb(this.c)};rn.prototype.l=function(){for(var a in this.a)this.c[a]=this.a[a];rn.o.l.call(this)};var un=function(a){a=ln(a);null==a.b||cn(a.b)||a.b.a.ended||(pn(a,\"stop\",!1),qn(a,\"Stop\"),a.g=!1);nn(a,!1);a.f=!1;a.i=null;Xm(a.c);a.b&&(a.b.ba(\"timeUpdate\",a.Hc,!1,a),a.b.dispose())};rn.detach=un;var vn=function(){};var wn,xn=function(){};x(xn,vn);var yn=function(a){var b;a:{if(!a.a&&\"undefined\"==typeof XMLHttpRequest&&\"undefined\"!=typeof ActiveXObject){for(var c=[\"MSXML2.XMLHTTP.6.0\",\"MSXML2.XMLHTTP.3.0\",\"MSXML2.XMLHTTP\",\"Microsoft.XMLHTTP\"],d=0;d<c.length;d++){var e=c[d];try{new ActiveXObject(e);b=a.a=e;break a}catch(f){}}throw Error(\"Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed\");}b=a.a}return b?new ActiveXObject(b):new XMLHttpRequest};wn=new xn;var An=function(a,b){z(\"Blob\"in h,\"getBlob is not supported in this browser.\");var c=b||{};c.responseType=\"blob\";return zn(\"GET\",a,c).then(function(a){return a.response})},zn=function(a,b,c){return new td(function(d,e){var f=c||{},k,n=f.Oe?yn(f.Oe):yn(wn);try{n.open(a,b,!0)}catch(rb){e(new Bn(\"Error opening XHR: \"+rb.message,b))}n.onreadystatechange=function(){if(4==n.readyState){h.clearTimeout(k);var a;a:switch(n.status){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:a=!0;break a;default:a=!1}!a&&(a=0===n.status)&&(a=b.match(Rf)[1]||null,!a&&h.self&&h.self.location&&(a=h.self.location.protocol,a=a.substr(0,a.length-1)),a=a?a.toLowerCase():\"\",a=!(\"http\"==a||\"https\"==a||\"\"==a));a?d(n):e(new Cn(n.status,b))}};n.onerror=function(){e(new Bn(\"Network error\",b))};var L;if(f.headers){for(var ia in f.headers)L=f.headers[ia],null!=L&&n.setRequestHeader(ia,L);L=f.headers[\"Content-Type\"]}ia=h.FormData&&!1;\"POST\"!=a||void 0!==L||ia||n.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded;charset=utf-8\");f.withCredentials&&(n.withCredentials=f.withCredentials);f.responseType&&(n.responseType=f.responseType);f.ee&&n.overrideMimeType(f.ee);0<f.Je&&(k=h.setTimeout(function(){n.onreadystatechange=ba;n.abort();e(new Dn(b))},f.Je));try{n.send(null)}catch(rb){n.onreadystatechange=ba,h.clearTimeout(k),e(new Bn(\"Error sending XHR: \"+rb.message,b))}})},Bn=function(a,b){y.call(this,a+\", url=\"+b);this.url=b};x(Bn,y);Bn.prototype.name=\"XhrError\";var Cn=function(a,b){Bn.call(this,\"Request Failed, status=\"+a,b)};x(Cn,Bn);Cn.prototype.name=\"XhrHttpError\";var Dn=function(a){Bn.call(this,\"Request timed out\",a)};x(Dn,Bn);Dn.prototype.name=\"XhrTimeoutError\";m(\"studio.sdk.video.VideoResource.getBlobForUrl\",function(a){return Li().then(function(b){b=b.Da(a);return\"file:\"==window.location.protocol?xd(Error(\"You cannot fetch the blob of a video when running locally. Run a local web server to test this creative (For example, python -m SimpleHTTPServer).\")):Da(b,\"/itag/\")?En(Fn(b)).then(An):An(b)})},void 0);var En=function(a){return zn(\"HEAD\",a).then(function(b){return Gn(b)?zn(\"GET\",a).then(function(a){return En(a.response)}):a})},Fn=function(a){return Da(a,\"/itag/\")&&!Da(a,\"/alr/yes/\")?(a=a.split(\"/\"),a.splice(a.length-2,0,\"alr\",\"yes\"),a.join(\"/\")):a},Gn=function(a){a=a.getResponseHeader(\"Content-Type\");return Da(a,\"text/plain\")};");
