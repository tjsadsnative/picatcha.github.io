!function(t,e){if("object"==typeof Livefyre&&"function"==typeof Livefyre.define&&Livefyre.define.amd){if(Livefyre.require.almond)return Livefyre.define("insights-emitter",[],e);Livefyre.define([],e)}else"function"==typeof define&&define.amd?define([],e):(t.Livefyre=t.Livefyre||{},t.Livefyre["insights-emitter"]=e())}(this,function(){return function t(e,n,r){function o(u,s){if(!n[u]){if(!e[u]){var c="function"==typeof require&&require;if(!s&&c)return c(u,!0);if(i)return i(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[u]={exports:{}};e[u][0].call(p.exports,function(t){var n=e[u][1][t];return o(n?n:t)},p,p.exports,t,e,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(t,e,n){e.exports={version:"0.0.6"}},{}],2:[function(t,e,n){"use strict";var r=t("activity-streams-vocabulary"),o=r.ObjectTypes,i=r.urn("app"),u=r.urn("content"),s=r.urn("collection"),c=t("mout/object/merge"),a=t("./package.json"),p=function(t){return t=t||{},t.el?(this._emitterVersion=a.version,this.collectionId=t.collectionId||null,this.el=t.el.jquery?t.el[0]:t.el,this.name=t.name||null,this.network=t.network||null,this.siteId=t.siteId||null,this.type=t.type||null,this.id=this._parseAppName(t.appName).id||t.id||null,this.version=t.version||null,this.debug=t.debug===!0,void(this.disabled=t.disabled===!0)):(this.disabled=!0,console.warn("InsightsEmitter: No DOM element provided; refusing to continue with setup."))};p.ActivityStreamsVocabulary=r,p.prototype.eventName="insights",p.prototype._buildGenerator=function(){return{type:o.APP,id:this.id?i.create(c(this,{uuid:this.id})):s.create(this)+":defaultApp",name:this.name,version:this.version,source:s.create(this)}},p.prototype._buildObject=function(t){var e={};return e.type=t.type||o.CONTENT,"undefined"!=typeof t.isFeatured&&(e.isFeatured=t.isFeatured===!0),e.type!==o.CONTENT&&e.type!==o.PostMessage||(e.id=u.create(c(this,{contentId:t.id}))),t.inReplyTo&&(e.inReplyTo=u.create(c(this,{contentId:t.inReplyTo}))),t.shareNetworks&&(e.shareNetworks=t.shareNetworks),t.attachments&&(e.attachments=t.attachments),t.contentGenerator&&(e.contentGenerator=t.contentGenerator),e},p.prototype._buildActivity=function(t){if(!t||!t.type||!r.getActivityType(t.type))return console.warn("InsightsEmitter: Invalid activity type provided.");var e={type:t.type,startTime:(new Date).getTime(),emitterVersion:this._emitterVersion,generator:this._buildGenerator()};return t.content&&Object.keys(t.content).length&&(e.object=this._buildObject(t.content)),e},p.prototype._parseAppName=function(t){if(!t)return{};var e=t.split("/",1);return{id:e[0],path:e[1]}},p.prototype._send=function(t){var e=document.createEvent("Event");e.initEvent(this.eventName,!0,!0),e.detail=t;var n=this.el.parentElement?this.el:document.body;return n.dispatchEvent(e),!0},p.prototype.destroy=function(){this._emitterVersion=null,this.collectionId=null,this.el=null,this.name=null,this.network=null,this.siteId=null,this.type=null,this.id=null,this.version=null,this.debug=null,this.disabled=null},p.prototype.send=function(t){if(!this.disabled){var e=this._buildActivity(t);if(e){if(this.debug){var n=[];console.log("Message"),console.log(JSON.stringify(e,function(t,e){if(t&&"object"==typeof e){var r=n.indexOf(e);if(r>=0)return"[Circular-ish Reference:"+r+"]";n.push(e)}return e},4)),n=null}return this._send(e),this}}},e.exports=p},{"./package.json":1,"activity-streams-vocabulary":7,"mout/object/merge":35}],3:[function(t,e,n){e.exports=function(){function t(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}return t.parasitically=function(e,n){for(var r,o=t.keys(n.prototype),i=o.length,u=0;i>u;u++)r=o[u],e.prototype[r]||(e.prototype[r]=n.prototype[r])},t.keys=Object.keys||function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(o){if("object"!=typeof o&&"function"!=typeof o||null===o)throw new TypeError("Object.keys called on a non-object");var i=[];for(var u in o)t.call(o,u)&&i.push(u);if(e)for(var s=0;r>s;s++)t.call(o,n[s])&&i.push(n[s]);return i}}(),t}()},{}],4:[function(t,e,n){"use strict";var r=(t("mout/object/forIn"),t("./activity-types")),o=t("./object-types"),i=t("./json-ld-keywords"),u=t("./generator-types"),s=function(){};s.prototype.vocabularies={activity:r,generator:u,object:o,jsonld:i},s.prototype.get=function(t,e){function n(){var t=arguments[0],e=arguments[2],n=arguments[3];return!e||n[e-1]&&n[e-1].search(/[A-Z]/)>=0?t:"_"+t}if(!t)return console.log("No vocab supplied."),!1;if(t=t.replace(/([A-Z])/g,n).toUpperCase(),e)return"string"!=typeof e?(console.log("Expected a string for vocabulary class, got "+typeof e),!1):(e=e.toLowerCase(),this.vocabularies[e]?this.vocabularies[e][t]:(console.log("Invalid vocabulary class provided: "+e),!1));var r=!1;return forEach(this.vocabularies,function(e){return e[t]?void(r=e[t]):void 0}),r};var c=new s;e.exports={get:c.get.bind(c)}},{"./activity-types":5,"./generator-types":6,"./json-ld-keywords":8,"./object-types":9,"mout/object/forIn":30}],5:[function(t,e,n){e.exports={COLLAPSE_REPLIES:"CollapseReplies",EXPAND_REPLIES:"ExpandReplies",INIT:"Init",LIKE:"Like",LOAD:"Load",MODAL_VIEW:"ModalView",POST:"Post",POSTED:"Posted",REQUEST_MORE:"RequestMore",SHARE:"Share",SHARE_FACEBOOK:"ShareFacebook",SHARE_ON_POST_CLICK:"ShareOnPostClick",SHARE_TWITTER:"ShareTwitter",SHARE_URL:"ShareURL",TWITTER_LIKE_CLICKED:"TwitterLikeClicked",TWITTER_REPLY_CLICKED:"TwitterReplyClicked",TWITTER_RETWEET_CLICKED:"TwitterRetweetClicked",UNLIKE:"Unlike",VIEW:"View"}},{}],6:[function(t,e,n){e.exports={APP:"App",AUTH_DELEGATE:"AuthDelegate"}},{}],7:[function(t,e,n){"use strict";var r=t("./activity-streams-vocabulary"),o=t("./activity-types"),i=t("./object-types"),u=t("./json-ld-keywords"),s=t("./generator-types");e.exports={ActivityTypes:o,ObjectTypes:i,JsonLDKeywords:u,GeneratorTypes:s,get:r.get,getActivityType:function(t){return r.get(t,"activity")},getJSONLD:function(t){return r.get(t,"activity")},getObjectType:function(t){return r.get(t,"jsonld")},getGeneratorType:function(t){return r.get(t,"generator")},urn:function(e){if(e)switch(e=e.toLowerCase()){case"activity":return t("./urn/activity");case"app":return t("./urn/app");case"content":return t("./urn/content");case"collection":return t("./urn/collection");case"user":return t("./urn/user")}}}},{"./activity-streams-vocabulary":4,"./activity-types":5,"./generator-types":6,"./json-ld-keywords":8,"./object-types":9,"./urn/activity":10,"./urn/app":11,"./urn/collection":13,"./urn/content":14,"./urn/user":15}],8:[function(t,e,n){"use strict";e.exports={CONTEXT:"context",ID:"id",TYPE:"type",VALUE:"value"}},{}],9:[function(t,e,n){e.exports={CONTENT:"Content",LINK:"Link",POST_MESSAGE:"PostMessage"}},{}],10:[function(t,e,n){"use strict";function r(t){i.call(this,t)}var o=t("inherits"),i=t("./base-urn");o(r,i),r.prototype.pattern=/^urn:uuid:(.*)$/,r.prototype.template="urn:uuid:{uuid}";var u=new r;e.exports={create:function(t){return u.create(t)},parse:function(t){return u.parse(t)}}},{"./base-urn":12,inherits:3}],11:[function(t,e,n){"use strict";function r(t){i.call(this,t)}var o=t("inherits"),i=t("./base-urn");o(r,i),r.prototype.pattern=/^urn:livefyre:([^:]+):app=(.*)$/,r.prototype.template="urn:livefyre:{network}:app={uuid}";var u=new r;e.exports={create:function(t){return u.create(t)},parse:function(t){return u.parse(t)}}},{"./base-urn":12,inherits:3}],12:[function(t,e,n){"use strict";function r(){"function"==typeof this.pattern&&this.pattern(),"function"==typeof this.template&&this.template(),this._tokens=[],this._buildTokens()}var o=t("mout/array/forEach"),i=t("mout/array/reject"),u=t("mout/object/has");r.prototype._buildTokens=function(){var t=this.template.match(this.pattern),e=this;t.shift(),o(t,function(t){e._tokens.push(t.replace(/{|}/g,""))})},r.prototype._render=function(t,e){var n,r=e||this.template;return o(this._tokens,function(e){n=new RegExp("{"+e+"}","g"),r=r.replace(n,t[e])}),r},r.prototype._validateOpts=function(t){return t?i(this._tokens,function(e){return u(t,e)}):!1},r.prototype.create=function(t){var e=this._validateOpts(t);if(e.length)throw new Error("Cannot construct URN. Missing token & value for option(s): "+e.join(","));return this._render(t)},r.prototype.parse=function(t){var e=t.match(this.pattern);if(!e)throw new Error("Could not parse URN: "+t);e.shift();var n={},r=this;return o(e,function(t,e){n[r._tokens[e]]=t}),n},r.prototype.pattern=function(){throw new Error("Pattern not supplied")},r.prototype.template=function(){throw new Error("Template not supplied")},e.exports=r},{"mout/array/forEach":16,"mout/array/reject":17,"mout/object/has":33}],13:[function(t,e,n){"use strict";function r(t){i.call(this,t)}var o=t("inherits"),i=t("./base-urn");o(r,i),r.prototype.pattern=/^urn:livefyre:([^:]+):site=([^:]+):collection=(.*)$/,r.prototype.template="urn:livefyre:{network}:site={siteId}:collection={collectionId}";var u=new r;e.exports={create:function(t){return u.create(t)},parse:function(t){return u.parse(t)}}},{"./base-urn":12,inherits:3}],14:[function(t,e,n){"use strict";function r(t){i.call(this,t)}var o=t("inherits"),i=t("./base-urn");o(r,i),r.prototype.pattern=/^urn:livefyre:([^:]+):site=([^:]+):collection=([^:]+):content=(.*)$/,r.prototype.template="urn:livefyre:{network}:site={siteId}:collection={collectionId}:content={contentId}";var u=new r;e.exports={create:function(t){return u.create(t)},parse:function(t){return u.parse(t)}}},{"./base-urn":12,inherits:3}],15:[function(t,e,n){"use strict";function r(t){i.call(this,t)}var o=t("inherits"),i=t("./base-urn");o(r,i),r.prototype.pattern=/^urn:livefyre:([^:]+):user=(.*)$/,r.prototype.template="urn:livefyre:{network}:user={userId}";var u=new r;e.exports={create:function(t){return u.create(t)},parse:function(t){return u.parse(t)}}},{"./base-urn":12,inherits:3}],16:[function(t,e,n){function r(t,e,n){if(null!=t)for(var r=-1,o=t.length;++r<o&&e.call(n,t[r],r,t)!==!1;);}e.exports=r},{}],17:[function(t,e,n){function r(t,e,n){e=o(e,n);var r=[];if(null==t)return r;for(var i,u=-1,s=t.length;++u<s;)i=t[u],e(i,u,t)||r.push(i);return r}var o=t("../function/makeIterator_");e.exports=r},{"../function/makeIterator_":19}],18:[function(t,e,n){function r(t){return t}e.exports=r},{}],19:[function(t,e,n){function r(t,e){if(null==t)return o;switch(typeof t){case"function":return"undefined"!=typeof e?function(n,r,o){return t.call(e,n,r,o)}:t;case"object":return function(e){return u(e,t)};case"string":case"number":return i(t)}}var o=t("./identity"),i=t("./prop"),u=t("../object/deepMatches");e.exports=r},{"../object/deepMatches":29,"./identity":18,"./prop":20}],20:[function(t,e,n){function r(t){return function(e){return e[t]}}e.exports=r},{}],21:[function(t,e,n){function r(t){switch(c(t)){case"Object":return o(t);case"Array":return s(t);case"RegExp":return i(t);case"Date":return u(t);default:return t}}function o(t){return a(t)?p({},t):t}function i(t){var e="";return e+=t.multiline?"m":"",e+=t.global?"g":"",e+=t.ignoreCase?"i":"",new RegExp(t.source,e)}function u(t){return new Date(+t)}function s(t){return t.slice()}var c=t("./kindOf"),a=t("./isPlainObject"),p=t("../object/mixIn");e.exports=r},{"../object/mixIn":36,"./isPlainObject":26,"./kindOf":28}],22:[function(t,e,n){function r(t,e){switch(c(t)){case"Object":return o(t,e);case"Array":return i(t,e);default:return u(t)}}function o(t,e){if(a(t)){var n={};return s(t,function(t,n){this[n]=r(t,e)},n),n}return e?e(t):t}function i(t,e){for(var n=[],o=-1,i=t.length;++o<i;)n[o]=r(t[o],e);return n}var u=t("./clone"),s=t("../object/forOwn"),c=t("./kindOf"),a=t("./isPlainObject");e.exports=r},{"../object/forOwn":31,"./clone":21,"./isPlainObject":26,"./kindOf":28}],23:[function(t,e,n){var r=t("./isKind"),o=Array.isArray||function(t){return r(t,"Array")};e.exports=o},{"./isKind":24}],24:[function(t,e,n){function r(t,e){return o(t)===e}var o=t("./kindOf");e.exports=r},{"./kindOf":28}],25:[function(t,e,n){function r(t){return o(t,"Object")}var o=t("./isKind");e.exports=r},{"./isKind":24}],26:[function(t,e,n){function r(t){return!!t&&"object"==typeof t&&t.constructor===Object}e.exports=r},{}],27:[function(t,e,n){function r(t){switch(typeof t){case"string":case"number":case"boolean":return!0}return null==t}e.exports=r},{}],28:[function(t,e,n){function r(t){return null===t?"Null":t===o?"Undefined":i.exec(u.call(t))[1]}var o,i=/^\[object (.*)\]$/,u=Object.prototype.toString;e.exports=r},{}],29:[function(t,e,n){function r(t,e){for(var n=-1,r=t.length;++n<r;)if(u(t[n],e))return!0;return!1}function o(t,e){for(var n=-1,o=e.length;++n<o;)if(!r(t,e[n]))return!1;return!0}function i(t,e){var n=!0;return s(e,function(e,r){return u(t[r],e)?void 0:n=!1}),n}function u(t,e){return t&&"object"==typeof t?c(t)&&c(e)?o(t,e):i(t,e):t===e}var s=t("./forOwn"),c=t("../lang/isArray");e.exports=u},{"../lang/isArray":23,"./forOwn":31}],30:[function(t,e,n){function r(){s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=!0;for(var t in{toString:null})u=!1}function o(t,e,n){var o,a=0;null==u&&r();for(o in t)if(i(e,t,o,n)===!1)break;if(u)for(var p=t.constructor,l=!!p&&t===p.prototype;(o=s[a++])&&("constructor"===o&&(l||!c(t,o))||t[o]===Object.prototype[o]||i(e,t,o,n)!==!1););}function i(t,e,n,r){return t.call(r,e[n],n,e)}var u,s,c=t("./hasOwn");e.exports=o},{"./hasOwn":34}],31:[function(t,e,n){function r(t,e,n){i(t,function(r,i){return o(t,i)?e.call(n,t[i],i,t):void 0})}var o=t("./hasOwn"),i=t("./forIn");e.exports=r},{"./forIn":30,"./hasOwn":34}],32:[function(t,e,n){function r(t,e){for(var n=e.split("."),r=n.pop();e=n.shift();)if(t=t[e],null==t)return;return t[r]}t("../lang/isPrimitive");e.exports=r},{"../lang/isPrimitive":27}],33:[function(t,e,n){function r(t,e){return i(t,e)!==o}var o,i=t("./get");e.exports=r},{"./get":32}],34:[function(t,e,n){function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=r},{}],35:[function(t,e,n){function r(){var t,e,n,s,c=1;for(s=i(arguments[0]);n=arguments[c++];)for(t in n)o(n,t)&&(e=n[t],u(e)&&u(s[t])?s[t]=r(s[t],e):s[t]=i(e));return s}var o=t("./hasOwn"),i=t("../lang/deepClone"),u=t("../lang/isObject");e.exports=r},{"../lang/deepClone":22,"../lang/isObject":25,"./hasOwn":34}],36:[function(t,e,n){function r(t,e){for(var n,r=0,u=arguments.length;++r<u;)n=arguments[r],null!=n&&i(n,o,t);return t}function o(t,e){this[e]=t}var i=t("./forOwn");e.exports=r},{"./forOwn":31}]},{},[2])(2)});