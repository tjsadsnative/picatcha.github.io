(function(d){d.gritter={};d.gritter.options={position:"",class_name:"",fade_in_speed:"medium",fade_out_speed:1E3,time:6E3};d.gritter.add=function(a){try{return e.add(a||{})}catch(b){var c="Gritter Error: "+b;"undefined"!=typeof console&&console.error?console.error(c,a):alert(c)}};d.gritter.remove=function(a,b){e.removeSpecific(a,b||{})};d.gritter.removeAll=function(a){e.stop(a||{})};var e={position:"",fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_close:'<div class="gritter-close" id="close-[[id]]"></div>',_tpl_title:'<span class="gritter-title">[[title]]</span>',_tpl_item:'<div id="gritter-item-[[id]]" class="gritter-item-wrapper [[item_class]]" style="display:none"><div class="gritter-top"></div><div class="gritter-item">[[close]][[image]][[dismiss]]<div class="[[class_name]]">[[title]]<p>[[text]]</p></div><div style="clear:both"></div></div><div class="gritter-bottom"></div></div>',_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',add:function(a){"string"==typeof a&&(a={text:a});if(!a.text)throw'You must supply "text" parameter.';this._is_setup||this._runSetup();var b=a.id,c=a.title,p=a.text,f=a.image||"",n=a.dismiss||!1,g=a.sticky||!1,l=a.class_name||d.gritter.options.class_name,m=d.gritter.options.position,h=a.time||"";this._verifyWrapper();this._item_count++;var k=this._tpl_item;d(["before_open","after_open","before_close","after_close"]).each(function(c,f){e["_"+f+"_"+b]=d.isFunction(a[f])?a[f]:function(){}});this._custom_timer=0;h&&(this._custom_timer=h);b=""!=b?b:"";h=""!=f?'<img src="'+f+'" class="gritter-image" />':"";f=""!=f?"gritter-with-image":"gritter-without-image";n="1"==n?'<div class="gritter-dismiss" id="dismiss-container-'+b+'"></div>':"";c=c?this._str_replace("[[title]]",c,this._tpl_title):"";k=this._str_replace("[[title]] [[text]] [[close]] [[image]] [[dismiss]] [[id]] [[class_name]] [[item_class]]".split(" "),[c,p,this._tpl_close,h,n,b,f,l],k);if(!1===this["_before_open_"+b]())return!1;d("#gritter-notice-wrapper").addClass(m).append(k);c=d("#gritter-item-"+b);c.fadeIn(this.fade_in_speed,function(){e["_after_open_"+b](d(this))});g||this._setFadeTimer(c,b);d(c).bind("mouseenter mouseleave",function(a){"mouseenter"==a.type?g||e._restoreItemIfFading(d(this),b):g||e._setFadeTimer(d(this),b);e._hoverState(d(this),a.type)});d(c).find(".gritter-close").click(function(){e.removeSpecific(b,{},null,!0)});return b},_countRemoveWrapper:function(a,b,c){b.remove();this["_after_close_"+a](b,c);0==d(".gritter-item-wrapper").length&&d("#gritter-notice-wrapper").remove()},_fade:function(a,b,c,d){c=c||{};var f="undefined"!=typeof c.fade?c.fade:!0;c=c.speed||this.fade_out_speed;this["_before_close_"+b](a,d);d&&a.unbind("mouseenter mouseleave");f?a.animate({opacity:0},c,function(){a.animate({height:0},300,function(){e._countRemoveWrapper(b,a,d)})}):this._countRemoveWrapper(b,a)},_hoverState:function(a,b){"mouseenter"==b?(a.addClass("hover"),a.find(".gritter-close").show()):(a.removeClass("hover"),a.find(".gritter-close").hide())},removeSpecific:function(a,b,c,e){c||(c=d("#gritter-item-"+a));this._fade(c,a,b||{},e)},_restoreItemIfFading:function(a,b){clearTimeout(this["_int_id_"+b]);a.stop().css({opacity:"",height:""})},_runSetup:function(){for(opt in d.gritter.options)this[opt]=d.gritter.options[opt];this._is_setup=1},_setFadeTimer:function(a,b){this["_int_id_"+b]=setTimeout(function(){e._fade(a,b)},this._custom_timer?this._custom_timer:this.time)},stop:function(a){var b=d.isFunction(a.before_close)?a.before_close:function(){},c=d.isFunction(a.after_close)?a.after_close:function(){};a=d("#gritter-notice-wrapper");b(a);a.fadeOut(function(){d(this).remove();c()})},_str_replace:function(a,b,c,d){var f=0,e=0,g="",l="",m=0,h=0;a=[].concat(a);b=[].concat(b);var k=b instanceof Array,q=c instanceof Array;c=[].concat(c);d&&(this.window[d]=0);f=0;for(m=c.length;f<m;f++)if(""!==c[f])for(e=0,h=a.length;e<h;e++)g=c[f]+"",l=k?void 0!==b[e]?b[e]:"":b[0],c[f]=g.split(a[e]).join(l),d&&c[f]!==g&&(this.window[d]+=(g.length-c[f].length)/a[e].length);return q?c:c[0]},_verifyWrapper:function(){0==d("#gritter-notice-wrapper").length&&d("#GritterContainer").append(this._tpl_wrap)}}})(jQuery);