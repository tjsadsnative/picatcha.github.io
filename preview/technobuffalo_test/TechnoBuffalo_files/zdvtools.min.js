if("undefined"===typeof ZDVTools){var ZDVTools={version:20150623,self:null,win:window,enableDebug:!1,enableSafeFramesHack:!1,enableMutations:!1,scriptUrl:"//static.ziffdavis.com/jst/zdvtools.min.js",slowAdThreshold:25E3,onViewable:[],onLoaded:[],roundTiming:function(a){return+(Math.round(a/1E3+"e+3")+"e-3")},timings:{init:{timestamp:(new Date).getTime(),timing:window.performance&&performance.now?+(Math.round(window.performance.now()/1E3+"e+3")+"e-3"):null},DFPinit:{timestamp:null,timing:null}},ads:{},
_observer:null,_options:null,_tickerInterval:null,_UUID:null,_msgs:"",_isIFrame:window==window.top?!1:!0,throttleDown:function(){var a=ZDVTools;a._tickerInterval&&a.win.clearInterval(a._tickerInterval);a._tickerInterval=a.win.setInterval(a._tick,150);a.debug("ZDVTools: Slowing down watchdog")},stop:function(){var a=ZDVTools;a._tickerInterval&&a.win.clearInterval(a._tickerInterval);a._observer&&a._observer.disconnect()},debug:function(a,b){window.console&&(window.ZDVTools||parent.ZDVTools||top.ZDVTools).enableDebug&&
(b||(b="green"),console.log("%c"+a,"color: "+b))},generateUUID:function(){return"xxxxxxxxxxxxxyxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})},trackZDBB:function(a,b,d,c){var e=ZDVTools;c&&(b||(b=e.win.document.getElementById(c.iframeId)),d||(d=c.name));d||(d=e.getName(b));c||(c=e.getAd());if(!c.DFA||c.creativeId){try{var f=e.win.location.hostname}catch(g){}e.debug("ZDVTools: AD "+a+": "+d+" "+c.size+" "+c[a.toLowerCase().replace("moatviewable",
"moatViewable").replace("moatfullviewable","moatFullViewable")].timing);b=e.win.googletag||null;var h=c.uuid?c.uuid:c.slot&&c.slot.getTargeting("zc")?c.slot.getTargeting("zc")[0]:"";a=["http://zdbb.net/n/WU2TPsgLEeSUDxIxPSpF6g?agent=zdvtool","iver="+encodeURIComponent(e.version),"host="+encodeURIComponent(f||""),"ev="+encodeURIComponent(a||""),"li="+encodeURIComponent(c.lineItemId||""),"cid="+encodeURIComponent(c.creativeId||""),"slot="+encodeURIComponent(c.adUnitPath||""),"size="+encodeURIComponent(c.size||
""),"name="+encodeURIComponent(d),"corrid="+encodeURIComponent(c.correlatorId||b&&b.pubads?b.pubads().getCorrelator()||"":""),"ptime="+encodeURIComponent(e.timings.DFPinit.timing||""),"dtime="+encodeURIComponent(c.DFPRendered?c.DFPRendered.timing:""),"stime="+encodeURIComponent(c.loaded?c.loaded.timing:""),"ftime="+encodeURIComponent(c.viewable?c.viewable.timing:""),"moatftime="+encodeURIComponent(c.moatViewable?c.moatViewable.timing:""),"moat100ftime="+encodeURIComponent(c.moatFullViewable?c.moatFullViewable.timing:
""),"zc="+encodeURIComponent(h||""),"zcp="+encodeURIComponent(e._UUID||""),"refresh="+encodeURIComponent(c.refresh||""),"err="+encodeURIComponent(c.errors?c.errors.join(","):""),"adtype="+encodeURIComponent(c.DFA?"dfa":c.safeFrame?"safeFrame":"fif"),"actview="+encodeURIComponent(c.activeViewEngine||"")];d=e.win.document.createElement("img");d.width=1;d.height=1;d.alt="zdvtools";d.style.position="absolute";d.src=a.join("&");e.debug("ZDVTools BBPIXEL: "+d.src,"blue");return!0}},getName:function(a){try{var b=
"string"===typeof a?a:a.id;if(-1!==b.indexOf("DfpVisibilityIdentifier_"))return b;var d=b.match(/google_ads_iframe_(.+)/)[1];return d&&-1==d.indexOf("__hidden")?d:null}catch(c){return null}},getAd:function(a,b){if(!a)return null;var d=ZDVTools;"undefined"===typeof d.ads[a]&&(d.ads[a]=[]);var c=d.ads[a]&&0<d.ads[a].length?d.ads[a].length-1:0;b&&d.ads[a]&&d.ads[a][c].DFPRendered&&(c+=1);if("undefined"===typeof d.ads[a][c]){var e={timestamp:(new Date).getTime(),timing:d.roundTiming(d.win.performance.now())};
d.ads[a].push({name:a,iframeId:null,adUnitPath:null,init:e,loaded:null,viewable:null,moatViewable:null,moatFullViewable:null,creativeId:null,lineItemId:null,containerId:null,size:null,width:null,height:null,slot:null,uuid:null,safeFrame:!1,errors:[],refresh:c,DFPRendered:!1,slowAd:null,isEmpty:!1,activeViewEngine:null,DFA:null});d.slowAdThreshold&&(d.ads[a][c].slowAd=d.win.setTimeout(function(){var b=d.ads[a][c];try{b.DFA||(document.getElementById(b.iframeId).contentWindow.document.body.innerHTML||
b.isEmpty?b.errors.push("SLOWAD"):b.errors.push("EMPTYAD"))}catch(e){b.errors.push("SLOWAD")}b.slowAd=null},d.slowAdThreshold))}return d.ads[a][c]},_adLoaded:function(a,b){a&&a.tagName&&a.id||(a=this);if(!a||!a.src||"about:blank"!==a.src){var d=ZDVTools,c=d.getName(a);if(c){if(b||(b=d.getAd(c)),!b.loaded){b.loaded={timestamp:(new Date).getTime(),timing:d.roundTiming(d.win.performance.now())};try{b.iframeId&&!document.getElementById(b.iframeId).contentWindow.document.body.innerHTML&&b.errors.push("EMPTYAD")}catch(e){}d.trackZDBB("LOADED",
a,c,b);if(b.slowAd)try{d.win.clearTimeout(b.slowAd),b.slowAd=null}catch(f){}for(c=0;c<d.onLoaded.length;c++)d.onLoaded[c](b);try{var d={},g;for(g in b)"slot"!=g&&(d[g]=b[g]);window.postMessage({agent:"zdvtool",event:"adLoaded",elementId:b.containerId,ad:d},"*")}catch(h){}}}else d.debug("ZDVTools sanity error on ad loaded "+a.id)}},_adViewable:function(a,b,d,c,e){var f=ZDVTools;try{if(window.parent!=window&&window.parent.ZDVTools)return window.parent.ZDVTools.adViewable(a,b,d,c,e)}catch(g){}a||(a=
this);b||(b=f.getName(a));if(b){d||(d=f.getAd(b));var h=d.loaded;e=e?"moatfull"==e?"moatFullViewable":"moatViewable":"viewable";if("undefined"===typeof d[e]||null==d[e]||"undefined"===typeof d[e].timestamp||!d[e].timestamp){h&&h.timing?d[e]={timestamp:(new Date).getTime(),timing:Number(Math.round(f.roundTiming(f.win.performance.now())-h.timing+"e3")+"e-3")}:(f.debug("ZDVTools sanity error: ad viewable but not loaded "+a.id),d[e]={timestamp:(new Date).getTime(),timing:-f.roundTiming(f.win.performance.now())});
c&&(-1!=c.indexOf("id=osdim")?d.activeViewEngine="osdim":-1!=c.indexOf("id=lidar")&&(d.activeViewEngine="lidar"));f.trackZDBB(e.toUpperCase(),a,b,d);if(f.onViewable&&d.viewable)for(a=0;a<f.onViewable.length;a++)f.onViewable[a](d);try{var f={},k;for(k in d)"slot"!=k&&(f[k]=d[k]);window.postMessage({agent:"zdvtool",event:e.toUpperCase(),elementId:d.containerId,ad:f},"*")}catch(m){}}}else f.debug("ZDVTools sanity error on ad viewable: can't find iframe "+a.id)},_MoatCallback:function(a){if(a.wasViewable||
a.wasViewableGroupM){var b=window.top.ZDVTools;try{if(b.enableDebug&&window.JSON&&window.JSON.stringify&&b.debug("ZDVTools MOAT CALLBACK: "+window.JSON.stringify(a),"blue"),window.frameElement)a.wasViewable&&b._adViewable(window.frameElement,null,null,"","moat"),a.wasViewableGroupM&&b._adViewable(window.frameElement,null,null,"","moatfull");else for(var d in b.ads){var c=b.ads[d],e=c[c.length-1];a.adIds&&3<a.adIds.length&&a.adIds[2]==e.lineItemId&&a.adIds[3]==e.creativeId&&!e.viewable&&(a.wasViewable&&
!e.moatViewable&&b._adViewable(document.getElementById(e.name),e.name,e,"","moat"),a.wasViewableGroupM&&!e.moatFullViewable&&b._adViewable(document.getElementById(e.name),e.name,e,"","moatfull"))}}catch(f){try{parent.postMessage({agent:"zdvtools",event:a.wasViewableGroupM?"MOATFULLVIEWABLE":"MOATVIEWABLE",url:a.wasViewableGroupM?"moatfull":"moat",name:window.name,safeFrameUrl:window.location.href,safeFrameId:window.frameElement.id||""},"*")}catch(g){}}}},_initDFAUnit:function(a,b){var d=ZDVTools;
b.containerId=a.parentNode.id||a.id;b.DFA={id:a.id,avi:a._avi_,cid:a._cid_,url:""};var c=a.getElementsByTagName("iframe")?a.getElementsByTagName("iframe")[0]:null;c&&(b.iframeId=c.id,b.width=c.offsetWidth||parseInt(c.width||"0")||null,b.height=c.offsetHeight||parseInt(c.height||"0")||null,"undefined"==b.width||"undefined"==b.height)&&(b.width=null,b.height=null);b.width&&b.height&&(b.size=b.width+"x"+b.height);b.DFPRendered={timestamp:(new Date).getTime(),timing:d.roundTiming(d.win.performance.now())};
b.loaded={timestamp:(new Date).getTime(),timing:d.roundTiming(d.win.performance.now())};if(b.slowAd)try{d.win.clearTimeout(b.slowAd),b.slowAd=null}catch(e){}d._initDFAMoat(a,b);for(var c=a.parentNode.getElementsByTagName("script"),f=0;f<c.length;f++)if(d=c[f],d.src&&(-1!=d.src.indexOf("//ad2.netshelter.net/adj/")||-1!=d.src.indexOf("//ad.doubleclick.net/adj/"))){c=d.src.replace("//ad2.netshelter.net/adj/","//ad.doubleclick.net/adj/");b.DFA.url=d.src.replace(/ord=([0-9]+)/g,"").replace("?","");try{b.adUnitPath=
c.match(/ad.doubleclick.net\/adj\/([^;]+)/gi)[0].replace("ad.doubleclick.net/adj","").replace(/ /g,"_"),c.match(/ppos=(.+);/)&&(b.adUnitPath+="/"+c.match(/ppos=(.+?);/)[1].toUpperCase())}catch(g){}if(!b.width||!b.size)try{b.size=sdfaSrc.match(/sz=([0-9x,]+);/i)[1].split(",")[0],b.width=parseInt(b.size.split("x")[0])||0,b.height=parseInt(b.size.split("x")[1])||0}catch(h){}break}return b},_initDFAMoat:function(a,b){if(!b.lineItemId)for(var d=ZDVTools,c=a.getElementsByTagName("script")||[],e=0;e<c.length;e++){var f=
c[e];f.src&&-1!=f.src.indexOf("js.moatads.com/ziffdaviscwnew43828694654/moatad.js")&&(f=f.src,b.lineItemId=f.match(/&moatClientLevel3=([0-9]+)&/)?f.match(/&moatClientLevel3=([0-9]+)&/)[1]:b.lineItemId,b.creativeId=f.match(/&moatClientLevel4=([0-9]+)&/)?f.match(/&moatClientLevel4=([0-9]+)&/)[1]:b.creativeId,b.uuid=f.match(/&zMoatImpCorrelator=([a-z0-9-]+)/i)?f.match(/&zMoatImpCorrelator=([a-z0-9-]+)/)[1]:b.uuid,d._UUID||(d._UUID=f.match(/&zMoatPVCorrelator=([a-z0-9-]+)/i)?f.match(/&zMoatPVCorrelator=([a-z0-9-]+)/)[1]:
d._UUID),b.creativeId&&(b.loaded=null,d._adLoaded(a)))}},_tickDFA:function(){var a=ZDVTools;if(a.win.document.getElementsByClassName)for(var b=a.win.document.getElementsByClassName("GoogleActiveViewClass"),d=0;d<b.length;d++){var c=b[d],e=a.getName(c);if(e){var f=a.getAd(e);f.DFA&&f.DFA.avi||!c._avi_||a._initDFAUnit(c,f);f.creativeId||a._initDFAMoat(c,f);if(!f.viewable&&f.DFA&&f.DFA.avi&&window.google_image_requests&&window.google_image_requests.length)for(var g=0;g<window.google_image_requests.length;g++){var h=
window.google_image_requests[g].src;h&&-1==a._msgs.indexOf(h+" ")&&(-1!=h.indexOf("pagead2.googlesyndication.com/activeview?")&&-1!=h.indexOf("&avi="+f.DFA.avi+"&cid="+f.DFA.cid)&&(f.activeViewEngine=h.match(/\activeview?id=([a-z]+)&/i)?h.match(/\activeview?id=([a-z]+)&/i)[1]:"lidar",a._adViewable(c,e,f,h)),a._msgs+=h+" ")}}}},_tick:function(){for(var a=ZDVTools,b=a.win.document.getElementsByTagName("iframe"),d=0;d<b.length;d++){var c=b[d],e=a.getName(c);if(e){var f=a.getAd(e),g=null;c._ZDVToolsOnLoad||
(c.addEventListener("load",a._adLoaded,!1),c._ZDVToolsOnLoad=!0);!f.containerId&&c.parentNode&&c.parentNode.parentNode&&(f.containerId=c.parentNode.parentNode.id||c.parentNode.id);f.iframeId||(f.iframeId=c.id);if(!f.safeFrame||a.enableSafeFramesHack){try{g=c.contentWindow?c.contentWindow:null}catch(h){if(!a.enableSafeFramesHack||-1!=c.name.indexOf(a.scriptUrl)||f.safeFrame){f.safeFrame=!0;continue}a._bootstrapSafeFrame(c)}try{g.yourMoatListener||(g.yourMoatListener=a._MoatCallback)}catch(k){}try{if(!f.viewable&&
g&&g.google_image_requests&&g.google_image_requests.length)for(var m=0;m<g.google_image_requests.length;m++){var l=g.google_image_requests[m].src;l&&-1==a._msgs.indexOf(l+" ")&&(-1!=l.indexOf("pagead2.googlesyndication.com/activeview?")&&a._adViewable(c,e,f,l),a._msgs+=l+" ")}}catch(n){}}}}a._tickDFA()},_bootstrapSafeFrame:function(a,b,d){if(a&&a.name&&a.src){a.id||(a.id="safeframe-"+Math.round(1E4*Math.random()));var c=ZDVTools;if(c.enableSafeFramesHack&&-1==a.name.indexOf(c.scriptUrl)){b=c.getName(a);
d||(d=c.getAd(b));var e=a.src;b='<script>window.safeFrameId="'+a.id+'";\x3c/script><script src="'+c.scriptUrl+'">\x3c/script>';a.src="about:blank";a.name=-1!=a.name.indexOf("/script>")?a.name.replace("\x3c/script>","\x3c/script>"+b):a.name.replace("</body>",b+"</body>");c.debug("ZDVTools: bootstrapping safeframe "+a.id);d.safeFrame||(d.safeFrame="rebooting",a.addEventListener("load",function(){if("about:blank"==this.src||"javascript:\"<html><body style='background:transparent'></body></html>"==this.src)this.contentWindow.name=
this.name,this.src=e,d.safeFrame="bootstrapped",c.debug("ZDVTools: bootstrapped frame "+a.id)}))}}},_tickInsideSafeFrame:function(){if("undefined"!==typeof google_image_requests&&google_image_requests.length){window._msgs||(window._msgs="");for(var a=0;a<google_image_requests.length;a++){var b=google_image_requests[a].src;if(b&&-1==window._msgs.indexOf(b+" ")){if(-1!=b.indexOf("pagead2.googlesyndication.com/activeview?")){try{parent.postMessage({agent:"zdvtoolsSafeFrame",event:"VIEWABLE",url:b,name:window.name,
safeFrameUrl:window.location.href,safeFrameId:window.safeFrameId||""},"*")}catch(d){}window._ZDVTickerInterval&&window.clearInterval(window._ZDVTickerInterval)}window._msgs+=b+" "}}}},receiveCrossFrameMessage:function(a){var b=a.data;if("string"==typeof b)try{b=JSON.parse(b)}catch(d){return}if(b.agent&&"zdvtoolsSafeFrame"==b.agent){var c=ZDVTools;if("SETSAFEFRAMEID"==b.event)b.safeFrameId&&(window.safeFrameId=b.safeFrameId);else{a=b.safeFrameId?document.getElementById(b.safeFrameId):null;if(!a||!c.getName(a)||
!a)if(b.name)try{a=document.getElementsByName(b.name)[0],c.getName(a)}catch(e){c.debug("Missing Safeframe in DOM");return}else if(b.safeFrameUrl)for(var f=document.getElementsByTagName("iframe"),g=0;g<f.length;g++){var h=f[g];if(h.src==b.safeFrameUrl){a=h;c.getName(a);break}}if("VIEWABLE"==b.event)c._adViewable(a,null,null,b.url);else if("MOATVIEWABLE"==b.event)c._adViewable(a,null,null,null,b.url);else if("MOATFULLVIEWABLE"==b.event)c._adViewable(a,null,null,null,b.url);else if("SAFEFRAMEINIT"==
b.event){b=c.getName(a);c=c.getAd(b);c.safeFrame||(c.safeFrame="native");try{a.contentWindow.postMessage({agent:"zdvtoolsSafeFrame",event:"SETSAFEFRAMEID",url:window.location.href,name:a.name,safeFrameUrl:"",safeFrameId:a.id},"*")}catch(k){}}}}},initInsideSafeFrame:function(a,b){if(parent.postMessage){a.win.addEventListener("message",a.receiveCrossFrameMessage,!1);window._ZDVTickerInterval=window.setInterval(a._tickInsideSafeFrame,50);var d=a.getName(window.safeFrameId||window.name);try{parent.postMessage({agent:"zdvtoolsSafeFrame",
event:"SAFEFRAMEINIT",url:"",name:d,safeFrameUrl:window.location.href,safeFrameId:window.safeFrameId||""},"*")}catch(c){}}},initDFP:function(){var a=ZDVTools&&ZDVTools.win?ZDVTools.win:window;a.googletag=a.googletag||{};a.googletag.cmd=a.googletag.cmd||[];googletag.cmd.push(function(){var a=window.ZDVTools?window.ZDVTools:top.ZDVTools;a.timings.DFPinit={timestamp:(new Date).getTime(),timing:window.performance&&performance.now?a.roundTiming(performance.now()):null};googletag.pubads().addEventListener("slotRenderEnded",
function(a){var b=window.ZDVTools||top.ZDVTools,e=b.getAd(a.slot.getSlotId().b);e.adUnitPath=a.slot.getAdUnitPath();e.creativeId=a.creativeId;e.lineItemId=a.lineItemId;e.containerId=a.slot.getSlotId().f;e.correlatorId=googletag.pubads().getCorrelator();e.DFPRendered={timestamp:(new Date).getTime(),timing:b.roundTiming(b.win.performance.now())};try{e.size=a.size[0]+"x"+a.size[1],e.width=a.size[0],e.height=a.size[1]}catch(f){}if(a.isEmpty&&(e.isEmpty=!0,e.errors.push("DFPEMPTYAD"),e.slowAd))try{b.win.clearTimeout(e.slowAd),
e.slowAd=null}catch(g){}e.slot=a.slot;try{e.uuid=a.slot.getTargeting("zc")[0]||null}catch(h){}a=googletag.pubads().j||{};a.zcp&&(zdv._UUID=a.zcp)});a=googletag.pubads();a.refresh_orig=a.refresh;a.refresh=function(a,b){var e=window.ZDVTools?window.ZDVTools:top.ZDVTools;a||(a=googletag.pubads().getSlots());for(var f=0;f<a.length;f++){var g=a[f].getSlotId().b;e.getAd(g,"addnew")}googletag.pubads().refresh_orig(a,b)}})},init:function(a,b){if(document.addEventListener&&window.performance){if(!window.performance.now){Date.now=
Date.now||function(){return(new Date).getTime()};var d=performance.timing&&performance.timing.navigationStart?performance.timing.navigationStart:Date.now();window.performance.now=function(){return Date.now()-d}}try{if(window.frameElement&&(window.yourMoatListener=a._MoatCallback),window.parent!=window&&window.parent.ZDVTools)return}catch(c){return a.initInsideSafeFrame(a,b)}a.self=a;a.win=b&&b.window?b.window:window;b&&b.onLoad&&a.onLoaded.push(b.onLoad);b&&b.onLoaded&&a.onLoaded.push(b.onLoaded);
b&&b.onViewed&&a.onViewable.push(b.onViewed);b&&b.onViewable&&a.onViewable.push(b.onViewable);a.enableDebug=b&&"undefined"!==typeof b.enableDebug?b.enableDebug:a.enableDebug;a.enableDebug=b&&"undefined"!==typeof b.debug?b.debug:a.enableDebug;try{-1!=top.window.location.search.indexOf("zdvtoolsdebug")&&(a.enableDebug=!0)}catch(e){}a.slowAdThreshold=b&&"undefined"!==typeof b.slowAdThreshold?b.slowAdThreshold:a.slowAdThreshold;a.enableSafeFramesHack=b&&"undefined"!==typeof b.enableSafeFramesHack?b.enableSafeFramesHack:
a.enableSafeFramesHack;b&&b.UUID&&(a._UUID=b.UUID);b&&b.gcp&&(a._UUID=b.gcp);b&&b.initTiming&&(a.timings.init=b.initTiming);a.win.yourMoatListener||(a.win.yourMoatListener=a._MoatCallback);a.win.addEventListener("message",a.receiveCrossFrameMessage,!1);a.initDFP();a._tickerInterval=a.win.setInterval(a._tick,75);setTimeout(a.throttleDown,22E3);return a}}};ZDVTools.init(ZDVTools,"undefined"!==typeof window.ZDVOptions?window.ZDVOptions:null)};
