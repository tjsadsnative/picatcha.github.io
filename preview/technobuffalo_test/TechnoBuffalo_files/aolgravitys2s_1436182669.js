/* This source code is Copyright (c) Vibrant Media 2001-2015 and forms part of the patented Vibrant Media product "IntelliTXT" (sm). */
if(!$iTXT){var $iTXT={};}
if(!$iTXT.tmpl){$iTXT.tmpl={};}
if(!$iTXT.tmpl.js){$iTXT.tmpl.js={};}
$iTXT.tmpl.loader["$iTXT.tmpl.js.AolGravityS2S"]=true;$iTXT.tmpl.js.AolGravityS2S_Load=function(){var logger=$iTXT.data.AdLogger.getInstance();var aolGrav={init:function(_options,$super){this.options=_options;$super(_options);},clipNewLine:function(innerText){var strLen=innerText.length;var offset=40;var maxLen=70;var oddChars=3;if(strLen<=offset){return innerText;}
var FC=innerText.substr(offset,1);var WS=' \t\n\r\v';if(WS.indexOf(FC)>-1&&(strLen-offset-1)<=oddChars&&strLen<=maxLen){return innerText.substr(0,offset);}else if(strLen>=maxLen){return innerText.substr(0,maxLen-oddChars)+"...";}
return innerText;},afterTokenize:function(){this.backfillproperties=this.advert.params.get('backfillproperties',false);this.frameEl=document.createElement('div');var divImg=document.createElement('div'),image=document.createElement('img'),divTxt=document.createElement('div'),h1=document.createElement('h1'),divBtn=document.createElement('div'),butt=document.createElement("button"),divH2=document.createElement('div'),h2=document.createElement("h2");this.frameEl.id="itxt_aolg_solo_container";image.id="itxt_aolg_solo_image";h1.id="itxt_aolgs2s_solo_h1";divBtn.id="itxt_aolg_solo_container";butt.id="itxt_aolg_solo_button";h2.id="itxt_aolg_solo_h2";image.src=this.backfillproperties.image;h1.innerHTML=this.clipNewLine(this.backfillproperties.title);var width=300,height=250,imageDim=300,margin=3;this.options.height=this.defaultHeight=height+margin*2;this.options.width=this.defaultWidth=width+margin*2;this.frameEl.style.height=height+'px';this.frameEl.style.width=width+'px';this.frameEl.style.margin=margin+'px';this.frameEl.style.padding=0;divImg.style.height='170px';divImg.style.overflow='hidden';image.style.width=imageDim+'px';image.style.height=imageDim+'px';divTxt.style.height='50px';divTxt.style.overflow='hidden';divBtn.style.height='30px';butt.style.margin='0px';butt.style.paddingLeft='5px';butt.innerHTML="Continue Reading";h2.innerHTML="RECOMMENDED ARTICLE by Gravity";if($iTXT.core.Browser.isSmartphone()){divImg.style.height='150px';butt.style.width='100%';h2.style.position='relative';h2.style.marginTop='0px';h2.style.marginLeft='25px';}
divImg.appendChild(image);divTxt.appendChild(h1);divBtn.appendChild(butt);divH2.appendChild(h2);this.frameEl.appendChild(divImg);this.frameEl.appendChild(divTxt);this.frameEl.appendChild(divBtn);this.frameEl.appendChild(divH2);var adHook=this.advert;var keywordClickURL=logger.getClickURL(adHook,null,null,true);keywordClickURL+='&redir='+encodeURIComponent(this.backfillproperties.clickUrl);adHook.params.set('CLICKTAG',keywordClickURL,999);},onShow:function($super){var that=this,util=$iTXT.core.Util;setTimeout(function(){document.getElementById('itxt_aolg_solo_container').addEventListener('click',function(){logger.clickThrough({redir:that.backfillproperties.clickUrl,cts:that.advert.params.get('cts',0)});});},0);this.rootElement.innerHTML=this.frameEl.outerHTML;util.dropScriptAtLocation(objToArray('script_',this.backfillproperties),'#itxtcontent');VM._.each(objToArray('pixel_',this.backfillproperties),util.dropImage);}};function objToArray(keyPrefix,obj){var arr=[],prefix=keyPrefix.length;for(var key in obj){if(key.substring(0,prefix)===keyPrefix){arr.push(obj[key]);}}
return arr;}
$iTXT.tmpl.js.AolGravityS2S=$iTXT.core.Class.create($iTXT.tmpl.TemplateBase,aolGrav);};