define(["jquery","version!fly/managers/debug","version!fly/components/base"],function(e,t){t=t.init("yahooBeacon"),e.widget("cnet.yahooBeacon",e.fly.base,{options:{yahooId:null,yahooClass:null,videoWaitDelay:300,videoMaxWait:3e4},_create:function(){this.videoMaxWaitTimer=this.options.videoMaxWait,this._super(),this._setupEvents(),this._initializeIfNoVideo()},_setupEvents:function(){var e=this.options;if(this._pageHasVideo()){if(this.videoMaxWaitTimer>0&&(typeof $pdk=="undefined"||!$pdk.controller)){t.log("Waiting for PDK to init"),this.videoMaxWaitTimer-=e.videoWaitDelay,window.setTimeout(function(){this._setupEvents()}.bind(this),e.videoWaitDelay);return}this._initialize()}},_pageHasVideo:function(){return e(".cnetVideoPlayer").length?!0:!1},_initializeIfNoVideo:function(){this._pageHasVideo()||this._initialize()},_initialize:function(){var e=window.utag_data;e["siteEdition"]=="us"&&e["siteHier"].join("|").indexOf("mobile")!=-1&&(e["pageType"]=="product_main"||e["pageType"]=="article"||e["pageType"]=="image_gallery"&&e["pageNum"]=="1")?this._load():e["siteEdition"]=="us"&&(e["siteHier"].join("|").indexOf("laptops")!=-1||e["siteHier"].join("|").indexOf("printers")!=-1)&&e["pageType"]=="product_main"&&this._load()},_load:function(){var e=this.options.yahooId,n=this.options.yahooClass,r=document.createElement("div");r.className=n,r.setAttribute("style","display:none !important"),require(["yahooAds"],function(){t.log("Loaded yad.js"),window.yad&&(document.body.appendChild(r),window.yad(e,{element:document.querySelector("."+n)}))})}})})