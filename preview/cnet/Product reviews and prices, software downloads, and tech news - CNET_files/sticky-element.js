define(["jquery","version!fly/managers/debug","managers/waypoints","version!fly/components/base","version!libs/waypoints/inview"],function(e,t,n){t=t.init("stickyElement"),n.init(),e.widget("cnet.stickyElement",e.fly.base,{options:{classFixed:"fixed",classHidden:"hidden",primaryEdge:"top"},$placeholder:null,inview:null,_create:function(){this._setup(),this._setupPlaceholder(),this._setupEvents()},_setupPlaceholder:function(){this.$placeholder=e('<div class="sticky-element-placeholder '+this.options.classHidden+'"></div>'),this.$placeholder.height(this.$element.outerHeight(!0)),this.options.primaryEdge==="top"?this.$element.before(this.$placeholder):this.options.primaryEdge==="bottom"&&this.$element.after(this.$placeholder)},_setupEvents:function(){var e=this;this.inview=new Waypoint.Inview({element:this.$placeholder[0],entered:function(t){if(e.options.primaryEdge==="top"&&t==="up"||e.options.primaryEdge==="bottom"&&t==="down")e.$placeholder.addClass(e.options.classHidden),e.$element.removeClass(e.options.classFixed),e.$element.trigger("stickyElementUnstuck")},exit:function(t){if(e.options.primaryEdge==="top"&&t==="down"||e.options.primaryEdge==="bottom"&&t==="up")e.$placeholder.removeClass(e.options.classHidden),e.$element.addClass(e.options.classFixed),e.$element.trigger("stickyElementStuck")}})}})})