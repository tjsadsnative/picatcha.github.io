(function(f){function B(a,b){function c(a){var c=b.video,m=l.querySelector(".ft-video-progress-bar");a=Math.max(0,Math.min(m.offsetWidth,a.pageX-m.getBoundingClientRect().left));c.duration?c.currentTime=a/m.offsetWidth*c.duration:c.c&&c.c(a/m.offsetWidth)}function h(){p=!1;document.body.removeEventListener("mousemove",c);document.body.removeEventListener("mouseleave",h);document.removeEventListener("mouseup",h,!0);q&&b.video.play()}function e(a){var c=a.target,m=b.video,n=m.currentTime;switch(a.type){case "progress":if(!a.detail&&
!m.buffered.length)break;a=a.detail&&a.detail.cvLoadRatio||m.buffered.end(0)/m.duration;s.children[0].style.width=100*a+"%";break;case "timeupdate":case "durationchange":s.children[1].style.width=100*(a.detail&&a.detail.hasOwnProperty("cvPlayRatio")?a.detail.cvPlayRatio:n/c.duration)+"%";v.textContent=~~(n/60)+":"+("0"+~~(n%60)).slice(-2);break;case "playing":d();case "volumechange":x.textContent=m.muted?"G":"F";case "pause":p||(w.textContent=m.paused?"D":"E");break;case "ended":d()}}function d(a){var c=
l.getBoundingClientRect(),n=b.video;a=!n.paused&&(!a||"touchstart"!==a.type&&(a.pageX<=c.left||a.pageX>=c.right||a.pageY<=c.top||a.pageY>=c.bottom));w.textContent=n.paused?"D":"E";x.textContent=n.muted?"G":"F";l.className=l.className.replace(/\s*hidden\s*/,"");clearTimeout(m);a&&(m=setTimeout(function(){l.className+=" hidden"},4E3))}var k,m,n=b.settings.parent,p=!1,q,l=a.appendChild(C.cloneNode(!0)),f="timeupdate durationchange volumechange pause playing ended progress".split(" "),t=["mousemove",
"mouseout","touchstart","touchend"],w=l.children[0],s=l.children[1].children[0],v=l.children[2],x=l.children[3],u=l.children[4];w.textContent=b.video.paused?"D":"E";x.textContent=b.settings.muted?"G":"F";l.onselectstart=function(){return!1};for(k=f.length;k--;)n.addEventListener(f[k],e,!0);for(k=t.length;k--;)a.addEventListener(t[k],d),n.addEventListener(t[k],d);l.onclick=function(a){var c=b.video,m=a.target;a.stopPropagation();switch(m.className){case "ft-icon-play":c[c.paused?"play":"pause"]();
break;case "ft-icon-volume":c.muted^=1;x.textContent=c.muted?"G":"F";break;case "ft-icon-fullscreen":a=b.isFullscreen(),b[a?"leaveFullscreen":"goFullscreen"](),u.textContent=u?"B":"C"}};l.onmousedown=l.ontouchstart=function(a){var m=a.target;a.stopPropagation();switch(m.className){case "ft-video-buffer":case "ft-video-progress":case "ft-video-progress-bar":a.preventDefault(),p=!0,q=!b.video.paused,b.video.pause(),document.body.addEventListener("mousemove",c),document.body.addEventListener("mouseleave",
h),document.addEventListener("mouseup",h,!0),c(a)}};l.querySelector(".ft-video-progress-bar").addEventListener("touchmove",c,!0);d()}function D(a){var b,c=document.body.appendChild(document.createElement("span"));c.textContent="ABCDEFG";c.style.cssText="position: absolute; z-index: 10000; left:-999px;";b=c.offsetWidth;c.style.fontFamily="ftglyphs";setTimeout(function e(){if(c.offsetWidth!==b)return c.parentNode.removeChild(c),a(!0);setTimeout(e,100)},200)}function y(a,b){var c=a.settings.actionQueue||
[];c.push(b);a.settings.actionQueue||(a.settings.actionQueue=c)}function E(a){function b(){d.$(document).off(z,b);a.play()}a.video.paused||a.ytVideo&&2===a.video.getPlayerState()||(a.pause(),d.$(document).on(z,b))}var d=f.FT=function(){var a=this,b;d.makeDispatcher(this);a.version=2.7;a.placementProperties={};a.manifestProperties={};a.firedStandardEvents={};a.hasLoaded=!1;a.testMode=!1;a.notTop=f!==f.top;a.politeloadFired=!1;f!==f.top&&-1===location.search.indexOf("test")||d.preventFTTestMode?d.addListener(f,
"message",function(b){a.receiveMessages(b)}):a.testMode=!0;a.addEventListener("politeload",function(){a.politeloadFired=!0});try{if(a.testMode){if(a.placementProperties=d.testing.call(a,{clickTagCount:20}),f.matchMedia){var c=matchMedia("(orientation: portrait)"),h=function(){var b=this.matches?0:90;setTimeout(function(){a.dispatchEvent("orientationchange",{orientation:b,width:f.innerWidth,height:f.innerHeight,scale:f.innerWidth/document.documentElement.clientWidth})})}.bind(c);c.addListener?c.addListener(h):
d.addListener(f,"resize",h);h(c)}}else a.placementProperties=JSON.parse(f.name);f.name=""}catch(e){}try{a.placementProperties.guid=f.localStorage.ftGUID||a.placementProperties.guid}catch(g){a.placementProperties.guid=a.placementProperties.guid}a.addEventListener("orientationchange",function(b){a.placementProperties.orientation=b.orientation;a.placementProperties.maxWidth=b.width;a.placementProperties.maxHeight=b.height;a.placementProperties.scale=b.scale});a.addEventListener("statechange",function(b){a.placementProperties.state=
b});a.addEventListener("viewablechange",function(b){a.placementProperties.isViewable=b});a.addEventListener("maxsizechange",function(b){a.placementProperties.maxWidth=b.width||a.placementProperties.maxWidth;a.placementProperties.maxHeight=b.height||a.placementProperties.maxHeight});a.addEventListener("sizechange",function(b){a.placementProperties.currentWidth=b.width;a.placementProperties.currentHeight=b.height});a.placementProperties.currentWidth=a.placementProperties.currentWidth||f.innerWidth||
document.documentElement.clientWidth;a.placementProperties.currentHeight=a.placementProperties.currentHeight||f.innerHeight||document.documentElement.clientHeight;if(!0===a.get("testInAdserverMode")||/^https?:\/\/www\.flashtalking\.net\/uploads\//.test(location.href))a.tia=!0;d.addListener(f,"click",function(b){a.clickManager.call(a,b)},!1);d.$(f).on("pointerdown MSPointerDown touchstart",function(){a.send("interaction")});d.listen(f,"resize",function(){a.dispatchEvent("sizechange",{width:f.innerWidth||
document.documentElement.clientWidth,height:f.innerHeight||document.documentElement.clientHeight})});"loading"!==document.readyState?(a.dispatchEvent("DOMLoaded"),"complete"===document.readyState||"loaded"===document.readyState?a.dispatchEvent("load"):d.addListener(f,"load",function(b){a.dispatchEvent("load",b)})):d.addListener(document,"readystatechange",function(){"interactive"===document.readyState?a.dispatchEvent("DOMLoaded"):a.dispatchEvent("load")});for(b in d.initialisation)d.initialisation[b].call(this);
d.addEventListener("manifest",function(b){var c={version:a.version,location:location.href,guid:a.get("guid")||!1};a.manifestProperties=b;a.testMode?(b={method:"init",msg:d.testing.call(a,b)},a.receiveMessages({data:JSON.stringify(b)})):a.send("ready",c)});this.defaultCSS='body{margin: 0; padding: 0;}ft-richload, richload{display:block;position:relative;margin:0;padding:0;border:0;}.ft-video, .ft-video *{-webkit-tap-highlight-color:rgba(0, 0, 0, 0);}@font-face{font-family:ftglyphs;src:local("\u263a"),url("${baseURL}/fonts/ftglyphs.woff") format("woff"),url("${baseURL}/fonts/ftglyphs.svg") format("svg");font-weight:normal;font-style:normal;}[class^="ft-icon-"]{font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;padding:0 3px;height:20px;min-width:24px;line-height:20px;cursor:default;-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}.ft-video{position:relative;display:inline-block;}.ft-video-controls{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;color:#fff;speak:none;font-family:ftglyphs;box-sizing:border-box;background-color:rgba(0, 0, 0, 0.7);font-size:18px;display:table;position:absolute;bottom:10px;left:2%;width:96%;height:26px;margin:0 auto;padding:0 2px;border-radius:4px;transition:all 200ms;text-align:center;-webkit-transition:all 200ms;-moz-transition:all 200ms;}.ft-video-controls *{font-family:ftglyphs;}.ft-video-controls.hidden{opacity:0;bottom:0;}[class^="ft-icon-"], .ft-video-progress-container, .ft-time-display{display:table-cell;vertical-align:middle;width:24px;padding:5px 2px;}.ft-video-progress-container{width:100%;}.ft-video-progress-bar{overflow:hidden;display:block;position:relative;box-sizing:border-box;border:2px solid white;border-radius:8px;width:100%;height:12px;}.ft-video-progress-bar::after{position: absolute;top:0;left:0;right:0;bottom:0;box-shadow:inset 0 0 4px black;border-radius:8px;content:"";}.ft-video-progress,.ft-video-buffer{position:absolute;top:0px;bottom:0px;left:0px;background-color:#fff;}.ft-video-buffer{background-color:rgba(255, 255, 255, 0.4);}.ft-time-display{line-height:1.7em;font-size:0.7em;width:50px;padding:5px 5px;}';
this.insertCSS(document,this.defaultCSS);d.include("manifest.js")};d.query=function(a){var b=null;return b=a.match(/#[a-z0-9_\-]+$/i)?document.querySelector(a):document.querySelectorAll(a)};d.include=function(a,b){function c(a){for(var b=e.length;b--;)if(-1<e[b].src.indexOf(a))return"";return("https:"===location.protocol?"https://secure":"http://cdn")+a}var h=document.createElement("script"),e=document.getElementsByTagName("script"),g={canvasvideo:"1/1",carousel:"1/1",storelocator:"1/1",subloader:"1/1",
touch:"1/1",transform:"1/1",maps:"1/0"};if(g.hasOwnProperty(a.toLowerCase())){if("maps"===a&&!f.L){d.include(("https:"===location.protocol?"https:":"http:")+"//cdn.flashtalking.com/libs/leaflet/0-7-3/leaflet.js",function(){d.Map?b():d.include("maps",b)});return}a=a.toLowerCase();a=c(".flashtalking.com/frameworks/js/"+[a,g[a],a+".js"].join("/"))}a&&(h.src=a,document.getElementsByTagName("head")[0].appendChild(h),h.onload=function(){"function"===typeof b&&b()})};d.addListener=function(a,b,c){a.on||
(a=d.$(a));a.on(b,c)};d.listen=d.addListener;d.removeListener=function(a,b,c){a.on||(a=d.$(a));a.off(b,c)};d.manifest=d.manifest=function(a){d.dispatchEvent("manifest",a)};d.initialisation={};d.ajaxDefaults={async:!0,method:"GET",context:f,complete:function(){},params:null,test:function(){}};d.ajax=function(a,b){var c,h,e=new XMLHttpRequest,d=f.FT.ajaxDefaults;h=document.createElement("a");h.href=a;h.href=h.href;h=h.protocol!==location.protocol||h.hostname!==location.hostname||h.port!==location.port&&
"80"!==h.port+location.port;for(c in d)b[c]=b[c]||d[c];h&&!e.withCredentials&&f.XDomainRequest&&(e=new f.XDomainRequest,e.onprogress=function(){},e.ontimeout=e.onerror=function(){e.status=400;e.readyState=4;e.onreadystatechange()},e.onload=e.ontimeout=e.onerror=function(){e.status=200;e.readyState=4;e.onreadystatechange()});e.onreadystatechange=function(a){4===e.readyState&&b.complete.call(b.context,e,a,b.params)};if(!0!==b.context.testMode){e.open(b.method,a,b.async);for(c in b.headers)e.setRequestHeader(c,
b.headers[c]);e.send()}else b.test.call(b.context,b.params)};d.getAbsLeft=function(a){for(var b=a.offsetLeft;a.offsetParent;)a=a.offsetParent,b+=a.offsetLeft;return b};d.getAbsTop=function(a){for(var b=a.offsetTop;a.offsetParent;)a=a.offsetParent,b+=a.offsetTop;return b};"undefined"===typeof console&&(console={log:function(){}});(function(a){function b(a,b){var c;try{return c=RegExp("(^| )"+a+"($| )"),c.test(b)}catch(e){return!1}}function c(a){if(!(this instanceof c))return new c(a);var b;this.length=
0;if("string"===typeof a)if(/<[^>]+>/.test(a)){b=document.createElement("div");var e=document.createDocumentFragment();for(b.innerHTML=a;b.childNodes.length;)e.appendChild(b.childNodes[0]);b=e.childNodes}else b=document.querySelectorAll(a);if(b&&b.length)for(a=b.length;a--;)1===b[a].nodeType&&Array.prototype.unshift.call(this,b[a]);else a&&(this[0]=a,this.length=1);return this}function h(a,b,c,e){var d=(e?"remove":"add")+"EventListener",h="",g=b.split(" "),f=a.length;b=b.length;!a[0]||d in a[0]||
(d=e?"detachEvent":"attachEvent",h="on");for(;f--;)for(e=0;e<b;e++)if(d in a[f])a[f][d](h+g[e],c)}function e(a,b,e){var d,h="last"===e?"appendChild":"insertBefore";b instanceof c||(b=new c(b));a instanceof c||(a=new c(a));d=b.length;if(0<d){var g=a;a=document.createDocumentFragment();for(var f=0,k=g.length;f<k;f++)a.appendChild(g[f]);for(;d--;)b[d]&&"object"===typeof b[d]&&(g="last"===e||"first"===e?b[d]:b[d].parentNode,f="after"===e?b[d].nextSibling:"first"===e?b[d].childNodes[0]:b[d],what=0===d?
a:a.cloneNode(!0),g[h](what,f))}}function d(a,b){for(;a&&(a=a[b+"Sibling"]);)if(1===a.nodeType)return a}var k="undefined"!==typeof document.body.classList;f.FT.$=c;c.prototype.splice=function(a,b){var c=[],e=a,d,h;d=void 0===b?this.length-a:b;if("number"===typeof d){for(;d--;)c.push(this[e++]);for(e=a;this[e];)this[e+b]?this[e]=this[e+b]:delete this[e],e++;this.length-=b;return c}if(b.length&&"object"===typeof b){h=b.length;for(d=0;d<h;d++)c.push(this[e]),this[e++]=b[d];for(d=0;d++<c.length;)this[e]&&
c.push(this[e]),this[e]=c[d-1],e++;this.length+=h;return this}};c.prototype.next=function(){return f.FT.$(this[0].nextElementSibling||d(this[0],"next"))};c.prototype.previous=function(){return f.FT.$(this[0].nextElementSibling||d(this[0],"previous"))};c.prototype.parent=function(){return f.FT.$(this[0].parentNode)};c.prototype.first=function(){return new c(this[0])};c.prototype.last=function(){return new c(this[this.length-1])};c.prototype.eq=function(a){return new c(this[a])};c.prototype.each=function(a){for(var b=
0,c=this.length;b<c;b++)a.call(this[b],b,this[b]);return this};c.prototype.filter=function(a){for(var b=new c,e=0,d=this.length;e<d;e++)a.call(this[e],e,this[e])&&Array.prototype.push.call(b,this[e]);return b};c.prototype.alignTo=function(b){b=b instanceof c?b:a.b(b);if(!b.length)return this;for(var e=0;e<this.length;e++)1<b.length&&b.length?(this[e].style.left=b.x(b[e])+"px",this[e].style.top=b.y(b[e])+"px"):1===b.length&&(this[e].style.left=b.x(b[e])+"px",this[e].style.top=b.y(b[e])+"px");return this};
c.prototype.getAbsLeft=f.FT.getAbsLeft;c.prototype.getAbsTop=f.FT.getAbsTop;c.prototype.x=function(a){a?"number"===typeof a&&this[a]&&(a=this[a]):a=this[0];return this.getAbsLeft(a)};c.prototype.y=function(a){a?"number"===typeof a&&this[a]&&(a=this[a]):a=this[0];return this.getAbsTop(a)};c.prototype.width=function(){return this[0]&&"object"===typeof this[0]&&this[0].offsetWidth||0};c.prototype.height=function(){return this[0]&&"object"===typeof this[0]&&this[0].offsetHeight||0};c.prototype.children=
function(){var b=[],c,e,d;for(c=0;c<this.length;c++)if(1===this.length)b=this[0].children;else for(theseChildren=this[c].children,d=theseChildren.length,e=0;e<d;e++)b.push(theseChildren[e]);return a.b(b)};c.prototype.addClass=function(a){var c=[],e="",d=0,h;a=a.split(" ");for(d=0;d<this.length;d++){h=a.length;for(e=this[d].className;h--;)k?this[d].classList.add(a[h]):b(a[h],e)||c.push(a[h]);!k&&c&&(this[d].className=e+(""!==e?" ":"")+c.join(" "))}return this};c.prototype.removeClass=function(a){var c=
this.length,e;for(a="string"===typeof a?a.split(" "):a;c--;)for(e=a.length;e--;)if(k)this[c].classList.remove(a[e]);else if(b(a[e],this[c].className)){var d=this[c],h;h=this[c].className.replace(a[e],"").replace(/(^ | $)/g).replace(/  /g," ");d.className=h}return this};c.prototype.hasClass=function(a){var c=this.length,e;for(a=a.split(" ");c--;)for(e=a.length;e--;)if(k&&!this[c].classList.contains(a[e])||!b(a[e],this[c].className))return!1;return!0};c.prototype.clone=function(){for(var a=new c,b=
this.length;b--;)a[b]=this[b]&&"object"===typeof this[b]&&this[b].cloneNode?this[b].cloneNode(!0):this[b];return a};c.prototype.data=function(a,b){var c="data-"+a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e=this[0]&&"object"===typeof this[0]&&this[0].getAttribute;if(b)for(var d=this.length;d--;)e&&this[d].setAttribute(c,b);else return e&&this[0].getAttribute(c)||"";return this};c.prototype.on=function(a,b){h(this,a,b);return this};c.prototype.off=function(a,b){h(this,a,b,!0);return this};c.prototype.prepend=
function(a){e(a,this,"first");return this};c.prototype.prependTo=function(a){e(this,a,"first");return this};c.prototype.append=function(a){e(a,this,"last");return this};c.prototype.appendTo=function(a){e(this,a,"last");return this};c.prototype.before=function(a){e(a,this,"before");return this};c.prototype.after=function(a){e(a,this,"after");return this};c.prototype.remove=function(){for(var a=this.length;a--;)this[a]&&this[a].parentNode&&this[a].parentNode.removeChild(this[a]);return this};c.prototype.empty=
function(){for(var a=this.length;a--;)this[a]&&"object"===typeof this[a]&&this[a].childNodes&&(this[a].innerHTML="");return this};c.prototype.css=function(a,b){if(this[0])if("string"!==typeof a||b){var c=this.length,e=b?{}:a;for(b&&(e[a]=b);c--;)for(var d in e)this[c]&&(this[c].style[d]=e[d])}else return a=a.replace(/-([a-z])/g,function(a,b){return b.toUpperCase()}),f.getComputedStyle?getComputedStyle(this[0])[a]:this[0].currentStyle[a];else return"";return this}})(d);d.prototype.receiveMessages=
function(a){var b={method:"",msg:""},c=[];try{b=JSON.parse(a.data)}catch(d){}if("init"!==b.method||this.hasLoaded)this[b.method]&&this.hasLoaded&&(c=b.msg?"Array"===b.msg.constructor.name?b.msg:[b.msg]:null,this[b.method].apply(this,c));else{this.hasLoaded=!0;for(var e in b.msg)this.placementProperties[e]=b.msg[e];b.msg.newGUID&&this.newGUID();this.dispatchEvent("ready",b)}};d.prototype.dispatch=function(a){this.dispatchEvent(a.ev||a,a.msg)};d.prototype.send=function(a,b){var c={method:a,msg:b};if(this.get("safeFrame"))try{f.parent["ft"+
this.get("pID")].receive({data:JSON.stringify(c),origin:"http://cdn.flashtalking.com",source:f,currentTarget:f.parent,srcElement:f.parent,target:f.parent,timeStamp:(new Date).getTime(),type:"message"})}catch(d){this.error("send trying to access parent window but not on same domain, port and protocol")}else this.notTop&&f.parent.postMessage(JSON.stringify(c),"*")};d.prototype.get=function(a){var b="";"undefined"!==typeof this.placementProperties[a]&&(b=this.placementProperties[a]);return b};d.prototype.getManifest=
function(a){var b="";"undefined"!==typeof this.manifestProperties[a]&&(b=this.manifestProperties[a]);return b};d.prototype.checkLoaded=function(){return this.hasLoaded};d.prototype.tracker=function(a,b,c){for(var d=this.manifestProperties.trackingEvents||[],e=d.length,g=null;e--;)if(a===d[e].name){g=101+e;if("standard"===d[e].type){if(this.firedStandardEvents[g])return;this.firedStandardEvents[g]=!0}break}g&&this.send("tracker",{type:"custom",num:g,value:b,string:c})};d.prototype.clickManager=function(a){this.send("tracker",
{type:"clickmap",x:a.pageX,y:a.pageY})};d.prototype.getClickTag=function(a,b){function c(a){var b=a.escapeIterations;if(a.clickSuf)switch(a.urlCustom.charAt(a.urlCustom.length-1)){case "?":case "&":break;default:a.clickSuf=-1!=a.urlCustom.indexOf("?")?"&"+a.clickSuf:"?"+a.clickSuf}for(;b--;)a.urlCustom=encodeURIComponent(a.urlCustom),a.clickSuf=encodeURIComponent(a.clickSuf);return a}var d="clickTag"+(a||""),e=this.get("clicks"),g="",g=/^(http|https|sms|tel|mailto|smsto)(:|%3A|%253A|%25253A)/,k={urlCustom:b||
"",clickSuf:this.get("ftClickSuf"),escapeIterations:parseInt(this.get("ftEscapeMod"),10)||0,clickTag:d};if(this.hasLoaded){if(b){if("function"==typeof f.customSAClick){var m=f.customSAClick(k),n;for(n in m)k[n]=m[n]}if(g.test(k.urlCustom))if(k=c(k),b=k.urlCustom+k.clickSuf,this.tia||this.testMode)g=e[d]+"&APPEND=false&DYNCTTEST="+b;else if(d=e[k.clickTag].split("?"),e=/(&|%26|%2526)url(=|%3D|%253D)\d+/,g=d[0],d[1]=d.slice(1).join("?"),e.test(d[1]))g+="?"+d[1].replace(e,"$1url$2"+b);else{var p;d[1].replace(/(http|https|sms|tel|mailto|smsto)(:|%3A|%253A|%25253A)/g,
function(a,b,c,e){p=e});g+="?"+d[1].slice(0,p)+b}else g=this.tia||this.testMode?e[d]+"&APPEND=true&DYNCTTEST="+b:e[d]+b}else g=e[d];return g}this.error("getClickTag","get ClickTag was called before the myFT.hasLoaded == true")};d.prototype.clickTag=function(a,b){if(!this.hasLoaded)return this.error("clickTag","clickTag method called before hasLoaded === true");var c=this.getClickTag(a,b);this.send("interactionComplete");this.send("clickthrough",{clickTag:a||1,url:c});"ext"===this.get("api")?this.send("open",
c):f.open(c,/((sms|tel|mailto|spotify|facetime):|https?:\/\/maps\.)/i.test(c)&&/ip(ad|hone|od)/i.test(navigator.userAgent)?"_top":"_blank")};d.prototype.applyClickTag=function(a,b,c){function h(a){e.clickTag(b,c);e.clickManager(a);a.stopPropagation?a.stopPropagation():"undefined"!==typeof a.cancelBubble&&(a.cancelBubble=!0)}a instanceof d.$||(a=d.$(a));var e=this;e.hasLoaded?(a.css("cursor","pointer"),a.on("click",h)):e.addEventListener("ready",function(){e.applyClickTag(a,b,c)})};d.prototype.applyButton=
function(a,b){function c(a){h.clickManager(a);a.stopPropagation?a.stopPropagation():"undefined"!==typeof a.cancelBubble&&(a.cancelBubble=!0);b.call(h,a)}a instanceof d.$||(a=d.$(a));var h=this;h.hasLoaded?(a.on("click",c),a.css("cursor","pointer")):h.addEventListener("ready",function(){h.applyButton(a,b)})};d.prototype.absorbSwipes=function(a){function b(a){a.preventDefault&&a.preventDefault()}var c=document.body.style,h="touchAction"in c?"touchAction":"msTouchAction";this.send("preventSwipes",!!a);
!this.absorbSwipesSet&&a?(d.addListener(f,"touchmove",b),h in c&&(c[h]="none")):a||(d.removeListener(f,"touchmove",b),h in c&&(c[h]=""))};d.prototype.newGUID=function(){var a,b="//servedby.flashtalking.com/imp/"+this.get("campaignID")+";"+this.get("pID")+";207;guid;"+this.get("siteName")+";"+this.get("placementDescription")+"/?ft_guid="+this.get("guid")+"&cachebuster="+1E9*~~Math.random();this.testMode||this.tia||(a=document.createElement("iframe"),a.src=b,a.style.cssText="display:none",document.body.appendChild(a));
try{f.localStorage.ftGUID=this.get("guid")}catch(c){}};d.prototype.error=function(a,b){var c="ftError in method "+a+": "+b;if(!f.mocha&&!f.sinon&&!f.chai)return this.get("api"),this.send("error",c),!1};d.prototype.getMaxSize=function(){return{width:this.get("maxWidth")||0,height:this.get("maxHeight")||0}};d.prototype.getState=function(){return this.get("state")};d.prototype.replaceMacros=function(a,b){var c={a:/\[\%ftPostal\%\]/g,value:this.get("ftPostal")},d={a:/\[\%ftDMA\%\]/g,value:this.get("ftDMA")},
e={a:/\[\%ftLat\%\]/g,value:this.get("ftLat")},g={a:/\[\%ftLong\%\]/g,value:this.get("ftLng")||this.get("ftLong")},f={a:/\[\%SERVE_DOM\%\]/g,value:this.get("serveDom")||this.get("ftServeDom")||this.get("serveDOM")||this.get("tiaServeDom")||this.testMode&&"http://cdn.flashtalking.com"},m={a:/\[\%PROTOCOL\%\]/g,value:"http"+("https:"===location.protocol?"s":"")+"://"},n={a:/\[\%GUID\%\]/g,value:this.get("guid")},p={a:/\[\%FT_GUID\%\]/g,value:this.get("guid")},q={a:/\[\%CACHEBUSTER\%\]/g,value:Math.round(1E9*
Math.random())},l={a:/\[\%FT_RANDOM\%\]/g,value:Math.round(1E9*Math.random())},r={a:/\[\%FT_CONFID\%\]/g,value:this.get("ftConfID")},t={a:/\[\%FT_TIMESTAMP\%\]/g,value:this.get("ftTimestamp")},w={a:/\[\%PRODUCT_ID_SEGMENT\%\]/g,value:b||""},s;if(""===b)s="default";else{s=this.get("ftSegmentList");for(var v=s.length,x=RegExp("("+b+"+([0-9_A-z]+))"),u="";v--;)if(u=x.exec(s[v].s),null!==u){u=u[u.length-1];break}s=u||"default"}c=[c,d,e,g,f,m,n,p,q,l,r,t,w,{a:/\[\%PRODUCT_ID\%\]/g,value:s}];d=c.length;
for(a=a||"";d--;)c[d].value&&(a=a.replace(c[d].a,c[d].value));return a};d.prototype.isViewable=function(){return this.get("isViewable")};d.prototype.getSize=function(){return{width:this.get("currentWidth"),height:this.get("currentHeight")}};d.prototype.getOrientation=function(){return this.get("orientation")};d.prototype.insertCSS=function(a,b){var c=a.createElement("style"),d=("https:"===location.protocol?"https:":"http:")+"//cdn.flashtalking.com/frameworks/js",e=a.head||a.getElementsByTagName("head")[0]||
a.createElement("head");"textContent"in c&&(c.textContent=b.replace(/\${baseURL}/g,d));e.insertBefore(c,e.children[0]||null);e.parentNode||a.documentElement.insertBefore(e,document.body);"textContent"in c||(c.styleSheet.cssText=b)};d.initialisation.communicate=function(){function a(a){b.linkedAds[a.name]=!0;for(var d in b.linkedAds)if(!b.linkedAds[d])return;b.dispatchEvent("linkready")}var b=this;d.addEventListener("manifest",function(c){if(c.communication){var d=c.communication.linked,e=d.length;
for(b.linkedAds={};e--;)b.linkedAds[d[e]]=!1;b.send("communicate",{type:"register",name:c.communication.name});b.addEventListener("linkedad",a)}})};d.prototype.talk=function(a,b){this.send("communicate",{type:"talk",name:a,msg:b})};d.prototype.communicate=function(a){var b=a.type?{type:a.type}:null;"talk"===a.type?(b.from=a.name,b.msg=a.msg):(b.type="linkedad",b.name=a.name);this.dispatchEvent(b.type,b)};d.prototype.expand=function(a){var b=a&&"undefined"===typeof a.type?a:this.getManifest("expand");
!a||a.type||a.customClosePosition?(this.expandProperties||a&&!a.type||this.setExpandProperties(this.getManifest("expand")),b=this.expandProperties):this.setExpandProperties(a)&&(b=this.expandProperties);b&&(this.getManifest("expand")||this.getManifest("video")?this.send("expand",b):this.error("expand","No expand component detailed in the manifest"),this.testMode&&this.dispatchEvent("expand"))};d.prototype.resize=function(a){var b;a&&!a.type?this.setResizeProperties(a)&&(b=this.resizeProperties):(this.resizeProperties||
a||this.setResizeProperties(this.getManifest("expand")),b=this.resizeProperties);b?this.expand(b):this.error("resize","resize method not successfully executed - invalid argument or setResizeProperties not previously called")};d.prototype.contract=function(){this.absorbSwipes(!1);this.send("contract");document.body.style.margin=0;this.testMode&&this.dispatchEvent("contract")};d.prototype.setExpandProperties=function(a){var b,c=/(width|height|offsetX|offsetY|indentDown|indentAcross)/,d=[];if(a&&"object"===
typeof a){for(b in a)if(c.test(b))d.push(b);else if("fullscreen"===b&&a[b]){d.length=4;break}if(4<=d.length)return void 0===a.useCustomClose&&(a.useCustomClose=void 0===this.customClose?this.expandProperties&&void 0!==this.expandProperties.useCustomClose?this.expandProperties.useCustomClose:!0:this.customClose),void 0!==a.offsetX&&(a.indentAcross=a.offsetX,a.indentDown=a.offsetY),this.expandProperties=a,!0;this.error("setExpandProperties","the properties object lacked the minimum requirements to set the expandProperties object {width: number, height: number, offsetX: number, offsetY: number}");
return!1}this.error("setExpandProperties","the properties object was not present or not a valid object")};d.prototype.setResizeProperties=function(a){var b,c=/(width|height|offsetX|offsetY|indentDown|indentAcross)/,d=[];if(a&&"object"===typeof a){for(b in a)c.test(b)&&d.push(b);if(4<=d.length)return a.customClosePosition||(a.customClosePosition="top-right"),"undefined"!==typeof a.offsetX&&(a.indentAcross=a.offsetX,a.indentDown=a.offsetY),this.resizeProperties=a,!0;this.error("setResizeProperties",
"the argument passed in lacked the minimum requirements to set the resizeProperties object {width: number, height: number, offsetX: number, offsetY: number}")}};d.initialisation.feeds=function(){function a(a){var b=this.feeds,d,g;for(d in b)if(b[d].isDynamic)for(g in a)d==g&&(b[d].url=a[g]);this.dynamicFeedsPrepared=!0;this.dispatchEvent("dynamicFeedsPrepared")}var b=this;d.addEventListener("manifest",function(c){if(c.feeds){var d=c.feeds,e=c.instantAds||[],g=!1;c=d.length;var f=function(a){for(var c in a)this[c]=
a[c];this.isDynamic=!1;this.getUrl=function(){return b.replaceMacros(this.url,this.segment)};for(c=e.length;c--;)if(e[c].name===this.name&&"text"===e[c].type){this.isDynamic=g=!0;break}};for(b.feeds={};c--;)b.feeds[d[c].name]=new f(d[c]);!0===g&&b.addEventListener("instantads",a)}})};d.prototype.callFeed=function(a,b){function c(a,c){g.data=a;c&&(g.error=!0);"function"===typeof b&&b(g);e.dispatchEvent("feedloaded",g)}function h(a){function b(){c("",!0)}var e=d.query("head")[0],h=document.createElement("script");
h.setAttribute("src",a);f[g.method]=c;/MSIE 8/.test(navigator.userAgent)?h.onreadystatechange=function(){if(/loaded|complete/.test(h.readyState)){var a=h.readyState;"complete"==h.readyState?e.appendChild(h):"loaded"==a&&"loading"==h.readyState&&_error()}}:(h.onerror=b,e.appendChild(h))}var e=this,g=e.feeds&&e.feeds[a];!1===e.hasLoaded?e.addEventListener("ready",function(){e.callFeed(a,b)}):g&&(g.isDynamic&&!0!==e.dynamicFeedsPrepared?e.addEventListener("dynamicFeedsPrepared",function(){e.callFeed(a,
b)}):void 0===g.method?d.ajax(g.getUrl(),{context:e,complete:function(a){var b;try{b=JSON.parse(a.responseText)}catch(d){b=a.responseText}c(b,400<=a.status||!a.status)}}):h(g.getUrl()))};d.initialisation.instant=function(){function a(){var a=b.get("testConf"),h=b.get("confID"),e="../"+b.get("creativeID")+".json",g=b.get("ftServeDom")||b.get("tiaServeDom"),f=b.get("mvt");a?e=a+h:f&&(e="../mv"+h+".json");e+=(0>e.indexOf("?")?"?":e.indexOf("?")===e.length-1?"":"&")+"cb="+~~(1E9*Math.random());d.ajax(e,
{context:b,complete:function(a){var c={},d;if(200===a.status){try{c=JSON.parse(a.responseText)}catch(e){}for(d in c)b.instantAds[d]=c[d].value||"","string"===typeof c[d].type&&"image"===c[d].type.toLowerCase()&&(b.instantAds[d]=b.tia||b.testMode?"../../instantAssets/"+c[d].value:g+"/"+b.get("cID")+"/instantAssets/"+c[d].value)}b.instantAdsLoaded=!0;b.dispatchEvent("instantads",b.instantAds)},test:function(){b.instantAdsLoaded=!0;b.dispatchEvent("instantads",b.instantAds)}})}var b=this;b.instantAdsLoaded=
!1;d.addEventListener("manifest",function(c){if(c.instantAds){var d=c.instantAds,e=c.videos;c=c.instantAds.length;var g=0;for(b.instantAds={};c--;)if(b.instantAds[d[c].name]=d[c]["default"],"video"===d[c].type.toLowerCase())for(g=e.length;g--;)b.instantAds[d[c].name]=d[c].name===e[g].name?e[g].ref:b.instantAds[d[c].name];b.addEventListener("ready",a)}})};d.makeDispatcher=function(a){a.callbacks={};a.addEventListener=d.makeDispatcher.addEventListener;a.removeEventListener=d.makeDispatcher.removeEventListener;
a.dispatchEvent=d.makeDispatcher.dispatchEvent;a.clearEvent=d.makeDispatcher.clearEvent;a.once=d.makeDispatcher.once};d.makeDispatcher.addEventListener=function(a,b){this.callbacks[a]=this.callbacks[a]||[];this.callbacks[a].unshift(b);if(this instanceof d)switch(a){case "instantads":this.instantAdsLoaded&&b(this.instantAds);break;case "richload":this.richLoadsLoaded&&b(this.richLoads);break;case "load":"complete"!==document.readyState&&"loaded"!==document.readyState||b();break;case "DOMLoaded":"loading"!==
document.readyState&&b();break;case "politeload":this.politeloadFired&&b()}};d.makeDispatcher.once=function(a,b){function c(){b.apply(this,arguments);this.removeEventListener(a,c)}this.addEventListener(a,c)};d.makeDispatcher.removeEventListener=function(a,b){for(var c=this.callbacks[a]||[],d=c.length;d--;)if(c[d].toString()===b.toString()){c.splice(d,1);break}};d.makeDispatcher.dispatchEvent=function(){var a;a=arguments;for(var b=a.length,c=[];b--;)c[b]=a[b];a=c;b=a.shift();b=this.callbacks[b]||[];
for(c=b.length;c--;)b[c].apply(this,a)};d.makeDispatcher.clearEvent=function(a){delete this.callbacks[a]};d.initialisation.richLoad=function(){function a(a){return function(b){var c=null;return c=b.match(/^#\w+$/)?a.document.querySelector(b):a.document.querySelectorAll(b)}}function b(a){d.addListener(g.richLoads[a].frame.contentWindow,"click",function(b){b={pageX:b.pageX,pageY:b.pageY};b.pageX+=k[a].x;b.pageY+=k[a].y;g.clickManager(b)})}function c(a,b){for(var c=a.offsetLeft,d=a.offsetTop;null!==
a.offsetParent;)a=a.offsetParent,c+=a.offsetLeft,d+=a.offsetTop;k[b]={x:c,y:d}}function h(a,b){var c={},e=g.richLoads;d.addListener(b,"load",function(){g.richLoads[a].loaded=!0;var d,h=0,f=0;for(d in e)h++,e[d].loaded?(c[d]=e[d].loaded,f++):c[d]=!1;f===h&&(g.richLoadsLoaded=!0);g.insertCSS(b.document,g.defaultCSS);g.richLoads[a].frame.style.visibility="";g.dispatchEvent("richload",c)})}function e(){var e,n,p=g.richLoads;n=null;var k=g.get("serveDOM"),l;for(l in p)if(!0!==p[l].used)if(n=document.querySelector("#"+
l),"dynamic"===p[l].type&&(p[l].src=this.instantAds&&this.instantAds[l]?this.instantAds[l]:p[l].src),n&&/richload/i.test(n.tagName)){e=g.tia||!1!==g.testMode?"../../richLoads/"+p[l].src:k+"/"+g.get("cID")+"/"+p[l].src;/\.html$/i.test(e)||(e+=("/"===e[e.length-1]?"":"/")+"index.html");p[l].used=!0;var r=void 0;f.attachEvent&&!f.addEventListener&&(r=document.createElement("div"),r.id=n.id,r.className=n.className,r.style.cssText=n.style.cssText,n.replaceNode(r),n=document.querySelector("#"+n.id));p[l].frame.src=
e;p[l].frame.name=l;p[l].loaded=!1;n.appendChild(p[l].frame);h(l,p[l].frame.contentWindow);p[l].frame.contentWindow.myFT=this;p[l].frame.contentWindow.FT=new d.Instance;p[l].frame.contentWindow.FT.query=a(p[l].frame.contentWindow);c(p[l].frame,l);b(l)}else g.error("initialisation.richLoad","no richload container with id '"+l+"' available to insert content into");else g.error("initialisation.richLoad","Richload "+l+" already used")}var g=this,k={};g.richLoadsLoaded=!1;d.Instance=function(){};d.Instance.prototype=
d;d.addEventListener("manifest",function(a){if(a.richLoads||a.instantAds){var b=a.richLoads,c=a.instantAds,d=b&&b.length||0;a=!1;var h;for(g.richLoads={};d--;)if(b&&b[d]){var f=g.richLoads,k=b[d].name,w=b[d].src,s;a:{for(var v=(s=c)&&s.length||0;v--;)if(s[v].name===b[d].name&&"richload"===s[v].type.toLowerCase()){a=!0;s="dynamic";break a}s="basic"}f[k]={src:w,type:s,used:!1}}for(h in g.richLoads)b=document.createElement("iframe"),b.style.width="100%",b.style.height="100%",b.style.visibility="hidden",
b.frameBorder=0,b.scrolling="no",b.setAttribute("margin","0"),b.setAttribute("allowTransparency","true"),b.setAttribute("allowfullscreen",""),b.setAttribute("webkitallowfullscreen",""),b.name=h,g.richLoads[h].frame=b;a?g.addEventListener("instantads",e):g.addEventListener("ready",e)}});d.prototype.insertRichLoad=function(e){var f="";if(!this.richLoads[e.richLoad])throw Error("No richload exists in the manifest with the name "+e.richload);var k=this.richLoads[e.richLoad];if(!0===k.used)throw Error("Richload "+
e.richLoad+" already used");k.used=!0;f=g.tia||!1!==g.testMode?"../../richLoads/"+k.src:g.get("serveDOM")+"/"+g.get("cID")+"/"+k.src;/\.html$/i.test(f)||(f+=("/"===f[f.length-1]?"":"/")+"index.html");k.frame.src=f;k.frame.name=e.richLoad;k.loaded=!1;e.parent.appendChild(k.frame);k.frame.contentWindow.myFT=this;k.frame.contentWindow.FT=new d.Instance;k.frame.contentWindow.FT.query=a(k.frame.contentWindow);c(k.frame,e.richLoad);b(e.richLoad);h(e.richLoad,k.frame.contentWindow);"dynamic"===k.type&&(k.src=
this.instantAds&&this.instantAds[e.richLoad]?this.instantAds[e.richLoad]:k.src)}};d.testing=function(a){a=a.clickTagCount;for(var b=1,b=/mobile/i.test(navigator.userAgent),c={clicks:{d:"http://www.flashtalking.net/helpSystem/TiA/?n=0"},confID:"0",creativeID:"0",cID:"0",serveDOM:"",api:"ft",mvt:!1,guid:"0",newGUID:!1,newImp:"",maxWidth:b?document.documentElement.clientWidth:f.innerWidth,maxHeight:b?document.documentElement.clientHeight:f.innerHeight,isViewable:!0,state:"default"},b=1;20>=b;b++)c.clicks["clickTag"+
b]="http://www.flashtalking.net/helpSystem/TiA/?n="+(b<=a?b:"error");this.dispatchEvent("politeload");return c};var z="fullscreenchange mozfullscreenchange webkitfullscreenchange MSFullscreenChange",C=function(){var a=document.createElement("div");a.className="ft-video-controls";a.innerHTML='<span class="ft-icon-play">D</span><span class="ft-video-progress-container">  <span class="ft-video-progress-bar">    <span class="ft-video-buffer"></span>    <span class="ft-video-progress"></span>  </span></span><span class="ft-time-display">0:00</span><span class="ft-icon-volume">G</span><span class="ft-icon-fullscreen">B</span>';
return a}(),F={video:"video1",preload:"metadata",poster:"",controls:!1,autoplay:!1,clickTag:!1,muted:!1,forceAutoplay:function(){var a=navigator.userAgent,b=/iP(?:hone|ad|od)/.test(a),c=b&&!f.indexedDB&&-1===a.indexOf("Version"),d=document.createElement("canvas"),d=d.getContext&&d.getContext("webgl"),e=parseFloat(a.slice(a.indexOf("Android")+8));return 0<a.indexOf("Android")&&(0<a.indexOf("Chrome")||0<a.indexOf("AppleWebKit"))&&4<=e||b&&(!c||d)}()},A=0;d.Video=function(a,b){var c=this;this.video=
null;this.settings=b;this.filepath=null;this.hasPlayedThrough=this.hasPlayed=!1;this.cachedStyles={};this.ytVideo=!1;this.myFT=a;f.FT.$(document).on("fullscreenchange mozfullscreenchange webkitfullscreenchange MSFullscreenChange",function(){c.fullscreenChange(c.isFullscreen())});f.FT.makeDispatcher(this)};d.Video.prototype.play=function(a){this.ytVideo?this.video.playVideo?this.video.playVideo():y(this,"play"):this.video.play(a)};d.Video.prototype.pause=function(a){this.ytVideo?this.video.pauseVideo?
this.video.pauseVideo():y(this,"pause"):this.video.pause(a)};d.Video.prototype.stop=function(a){var b=this.video;this.ytVideo?b.stopVideo?(b.stopVideo(),0<b.getCurrentTime()&&b.seekTo(0)):y(this,"stop"):(0<b.currentTime&&(b.currentTime=0),"function"===typeof b.stop?b.stop():(this.pause(a),this.loadVid()))};d.Video.prototype.restart=function(a){this.ytVideo&&!this.video.playVideo?y(this,"restart"):(this.stop(a),this.play(a))};d.Video.prototype.goFullscreen=function(){function a(){f.FT.$(document).off("fullscreenerror mozfullscreenerror webkitfullscreenerror MSFullscreenError",
b)}function b(){c.fallbackFullscreen();a()}var c=this;c.isFullscreen()||(c.video.requestFullscreen?c.video.requestFullscreen():c.video.requestFullScreen?c.video.requestFullScreen():c.video.msRequestFullscreen?c.video.msRequestFullscreen():c.video.mozRequestFullScreen?c.video.mozRequestFullScreen():c.video.webkitRequestFullscreen?c.video.webkitRequestFullscreen():c.video.webkitEnterFullscreen&&c.video.webkitEnterFullscreen(),f.FT.$(document).on("fullscreenerror mozfullscreenerror webkitfullscreenerror MSFullscreenError",
b),f.FT.$(document).on(z,a))};d.Video.prototype.fallbackFullscreen=function(){var a=this;f.FT.$(this.video);a.previousState=a.myFT.getState();d.listen(f,"resize",a.fullscreenChange);a.myFT.once("contract",function(){d.removeListener(f,"resize",a.fullscreenChange)});a.displayingFallbackFullscreen=!0;a.fullscreenChange(a.isFullscreen);return"expanded"!==a.previousState&&a.myFT.getManifest("expand")?(a.myFT.expand({fullscreen:!0}),!0):!1};d.Video.prototype.isFullscreen=function(){return this.video&&
this.video.webkitDisplayingFullscreen||(f.document.fullscreenElement||f.document.webkitFullscreenElement||f.document.mozFullScreenElement||f.mozFullScreenElement||f.fullscreen||f.fullScreen||f.document.msFullscreenElement)===this.video||this.displayingFallbackFullscreen?!0:!1};d.Video.prototype.fullscreenChange=function(a){var b=this.myFT?this.myFT.videos:{},c=d.$(this.video),h;this.dispatchEvent("fullscreenchange",a);if(a){for(var e in b)b[e]!==this&&E(b[e]);this.displayingFallbackFullscreen?(this.cachedStyles=
{marginLeft:c[0].style.marginLeft,marginTop:c[0].style.marginTop,left:c[0].style.left,top:c[0].style.top,position:c[0].style.position,width:c[0].style.width,height:c[0].style.height},c[0].style.marginLeft=0,c[0].style.marginTop=0,c[0].style.position=c[0].style.position||"relative",c[0].style.left=0-c.x()+"px",c[0].style.top=0-c.y()+"px",c[0].style.height=this.myFT.getMaxSize().height+"px",c[0].style.width=this.myFT.getMaxSize().width+"px"):(this.cachedStyles={backgroundColor:"black"!==this.video.style.backgroundColor?
this.video.style.backgroundColor:this.cachedStyles.backgroundColor||""},this.video.style.backgroundColor="black")}else for(h in this.cachedStyles)this.video.style[h]=this.cachedStyles[h]||""};d.Video.prototype.leaveFullscreen=function(){this.isFullscreen()&&!this.displayingFallbackFullscreen?this.video.exitFullScreen?this.video.exitFullscreen():this.video.msExitFullscreen?this.video.msExitFullscreen():this.video.mozExitFullScreen?this.video.mozExitFullScreen():this.video.webkitExitFullscreen?this.video.webkitExitFullscreen():
document.cancelFullscreen?document.cancelFullscreen():document.msCancelFullscreen?document.msCancelFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullscreen?document.webkitCancelFullscreen():document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozExitFullScreen?document.mozExitFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():this.displayingFallbackFullscreen&&("default"===
this.previousState?this.myFT.contract():"resized"===this.previousState&&this.myFT.expand(),this.displayingFallbackFullscreen=!1)};d.Video.prototype.mute=function(){this.savedVolume=0<this.video.volume?this.video.volume:this.savedVolume||1;this.video.volume=0;this.video.muted=!0;this.ytVideo&&this.video.mute()};d.Video.prototype.unmute=function(){this.video.muted=!1;this.video.volume=this.savedVolume||1;this.ytVideo&&this.video.unMute()};d.Video.userInitiatesPlayback=-1;(function(){function a(a){!e.parentNode||
a&&!e.currentTime||(d.Video.userInitiatesPlayback=!e.currentTime,document.body.removeChild(e),clearTimeout(h))}var b=navigator.userAgent,c=/iP(?:hone|ad|od)/.test(b),b=c&&0<b.indexOf("Version");if(!/PhantomJS/.test(navigator.userAgent)&&document.addEventListener){if(c&&!b)return d.Video.userInitiatesPlayback=!0;var h,e=document.createElement("video"),c=document.createElement("source"),b=document.createElement("source");/msie 9/i.test(navigator.userAgent)||(e.autoplay=!0);c.src="data:video/webm;base64,GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAACNxFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggIa7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU1LjQ4LjEwMFdBjUxhdmY1NS40OC4xMDBzpJAvovgexxqSyucVQwYw4Wu/RImIQI9AAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDiDgQEj44OEC+vCAOABAAAAAAAABrCBELqBEB9DtnUBAAAAAAAAl+eBAKO2gQAAgHACAJ0BKhAAEAAARwiFhYiFhIgCAgAMDN2sx+Ng/VP//u0p//8rQ5Hz//3WA//+aDAAo5WBAMgAsQEAARAQABgAGFgv9AAIAACjlYEBkACxAQABEBAAGAAYWC/0AAgAAKOVgQJYALEBAAEQEAAYABhYL/QACAAAo5WBAyAAsQEAARAQABgAGFgv9AAIAAAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw==";
b.src="data:video/mp4;base64,AAAAHGZ0eXBtcDQyAAAAAG1wNDJpc29tYXZjMQAAAz5tb292AAAAbG12aGQAAAAAzaNacc2jWnEAAV+QAAFfkAABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAGGlvZHMAAAAAEICAgAcAT////3//AAACQ3RyYWsAAABcdGtoZAAAAAHNo1pxzaNacQAAAAEAAAAAAAFfkAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAEAAAABAAAAAAAd9tZGlhAAAAIG1kaGQAAAAAzaNacc2jWnEAAV+QAAFfkFXEAAAAAAAhaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAAAAAAGWbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABVnN0YmwAAACpc3RzZAAAAAAAAAABAAAAmWF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAEAAQAEgAAABIAAAAAAAAAAEOSlZUL0FWQyBDb2RpbmcAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAxYXZjQwH0AAr/4QAZZ/QACq609NQYBBkAAAMAAQAAAwAKjxImoAEABWjOAa8gAAAAEmNvbHJuY2xjAAYAAQAGAAAAGHN0dHMAAAAAAAAAAQAAAAUAAEZQAAAAKHN0c3oAAAAAAAAAAAAAAAUAAAIqAAAACAAAAAgAAAAIAAAACAAAAChzdHNjAAAAAAAAAAIAAAABAAAABAAAAAEAAAACAAAAAQAAAAEAAAAYc3RjbwAAAAAAAAACAAADYgAABaQAAAAUc3RzcwAAAAAAAAABAAAAAQAAABFzZHRwAAAAAAREREREAAAAb3VkdGEAAABnbWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcgAAAAAAAAAAAAAAAAAAAAA6aWxzdAAAADKpdG9vAAAAKmRhdGEAAAABAAAAAEhhbmRCcmFrZSAwLjkuOCAyMDEyMDcxODAwAAACUm1kYXQAAAHkBgX/4NxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxMjAgLSBILjI2NC9NUEVHLTQgQVZDIGNvZGVjIC0gQ29weWxlZnQgMjAwMy0yMDExIC0gaHR0cDovL3d3dy52aWRlb2xhbi5vcmcveDI2NC5odG1sIC0gb3B0aW9uczogY2FiYWM9MCByZWY9MSBkZWJsb2NrPTE6MDowIGFuYWx5c2U9MHgxOjAgbWU9ZXNhIHN1Ym1lPTkgcHN5PTAgbWl4ZWRfcmVmPTAgbWVfcmFuZ2U9NCBjaHJvbWFfbWU9MSB0cmVsbGlzPTAgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0wIGNocm9tYV9xcF9vZmZzZXQ9MCB0aHJlYWRzPTYgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTUwIGtleWludF9taW49NSBzY2VuZWN1dD00MCBpbnRyYV9yZWZyZXNoPTAgcmM9Y3FwIG1idHJlZT0wIHFwPTAAgAAAAD5liISscR8A+E4ACAACFoAAITAAAgsAAPgYCoKgoC+L4vi+KAvi+L4YfAEAACMzgABF9AAEUGUgABDJiXnf4AAAAARBmiKUAAAABEGaQpQAAAAEQZpilAAAAARBmoKU";
e.style.cssText="position: absolute; width: 0; height: 0;";h=setTimeout(a,400);e.addEventListener("timeupdate",a);document.body.appendChild(e);e.appendChild(c);e.appendChild(b)}})();d.Video.prototype.loadVid=function(){function a(){function f(){c.canvasVideo=new d.CanvasVideo(c)}var k=d.Video.userInitiatesPlayback;if(-1===k&&1E3>+new Date-b)return setTimeout(a,100);!0!==k?(h.appendChild(e),h.appendChild(g)):d.CanvasVideo?f():d.include("canvasvideo",f)}var b=+new Date,c=this,h=c.video,e=document.createElement("source"),
g=document.createElement("source"),k=(c.filepath||"").replace(/^http:(?:\/\/video\.flashtalking\.com\/)?/i,"");/^(?:https:)?\/\//i.test(k)||(k=("https:"===location.protocol?"https:":"http:")+"//cdn.flashtalking.com/"+k);e.src=k+".mp4";e.type="video/mp4";g.src=k+".webm";g.type="video/webm";c.settings.forceAutoplay&&h.autoplay&&f.ArrayBuffer&&Function.prototype.bind?a():(h.appendChild(e),h.appendChild(g))};d.Video.prototype.loadYouTubeVid=function(a,b){function c(a){0===k||0===m?setTimeout(function(){l.width=
g.settings.parent.offsetWidth;l.height=g.settings.parent.offsetHeight;g.video=new f.YT.Player(a,l);g.video.muted=g.settings.muted},200):(g.video=new f.YT.Player(a,l),g.muted=g.settings.muted)}function h(b){function e(){}"function"===typeof f.onYouTubeIframeAPIReady&&(e=f.onYouTubeIframeAPIReady);f.onYouTubeIframeAPIReady=function(){e();c(b);g.myFT.registerVideo(g.video,a,g.video)};d.include(("https:"===location.protocol?"https":"http")+"://www.youtube.com/iframe_api")}function e(a){"undefined"!==
typeof f.YT&&"undefined"!==typeof f.YT.Player?c(a):h(a)}var g=this,k="",m="",n=this.video.parentNode,p=this.filepath,q=function(){var a=/v=(.*)/.exec(p);return""===a||null===a?(g.error("insertVideo","No youtube ID detected"),""):a[1]}(),k=b.width?b.width:g.settings.parent.offsetWidth,m=b.height?b.height:g.settings.parent.offsetHeight;this.ytVideo=!0;var k=b.width?b.width:g.settings.parent.offsetWidth,m=b.height?b.height:g.settings.parent.offsetHeight,l={height:m,width:k,videoId:q,playerVars:{rel:"0",
enablejsapi:"1",controls:!0===g.settings.controls?"1":"0",autoplay:!0===g.settings.autoplay?"1":"0",origin:null===f.location.origin?"":f.location.origin,showinfo:"0",wmode:"transparent"},events:{onReady:function(){g.muted?g.mute():g.unmute();for(var a=g,b,c=a.settings.actionQueue||[];b=c.shift();)a[b]()}}};if(""!==q){n.removeChild(this.video);var q=document.createElement("div"),r="widget"+A;q.id=r;n.appendChild(q);e(r);A++}};d.prototype.videos={};d.prototype.insertVideo=function(a){var b,c=this,d=
document.createElement("video"),e;if(a)if(a.video)if(a.parent)if("object"!==typeof a.parent)c.error("insertVideo","The parent, defined in the settings argument, should be an HTML Div Element");else{if(d.canPlayType||/phantomjs/i.test(navigator.userAgent)){d.addEventListener("timeupdate",function(){},!0);b=function(){};b.prototype=F;b=new b;for(e in a)b[e]=a[e];b.width&&(d.width=b.width);b.height&&(d.height=b.height);var g=document.createElement("div");g.className="ft-video";b.parent.appendChild(g);
g.appendChild(d);a.clickTag?d.addEventListener("click",function(b){b.stopPropagation&&b.stopPropagation();c.clickManager(b);c.clickTag("true"===a.clickTag.toString()?0:a.clickTag)}):d.addEventListener("click",function(a){a.stopPropagation&&a.stopPropagation();c.clickManager(a)});for(e in b)try{b[e]&&!/^(?:video|clicktag|parent|controlsParent|forceAutoplay)$/i.test(e)&&(d.setAttribute(e,b[e]),"muted"===e&&b[e]&&(d.muted=!0))}catch(f){}d.controls=!1;return c.applyVideo(d,b)}c.dispatchEvent("videofail")}else c.error("insertVideo",
"There was no parent element defined in the settings argument");else c.error("insertVideo","The settings argument did not contain a video name for referencing against the manifest or it was falsey");else c.error("insertVideo","No settings object was passed to the insertVideo method")};d.prototype.applyVideo=function(a,b){function c(){if(e.getManifest("filename")&&!n){var p=e.getManifest("instantAds"),q=e.getManifest("videos"),l=p?p.length:null,r,t=function(){if(b.controls&&(b.forceAutoplay||!/^iPhone|iPod$/.test(navigator.platform))){var c=
b.controlsParent||a.parentNode;D(function(){B(c,m)})}};if(p)if(e.instantAdsLoaded){for(;l--;)if("video"===p[l].type.toLowerCase()&&p[l].name===k){for(r=q.length;r--;)if(q[r].name===k){m.filepath=e.instantAds[k];n=!0;m.loadVid();t();return}e.error("applyVideo","Instant video name '"+k+"' has no matching item in the Video component of the manifest")}m.filepath||(m.filepath=f(q),n=!0,(g=/^(https?:|\/\/).*?\byoutube\b/.test(m.filepath))?m.loadYouTubeVid(k,b):(m.loadVid(),t()))}else e.addEventListener("instantads",
c);else m.filepath=f(q),n=!0,(g=/^(https?:|\/\/).*?\byoutube\b/.test(m.filepath))?m.loadYouTubeVid(k,b):(m.loadVid(),t())}else d.addEventListener("manifest",c),n||e.addEventListener("instantads",c)}function f(a){for(var b=a.length;b--;)if(a[b].name===k)return a[b].ref}var e=this,g=!1,k=b.video,m=new d.Video(e,b),n=!1;m.video=a;c();e.getManifest("filename")?e.registerVideo(a,k,b.parent):d.addEventListener("manifest",function(){e.registerVideo(a,k,b.parent)});return e.videos[k]=m};d.prototype.registerVideo=
function(a,b,c){function d(a){f.send("tracker",{type:"video",id:r,event:a,duration:t});f.dispatchEvent("video",{e:b,id:r,event:a});f.videos[b].dispatchEvent("tracker",{duration:t,event:a})}function e(c){var e;c&&c.detail&&c.detail.cvPlayRatio?c=100*c.detail.cvPlayRatio:"function"===typeof a.getCurrentTime?(e=a.getDuration(),c=a.getCurrentTime()/e*100):(e=a.duration,c=a.currentTime/e*100);t=Math.floor(10*e);if(0!==c)switch(q){case 0:d("starts");f.videos[b].hasPlayed=!0;q++;break;case 1:25<=c&&(d("25%"),
q++);break;case 2:50<=c&&(d("50%"),q++);break;case 3:75<=c&&(d("75%"),q++);break;case 4:100<=c&&(d("100%"),p=f.videos[b].hasPlayedThrough=!0,q++,f.videos[b].dispatchEvent("ended"))}}function g(){m||(d("init"),m=!0);p&&!n&&(d("replay"),n=!0)}var f=this,m=!1,n=!1,p=!1,q=0,l,r=function(a){var b=f.getManifest("videos"),c=b.length;if(c){for(;c--;)if(a===b[c].name)return c+1;return"No matching video name in the manifest's Video array"}return"No videos included in the manifest's Video array"}(b),t;"number"===
typeof r?"undefined"!==typeof a&&(c.addEventListener("onStateChange",function(a){1===a.data&&g();1===a.data?l=setInterval(function(){e(a)},500):(clearInterval(l),0===a.data&&e(a))},!0),c.addEventListener("play",g,!0),c.addEventListener("timeupdate",e,!0)):f.error("registerVideo",r)};d.makeDispatcher(d);f.FT=d})(window);
