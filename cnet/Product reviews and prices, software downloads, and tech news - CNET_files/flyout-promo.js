define(["jquery","version!fly/managers/debug","version!fly/managers/components","managers/third-party/facebook","managers/promotionals.desktop","managers/user","version!fly/components/base","components/modal-async.desktop"],function(e,t,n,r,i,s){t=t.init("flyoutPromo"),e.widget("cnet.flyoutPromo",e.fly.base,{options:{url:"/promotional/flyout-promo/"},_create:function(){var t=this;this._super(),e.ajax({url:this.options.url}).done(function(i){t.$element=e(i),r.init({onInit:function(){r.isLoggedIn(function(r){e("body").append(t.$element),s.setupButtonEvents(t.$element),n.process(),t._setupEvents(),r&&t.$element.addClass("facebookPromo")})}})})},_setupEvents:function(){var t=this;e('[data-close="flyout-promo"]',this.$element).on("click",function(e){t.$element.hide(),i.suppress("flyoutPromo")}),e("[data-user-social]",this.$element).on("click",function(e){i.suppress("flyoutPromo")})}})})