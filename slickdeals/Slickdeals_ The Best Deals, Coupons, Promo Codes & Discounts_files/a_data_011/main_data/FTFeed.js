var FTFeedParams=function(){this.productIdSegment;this.feedEndpoint;this.defaultFeedEndpoint;this.productId;this.ftCustomProductIdNodeName;this.ftCustomProductIndex=0;this.stringTrackerEventName;this.customMacros;this.customMacrosFlashVars},FTFeed=function(l,q){function r(a){a=(new RegExp(a+"(\\w+?)(,|$)")).exec(this.myFT.get("ftSegment"));return null!=a?a[1]:""}function t(a,e){var f=""==this.myFT.get("serveDom")?"http://cdn.flashtalking.com":this.myFT.get("serveDom"),f={"[%PROTOCOL%]":-1<f.indexOf("https://")?
"https://":"http://","[%PRODUCT_ID%]":a,"[%SERVE_DOM%]":f,"[%CACHEBUSTER%]":Math.floor(9E9*Math.random()),"[%CACHE_BUSTER%]":Math.floor(9E9*Math.random()),"[%ftLat%]":this.myFT.get("ftLat")||"null","[%LAT%]":this.myFT.get("ftLat")||"null","[%ftLong%]":this.myFT.get("ftLong")||this.myFT.get("ftLng")||"null","[%LNG%]":this.myFT.get("ftLong")||this.myFT.get("ftLng")||"null","[%ftDMA%]":this.myFT.get("ftDMA")||"null","[%DMA%]":this.myFT.get("ftDMA")||"null","[%ftPostal%]":this.myFT.get("ftPostal")||"null",
"[%POSTAL%]":this.myFT.get("ftPostal")||"null","[%CITY%]":this.myFT.get("ftGeoCity")||"null","[%STATE%]":this.myFT.get("ftGeoState")||"null","[%COUNTRY%]":this.myFT.get("ftGeoCountry")||"null","[%GUID%]":this.myFT.get("guid")||"null","[%CI_ID%]":this.myFT.get("cID")||"null","[%CM_ID%]":this.myFT.get("campaignID")||"null","[%CREATIVE_ID%]":this.myFT.get("creativeID")||"null","[%PLACEMENT_ID%]":this.myFT.get("pID")||"null"};if(b.customMacros)for(var c=b.customMacros.split(/[\s,]+/),g=b.customMacrosFlashVars?
b.customMacrosFlashVars.split(/[\s,]+/):[],d=0;d<c.length;++d)c[d]&&(f[c[d]]=this.myFT.get(g[d])||"null");for(var h in f)-1<e.indexOf(h)&&(e=e.replace(h,f[h]));return e}function m(a){a=encodeURIComponent(a);b.stringTrackerEventName&&this.myFT.tracker(b.stringTrackerEventName,null,a);for(ctKey in this.myFT.get("clicks")){var e=this.myFT.get("clicks"),f=ctKey,c;c=this.myFT.get("clicks")[ctKey];var g=a,d=/(ft_custom=.*?)(&|$)/i;c=d.test(c)?c.replace(d,"$1__"+g+"$2"):c.replace(/((http(s|):\/\/servedby.flashtalking.com.+?)(&url=))/,
"$2&ft_custom="+g+"&url=");e[f]=c}}this.myFT=l;var b=function(a){void 0==a&&(a=new FTFeedParams);void 0==a.productIdSegment&&(a.productIdSegment=this.myFT.instantAds.productIdSegment);void 0==a.feedEndpoint&&(a.feedEndpoint=this.myFT.instantAds.feedEndpoint);void 0==a.defaultFeedEndpoint&&(a.defaultFeedEndpoint=this.myFT.instantAds.defaultFeedEndpoint);void 0==a.productId&&(a.productId=this.myFT.get("ftSku")||this.myFT.instantAds.productId||"default");return a}(q),k,n,p;this.getFeed=function(a,e){n=
a;p=e;"default"==b.productId&&"false"!=b.productIdSegment.toLowerCase()&&""!=b.productIdSegment&&(-1<l.get("ftSegment").indexOf(b.productIdSegment)?b.productId=r(b.productIdSegment):b.feedEndpoint=b.defaultFeedEndpoint);k=t(b.productId,b.feedEndpoint);(function(){FT.ajax(k,{complete:function(a){if(200===a.status){var c=[];try{var g=JSON.parse(a.responseText);Array.isArray(g)?c=g:c.push(g);if(void 0!=b.ftCustomProductIdNodeName&&b.ftCustomProductIndex<c.length){var d=c[b.ftCustomProductIndex][b.ftCustomProductIdNodeName];
void 0!=d?m(d):m("default")}n(c,k)}catch(h){p("FTFeed::feedLoaded() - Feed parse error. Run backup logic!")}}else e("FTFeed::getFeed() - Feed download failed. Run backup logic!")}})})()}};