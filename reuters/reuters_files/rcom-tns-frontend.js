Reuters.tns.assetLabels={};Reuters.tns.assetLabels.a="";Reuters.tns.assetLabels.s="Slideshow: ";Reuters.tns.assetLabels.v="Video: ";Reuters.tns.mytopics=[];Reuters.tns.recommendations=[];Reuters.tns.activeTab=null;var reEdition=window.location.hostname.split(".")[0];reEdition==""||reEdition=="www"?reEdition="us":reEdition.indexOf("beta")!=-1&&(reEdition=reEdition.substring(4));Reuters.tns.RECOMMENDED_URL=Reuters.tns.TNS_DOMAIN+"/recommend/re/re";
Reuters.tns.affectionateNickname=function(){switch(Math.floor(Math.random()*10)){case 0:return"buddy";case 1:return"pal";case 2:return"friend";case 3:return"captain";case 4:return"me bucko";case 5:return"you";case 6:return"kiddo";case 7:return"eh";case 8:return"matey";case 9:return"there";default:return"chief"}};
Reuters.tns.drawTrackbar=function(){var a=document.createElement("div");a.id="trackbar";var c="";c+='<ul id="trackTabs" class="tabbuttons">';if(Reuters.utils.isLoggedIn()==true){var b=Reuters.tns.CURRENT_USER.getUserInfo(),d=b?", "+b.firstName+"!":"";b!=void 0&&b.firstName!=void 0&&b.firstName!=null&&b.firstName.trim()==""&&(d="!");d==""&&(d="!");c+='<li id="track-login">Welcome<span id="userFirstName">'+d+"</span> (<span class=\"hrefClone\" onclick=\"Reuters.utils.logout();\" onmousedown=\"dcsMultiTrack( 'WT.z_event', 'Global_trackbar_logout', 'WT.dl', '1' );\">Logout</span>)"}else b=
Reuters.info.edition.toLowerCase(),b=="betaus"&&(b="us"),c+="<li id=\"track-login\"><span class=\"hrefClone\" onclick=\"Reuters.utils.login();\" onmousedown=\"dcsMultiTrack( 'WT.z_event', 'Global_trackbar_login', 'WT.dl', '1' );\" >Login</span> or <span class=\"hrefClone\" onclick=\"javascript:Reuters.utils.login();\"  onmousedown=\"dcsMultiTrack( 'WT.z_event', 'Global_trackbar_register', 'WT.dl', '1' );\">register</span></a></li>";c+="<li id=\"btnMyTopics\" class=\"button\" onmousedown=\"dcsMultiTrack( 'WT.z_event', 'Global_trackbar_mywire', 'WT.dl', '1' );\">Latest from<br />My Wire</li>";
c+='<li id="btnSuggested" class="hidden" onmousedown="dcsMultiTrack( \'WT.z_event\', \'Global_trackbar_suggested\', \'WT.dl\', \'1\' );"><span id="suggestedCount" class="trackbarCount">0</span> Suggested<br />for You</li>';c+='<li id="btnRecentCompanies" class="hidden" onmousedown="dcsMultiTrack( \'WT.z_event\', \'Global_trackbar_recentcompanies\', \'WT.dl\', \'1\' );"><span id="recentCompaniesCount" class="trackbarCount">0</span> Recent<br />Companies</li>';c+='<li id="tns-sponsor"></li>';c+="</ul>";
c+='<div id="trackbarFlyout" class="hidden"><div id="trackbarContent"><div id="trackbarClose"><span class="hrefClone" onclick="Reuters.tns.closeFlyout()">Close</span></div><h1 id="trackbarTitle"></h1><div id="trackbarBody"></div></div></div></div>';c+='<div id="trackbarError" class="hidden"></div>';a.innerHTML=c;a.className="hidden";document.body.insertBefore(a,document.getElementById("content"));document.getElementById("trackbar").className="active";if(is_ie)window.onscroll=Reuters.tns.checkScroll,
window.onresize=Reuters.tns.checkScroll,Reuters.tns.checkScroll();Reuters.tns.initializeButtons();Reuters.tns.tagSavedItemsInPage();Reuters.utils.replaceContent("tns-sponsor","/assets/sharedModuleLoader?view=RSM-"+Reuters.info.edition+"-TNS-Sponsor",null,null);a=YAHOO.util.Cookie.get("RE_USERID");if(Reuters.lang.isNotEmpty(a))try{Reuters.utils.loadScript("suggestedJSON",Reuters.tns.RECOMMENDED_URL+"?callback=Reuters.tns.updateRecommendations&ed="+reEdition+"&u="+encodeURIComponent(a))}catch(e){}Reuters.tns.updateSavedItems();
Reuters.tns.updateCompanies();Reuters.tns.showFollowButtons();Reuters.tns.CURRENT_USER.addUserInfoListener(function(a){var b=document.getElementById("userFirstName");if(b)b.innerHTML=a.firstName.trim()==""?"!":", "+a.firstName+"!"})};
Reuters.tns.showFollowButtons=function(){if(document.getElementById("followButton")){Reuters.tns.followButtonText?$("#followButton span").text(Reuters.tns.followButtonText):$("#followButton span").text("Add to my Wire");document.getElementById("followButton").className="";var a=document.createElement("div");a.id="followButton2";a.innerHTML=document.getElementById("followButton").innerHTML;if(document.getElementById("footerTopics")&&(document.getElementById("footerTopics").appendChild(a),!document.getElementById("moreRelatedTopics")))document.getElementById("footerTopicTarget").innerHTML=
'<span class="seeMoreTopics">&nbsp;</span>'}};
Reuters.tns.reloadLoginStatus=function(){if(Reuters.utils.isLoggedIn()==true){Reuters.tns.closeFlyout();Reuters.tns.CURRENT_USER.setUserId();var a=Reuters.tns.CURRENT_USER.getUserInfo(),c=a?", "+a.firstName+"!":"";a!=void 0&&a.firstName!=void 0&&a.firstName!=null&&a.firstName.trim()==""&&(c="!");c==""&&(c="!");document.getElementById("track-login").innerHTML='Welcome<span id="userFirstName">'+c+"</span> (<span class=\"hrefClone\" onclick=\"Reuters.utils.logout();\" onmousedown=\"dcsMultiTrack( 'WT.z_event', 'Global_trackbar_logout', 'WT.dl', '1' );\" >Logout</span>)";document.getElementById("btnSavedItems")&&
Reuters.tns.updateSavedItems()}};Reuters.tns.registerFlyout=function(a,c){if(c=="open")Reuters.tns.activeTab=a,document.getElementById(a).onclick=Reuters.tns.closeFlyout,Reuters.tns.openFlyout();else if(c=="close")Reuters.tns.activeTab=null,Reuters.tns.initializeButtons()};
Reuters.tns.initializeButtons=function(){if(document.getElementById("btnSavedItems"))document.getElementById("btnSavedItems").onclick=Reuters.tns.loadSavedItems;if(document.getElementById("btnMyTopics"))document.getElementById("btnMyTopics").onclick=Reuters.tns.loadMyTopics;if(document.getElementById("btnRecentCompanies"))document.getElementById("btnRecentCompanies").onclick=Reuters.tns.loadCompanies;if(document.getElementById("btnSuggested"))document.getElementById("btnSuggested").onclick=Reuters.tns.loadRecommendations};
Reuters.tns.trackClick=function(a){try{var c="";switch(a){case 1:c="My Wire";break;case 2:c="Saved Items";break;case 3:c="Companies";break;case 4:c="Recommendations"}dcsMultiTrack("DCSext.VirtualEvent","1","DCSext.rChannel","Track and Save","WT.cg_n","Track and Save - "+c+" Click")}catch(b){}};
Reuters.tns.showTopicsAction=function(a){Reuters.tns.startTopicGlow("#0096C9");document.getElementById("trackbarError").className="alert";document.getElementById("trackbarError").innerHTML="You've added '"+a+"' to My Wire.";document.getElementById("trackbarError").style.cssText="bottom: 34px; left:"+document.getElementById("btnMyTopics").offsetLeft+"px;";Reuters.tns.hideError()};
Reuters.tns.getMyTopicsRequest=function(){for(var a=Reuters.tns.CURRENT_USER.getSavedTopicIds(),c="",b=0;b<a.length;b++)c+=a[b],b<a.length-1&&(c+=",");return c};
Reuters.tns.updateMyTopicsList=function(){if(Reuters.tns.mytopics.length>0){for(var a="<ul>",c="",b=Reuters.tns.mytopics,d="",e=0;e<b.length;e++)b[e].id!=d&&(typeof b[e].date!=void 0&&(c=new Date(b[e].date)),a+='<li><span class="channel">'+b[e].channellabel+'</span><input id="asset'+e+'" type="checkbox" onclick="Reuters.tns.updateSelectedCheckboxes()" />',a+='<a id="assetHref'+e+'" href="/article/id'+b[e].id+'" onclick="Reuters.tns.trackClick(1)">'+b[e].headline+"</a>",b[e].date!=void 0&&(a+='<span class="timestamp">'+
c.format("mediumDate",false)+"</span>"),a+="</li>"),Reuters.tns.assets[Reuters.tns.ARTICLE_ASSET_TYPE][b[e].id]={headline:b[e].headline,href:"http://"+location.host+"/article/id"+b[e].id,id:b[e].id,type:Reuters.tns.ARTICLE_ASSET_TYPE},d=b[e].id;a+="</ul>";document.getElementById("availableTopics").innerHTML=a}};
Reuters.tns.updateMyTopics=function(){if(typeof Reuters.tns.currentTopic!="undefined"&&Reuters.tns.currentTopic!="")Reuters.tns.CURRENT_USER.rememberRecentTopic(Reuters.tns.currentTopic.topicId,Reuters.tns.currentTopic.topicName,Reuters.tns.currentTopic.topicTitle),Reuters.tns.currentTopic="";var a=Reuters.tns.CURRENT_USER.getSavedTopics();document.getElementById("activeTopicChannels").innerHTML="";if(a.length>0){document.getElementById("availableTopics").innerHTML="Loading...";Reuters.jmnvars={channelIds:Reuters.tns.CURRENT_USER.getSavedTopicIds(),
callback:Reuters.tns.updateMyTopicsList,results:Reuters.tns.mytopics,numResults:10};Reuters.utils.loadScript("myTopicsLoader","/resources_v2/js/rcom-jsonMultiNews.js");var c="<h2>My Topics</h2>",b=Math.ceil(a.length/14);c+='<div id="myAvailableTopics">';c+='<div id="topicList01">';for(i=0;i<a.length;i++)i%14==0&&i>0&&(c+='</div><div id="topicList0'+(i/14+1)+'" class="hidden">'),c+='<div class="availableTopic"><a href="/news/archive/'+a[i].channel+'" onclick="Reuters.tns.trackClick(1)">'+a[i].title+
'</a><span class="removeTopic"><img src="/resources_v2/images/btn_tns_remove_sm.gif" border="0" alt="X" title="Remove Topic" onclick="Reuters.tns.removeTopic('+a[i].id+')" /></span></div>';c+="</div>";var d="";if(a.length>14){d='<ul class="topicPagination">';for(i=1;i<=b;i++)d+='<li id="tPage'+i+'" ',i==1&&(d+='class="current"'),d+='><a href="javascript:Reuters.tns.topicPagination('+i+')">'+i+"</a></li>";d+="</ul>"}c+="</div>"+d;document.getElementById("activeTopicChannels").innerHTML=c}else document.getElementById("trackbarControls").className=
"disabled",document.getElementById("availableTopics").innerHTML='<div class="trackAndSaveInfo"><p>To add a topic to "My Wire", look for the "Add to My Wire" button on any topic page.</p><p>Once you add topics, you will be able to <strong>Email</strong> and <strong>post to Twitter</strong>, and get the stream of news for your favorite parts of Reuters.</p></div>';a=Reuters.tns.CURRENT_USER.getRecentTopics();b=Reuters.tns.CURRENT_USER.getSavedTopicIds();if(a.length>0){c="<h2>Recently Viewed</h2>";for(i=
0;i<a.length;i++)c+=b.contains(a[i].id)?'<div class="availableTopic"><a href="/news/archive/'+a[i].channel+'">'+a[i].title+"</a></div>":'<div class="availableTopic"><a href="/news/archive/'+a[i].channel+'">'+a[i].title+'</a><span class="removeTopic"><img src="/resources_v2/images/btn_tns_add_sm.gif" border="0" alt="X" title="Add to My Wire" onclick="Reuters.tns.CURRENT_USER.saveTopic('+a[i].id+", '"+a[i].channel+"', '"+a[i].title+"'); Reuters.tns.updateMyTopics();\" /></span></div>";document.getElementById("activeTopicChannels").innerHTML+=
c}};Reuters.tns.topicPagination=function(a){for(i=1;i<4;i++)if(document.getElementById("topicList0"+i))document.getElementById("topicList0"+i).className="hidden",document.getElementById("tPage"+i).className="";document.getElementById("topicList0"+a).className="";document.getElementById("tPage"+a).className="current"};Reuters.tns.removeTopic=function(a){trace("attempting to remove channel "+a);Reuters.tns.CURRENT_USER.removeSavedAsset(Reuters.tns.CHANNEL_ASSET_TYPE,a);Reuters.tns.updateMyTopics()};
Reuters.tns.launchTopicsPopout=function(){Reuters.tns.CURRENT_USER.getSavedTopicIds().length>0&&Reuters.utils.popup("/assets/newsTracker",300,680,1,"trackPopout")};
Reuters.tns.loadMyTopics=function(){Reuters.tns.closeFlyout();document.getElementById("trackbarTitle").innerHTML="Latest From My Wire";var a="";a+="<div id=\"trackbarExtras\"><span class=\"hrefClone\" onclick=\"Reuters.tns.launchTopicsPopout()\" onmousedown=\"dcsMultiTrack( 'WT.z_event', 'Global_trackbar_viewstream_popout', 'WT.dl', '1' );\">View Stream in Pop-out</span></div>";a+='<div id="trackbarControls">';a+='<div class="label">Items Selected: <span id="itemsSelected">0</span></div>';a+='<div class="label">';
a+="Select: ";a+='<span class="hrefClone" onclick="Reuters.tns.selectSubset(\'all\', Reuters.tns.mytopics)">All</span>';a+='<span class="hrefClone" onclick="Reuters.tns.selectSubset(\'none\', Reuters.tns.mytopics)">None</span>';a+='<span class="hrefClone" onclick="Reuters.tns.selectSubset(\'unread\', Reuters.tns.mytopics)">Unread</span>';a+='<span class="hrefClone" onclick="Reuters.tns.selectSubset(\'read\', Reuters.tns.mytopics)">Read</span>';a+="</div>";a+='<div id="trackbarButtons" class="buttons">';
a+='<span id="toolsButton" class="hrefClone" onclick="Reuters.tns.showTools()" onmousedown="dcsMultiTrack( \'WT.z_event\', \'Global_trackbar_viewstream_showtools\', \'WT.dl\', \'1\' );"><img src="/resources_v2/images/btn_tns_tools.gif" border="0" alt="Tools" /></span>';document.getElementById("btnSavedItems")&&(a+='<span class="hrefClone" onclick="Reuters.tns.saveSelectedAssets(Reuters.tns.mytopics)"><img src="/resources_v2/images/btn_tns_save.gif" border="0" alt="Save" /></span>');a+="</div>";a+=
"</div>";a+='<div id="availableTopics">Loading...</div>';a+='<div id="activeTopicChannels"></div>';document.getElementById("trackbarBody").innerHTML=a;Reuters.tns.registerFlyout("btnMyTopics","open");Reuters.tns.updateMyTopics()};
Reuters.tns.updateRecommendations=function(a){Reuters.tns.recommendations=a;Reuters.tns.recommendations.length>0?(document.getElementById("btnSuggested").className="button",document.getElementById("suggestedCount").innerHTML=Reuters.tns.recommendations.length):document.getElementById("btnSuggested").className="hidden"};
Reuters.tns.updateRecommendationsList=function(){for(var a="<ul>",c="",b=Reuters.tns.recommendations,d=0;d<b.length;d++)b[d].revisionDate!=void 0&&(c=new Date(b[d].revisionDate)),a+='<li><span class="channel"></span><input id="asset'+d+'" type="checkbox" onclick="Reuters.tns.updateSelectedCheckboxes()" />',a+='<a id="assetHref'+d+'" href="'+b[d].url+'" onclick="Reuters.tns.trackClick(4)">'+b[d].headline+"</a>",b[d].revisionDate!=void 0&&(a+='<span class="timestamp">'+c.format("mediumDate",false)+
"</span>"),a+="</li>";a+="</ul>";document.getElementById("savedItems").innerHTML=a;document.getElementById("savedItemsTitleCount").innerHTML=b.length};
Reuters.tns.loadRecommendations=function(){Reuters.tns.closeFlyout();document.getElementById("trackbarTitle").innerHTML='<span class="trackbarCount" id="savedItemsTitleCount">0</span> Suggested for You';var a="";a+='<div id="trackbarControls">';a+='<div class="label">Items Selected: <span id="itemsSelected">0</span></div>';a+='<div class="label">';a+="Select: ";a+='<span class="hrefClone" onclick="Reuters.tns.selectSubset(\'all\', Reuters.tns.recommendations)">All</span>';a+='<span class="hrefClone" onclick="Reuters.tns.selectSubset(\'none\', Reuters.tns.recommendations)">None</span>';
a+='<span class="hrefClone" onclick="Reuters.tns.selectSubset(\'unread\', Reuters.tns.recommendations)">Unread</span>';a+='<span class="hrefClone" onclick="Reuters.tns.selectSubset(\'read\', Reuters.tns.recommendations)">Read</span>';a+="</div>";a+='<div id="trackbarButtons" class="buttons">';a+='<span class="hrefClone" onclick="Reuters.tns.saveSelectedAssets(Reuters.tns.recommendations)" onmousedown="dcsMultiTrack( \'WT.z_event\', \'Global_trackbar_suggested_save\', \'WT.dl\', \'1\' );"><img src="/resources_v2/images/btn_tns_save.gif" border="0" alt="Save" /></span>';
a+="</div>";a+="</div>";a+='<h2 id="savedItemsTitle">Based on your past browsing, you might be interested in:</h2>';a+='<div id="savedItems"></div>';document.getElementById("trackbarBody").innerHTML=a;Reuters.tns.registerFlyout("btnSuggested","open");Reuters.tns.updateRecommendationsList()};Reuters.tns.showSavedAction=function(){Reuters.tns.startSavedGlow("#0096C9");Reuters.tns.updateSavedItems()};
Reuters.tns.showUnregisteredSavedAction=function(){Reuters.tns.closeFlyout();Reuters.tns.startSavedGlow("#CC0000");document.getElementById("trackbarError").className="";document.getElementById("trackbarError").innerHTML="Login or register to save more than 9 items.";document.getElementById("trackbarError").style.cssText="bottom: 34px; left:"+document.getElementById("btnSavedItems").offsetLeft+"px;";Reuters.tns.hideError()};
Reuters.tns.updateSavedItems=function(){var a=Reuters.tns.CURRENT_USER.getSavedAssetCount(),c=document.getElementById("savedItemsCount");if(c)c.innerHTML=a;document.getElementById("trackbarFlyout").className==""&&document.getElementById("btnSavedItems")&&document.getElementById("btnSavedItems").onclick==Reuters.tns.closeFlyout&&Reuters.tns.updateSavedItemsList()};Reuters.tns.tagSavedItemsInPage=function(){};
Reuters.tns.loadSavedItems=function(){Reuters.tns.closeFlyout();document.getElementById("trackbarTitle").innerHTML='<span class="trackbarCount" id="savedItemsTitleCount">0</span> Saved Items';var a="";a+='<div id="trackbarControls">';a+='<div class="label">Items Selected: <span id="itemsSelected">0</span></div>';a+='<div class="label">';a+="Select: ";a+='<span class="hrefClone" onclick="Reuters.tns.selectSubset(\'all\', Reuters.tns.CURRENT_USER.getSavedAssets())">All</span>';a+='<span class="hrefClone" onclick="Reuters.tns.selectSubset(\'none\', Reuters.tns.CURRENT_USER.getSavedAssets())">None</span>';
a+='<span class="hrefClone" onclick="Reuters.tns.selectSubset(\'unread\', Reuters.tns.CURRENT_USER.getSavedAssets())">Unread</span>';a+='<span class="hrefClone" onclick="Reuters.tns.selectSubset(\'read\', Reuters.tns.CURRENT_USER.getSavedAssets())">Read</span>';a+="</div>";a+='<div id="trackbarButtons" class="buttons">';a+='<span id="toolsButton" class="hrefClone" onclick="Reuters.tns.showTools()"><img src="/resources_v2/images/btn_tns_tools.gif" border="0" alt="Tools" /></span>';a+='<span class="hrefClone" onclick="Reuters.tns.deleteSelectedAssets()"><img src="/resources_v2/images/btn_tns_delete.gif" border="0" alt="Delete" /></span>';
a+="</div>";a+="</div>";a+='<h2 id="savedItemsTitle">Recently Saved Items</h2>';a+='<div id="savedItems"></div>';document.getElementById("trackbarBody").innerHTML=a;Reuters.tns.registerFlyout("btnSavedItems","open");Reuters.tns.updateSavedItemsList()};
Reuters.tns.updateSavedItemsList=function(){var a=document.getElementById("savedItems");a.innerHTML="";var c=document.createElement("ul");a.appendChild(c);var b=Reuters.tns.CURRENT_USER.getSavedAssets();if(b.length>0){document.getElementById("trackbarControls").className="";for(var a=document.getElementById("savedItemsTitle").className="",d=0;d<b.length;d++){b[d].date!=void 0&&(a=new Date(b[d].date));var e=document.createElement("li");e.innerHTML=b[d].type==Reuters.tns.ARTICLE_ASSET_TYPE?'<input id="asset'+
d+'" type="checkbox" onclick="Reuters.tns.updateSelectedCheckboxes()" />':'<input id="asset'+d+'" type="checkbox" disabled />';Reuters.tns.assetLabels[b[d].type]!=""&&(e.innerHTML+='<span class="assettype">'+Reuters.tns.assetLabels[b[d].type]+"</span>");e.innerHTML+='<a id="assetHref'+d+'" href="'+b[d].href+'" onclick="Reuters.tns.trackClick(2)">'+b[d].headline+"</a>";b[d].date!=void 0&&(e.innerHTML+='<span class="timestamp">'+a.format("mediumDate",false)+"</span>");e.innerHTML+='<span class="removeAsset"><img src="/resources_v2/images/btn_tns_remove_sm.gif" border="0" alt="X" title="Delete from Saved Items" onclick="Reuters.tns.deleteSingleAsset(\''+
b[d].type+"', '"+b[d].id+"');\" /></span>";c.appendChild(e)}}else document.getElementById("trackbarControls").className="disabled",document.getElementById("savedItemsTitle").className="hidden",a.innerHTML='<div class="trackAndSaveInfo"><p>Save articles, videos, and slideshows so that you can read or view them later. With your saved items you\'ll be able to <strong>Email</strong>, <strong>Email PDF</strong>, or <strong>Print</strong>.</p></div>';document.getElementById("savedItemsTitleCount").innerHTML=
b.length};Reuters.tns.showDeleteAsset=function(){this.className="active"};Reuters.tns.hideDeleteAsset=function(){this.className=""};Reuters.tns.deleteSingleAsset=function(a,c){Reuters.tns.CURRENT_USER.removeSavedAsset(a,c);Reuters.tns.tagSavedItemsInPage();Reuters.tns.updateSavedItems()};
Reuters.tns.loadCompanies=function(){Reuters.tns.closeFlyout();document.getElementById("trackbarTitle").innerHTML='<span class="trackbarCount" id="companiesTitleCount">0</span> Recent Companies';var a="";a+='<div id="trackbarControls">';a+='<div class="label">Last updated: <span id="lastUpdatedCompanies">-</span></div>';Reuters.utils.isLoggedIn()==true&&(a+='<div id="trackbarButtons" class="buttons">',a+='<span class="hrefClone" onclick="Reuters.tns.addToPortfolio()" onmousedown="dcsMultiTrack( \'WT.z_event\', \'Global_trackbar_addtowatchlist\', \'WT.dl\', \'1\' );"><img src="/resources_v2/images/btn_tns_add2wl.gif" border="0" alt="Add To Watchlist" /></span>',
a+="</div>");a+="</div>";a+=Reuters.utils.isLoggedIn()==true?'<div id="savedItems">Loading...</div>':'<div id="savedItems" class="notLoggedIn">Loading...</div>';document.getElementById("trackbarBody").innerHTML=a;Reuters.tns.registerFlyout("btnRecentCompanies","open");Reuters.tns.updateCompaniesList()};
Reuters.tns.updateCompanies=function(){if(typeof Reuters.tns.currentCompany!="undefined"&&Reuters.tns.currentCompany!="")Reuters.tns.CURRENT_USER.saveRecentCompany(Reuters.tns.currentCompany),Reuters.tns.currentCompany="";var a=Reuters.tns.CURRENT_USER.getRecentCompanies();a.length>0?document.getElementById("btnRecentCompanies").className="button":document.getElementById("btnRecentCompanies").className="hidden";document.getElementById("recentCompaniesCount").innerHTML=a.length;document.getElementById("trackbarFlyout").className==
""&&Reuters.tns.updateCompaniesList()};
Reuters.tns.updateCompaniesList=function(){var a=Reuters.tns.CURRENT_USER.getRecentCompanies();document.getElementById("companiesTitleCount").innerHTML=a.length;if(a.length>0){var c=false;if(typeof quote!="undefined")for(var c=true,b=0;b<a.length;b++)typeof quote[a[b]]=="undefined"&&(c=false);for(var d="",b=0;b<a.length;b++)d+=a[b],b<a.length-1&&(d+=",");c?Reuters.tns.renderCompaniesList():Reuters.utils.loadScript("companiesList","/do/marketDataAjax?type=quote&callback=Reuters.tns.renderCompaniesList&symbol="+d)}};
Reuters.tns.renderCompaniesList=function(){var a=Reuters.tns.CURRENT_USER.getRecentCompanies();document.getElementById("lastUpdatedCompanies").innerHTML="-";if(a.length>0)for(var c="",b=0;b<a.length;b++)if(typeof quote[a[b]]!="undefined"){var d="",d=quote[a[b]].positiveChange=="true"?" changeUp":" changeDown";c+='<li><span class="companyRIC"><input id="asset'+b+'" type="checkbox" /><a href="/finance/stocks/overview?symbol='+a[b]+'" onclick="Reuters.tns.trackClick(3)">'+a[b]+'</a></span><span class="companyName"><a href="/finance/stocks/overview?symbol='+
a[b]+'" onclick="Reuters.tns.trackClick(3)">'+quote[a[b]].company+'</a></span><span class="companyQuote'+d+'">'+quote[a[b]].quote+'</span><span class="companyChange'+d+'">'+quote[a[b]].netChange+" ("+quote[a[b]].percentChange+")</span></li>"}else c+='<li><span class="companyRIC"><input id="asset'+b+'" type="checkbox" disabled />'+a[b]+'</span><span class="companyName">Company not found.</span></li>';document.getElementById("savedItems").innerHTML="<ul>"+c+"</ul>";a=new Date;document.getElementById("lastUpdatedCompanies").innerHTML=
a.format("longTime",false)};
Reuters.tns.addToPortfolio=function(){var a=Reuters.tns.CURRENT_USER.getRecentCompanies(),c=[],b=Reuters.info.edition;for(i=0;i<a.length;i++){var d=document.getElementById("asset"+i);d.type=="checkbox"&&d.checked==true&&c.push(a[i])}c.length>0&&(b=="BETAUS"?Reuters.utils.loadScript("portfolioAddScript","http://portfolio.us.reuters.com/US/watchlist/import.asp?symbols="+c+"&format=json&callback=Reuters.tns.addedToPortfolio&host=http://www"):Reuters.utils.loadScript("portfolioAddScript","http://portfolio."+
b.toLowerCase()+".reuters.com/"+b+"/watchlist/import.asp?symbols="+c+"&format=json&callback=Reuters.tns.addedToPortfolio&host=http://"+b.toLowerCase()))};
Reuters.tns.addedToPortfolio=function(a){var c=[];for(i=0;i<a.symbolsAdded.symbol.length;i++)c.push(a.symbolsAdded.symbol[i]);if(a.statusCode==1)Reuters.tns.showSuccess(c.join(", ")+" added successfully to watchlist.");else if(a.statusCode==2){var b=[];for(i=0;i<a.warnings.warning.length;i++)b.push(a.warnings.warning[i].culprit);for(i=0;i<a.errors.error.length;i++)b.push(a.errors.error[i].culprit);c.length>0?Reuters.tns.showSuccess(c.join(", ")+" added successfully to watchlist; "+b.join(", ")+" not available."):
Reuters.tns.showError(b.join(", ")+" not available.")}else if(a.statusCode==3){b=[];for(i=0;i<a.warnings.warning.length;i++)b.push(a.warnings.warning[i].culprit);for(i=0;i<a.errors.error.length;i++)b.push(a.errors.error[i].culprit);c.length>0?Reuters.tns.showSuccess(c.join(", ")+" added successfully to watchlist; "+b.join(", ")+" already in watchlist."):Reuters.tns.showError(b.join(", ")+" already in watchlist.")}else a.statusCode==-1&&Reuters.tns.showError("Watchlist limit has been reached. Please remove one of your existing watchlists to use this feature.")};
Reuters.tns.updateSelectedCheckboxes=function(){var a=document.getElementsByTagName("input"),c=0;for(i=0;i<a.length;i++){var b=a[i];b.type=="checkbox"&&b.checked==true&&c++}document.getElementById("itemsSelected").innerHTML=c};
Reuters.tns.selectSubset=function(a,c){for(i=0;i<c.length;i++){var b=document.getElementById("asset"+i);if((typeof c[i].type=="undefined"||c[i].type==Reuters.tns.ARTICLE_ASSET_TYPE)&&b.type=="checkbox")if(a=="all")b.checked=true;else if(a=="none")b.checked=false;else if(a=="unread")b.checked=!Reuters.tns.checkVisited(document.getElementById("assetHref"+i).href);else if(a=="read")b.checked=Reuters.tns.checkVisited(document.getElementById("assetHref"+i).href)}Reuters.tns.updateSelectedCheckboxes()};
Reuters.tns.checkVisited=function(a){if(!document.getElementById("linkChecker")){var c=document.createElement("div");c.id="linkChecker";document.body.appendChild(c)}document.getElementById("linkChecker").innerHTML='<a id="checkIt" href="'+a+'">test</a>';return document.getElementById("checkIt").offsetHeight==0?true:false};
Reuters.tns.deleteSelectedAssets=function(){for(var a=Reuters.tns.CURRENT_USER.getSavedAssets(),c=0,b=0;b<a.length;b++)document.getElementById("asset"+b).checked==true&&(Reuters.tns.CURRENT_USER.removeSavedAsset(a[b].type,a[b].id),c++);c>0?(document.getElementById("itemsSelected").innerHTML="0",Reuters.tns.tagSavedItemsInPage(),Reuters.tns.updateSavedItems()):Reuters.tns.showSelectionError()};
Reuters.tns.saveThisAsset=function(a){if(document.getElementById("btnSavedItems")){var c=Reuters.tns.CURRENT_USER.getSavedAssetCount();if(c<Reuters.tns.ASSET_MAX_LENGTH_UNREGISTERED&&Reuters.utils.isLoggedIn()==false||Reuters.utils.isLoggedIn()==true&&c<Reuters.tns.ASSET_MAX_LENGTH_REGISTERED){c={type:a.type,id:a.id,headline:a.headline,href:"/article/id"+a.id};if(a.type==Reuters.tns.SLIDESHOW_ASSET_TYPE)c.href="/news/pictures/slideshow?articleId="+a.id;else if(a.type==Reuters.tns.VIDEO_ASSET_TYPE)c.href=
"/news/video/story?videoId="+a.id;Reuters.tns.assets[a.type][a.id]=c;Reuters.tns.CURRENT_USER.saveAsset(a.type,a.id);Reuters.tns.startSavedGlow("#0096C9");Reuters.tns.tagSavedItemsInPage();Reuters.tns.updateSavedItems()}else Reuters.tns.closeFlyout(),Reuters.tns.showUnregisteredSavedAction()}};
Reuters.tns.saveSelectedAssets=function(a){for(var c=Reuters.tns.CURRENT_USER.getSavedAssetCount(),b=0;b<a.length;b++)if(document.getElementById("asset"+b).checked==true)if(c=Reuters.tns.CURRENT_USER.getSavedAssetCount(),c<Reuters.tns.ASSET_MAX_LENGTH_UNREGISTERED&&Reuters.utils.isLoggedIn()==false||Reuters.utils.isLoggedIn()==true)Reuters.tns.assets[Reuters.tns.ARTICLE_ASSET_TYPE][a[b].id]={type:Reuters.tns.ARTICLE_ASSET_TYPE,id:a[b].id,headline:a[b].headline,href:"/article/id"+a[b].id},Reuters.tns.CURRENT_USER.saveAsset(Reuters.tns.ARTICLE_ASSET_TYPE,
a[b].id);else{Reuters.tns.closeFlyout();Reuters.tns.showUnregisteredSavedAction();break}Reuters.tns.startSavedGlow("#0096C9");Reuters.tns.tagSavedItemsInPage();Reuters.tns.updateSavedItems()};
Reuters.tns.getSelectedAssets=function(){var a;a=document.getElementById("btnMyTopics").onclick==Reuters.tns.closeFlyout?Reuters.tns.mytopics:Reuters.tns.CURRENT_USER.getSavedAssets();var c=[];for(i=0;i<a.length;i++){var b=document.getElementById("asset"+i);b.type=="checkbox"&&b.checked==true&&(a[i].type==Reuters.tns.ARTICLE_ASSET_TYPE||typeof a[i].type=="undefined")&&c.push(a[i].id)}return c};
Reuters.tns.sendToPDF=function(){if(Reuters.utils.isLoggedIn()){try{console.debug("requesting pdf")}catch(a){}var c=Reuters.tns.getSelectedAssets();try{console.debug("selectedAssets: %o",c)}catch(b){}c.length>0?Reuters.tns.requestPDF(Reuters.tns.getSelectedAssets()):Reuters.tns.showSelectionError()}else Reuters.tns.showBlockedError()};
Reuters.tns.sendToEmail=function(){var a=Reuters.tns.getSelectedAssets();a.length>0?Reuters.utils.popup("/do/emailArticle?articleId="+a.join(","),490,710,1,"emailArticle"):Reuters.tns.showSelectionError()};Reuters.tns.sendToPrint=function(){var a=Reuters.tns.getSelectedAssets();a.length>0?Reuters.utils.popup("/assets/multiPrint?aid="+a.join(","),520,560,1,"printOnly"):Reuters.tns.showSelectionError()};
Reuters.tns.retweet=function(){if(Reuters.info.articleId!=null){var a="http://api.bit.ly/shorten?version=2.0.1&apiKey=R_bced07775f0e41f59388d5e80f77e734&login=reutersdotcom&callback=Reuters.tns.retweetShortenUrlCallback&longUrl="+encodeURIComponent(location.href);try{Reuters.utils.loadScript("bitly",a)}catch(c){}}else Reuters.tns.showSelectionError()};
Reuters.tns.retweetShortenUrlCallback=function(a){if(a.errorCode==0){var a=a.results[location.href].shortUrl,c=document.title;c.lastIndexOf("| Reuters")>0&&(c=c.slice(0,c.lastIndexOf("| Reuters")));a=encodeURIComponent("RT @reuters: "+c+" "+a);Reuters.utils.popup("http://twitter.com/home?status="+a,770,600,2,"shareArticle")}};
Reuters.tns.tweet=function(){var a=Reuters.tns.getSelectedAssets();if(a.length>1)alert("Please select only one item that you want to tweet at a time.");else{try{console.debug("selectedAssets: %o",a)}catch(c){}if(a.length>0){a=Reuters.tns.assets[Reuters.tns.ARTICLE_ASSET_TYPE][a[0]];try{console.debug("asset: %o",a)}catch(b){}a="http://api.bit.ly/shorten?version=2.0.1&apiKey=R_bced07775f0e41f59388d5e80f77e734&login=reutersdotcom&callback=Reuters.tns.shortenUrlCallback&longUrl="+encodeURIComponent(a.href);
try{Reuters.utils.loadScript("bitly",a)}catch(d){}}else Reuters.tns.showSelectionError()}};
Reuters.tns.shortenUrlCallback=function(a){if(a.errorCode==0)for(var c in a.results){var b=a.results[c].shortUrl,d=Reuters.tns.getSelectedAssets();try{console.debug("selectedAssets: %o",d)}catch(e){}if(d.length>0){d=d[0];b=encodeURIComponent("RT @reuters: "+Reuters.tns.assets[Reuters.tns.ARTICLE_ASSET_TYPE][d].headline+" "+b);try{console.debug("tweet: %o",b)}catch(f){}b="http://twitter.com/home?status="+b;Reuters.utils.popup(b,770,600,2,"shareArticle",d)}}};
Reuters.tns.showTools=function(){if(document.getElementById("tnsTools"))document.getElementById("tnsTools").className==""?document.getElementById("tnsTools").className="hidden":document.getElementById("tnsTools").className="";else{var a=document.createElement("div");a.id="tnsTools";var c="",c="<ul>";c+='<li><span class="hrefClone" onclick="Reuters.tns.sendToEmail()">Email</span></li>';c+="<ul>";c+='<li><span class="hrefClone" onclick="Reuters.tns.tweet()">Tweet</span></li>';c+="</ul>";a.innerHTML=
c;document.getElementById("trackbarBody").appendChild(a)}};Reuters.tns.hideTools=function(){if(document.getElementById("tnsTools"))document.getElementById("tnsTools").className="hidden"};Reuters.tns.closeTimer=null;
Reuters.tns.startTopicGlow=function(a){document.getElementById("btnMyTopics").className="button glowing";tabGlower=new YAHOO.util.ColorAnim("btnMyTopics",{backgroundColor:{from:a,to:"#F2F2F2"}},0.5,YAHOO.util.Easing.easeOut);tabGlower.onComplete.subscribe(Reuters.tns.completeTopicGlow);tabGlower.animate()};Reuters.tns.completeTopicGlow=function(){document.getElementById("btnMyTopics").className="button";document.getElementById("btnMyTopics").style.cssText=""};
Reuters.tns.startSavedGlow=function(a){document.getElementById("btnSavedItems").className="button glowing";tabGlower=new YAHOO.util.ColorAnim("btnSavedItems",{backgroundColor:{from:a,to:"#F2F2F2"}},0.5,YAHOO.util.Easing.easeOut);tabGlower.onComplete.subscribe(Reuters.tns.completeSavedGlow);tabGlower.animate()};Reuters.tns.completeSavedGlow=function(){document.getElementById("btnSavedItems").className="button";document.getElementById("btnSavedItems").style.cssText=""};
Reuters.tns.hideError=function(){setTimeout(Reuters.tns.startHideError,2E3)};Reuters.tns.startHideError=function(){errorAnim=new YAHOO.util.ColorAnim("trackbarError",{opacity:{from:100,to:0}},2,YAHOO.util.Easing.easeOut);errorAnim.animate()};
Reuters.tns.openFlyout=function(){document.getElementById("trackbarFlyout").className.search("hidden")!=-1?(document.getElementById("btnMyTopics").onclick==Reuters.tns.closeFlyout?document.getElementById("trackbarFlyout").className="topical":document.getElementById("trackbarFlyout").className="",tabScroller=new YAHOO.util.Anim("trackbarContent",{height:{to:450}},0.2,YAHOO.util.Easing.easeOut),tabScroller.animate()):Reuters.tns.closeTimer=setTimeout(Reuters.tns.openFlyout,500)};
Reuters.tns.closeFlyout=function(){clearTimeout(Reuters.tns.closeTimer);if(document.getElementById("trackbarFlyout")&&document.getElementById("trackbarFlyout").className.search("hidden")==-1)Reuters.tns.registerFlyout(null,"close"),document.getElementById("trackbarBody").innerHTML="",tabScroller=new YAHOO.util.Anim("trackbarContent",{height:{to:1}},0.1,YAHOO.util.Easing.easeOut),tabScroller.onComplete.subscribe(Reuters.tns.completeCloseFlyout),tabScroller.animate()};
Reuters.tns.completeCloseFlyout=function(){if(document.getElementById("trackbarFlyout"))document.getElementById("trackbarFlyout").className="hidden"};
Reuters.tns.checkScroll=function(){if(document.getElementById("trackbar")){offset=document.body.offsetHeight-Reuters.utils.getScrollXY().y-Reuters.utils.getInnerXY().height-1;if(offset>=0)document.getElementById("trackbar").style.bottom=offset+"px",document.getElementById("trackbar").style.left="0px";document.body.offsetWidth<=980?document.getElementById("header").className="lockedWidth":document.getElementById("header").className=""}};
Reuters.tns.showError=function(a){document.getElementById("trackbarError").className="";document.getElementById("trackbarError").innerHTML=a;document.getElementById("trackbarError").style.cssText="bottom: 34px; left:"+document.getElementById(Reuters.tns.activeTab).offsetLeft+"px;";Reuters.tns.hideError()};
Reuters.tns.showSuccess=function(a){document.getElementById("trackbarError").className="";document.getElementById("trackbarError").innerHTML=a;document.getElementById("trackbarError").style.cssText="bottom: 34px; left:"+document.getElementById(Reuters.tns.activeTab).offsetLeft+"px;";Reuters.tns.hideError()};
Reuters.tns.showBlockedError=function(){document.getElementById("trackbarError").className="";document.getElementById("trackbarError").innerHTML="Please login or register to use this feature.";document.getElementById("trackbarError").style.cssText="bottom: 34px; left:"+document.getElementById(Reuters.tns.activeTab).offsetLeft+"px;";Reuters.tns.hideError()};
Reuters.tns.showSelectionError=function(){document.getElementById("trackbarError").className="";document.getElementById("trackbarError").innerHTML="Please select at least one item.";document.getElementById("trackbarError").style.cssText="bottom: 34px; left:"+document.getElementById(Reuters.tns.activeTab).offsetLeft+"px;";Reuters.tns.hideError()};Reuters.tns.initialize();